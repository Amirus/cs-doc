<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>函数</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="GTK+ 2.0 教程"
HREF="book1.html"><LINK
REL="UP"
TITLE="拖放"
HREF="c1853.html"><LINK
REL="PREVIOUS"
TITLE="属性"
HREF="x1875.html"><LINK
REL="NEXT"
TITLE="GLib"
HREF="c1977.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GTK+ 2.0 教程</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1875.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>拖放</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c1977.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="SEC-DRAGANDDROPFUNCTIONS">函数</H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SEC-DNDSOURCEWIDGETS">设置源构件</H2
><P
><TT
CLASS="LITERAL"
>gtk_drag_source_set()</TT
>函数指定一套在构件上拖动操作时的目标类型。</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void gtk_drag_source_set( GtkWidget            *widget,
                          GdkModifierType       start_button_mask,
                          const GtkTargetEntry *targets,
                          gint                  n_targets,
                          GdkDragAction         actions );</PRE
></TD
></TR
></TABLE
><P
>这些参数的作用如下：</P
><P
></P
><UL
><LI
><P
><TT
CLASS="LITERAL"
>widget</TT
> 指定拖动源构件</P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>start_button_mask</TT
> 指定能引发拖动操作的鼠标按键的位掩码(bitmask)，比如GDK_BUTTON1_MASK</P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>targets</TT
> 指定一个此拖动支持的目标数据类型的表格</P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>n_targets</TT
> 指定上面的目标的数量</P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>actions</TT
> 指定从这个窗口进行拖动时可能的行为的位掩码</P
></LI
></UL
><P
><TT
CLASS="LITERAL"
>targets</TT
>参数是一个由下面的结构组成的数组：</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>struct GtkTargetEntry {
   gchar *target;
   guint  flags;
   guint  info;
 };</PRE
></TD
></TR
></TABLE
><P
>这一结构指定一个代表拖动类型的字符串，可选的标记和应用程序指派的整数标识符。</P
><P
>如果一个构件不必再担当拖放操作的源，用<TT
CLASS="LITERAL"
>gtk_drag_source_unset()</TT
>函数可以删除一套拖放目标类型。</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void gtk_drag_source_unset( GtkWidget *widget );</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SEC-SIGNALSONSOURCEWIDGETS">源构件上的信号</H2
><P
>在一个拖放操作中源构件将被发送下面的这些信号。</P
><DIV
CLASS="TABLE"
><A
NAME="AEN1927"><P
><B
>Table 1. 源构件的信号</B
></P
><TABLE
BORDER="1"
WIDTH="100%"
BGCOLOR="#E0E0E0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_begin</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>void (*drag_begin)(GtkWidget *widget,
GdkDragContext *dc, gpointer data)</TT
></TD
></TR
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_motion</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>gboolean (*drag_motion)(GtkWidget *widget,
GdkDragContext *dc, gint x, gint y, guint t, gpointer data)</TT
></TD
></TR
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_data_get</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>void (*drag_data_get)(GtkWidget *widget,
GdkDragContext *dc, GtkSelectionData *selection_data, guint info, guint t, gpointer data)</TT
></TD
></TR
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_data_delete</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>void (*drag_data_delete)(GtkWidget *widget,
GdkDragContext *dc, gpointer data)</TT
></TD
></TR
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_drop</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>gboolean (*drag_drop)(GtkWidget *widget,
GdkDragContext *dc, gint x, gint y, guint t, gpointer data)</TT
></TD
></TR
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_end</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>void (*drag_end)(GtkWidget *widget,
GdkDragContext *dc, gpointer data)</TT
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SEC-DNDDESTWIDGETS">设置目的构件</H2
><P
> <TT
CLASS="LITERAL"
> gtk_drag_dest_set()</TT
>指定这个构件可以接收拖动并指定它能接收的拖动的类型。</P
><P
> <TT
CLASS="LITERAL"
> gtk_drag_dest_unset()</TT
>指定构件不再能接收拖动了。</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void gtk_drag_dest_set( GtkWidget            *widget,
                        GtkDestDefaults       flags,
                        const GtkTargetEntry *targets,
                        gint                  n_targets,
                        GdkDragAction         actions );

void gtk_drag_dest_unset( GtkWidget *widget );</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SEC-SIGNALSONDESTWIDGETS">目的构件上的信号</H2
><P
>在一个拖放操作中目的构件将被发送下面的这些信号。</P
><DIV
CLASS="TABLE"
><A
NAME="AEN1967"><P
><B
>Table 2. 目的构件的信号</B
></P
><TABLE
BORDER="1"
WIDTH="100%"
BGCOLOR="#E0E0E0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="150"
ALIGN="LEFT"
VALIGN="MIDDLE"
>drag_data_received</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="LITERAL"
>void (*drag_data_received)(GtkWidget *widget,
GdkDragContext *dc, gint x, gint y, GtkSelectionData *selection_data, guint info, guint t,
gpointer data)</TT
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1875.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c1977.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>属性</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c1853.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>GLib</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>